---
layout: post
title: "调试 -- 关于 PDB 与 EXE/DLL 文件的匹配问题"
author:
location: "珠海"
categories: ["调试"]
tags: ["编程", "调试"]
toc: true
toclistyle:
comments:
visibility:
mathjax:
mermaid:
glslcanvas:
codeprint:
---

活着的虫子 [from {% include relref_cnblogs.html %}](https://www.cnblogs.com/yilang/p/11076601.html)
为虫子生，为虫子死，为虫子奋斗一辈子
[关于 PDB 与 EXE/DLL 文件的匹配问题 {% include relref_csdn.html %}](https://blog.csdn.net/superleolx/article/details/6131972)

http://www.debuginfo.com/tools.html


## ChkMatch

ChkMatch can be used to check whether an executable and debug information file match. It can also be used to enforce matching between an executable and debug information file, if they are compatible.
For more information about debug information matching and related issues, see this article.
http://www.debuginfo.com/articles/debuginfomatch.html

{% include image.html url="/assets/images/210403-win-pdb/debuginforoadmap.gif" caption="Debug information roadmap" %}
{% include image.html url="/assets/images/210403-win-pdb/uniqueid.gif" caption="Unique identifier explained" %}
{% include image.html url="/assets/images/210403-win-pdb/peformat.gif" caption="PE format" %}

判断 Exe(DLL) 和符号文件是否匹配---验证模块和符号文件是否匹配的工具和方法
当我们进行程序调试时，有时调试器会直接告诉你符号文件不对，或则显示出的调用栈不对，当你怀疑符号文件不匹配时，如何确定呢？


## 如果是用 windbg 调试，请用 !chksym 模块名

{% include image.html url="/assets/images/210403-win-pdb/1251433-20190624150256286-803423518.png" caption="比如，匹配的时候" %}

{% include image.html url="/assets/images/210403-win-pdb/1251433-20190624150630939-5448733.png" caption="不匹配的时候" %}


## 静态检查---symchk.exe

例用 Windows 调试工具集里的工具 symchk.exe
symchk xxxx( 模块 ) /v /s .

{% include image.html url="/assets/images/210403-win-pdb/1251433-20190624143232331-849044774.png" caption="不匹配时输出" %}

{% include image.html url="/assets/images/210403-win-pdb/1251433-20190624143338369-311871755.png" caption="匹配时" %}


## 静态检查---chkmatch.exe

从这里下载 http://www.debuginfo.com/download/chkmatch.zip
chkmatch -c <exefile> <pdbfile>

{% include image.html url="/assets/images/210403-win-pdb/1251433-20190624144722598-1549819440.png" caption="不匹配时" %}

{% include image.html url="/assets/images/210403-win-pdb/1251433-20190624144830265-1816596225.png" caption="匹配时" %}

<hr class='reviewline'/>
<p class='reviewtip'><script type='text/javascript' src='{% include relref.html url="/assets/reviewjs/blogs/2021-04-03-win-pdb.md.js" %}'></script></p>
<font class='ref_snapshot'>参考资料快照</font>

- [https://www.cnblogs.com/yilang/p/11076601.html]({% include relref.html url="/backup/2021-04-03-win-pdb.md/www.cnblogs.com/26399a84.html" %})
- [https://blog.csdn.net/superleolx/article/details/6131972]({% include relref.html url="/backup/2021-04-03-win-pdb.md/blog.csdn.net/3b538207.html" %})
- [http://www.debuginfo.com/tools.html]({% include relref.html url="/backup/2021-04-03-win-pdb.md/www.debuginfo.com/db253d04.html" %})
- [http://www.debuginfo.com/articles/debuginfomatch.html]({% include relref.html url="/backup/2021-04-03-win-pdb.md/www.debuginfo.com/eefddd3c.html" %})
