<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="zh" data-hairline="true" data-theme="light" data-react-helmet="data-theme"><head><meta charset="utf-8" /><title>(1 封私信 / 80 条消息) 如何开始用 C++ 写一个光栅化渲染器？ - 知乎</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" /><meta name="renderer" content="webkit" /><meta name="force-rendering" content="webkit" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="google-site-verification" content="FTeR0c8arOPKh8c5DYh_9uu98_zJbaWw53J-Sch9MTg" /><meta data-react-helmet="true" name="description" property="og:description" content="题主有一些基本的编程技能（.c# )，但是对内存和底层的知识并不熟悉，其余还有一些基本的图形学知识，也…" /><meta data-react-helmet="true" name="keywords" content="游戏开发,游戏引擎,计算机科学,C++,计算机图形学" /><link data-react-helmet="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-152.a53ae37b.png" /><link data-react-helmet="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-152.a53ae37b.png" sizes="152x152" /><link data-react-helmet="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-120.bbce8f18.png" sizes="120x120" /><link data-react-helmet="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-76.cbade8f9.png" sizes="76x76" /><link data-react-helmet="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-60.8f6c52aa.png" sizes="60x60" /><link crossorigin="" rel="shortcut icon" type="image/x-icon" href="https://static.zhihu.com/heifetz/favicon.ico" /><link crossorigin="" rel="search" type="application/opensearchdescription+xml" href="https://static.zhihu.com/heifetz/search.xml" title="知乎" /><link rel="dns-prefetch" href="//static.zhimg.com" /><link rel="dns-prefetch" href="//pic1.zhimg.com" /><link rel="dns-prefetch" href="//pic2.zhimg.com" /><link rel="dns-prefetch" href="//pic3.zhimg.com" /><link rel="dns-prefetch" href="//pic4.zhimg.com" /><style>
.u-safeAreaInset-top {
  height: constant(safe-area-inset-top) !important;
  height: env(safe-area-inset-top) !important;
  
}
.u-safeAreaInset-bottom {
  height: constant(safe-area-inset-bottom) !important;
  height: env(safe-area-inset-bottom) !important;
  
}
</style><link href="https://static.zhihu.com/heifetz/main.app.216a26f4.52f5e03efa5d6f29f658.css" crossorigin="" rel="stylesheet" /><link crossorigin="" href="https://static.zhihu.com/heifetz/main.question-routes.216a26f4.e8888fe552016371604a.css" rel="stylesheet" /><script defer="" crossorigin="anonymous" src="https://unpkg.zhimg.com/@cfe/sentry-script@0.1.0/dist/init.js" data-sentry-config="{&quot;dsn&quot;:&quot;https://2d8d764432cc4f6fb3bc78ab9528299d@crash2.zhihu.com/1224&quot;,&quot;sampleRate&quot;:0.1,&quot;release&quot;:&quot;2150-aed4c58a&quot;,&quot;ignoreErrorNames&quot;:[&quot;NetworkError&quot;,&quot;SecurityError&quot;],&quot;ignoreErrors&quot;:[&quot;origin message&quot;,&quot;Network request failed&quot;,&quot;无法 fetch&quot;,&quot;这个系统不支持该功能。&quot;,&quot;Can't find variable: webkit&quot;,&quot;Can't find variable: $&quot;,&quot;内存不足&quot;,&quot;out of memory&quot;,&quot;DOM Exception 18&quot;,&quot;The operation is insecure&quot;,&quot;[object Event]&quot;,&quot;[object FileError]&quot;,&quot;[object DOMError]&quot;,&quot;[object Object]&quot;,&quot;拒绝访问。&quot;,&quot;Maximum call stack size exceeded&quot;,&quot;缺少 JavaScript 对象&quot;,&quot;componentWillEnter&quot;,&quot;componentWillLeave&quot;,&quot;componentWillAppear&quot;,&quot;getInlineStyleAt&quot;,&quot;getCharacterList&quot;,&quot;draft-js&quot;,&quot;UploadError&quot;,{},{},{},&quot;Non-Error exception captured&quot;],&quot;whitelistUrls&quot;:[&quot;static.zhihu.com&quot;]}"></script><style data-emotion-css="qqgmyv">.css-qqgmyv{width:auto;max-width:1156px;min-width:1000px;padding-left:16px;padding-right:30px;}.css-qqgmyv .AppHeader-userInfo{margin-left:30px;width:auto;}.css-qqgmyv .AppHeader-TabsLink.is-active,.css-qqgmyv .AppHeader-TabsLink:hover{color:#121212;}</style><style data-emotion-css="g0ay3v">.css-g0ay3v{margin-left:25px;margin-right:15px;}.css-g0ay3v .AppHeader-Tab{padding-left:15px;padding-right:15px;}.css-g0ay3v .Tabs-link.is-active::after{height:4px;}</style><style data-emotion-css="1acwmmj">.css-1acwmmj{box-sizing:border-box;margin:0;min-width:0;-webkit-flex:1;-ms-flex:1;flex:1;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><style data-emotion-css="10fy1q8">.css-10fy1q8{max-width:482px;}.css-10fy1q8 .SearchBar-input{border-radius:999px;padding-left:16px;}.css-10fy1q8 .SearchBar-askButton{border-radius:999px;width:70px;margin-left:12px;}.css-10fy1q8 .SearchBar-searchButton{border-bottom-right-radius:999px;border-top-right-radius:999px;}</style><style data-emotion-css="79elbk">.css-79elbk{position:relative;}</style><style data-emotion-css="eew49z">.css-eew49z{min-height:10px;}</style><style data-emotion-css="1cd9gw4">.css-1cd9gw4{margin-left:.3em;}</style><style data-emotion-css="h5al4j">.css-h5al4j{box-sizing:border-box;margin:0;min-width:0;color:#8590A6;font-size:14px;margin-top:10px;margin-bottom:-4px;}</style><style data-emotion-css="1cd9gw4">.css-1cd9gw4{margin-left:.3em;}</style><style data-emotion-css="n99yhz">.css-n99yhz{box-sizing:border-box;margin:0;min-width:0;color:#175199;display:inline-block;margin-left:.3em;}</style><style data-emotion-css="g9eqf4-StrutAlign">.css-g9eqf4-StrutAlign{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><style data-emotion-css="svsrxm-Octangle">.css-svsrxm-Octangle{overflow:visible!important;}</style><style data-emotion-css="h5al4j">.css-h5al4j{box-sizing:border-box;margin:0;min-width:0;color:#8590A6;font-size:14px;margin-top:10px;margin-bottom:-4px;}</style><script charset="utf-8" src="https://static.zhihu.com/heifetz/main.zswsdid.d96aa3afd2cba4690905.js" crossorigin="anonymous"></script><script charset="utf-8" src="https://static.zhihu.com/heifetz/main.mqtt.7b6c26e853f3604a2d0b.js" crossorigin="anonymous"></script><link rel="stylesheet" type="text/css" href="https://static.zhihu.com/heifetz/main.richinput.216a26f4.9631b90a475479481c13.css" crossorigin="anonymous" /><script charset="utf-8" src="https://static.zhihu.com/heifetz/main.richinput.5890d0efa41c568dc689.js" crossorigin="anonymous"></script><link rel="stylesheet" type="text/css" href="https://static.zhihu.com/heifetz/main.modals.216a26f4.784b0017efd295e5ec5d.css" crossorigin="anonymous" /><script charset="utf-8" src="https://static.zhihu.com/heifetz/main.modals.b4e7be3b5e06a6b571ed.js" crossorigin="anonymous"></script><link rel="stylesheet" type="text/css" href="https://static.zhihu.com/heifetz/main.navbar-notifications.216a26f4.5e4e83f9b77f85cc209d.css" crossorigin="anonymous" /><script charset="utf-8" src="https://static.zhihu.com/heifetz/main.navbar-notifications.67947244d5f190856e4c.js" crossorigin="anonymous"></script><link rel="stylesheet" type="text/css" href="https://static.zhihu.com/heifetz/main.navbar-messages.216a26f4.f5b1e835d5cd8dfe15fb.css" crossorigin="anonymous" /><script charset="utf-8" src="https://static.zhihu.com/heifetz/main.navbar-messages.03c1c08ec7262d59adea.js" crossorigin="anonymous"></script><link rel="stylesheet" type="text/css" href="https://static.zhihu.com/heifetz/main.Labels.216a26f4.7d19d2afdc588e36471f.css" crossorigin="anonymous" /><script charset="utf-8" src="https://static.zhihu.com/heifetz/main.Labels.0b7f85a0ba2b6a91f4a0.js" crossorigin="anonymous"></script><link rel="stylesheet" type="text/css" href="https://static.zhihu.com/heifetz/main.user-hover-card.216a26f4.f8ba7a5a33fc42013cbb.css" crossorigin="anonymous" /><script charset="utf-8" src="https://static.zhihu.com/heifetz/main.user-hover-card.04d3ab500ef5ddc8311a.js" crossorigin="anonymous"></script><link rel="stylesheet" type="text/css" href="https://static.zhihu.com/heifetz/main.GoodsRecommendGoodsCardList.216a26f4.3a73063149de8a52c56f.css" crossorigin="anonymous" /><script charset="utf-8" src="https://static.zhihu.com/heifetz/main.GoodsRecommendGoodsCardList.5ebe669a3fcfc071ebbc.js" crossorigin="anonymous"></script><style data-emotion="css"></style><link rel="stylesheet" type="text/css" href="https://static.zhihu.com/heifetz/main.signflow.216a26f4.9911fd7944b49d6d7997.css" crossorigin="anonymous" /><script charset="utf-8" src="https://static.zhihu.com/heifetz/main.signflow.4a42115c86864e106e08.js" crossorigin="anonymous"></script></head><body style="overflow: auto;"><div id="root"><div><div class="LoadingBar"></div><div><header role="banner" class="Sticky AppHeader" data-za-module="TopNavBar"><div class="AppHeader-inner css-qqgmyv"><a href="//www.zhihu.com" aria-label="知乎"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 30" fill="#0066FF" width="64" height="30"><path d="M29.05 4.582H16.733V25.94h3.018l.403 2.572 4.081-2.572h4.815V4.582zm-5.207 18.69l-2.396 1.509-.235-1.508h-1.724V7.233h6.78v16.04h-2.425zM14.46 14.191H9.982c0-.471.033-.954.039-1.458v-5.5h5.106V5.935a1.352 1.352 0 0 0-.404-.957 1.378 1.378 0 0 0-.968-.396H5.783c.028-.088.056-.177.084-.255.274-.82 1.153-3.326 1.153-3.326a4.262 4.262 0 0 0-2.413.698c-.57.4-.912.682-1.371 1.946-.532 1.453-.997 2.856-1.31 3.693C1.444 8.674.28 11.025.28 11.025a5.85 5.85 0 0 0 2.52-.61c1.119-.593 1.679-1.502 2.054-2.883l.09-.3h2.334v5.5c0 .5-.045.982-.073 1.46h-4.12c-.71 0-1.39.278-1.893.775a2.638 2.638 0 0 0-.783 1.874h6.527a17.717 17.717 0 0 1-.778 3.649 16.796 16.796 0 0 1-3.012 5.273A33.104 33.104 0 0 1 0 28.74s3.13 1.175 5.425-.954c1.388-1.292 2.631-3.814 3.23-5.727a28.09 28.09 0 0 0 1.12-5.229h5.967v-1.37a1.254 1.254 0 0 0-.373-.899 1.279 1.279 0 0 0-.909-.37z"/><path d="M11.27 19.675l-2.312 1.491 5.038 7.458a6.905 6.905 0 0 0 .672-2.218 3.15 3.15 0 0 0-.28-2.168l-3.118-4.563zM51.449 15.195V5.842c4.181-.205 7.988-.405 9.438-.483l.851-.05c.387-.399.885-2.395.689-3.021-.073-.25-.213-.666-.638-.555a33.279 33.279 0 0 1-4.277.727c-2.766.321-3.97.404-7.804.682-6.718.487-12.709.72-12.709.72a2.518 2.518 0 0 0 .788 1.834 2.567 2.567 0 0 0 1.883.706c2.278-.095 5.598-.25 8.996-.41v9.203h-12.78c0 .703.281 1.377.783 1.874a2.69 2.69 0 0 0 1.892.777h10.105v7.075c0 .887-.464 1.192-1.231 1.214h-3.92a4.15 4.15 0 0 0 .837 1.544 4.2 4.2 0 0 0 1.403 1.067 6.215 6.215 0 0 0 2.71.277c1.36-.066 2.967-.826 2.967-3.57v-7.607h11.28c.342 0 .67-.135.91-.374.242-.239.378-.563.378-.902v-1.375H51.449z"/><path d="M42.614 8.873a2.304 2.304 0 0 0-1.508-.926 2.334 2.334 0 0 0-1.727.405l-.376.272 4.255 5.85 2.24-1.62-2.884-3.98zM57.35 8.68l-3.125 4.097 2.24 1.663 4.517-5.927-.375-.277a2.32 2.32 0 0 0-1.722-.452 2.327 2.327 0 0 0-1.536.896z"/></svg></a><ul role="navigation" class="Tabs AppHeader-Tabs css-g0ay3v"><li role="tab" class="Tabs-item AppHeader-Tab Tabs-item--noMeta"><a class="Tabs-link AppHeader-TabsLink" href="//www.zhihu.com/" data-za-not-track-link="true">首页</a></li><li role="tab" class="Tabs-item AppHeader-Tab Tabs-item--noMeta"><a class="Tabs-link AppHeader-TabsLink" href="//www.zhihu.com/xen/vip-web" data-za-not-track-link="true">会员</a></li><li role="tab" class="Tabs-item AppHeader-Tab Tabs-item--noMeta"><a class="Tabs-link AppHeader-TabsLink" href="//www.zhihu.com/explore" data-za-not-track-link="true">发现</a></li><li role="tab" class="Tabs-item AppHeader-Tab Tabs-item--noMeta"><a class="Tabs-link AppHeader-TabsLink" href="//www.zhihu.com/question/waiting" data-za-not-track-link="true">等你来答</a></li></ul><div class="css-1acwmmj"><div class="SearchBar AppHeader-SearchBar css-10fy1q8" role="search" data-za-module="PresetWordItem"><form class="SearchBar-tool"><div><div class="Popover"><label class="SearchBar-input Input-wrapper Input-wrapper--grey"><input type="text" maxlength="100" autocomplete="off" role="combobox" aria-expanded="false" aria-autocomplete="list" aria-activedescendant="AutoComplete3--1" id="Popover2-toggle" aria-haspopup="true" aria-owns="Popover2-content" class="Input" placeholder="卫健委回应肿瘤治疗不规范" value="" /><button aria-label="搜索" type="button" class="Button SearchBar-searchButton Button--primary"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Search SearchBar-searchIcon" fill="currentColor" viewBox="0 0 24 24" width="18" height="18"><path d="M17.068 15.58a8.377 8.377 0 0 0 1.774-5.159 8.421 8.421 0 1 0-8.42 8.421 8.38 8.38 0 0 0 5.158-1.774l3.879 3.88c.957.573 2.131-.464 1.488-1.49l-3.879-3.878zm-6.647 1.157a6.323 6.323 0 0 1-6.316-6.316 6.323 6.323 0 0 1 6.316-6.316 6.323 6.323 0 0 1 6.316 6.316 6.323 6.323 0 0 1-6.316 6.316z" fill-rule="evenodd"/></svg></span></button></label></div></div></form><button type="button" class="Button SearchBar-askButton Button--primary Button--blue">提问</button></div></div><div class="AppHeader-userInfo"><div class="Popover"><button aria-label="80条通知" id="Popover34-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover34-content" type="button" class="Button AppHeader-notifications css-79elbk Button--plain"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Bell" fill="currentColor" viewBox="0 0 24 24" width="22" height="22"><path d="M4.523 15.076l.804-6.757a6.753 6.753 0 0 1 4.945-5.7 1.823 1.823 0 0 1 3.623 0 6.753 6.753 0 0 1 4.945 5.7l.804 6.757a2.293 2.293 0 0 0 1.712 2.108 1.093 1.093 0 0 1-.297 2.15H3.108a1.093 1.093 0 0 1-.297-2.15 2.293 2.293 0 0 0 1.712-2.108zM12.083 23a2.758 2.758 0 0 1-2.753-2.509.229.229 0 0 1 .232-.24h5.043a.229.229 0 0 1 .232.24 2.759 2.759 0 0 1-2.753 2.51z"/></svg></span><div class="css-ybodb">80</div></button></div><div><div class="Popover"><button aria-label="1条私信" id="Popover35-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover35-content" type="button" class="Button AppHeader-messages css-79elbk Button--plain"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Comments" fill="currentColor" viewBox="0 0 24 24" width="22" height="22"><path d="M11 2c5.571 0 9 4.335 9 8 0 6-6.475 9.764-11.481 8.022-.315-.07-.379-.124-.78.078-1.455.54-2.413.921-3.525 1.122-.483.087-.916-.25-.588-.581 0 0 .677-.417.842-1.904.064-.351-.14-.879-.454-1.171A8.833 8.833 0 0 1 2 10c0-3.87 3.394-8 9-8zm10.14 9.628c.758.988.86 2.009.86 3.15 0 1.195-.619 3.11-1.368 3.938-.209.23-.354.467-.308.722.12 1.073.614 1.501.614 1.501.237.239-.188.562-.537.5-.803-.146-1.495-.42-2.546-.811-.29-.146-.336-.106-.563-.057-2.043.711-4.398.475-6.083-.927 5.965-.524 8.727-3.03 9.93-8.016z" fill-rule="evenodd"/></svg></span><div class="css-ybodb">1</div></button></div></div><div class="AppHeader-profile"><div class="Popover AppHeader-menu"><button id="Popover16-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover16-content" type="button" class="Button AppHeader-profileEntry Button--plain"><img class="Avatar AppHeader-profileAvatar AppHeader-profileAvatar--old" width="30" height="30" src="https://pic2.zhimg.com/f1fbab298af0760f5e2c63554e086a15_is.jpg" srcset="https://pic2.zhimg.com/f1fbab298af0760f5e2c63554e086a15_im.jpg 2x" /></button></div><div class="Popover AppHeaderProfileMenu-creatorHintPopover"><div class="AppHeaderProfileMenu-creatorHintToggler" id="Popover17-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover17-content"></div></div></div></div></div><div><div class="PageHeader"><div class="QuestionHeader-content"><div class="QuestionHeader-main"><h1 class="QuestionHeader-title">如何开始用 C++ 写一个光栅化渲染器？</h1></div><div class="QuestionHeader-side" data-za-detail-view-path-module="ToolBar" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Question&quot;,&quot;token&quot;:&quot;24786878&quot;}}}"><div class="QuestionButtonGroup"><button type="button" class="Button FollowButton Button--primary Button--blue">关注问题</button><button type="button" class="Button Button--blue"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Edit QuestionButton-icon" fill="currentColor" viewBox="0 0 24 24" width="16" height="16"><path d="M4.076 16.966a4.19 4.19 0 0 1 1.05-1.76l8.568-8.569a.524.524 0 0 1 .741 0l2.928 2.927a.524.524 0 0 1 0 .74l-8.568 8.57c-.49.49-1.096.852-1.761 1.051l-3.528 1.058a.394.394 0 0 1-.49-.488l1.06-3.53zM20.558 4.83c.59.59.59 1.546 0 2.136l-1.693 1.692a.503.503 0 0 1-.712 0l-2.812-2.812a.504.504 0 0 1 0-.712l1.693-1.693a1.51 1.51 0 0 1 2.135 0l1.389 1.389z"/></svg></span>写回答</button></div></div></div></div></div></header></div><main role="main" class="App-main"><div class="QuestionPage" itemscope="" itemtype="http://schema.org/Question" data-za-detail-view-path-module="QuestionItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Question&quot;,&quot;token&quot;:&quot;24786878&quot;}}}"><meta itemprop="name" content="如何开始用 C++ 写一个光栅化渲染器？" /><meta itemprop="url" content="https://www.zhihu.com/question/24786878" /><meta itemprop="keywords" content="游戏开发,游戏引擎,计算机科学,C++,计算机图形学" /><meta itemprop="answerCount" content="41" /><meta itemprop="commentCount" content="1" /><meta itemprop="dateCreated" content="2014-08-09T01:43:46.000Z" /><meta itemprop="dateModified" content="2014-08-11T07:22:25.000Z" /><meta itemprop="zhihu:visitsCount" /><meta itemprop="zhihu:followerCount" content="4191" /><div data-zop-question="{&quot;title&quot;:&quot;如何开始用 C++ 写一个光栅化渲染器？&quot;,&quot;topics&quot;:[{&quot;name&quot;:&quot;游戏开发&quot;,&quot;id&quot;:&quot;19553361&quot;},{&quot;name&quot;:&quot;游戏引擎&quot;,&quot;id&quot;:&quot;19556258&quot;},{&quot;name&quot;:&quot;计算机科学&quot;,&quot;id&quot;:&quot;19580349&quot;},{&quot;name&quot;:&quot;C++&quot;,&quot;id&quot;:&quot;19584970&quot;},{&quot;name&quot;:&quot;计算机图形学&quot;,&quot;id&quot;:&quot;19613730&quot;}],&quot;id&quot;:24786878,&quot;isEditable&quot;:false}"><div class="QuestionStatus"></div><div data-za-detail-view-path-module="QuestionDescription" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Question&quot;,&quot;token&quot;:&quot;24786878&quot;}}}"><div class="QuestionHeader"><div class="QuestionHeader-content"><div class="QuestionHeader-main"><div class="QuestionHeader-tags"><div class="QuestionHeader-topics"><div class="Tag QuestionTopic" data-za-detail-view-path-module="TopicItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Topic&quot;,&quot;token&quot;:&quot;19553361&quot;}}}"><span class="Tag-content"><a class="TopicLink" href="//www.zhihu.com/topic/19553361" target="_blank"><div class="Popover"><div id="Popover4-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover4-content">游戏开发</div></div></a></span></div><div class="Tag QuestionTopic" data-za-detail-view-path-module="TopicItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Topic&quot;,&quot;token&quot;:&quot;19556258&quot;}}}"><span class="Tag-content"><a class="TopicLink" href="//www.zhihu.com/topic/19556258" target="_blank"><div class="Popover"><div id="Popover5-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover5-content">游戏引擎</div></div></a></span></div><div class="Tag QuestionTopic" data-za-detail-view-path-module="TopicItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Topic&quot;,&quot;token&quot;:&quot;19580349&quot;}}}"><span class="Tag-content"><a class="TopicLink" href="//www.zhihu.com/topic/19580349" target="_blank"><div class="Popover"><div id="Popover6-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover6-content">计算机科学</div></div></a></span></div><div class="Tag QuestionTopic" data-za-detail-view-path-module="TopicItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Topic&quot;,&quot;token&quot;:&quot;19584970&quot;}}}"><span class="Tag-content"><a class="TopicLink" href="//www.zhihu.com/topic/19584970" target="_blank"><div class="Popover"><div id="Popover7-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover7-content">C++</div></div></a></span></div><div class="Tag QuestionTopic" data-za-detail-view-path-module="TopicItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Topic&quot;,&quot;token&quot;:&quot;19613730&quot;}}}"><span class="Tag-content"><a class="TopicLink" href="//www.zhihu.com/topic/19613730" target="_blank"><div class="Popover"><div id="Popover8-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover8-content">计算机图形学</div></div></a></span></div></div></div><h1 class="QuestionHeader-title">如何开始用 C++ 写一个光栅化渲染器？</h1><div class="LabelContainer-wrapper"></div><div><div class="css-eew49z"><div class="QuestionRichText QuestionRichText--expandable QuestionRichText--collapsed"><div><span>题主有一些基本的编程技能（.c# )，但是对内存和底层的知识并不熟悉，其余还有一些基本的图形学知识，也远远没有到GPU架构的那一层次，所以想利用业余时…</span><button type="button" class="Button QuestionRichText-more Button--plain">显示全部 <span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--ArrowDown" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M12 13L8.285 9.218a.758.758 0 0 0-1.064 0 .738.738 0 0 0 0 1.052l4.249 4.512a.758.758 0 0 0 1.064 0l4.246-4.512a.738.738 0 0 0 0-1.052.757.757 0 0 0-1.063 0L12.002 13z" fill-rule="evenodd"/></svg></span></button></div></div></div></div></div><div class="QuestionHeader-side"><div class="QuestionHeader-follow-status"><div class="QuestionFollowStatus"><div class="NumberBoard QuestionFollowStatus-counts NumberBoard--divider"><button type="button" class="Button NumberBoard-item Button--plain"><div class="NumberBoard-itemInner"><div class="NumberBoard-itemName">关注者</div><strong class="NumberBoard-itemValue" title="4191">4,191</strong></div></button><div class="NumberBoard-item"><div class="NumberBoard-itemInner"><div class="NumberBoard-itemName">被浏览</div><strong class="NumberBoard-itemValue" title="447393">447,393</strong></div></div></div></div></div></div></div><div class="QuestionHeader-footer"><div class="QuestionHeader-footer-inner"><div class="QuestionHeader-main QuestionHeader-footer-main"><div class="QuestionButtonGroup"><button type="button" class="Button FollowButton Button--primary Button--blue">关注问题</button><button type="button" class="Button Button--blue"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Edit QuestionButton-icon" fill="currentColor" viewBox="0 0 24 24" width="16" height="16"><path d="M4.076 16.966a4.19 4.19 0 0 1 1.05-1.76l8.568-8.569a.524.524 0 0 1 .741 0l2.928 2.927a.524.524 0 0 1 0 .74l-8.568 8.57c-.49.49-1.096.852-1.761 1.051l-3.528 1.058a.394.394 0 0 1-.49-.488l1.06-3.53zM20.558 4.83c.59.59.59 1.546 0 2.136l-1.693 1.692a.503.503 0 0 1-.712 0l-2.812-2.812a.504.504 0 0 1 0-.712l1.693-1.693a1.51 1.51 0 0 1 2.135 0l1.389 1.389z"/></svg></span>写回答</button></div><div class="QuestionHeaderActions"><button type="button" class="Button Button--grey Button--withIcon Button--withLabel" style="margin-right: 16px;"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Invite Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M4 10V8a1 1 0 1 1 2 0v2h2a1 1 0 0 1 0 2H6v2a1 1 0 0 1-2 0v-2H2a1 1 0 0 1 0-2h2zm10.455 2c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm-7 6c0-2.66 4.845-4 7.272-4C17.155 14 22 15.34 22 18v1.375c0 .345-.28.625-.625.625H8.08a.625.625 0 0 1-.625-.625V18z" fill-rule="evenodd"/></svg></span>邀请回答</button><div class="GoodQuestionAction"><button type="button" class="Button GoodQuestionAction-commonBtn Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Like Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z" fill-rule="evenodd"/></svg></span>好问题 68</button></div><div class="QuestionHeader-Comment"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Comment Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z" fill-rule="evenodd"/></svg></span>1 条评论</button></div><div class="Popover ShareMenu"><div class="ShareMenu-toggler" id="Popover9-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover9-content"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Share Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z" fill-rule="evenodd"/></svg></span>分享</button></div></div><div class="Popover"><button aria-label="更多" id="Popover10-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover10-content" type="button" class="Button Button--plain Button--withIcon Button--iconOnly"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Dots Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z" fill-rule="evenodd"/></svg></span></button></div></div><div class="QuestionHeader-actions"></div></div></div></div></div></div><div><div class="Sticky"></div></div></div><div class="Question-main"><div class="Question-mainColumn"><div><div class="QuestionAnswers-statusWrapper"></div><div id="QuestionAnswers-answers" class="QuestionAnswers-answers" data-zop-feedlistmap="0,0,1,0" data-za-detail-view-path-module="ContentList" data-za-extra-module="{}"><div class="Card AnswersNavWrapper"><div class="ListShortcut"><div class="List"><div class="List-header"><h4 class="List-headerText"><span>41 个回答</span></h4><div class="List-headerOptions"><div class="Popover"><button role="combobox" aria-expanded="false" id="Popover11-toggle" aria-haspopup="true" aria-owns="Popover11-content" type="button" class="Button InputLike InputButton Select-button Select-plainButton Button--plain">默认排序<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Select Select-arrow" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M12 16.183l2.716-2.966a.757.757 0 0 1 1.064.001.738.738 0 0 1 0 1.052l-3.247 3.512a.758.758 0 0 1-1.064 0L8.22 14.27a.738.738 0 0 1 0-1.052.758.758 0 0 1 1.063 0L12 16.183zm0-9.365L9.284 9.782a.758.758 0 0 1-1.064 0 .738.738 0 0 1 0-1.052l3.248-3.512a.758.758 0 0 1 1.065 0L15.78 8.73a.738.738 0 0 1 0 1.052.757.757 0 0 1-1.063.001L12 6.818z" fill-rule="evenodd"/></svg></button></div></div></div><div><div class=""><div class="List-item" tabindex="0"><div class="ContentItem AnswerItem" data-za-index="0" data-zop="{&quot;authorName&quot;:&quot;zauonlok&quot;,&quot;itemId&quot;:820931418,&quot;title&quot;:&quot;如何开始用 C++ 写一个光栅化渲染器？&quot;,&quot;type&quot;:&quot;answer&quot;}" name="820931418" itemprop="acceptedAnswer" itemtype="http://schema.org/Answer" itemscope="" data-za-detail-view-path-module="AnswerItem" data-za-detail-view-path-index="0" data-za-extra-module="{&quot;card&quot;:{&quot;has_image&quot;:false,&quot;has_video&quot;:false,&quot;content&quot;:{&quot;type&quot;:&quot;Answer&quot;,&quot;token&quot;:&quot;820931418&quot;,&quot;upvote_num&quot;:1686,&quot;comment_num&quot;:129,&quot;publish_timestamp&quot;:null,&quot;parent_token&quot;:&quot;24786878&quot;,&quot;author_member_hash_id&quot;:&quot;4045e2038d58be9abf26d6d37fb7a670&quot;}}}"><div class="ContentItem-meta"><div class="AuthorInfo AnswerItem-authorInfo AnswerItem-authorInfo--related" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="name" content="zauonlok" /><meta itemprop="image" content="https://pic1.zhimg.com/da8e974dc_l.jpg?source=1940ef5c" /><meta itemprop="url" content="https://www.zhihu.com/people/zhou-le-35-71" /><meta itemprop="zhihu:followerCount" content="486" /><span class="UserLink AuthorInfo-avatarWrapper"><div class="Popover"><div id="Popover36-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover36-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/zhou-le-35-71"><img class="Avatar AuthorInfo-avatar" width="38" height="38" src="https://pic1.zhimg.com/da8e974dc_xs.jpg?source=1940ef5c" srcset="https://pic1.zhimg.com/da8e974dc_l.jpg?source=1940ef5c 2x" alt="zauonlok" /></a></div></div></span><div class="AuthorInfo-content"><div class="AuthorInfo-head"><span class="UserLink AuthorInfo-name"><div class="Popover"><div id="Popover37-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover37-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/zhou-le-35-71">zauonlok</a></div></div></span></div><div class="AuthorInfo-detail"><div class="AuthorInfo-badge"></div></div></div></div><div class="LabelContainer-wrapper"></div><div class="css-h5al4j"><span><span class="Voters"><button type="button" class="Button Button--plain">1,686 人赞同了该回答</button></span></span></div></div><meta itemprop="image" /><meta itemprop="upvoteCount" content="1686" /><meta itemprop="url" content="https://www.zhihu.com/question/24786878/answer/820931418" /><meta itemprop="dateCreated" content="2019-09-11T17:12:14.000Z" /><meta itemprop="dateModified" content="2019-10-17T04:43:25.000Z" /><meta itemprop="commentCount" content="129" /><div class="RichContent RichContent--unescapable"><div class="RichContent-inner"><span class="RichText ztext CopyrightRichText-richText" itemprop="text"><p></p><p>最近终于把自己的软件渲染器写得差不多了，感觉可以分享一下学习经验。</p><p>项目地址：</p><a target="_blank" href="https://link.zhihu.com/?target=https%3A//zauonlok.github.io/renderer/" data-draft-node="block" data-draft-type="link-card" data-image="https://pic1.zhimg.com/v2-d1adf0e6c79c234437b9e5b3b0e061ec_180x120.jpg" data-image-width="800" data-image-height="622" class="LinkCard old LinkCard--hasImage" data-za-detail-view-id="172"><span class="LinkCard-backdrop" style="background-image:url(https://pic1.zhimg.com/v2-d1adf0e6c79c234437b9e5b3b0e061ec_180x120.jpg)"></span><span class="LinkCard-content"><span class="LinkCard-text"><span class="LinkCard-title" data-text="true">Software Renderer</span><span class="LinkCard-meta"><span style="display:inline-flex;align-items:center">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--InsertLink" fill="currentColor" viewBox="0 0 24 24" width="17" height="17"><path d="M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z"/></svg></span>zauonlok.github.io</span></span><span class="LinkCard-imageCell"><img class="LinkCard-image LinkCard-image--horizontal" alt="图标" src="https://pic1.zhimg.com/v2-d1adf0e6c79c234437b9e5b3b0e061ec_180x120.jpg" /></span></span></a><p>二进制包：</p><a target="_blank" href="https://link.zhihu.com/?target=https%3A//github.com/zauonlok/renderer/releases" data-draft-node="block" data-draft-type="link-card" data-image="https://pic4.zhimg.com/v2-0dd18d291c22798fa9c819ef0d0848ff_ipico.jpg" data-image-width="420" data-image-height="420" class="LinkCard old LinkCard--hasImage" data-za-detail-view-id="172"><span class="LinkCard-backdrop" style="background-image:url(https://pic4.zhimg.com/v2-0dd18d291c22798fa9c819ef0d0848ff_ipico.jpg)"></span><span class="LinkCard-content"><span class="LinkCard-text"><span class="LinkCard-title" data-text="true">Releases</span><span class="LinkCard-meta"><span style="display:inline-flex;align-items:center">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--InsertLink" fill="currentColor" viewBox="0 0 24 24" width="17" height="17"><path d="M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z"/></svg></span>github.com</span></span><span class="LinkCard-imageCell"><img class="LinkCard-image LinkCard-image--square" alt="图标" src="https://pic4.zhimg.com/v2-0dd18d291c22798fa9c819ef0d0848ff_ipico.jpg" /></span></span></a><p>运行截图：</p><figure data-size="normal"><noscript>&lt;img src="https://pic4.zhimg.com/50/v2-5d84718cdd38cb31a49b796603df84a5_hd.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="800" data-rawheight="622" data-default-watermark-src="https://pic1.zhimg.com/50/v2-48ffdb2dbf269905c7b25b413b7649a1_hd.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="800" data-original="https://pic4.zhimg.com/v2-5d84718cdd38cb31a49b796603df84a5_r.jpg?source=1940ef5c"/&gt;</noscript><img src="https://pic4.zhimg.com/80/v2-5d84718cdd38cb31a49b796603df84a5_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="800" data-rawheight="622" data-default-watermark-src="https://pic1.zhimg.com/50/v2-48ffdb2dbf269905c7b25b413b7649a1_hd.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb lazy" width="800" data-original="https://pic4.zhimg.com/v2-5d84718cdd38cb31a49b796603df84a5_r.jpg?source=1940ef5c" data-actualsrc="https://pic4.zhimg.com/50/v2-5d84718cdd38cb31a49b796603df84a5_hd.jpg?source=1940ef5c" data-lazy-status="loading" /></figure><figure data-size="normal"><noscript>&lt;img src="https://pic1.zhimg.com/50/v2-b33d0f47a0d52c8b150e83a4e23229e9_hd.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="800" data-rawheight="622" data-default-watermark-src="https://pic4.zhimg.com/50/v2-684686e22ba3263d99134978f093949a_hd.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="800" data-original="https://pic2.zhimg.com/v2-b33d0f47a0d52c8b150e83a4e23229e9_r.jpg?source=1940ef5c"/&gt;</noscript><img src="https://pic1.zhimg.com/80/v2-b33d0f47a0d52c8b150e83a4e23229e9_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="800" data-rawheight="622" data-default-watermark-src="https://pic4.zhimg.com/50/v2-684686e22ba3263d99134978f093949a_hd.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb lazy" width="800" data-original="https://pic2.zhimg.com/v2-b33d0f47a0d52c8b150e83a4e23229e9_r.jpg?source=1940ef5c" data-actualsrc="https://pic1.zhimg.com/50/v2-b33d0f47a0d52c8b150e83a4e23229e9_hd.jpg?source=1940ef5c" data-lazy-status="loading" /></figure><figure data-size="normal"><noscript>&lt;img src="https://pic4.zhimg.com/50/v2-a7cfb4b67e8d9af1c0e64045c68e4384_hd.gif?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="802" data-rawheight="632" data-thumbnail="https://pic1.zhimg.com/50/v2-a7cfb4b67e8d9af1c0e64045c68e4384_hd.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="802" data-original="https://pic1.zhimg.com/v2-a7cfb4b67e8d9af1c0e64045c68e4384_r.jpg?source=1940ef5c"/&gt;</noscript><div class="RichText-gifPlaceholder"><div class="GifPlayer" data-size="normal" data-za-detail-view-path-module="GifItem"><img class="ztext-gif" role="presentation" src="https://pic1.zhimg.com/50/v2-a7cfb4b67e8d9af1c0e64045c68e4384_hd.jpg?source=1940ef5c" data-thumbnail="https://pic1.zhimg.com/50/v2-a7cfb4b67e8d9af1c0e64045c68e4384_hd.jpg?source=1940ef5c" data-size="normal" /><svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60" class="GifPlayer-icon"><g fill="none" fill-rule="evenodd"><ellipse fill="#000" opacity="0.45" cx="30" cy="30" rx="30" ry="30"/><ellipse stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="4,1,4" cx="30" cy="30" rx="26" ry="26"/><svg x="16" y="18.5" class="GifPlayer-icon"><path d="M12.842 12.981V11.4H7.64v1.653h3.27v.272c-.018 1.881-1.442 3.147-3.516 3.147-2.382 0-3.876-1.846-3.876-4.834 0-2.936 1.485-4.79 3.832-4.79 1.732 0 2.936.835 3.428 2.364h1.977c-.43-2.566-2.522-4.201-5.405-4.201-3.55 0-5.845 2.601-5.845 6.644 0 4.096 2.268 6.654 5.863 6.654 3.322 0 5.475-2.083 5.475-5.327zM17.518 18V5.317H15.55V18h1.97zm5.142 0v-5.256h5.449v-1.74h-5.45V7.11h5.95V5.317h-7.918V18h1.969z" fill="#fff"/></svg></g></svg></div></div></figure><figure data-size="normal"><noscript>&lt;img src="https://pic1.zhimg.com/50/v2-3b2a10efadbf22801d50c3979e9c9e5f_hd.gif?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="802" data-rawheight="632" data-thumbnail="https://pic2.zhimg.com/50/v2-3b2a10efadbf22801d50c3979e9c9e5f_hd.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="802" data-original="https://pic1.zhimg.com/v2-3b2a10efadbf22801d50c3979e9c9e5f_r.jpg?source=1940ef5c"/&gt;</noscript><div class="RichText-gifPlaceholder"><div class="GifPlayer" data-size="normal" data-za-detail-view-path-module="GifItem"><img class="ztext-gif" role="presentation" src="https://pic2.zhimg.com/50/v2-3b2a10efadbf22801d50c3979e9c9e5f_hd.jpg?source=1940ef5c" data-thumbnail="https://pic2.zhimg.com/50/v2-3b2a10efadbf22801d50c3979e9c9e5f_hd.jpg?source=1940ef5c" data-size="normal" /><svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60" class="GifPlayer-icon"><g fill="none" fill-rule="evenodd"><ellipse fill="#000" opacity="0.45" cx="30" cy="30" rx="30" ry="30"/><ellipse stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="4,1,4" cx="30" cy="30" rx="26" ry="26"/><svg x="16" y="18.5" class="GifPlayer-icon"><path d="M12.842 12.981V11.4H7.64v1.653h3.27v.272c-.018 1.881-1.442 3.147-3.516 3.147-2.382 0-3.876-1.846-3.876-4.834 0-2.936 1.485-4.79 3.832-4.79 1.732 0 2.936.835 3.428 2.364h1.977c-.43-2.566-2.522-4.201-5.405-4.201-3.55 0-5.845 2.601-5.845 6.644 0 4.096 2.268 6.654 5.863 6.654 3.322 0 5.475-2.083 5.475-5.327zM17.518 18V5.317H15.55V18h1.97zm5.142 0v-5.256h5.449v-1.74h-5.45V7.11h5.95V5.317h-7.918V18h1.969z" fill="#fff"/></svg></g></svg></div></div></figure><figure data-size="normal"><noscript>&lt;img src="https://pic3.zhimg.com/50/v2-bd99338d6dcb77741b359209c369cb8b_hd.gif?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="802" data-rawheight="632" data-thumbnail="https://pic2.zhimg.com/50/v2-bd99338d6dcb77741b359209c369cb8b_hd.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="802" data-original="https://pic2.zhimg.com/v2-bd99338d6dcb77741b359209c369cb8b_r.jpg?source=1940ef5c"/&gt;</noscript><div class="RichText-gifPlaceholder"><div class="GifPlayer" data-size="normal" data-za-detail-view-path-module="GifItem"><img class="ztext-gif" role="presentation" src="https://pic2.zhimg.com/50/v2-bd99338d6dcb77741b359209c369cb8b_hd.jpg?source=1940ef5c" data-thumbnail="https://pic2.zhimg.com/50/v2-bd99338d6dcb77741b359209c369cb8b_hd.jpg?source=1940ef5c" data-size="normal" /><svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60" class="GifPlayer-icon"><g fill="none" fill-rule="evenodd"><ellipse fill="#000" opacity="0.45" cx="30" cy="30" rx="30" ry="30"/><ellipse stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="4,1,4" cx="30" cy="30" rx="26" ry="26"/><svg x="16" y="18.5" class="GifPlayer-icon"><path d="M12.842 12.981V11.4H7.64v1.653h3.27v.272c-.018 1.881-1.442 3.147-3.516 3.147-2.382 0-3.876-1.846-3.876-4.834 0-2.936 1.485-4.79 3.832-4.79 1.732 0 2.936.835 3.428 2.364h1.977c-.43-2.566-2.522-4.201-5.405-4.201-3.55 0-5.845 2.601-5.845 6.644 0 4.096 2.268 6.654 5.863 6.654 3.322 0 5.475-2.083 5.475-5.327zM17.518 18V5.317H15.55V18h1.97zm5.142 0v-5.256h5.449v-1.74h-5.45V7.11h5.95V5.317h-7.918V18h1.969z" fill="#fff"/></svg></g></svg></div></div></figure><figure data-size="normal"><noscript>&lt;img src="https://pic1.zhimg.com/50/v2-c64d889f9bfebb8dc016766d57186932_hd.gif?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="802" data-rawheight="632" data-thumbnail="https://pic1.zhimg.com/50/v2-c64d889f9bfebb8dc016766d57186932_hd.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="802" data-original="https://pic3.zhimg.com/v2-c64d889f9bfebb8dc016766d57186932_r.jpg?source=1940ef5c"/&gt;</noscript><div class="RichText-gifPlaceholder"><div class="GifPlayer" data-size="normal" data-za-detail-view-path-module="GifItem"><img class="ztext-gif" role="presentation" src="https://pic1.zhimg.com/50/v2-c64d889f9bfebb8dc016766d57186932_hd.jpg?source=1940ef5c" data-thumbnail="https://pic1.zhimg.com/50/v2-c64d889f9bfebb8dc016766d57186932_hd.jpg?source=1940ef5c" data-size="normal" /><svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60" class="GifPlayer-icon"><g fill="none" fill-rule="evenodd"><ellipse fill="#000" opacity="0.45" cx="30" cy="30" rx="30" ry="30"/><ellipse stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="4,1,4" cx="30" cy="30" rx="26" ry="26"/><svg x="16" y="18.5" class="GifPlayer-icon"><path d="M12.842 12.981V11.4H7.64v1.653h3.27v.272c-.018 1.881-1.442 3.147-3.516 3.147-2.382 0-3.876-1.846-3.876-4.834 0-2.936 1.485-4.79 3.832-4.79 1.732 0 2.936.835 3.428 2.364h1.977c-.43-2.566-2.522-4.201-5.405-4.201-3.55 0-5.845 2.601-5.845 6.644 0 4.096 2.268 6.654 5.863 6.654 3.322 0 5.475-2.083 5.475-5.327zM17.518 18V5.317H15.55V18h1.97zm5.142 0v-5.256h5.449v-1.74h-5.45V7.11h5.95V5.317h-7.918V18h1.969z" fill="#fff"/></svg></g></svg></div></div></figure><p>功能特性：</p><ul><li>跨平台，可以在Windows、macOS和Linux上运行</li><li>无依赖，只使用了C标准库和系统原生API，没有外部库的依赖</li><li>可编程的渲染管线，通过编写着色器（Shaders）来实现各种不同的效果</li><li>齐次裁剪（Homogeneous clipping）</li><li>透视插值（Perspective correct interpolation）</li><li>背面剔除</li><li>深度测试</li><li>透明混合</li><li>天空盒</li><li>骨骼动画</li><li>切线空间法线贴图（Tangent space normal mapping）</li><li>阴影贴图（Shadow mapping）</li><li>ACES tone mapping算法</li><li>经典的Blinn–Phong反射模型</li><li>时髦的Physically based rendering（PBR）</li><li>用于环境光照的Image-based lighting（IBL）</li><li>类似于Sketchfab Viewer的环绕式相机</li><li>类似于Marmoset Viewer的材质查看器</li></ul><p>下面推荐一下我在学习和实现过程中发现的一些非常有用的资源以及比较建议的推进路线。</p><p>首先特别推荐从Sokolov的Tiny Renderer教程开始入门。这是个很硬核的课程，Sokolov从一个最简单的画点函数开始，一个小节一个小节地讲解怎么画出一条线，怎么填充一个面，怎么逐步加入背面剔除、深度测试、透视相机、着色器等高级功能。每个小节的课程都有详细的讲解以及完整的实现代码可供参考。这个教程一共有9个小节，只要学到第6个小节我们就已经可以实现一个具有可编程渲染管线的软件渲染器了，而这时候的总代码量只有500行而已，可以说是非常简洁适合入门了。</p><a target="_blank" href="https://link.zhihu.com/?target=https%3A//github.com/ssloy/tinyrenderer" data-draft-node="block" data-draft-type="link-card" data-image="https://pic3.zhimg.com/v2-c4bcea4d453d05c6619f1305494e9116_ipico.jpg" data-image-width="400" data-image-height="400" class="LinkCard old LinkCard--hasImage"><span class="LinkCard-backdrop" style="background-image:url(https://pic3.zhimg.com/v2-c4bcea4d453d05c6619f1305494e9116_ipico.jpg)"></span><span class="LinkCard-content"><span class="LinkCard-text"><span class="LinkCard-title" data-text="true">Tiny Renderer: software rendering in 500 lines of code</span><span class="LinkCard-meta"><span style="display:inline-flex;align-items:center">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--InsertLink" fill="currentColor" viewBox="0 0 24 24" width="17" height="17"><path d="M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z"/></svg></span>github.com</span></span><span class="LinkCard-imageCell"><img class="LinkCard-image LinkCard-image--square" alt="图标" src="https://pic3.zhimg.com/v2-c4bcea4d453d05c6619f1305494e9116_ipico.jpg" /></span></span></a><p>Tiny Renderer并没有包含图形界面，我们需要把渲染好的画面保存到图片中，然后再用图片查看器打开来查看渲染结果。这其实会对我们实现着色器效果造成很大的不便，因为很多时候我们需要不断调整相机的位置和朝向来检查渲染效果是不是正确的。如果每次都要重复设置相机的位置和朝向、渲染场景并保存为图片、打开图片比较渲染效果这个过程的话，我们的效率会变得很低。所以下一步自然是要给我们的软件渲染器加入可以交互的图形界面，以便实时查看渲染结果了。</p><p>加入图形界面的方法有很多，我们可以使用现成的Qt、SDL、GLFW等图形界面库，也可以通过直接调用系统API实现。因为软件渲染器需要的图形界面功能是非常少的，只需要提供打开窗口、显示渲染好的画面、接收鼠标键盘事件这些功能就可以了，为此专门引入一个第三方库好像有点太重量级了，所以我是直接使用系统API实现了简单的图形界面，每个平台需要的代码量大概在300行左右。可以参考一下platform.h这个通用的接口文件以及platforms这个目录下的各平台的具体代码实现。（用过GLFW的同学可能会觉得这些接口长得和GLFW的接口很像，嗯，其实这些接口是我从GLFW里面扒出来的，可以看作是超精简版的GLFW。）</p><a target="_blank" href="https://link.zhihu.com/?target=https%3A//github.com/zauonlok/renderer/blob/v1.2/renderer/core/platform.h" data-draft-node="block" data-draft-type="link-card" class="LinkCard old LinkCard--noImage"><span class="LinkCard-content"><span class="LinkCard-text"><span class="LinkCard-title" data-text="true">renderer/core/platform.h</span><span class="LinkCard-meta"><span style="display:inline-flex;align-items:center">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--InsertLink" fill="currentColor" viewBox="0 0 24 24" width="17" height="17"><path d="M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z"/></svg></span>github.com</span></span><span class="LinkCard-imageCell"><div class="LinkCard-image LinkCard-image--default"><svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Browser" fill="currentColor" viewBox="0 0 24 24" width="32" height="32"><path d="M11.991 3C7.023 3 3 7.032 3 12s4.023 9 8.991 9C16.968 21 21 16.968 21 12s-4.032-9-9.009-9zm6.237 5.4h-2.655a14.084 14.084 0 0 0-1.242-3.204A7.227 7.227 0 0 1 18.228 8.4zM12 4.836A12.678 12.678 0 0 1 13.719 8.4h-3.438A12.678 12.678 0 0 1 12 4.836zM5.034 13.8A7.418 7.418 0 0 1 4.8 12c0-.621.09-1.224.234-1.8h3.042A14.864 14.864 0 0 0 7.95 12c0 .612.054 1.206.126 1.8H5.034zm.738 1.8h2.655a14.084 14.084 0 0 0 1.242 3.204A7.188 7.188 0 0 1 5.772 15.6zm2.655-7.2H5.772a7.188 7.188 0 0 1 3.897-3.204c-.54.999-.954 2.079-1.242 3.204zM12 19.164a12.678 12.678 0 0 1-1.719-3.564h3.438A12.678 12.678 0 0 1 12 19.164zm2.106-5.364H9.894A13.242 13.242 0 0 1 9.75 12c0-.612.063-1.215.144-1.8h4.212c.081.585.144 1.188.144 1.8 0 .612-.063 1.206-.144 1.8zm.225 5.004c.54-.999.954-2.079 1.242-3.204h2.655a7.227 7.227 0 0 1-3.897 3.204zm1.593-5.004c.072-.594.126-1.188.126-1.8 0-.612-.054-1.206-.126-1.8h3.042c.144.576.234 1.179.234 1.8s-.09 1.224-.234 1.8h-3.042z"/></svg></div></span></span></a><a target="_blank" href="https://link.zhihu.com/?target=https%3A//github.com/zauonlok/renderer/tree/v1.2/renderer/platforms" data-draft-node="block" data-draft-type="link-card" data-image="https://pic4.zhimg.com/v2-0dd18d291c22798fa9c819ef0d0848ff_ipico.jpg" data-image-width="420" data-image-height="420" class="LinkCard old LinkCard--hasImage"><span class="LinkCard-backdrop" style="background-image:url(https://pic4.zhimg.com/v2-0dd18d291c22798fa9c819ef0d0848ff_ipico.jpg)"></span><span class="LinkCard-content"><span class="LinkCard-text"><span class="LinkCard-title" data-text="true">renderer/platforms</span><span class="LinkCard-meta"><span style="display:inline-flex;align-items:center">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--InsertLink" fill="currentColor" viewBox="0 0 24 24" width="17" height="17"><path d="M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z"/></svg></span>github.com</span></span><span class="LinkCard-imageCell"><img class="LinkCard-image LinkCard-image--square" alt="图标" src="https://pic4.zhimg.com/v2-0dd18d291c22798fa9c819ef0d0848ff_ipico.jpg" /></span></span></a><p>有了图形界面之后，接下来我们可以考虑加入一个方便好用的相机了。常用的相机有两种：第一种是FPS相机，就像在FPS游戏里面一样，可以用鼠标指针调整相机朝向，用WSAD键进行上下左右移动；第二种是环绕相机，相机有一个目标点，可以对着这个目标点环绕（orbit），可以调整和目标点的距离（dolly），也可以平移目标点（pan）。这里我个人更推荐实现一个环绕相机。因为我们在实现软件渲染器的过程中，大部分时间都是在检查某个模型的渲染表现是不是正确的。我们需要旋转到各个角度、拉近或拉远镜头来检查模型上的每个部分的渲染表现。这时候环绕相机要比FPS相机更加趁手。</p><p>GitHub上可以参考的环绕相机的实现很多，其中我看过做得最好的是Three.js的环绕相机。他们的环绕相机有挺多比较细致的优化，比如在平移目标点时，考虑了目标点与相机的距离，使得物体最后在屏幕空间的移动距离总是鼠标的移动距离保持固定的比例，因此物体可以贴合鼠标一起移动（也就是俗称的跟手的感觉）。</p><a target="_blank" href="https://link.zhihu.com/?target=https%3A//github.com/mrdoob/three.js/blob/r108/examples/js/controls/OrbitControls.js%23L390-L395" data-draft-node="block" data-draft-type="link-card" class="LinkCard old LinkCard--noImage"><span class="LinkCard-content"><span class="LinkCard-text"><span class="LinkCard-title" data-text="true">controls/OrbitControls.js 第390-395行</span><span class="LinkCard-meta"><span style="display:inline-flex;align-items:center">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--InsertLink" fill="currentColor" viewBox="0 0 24 24" width="17" height="17"><path d="M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z"/></svg></span>github.com</span></span><span class="LinkCard-imageCell"><div class="LinkCard-image LinkCard-image--default"><svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Browser" fill="currentColor" viewBox="0 0 24 24" width="32" height="32"><path d="M11.991 3C7.023 3 3 7.032 3 12s4.023 9 8.991 9C16.968 21 21 16.968 21 12s-4.032-9-9.009-9zm6.237 5.4h-2.655a14.084 14.084 0 0 0-1.242-3.204A7.227 7.227 0 0 1 18.228 8.4zM12 4.836A12.678 12.678 0 0 1 13.719 8.4h-3.438A12.678 12.678 0 0 1 12 4.836zM5.034 13.8A7.418 7.418 0 0 1 4.8 12c0-.621.09-1.224.234-1.8h3.042A14.864 14.864 0 0 0 7.95 12c0 .612.054 1.206.126 1.8H5.034zm.738 1.8h2.655a14.084 14.084 0 0 0 1.242 3.204A7.188 7.188 0 0 1 5.772 15.6zm2.655-7.2H5.772a7.188 7.188 0 0 1 3.897-3.204c-.54.999-.954 2.079-1.242 3.204zM12 19.164a12.678 12.678 0 0 1-1.719-3.564h3.438A12.678 12.678 0 0 1 12 19.164zm2.106-5.364H9.894A13.242 13.242 0 0 1 9.75 12c0-.612.063-1.215.144-1.8h4.212c.081.585.144 1.188.144 1.8 0 .612-.063 1.206-.144 1.8zm.225 5.004c.54-.999.954-2.079 1.242-3.204h2.655a7.227 7.227 0 0 1-3.897 3.204zm1.593-5.004c.072-.594.126-1.188.126-1.8 0-.612-.054-1.206-.126-1.8h3.042c.144.576.234 1.179.234 1.8s-.09 1.224-.234 1.8h-3.042z"/></svg></div></span></span></a><p>有了可编程的渲染管线、可交互的图形界面和方便的旋转相机之后，我们其实可以很轻松地在我们的软件渲染器上实验各种图形技术了。在这个过程中，我们会发现之前的可编程渲染管线其实是存在很多问题的。比如，Tiny Renderer在光栅化过程中对变量的插值并不是透视正确的（perspective correct），这会导致模型的纹理坐标发生扭曲，在类似地板这样的由大面积三角形构成的模型上表现得尤为明显。</p><figure data-size="normal"><noscript>&lt;img src="https://pic2.zhimg.com/50/v2-dcd1a8c51a3465a2b36f82362dd23f50_hd.gif?source=1940ef5c" data-size="normal" data-rawwidth="802" data-rawheight="270" data-thumbnail="https://pic2.zhimg.com/50/v2-dcd1a8c51a3465a2b36f82362dd23f50_hd.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="802" data-original="https://pic2.zhimg.com/v2-dcd1a8c51a3465a2b36f82362dd23f50_r.jpg?source=1940ef5c"/&gt;</noscript><div class="RichText-gifPlaceholder"><div class="GifPlayer" data-size="normal" data-za-detail-view-path-module="GifItem"><img class="ztext-gif" role="presentation" src="https://pic2.zhimg.com/50/v2-dcd1a8c51a3465a2b36f82362dd23f50_hd.jpg?source=1940ef5c" data-thumbnail="https://pic2.zhimg.com/50/v2-dcd1a8c51a3465a2b36f82362dd23f50_hd.jpg?source=1940ef5c" data-size="normal" /><svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60" class="GifPlayer-icon"><g fill="none" fill-rule="evenodd"><ellipse fill="#000" opacity="0.45" cx="30" cy="30" rx="30" ry="30"/><ellipse stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="4,1,4" cx="30" cy="30" rx="26" ry="26"/><svg x="16" y="18.5" class="GifPlayer-icon"><path d="M12.842 12.981V11.4H7.64v1.653h3.27v.272c-.018 1.881-1.442 3.147-3.516 3.147-2.382 0-3.876-1.846-3.876-4.834 0-2.936 1.485-4.79 3.832-4.79 1.732 0 2.936.835 3.428 2.364h1.977c-.43-2.566-2.522-4.201-5.405-4.201-3.55 0-5.845 2.601-5.845 6.644 0 4.096 2.268 6.654 5.863 6.654 3.322 0 5.475-2.083 5.475-5.327zM17.518 18V5.317H15.55V18h1.97zm5.142 0v-5.256h5.449v-1.74h-5.45V7.11h5.95V5.317h-7.918V18h1.969z" fill="#fff"/></svg></g></svg></div></div><figcaption>透视不正确</figcaption></figure><figure data-size="normal"><noscript>&lt;img src="https://pic1.zhimg.com/50/v2-01230cee9fd6326fe1d02fd7632f7d20_hd.gif?source=1940ef5c" data-size="normal" data-rawwidth="802" data-rawheight="270" data-thumbnail="https://pic1.zhimg.com/50/v2-01230cee9fd6326fe1d02fd7632f7d20_hd.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="802" data-original="https://pic2.zhimg.com/v2-01230cee9fd6326fe1d02fd7632f7d20_r.jpg?source=1940ef5c"/&gt;</noscript><div class="RichText-gifPlaceholder"><div class="GifPlayer" data-size="normal" data-za-detail-view-path-module="GifItem"><img class="ztext-gif" role="presentation" src="https://pic1.zhimg.com/50/v2-01230cee9fd6326fe1d02fd7632f7d20_hd.jpg?source=1940ef5c" data-thumbnail="https://pic1.zhimg.com/50/v2-01230cee9fd6326fe1d02fd7632f7d20_hd.jpg?source=1940ef5c" data-size="normal" /><svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60" class="GifPlayer-icon"><g fill="none" fill-rule="evenodd"><ellipse fill="#000" opacity="0.45" cx="30" cy="30" rx="30" ry="30"/><ellipse stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="4,1,4" cx="30" cy="30" rx="26" ry="26"/><svg x="16" y="18.5" class="GifPlayer-icon"><path d="M12.842 12.981V11.4H7.64v1.653h3.27v.272c-.018 1.881-1.442 3.147-3.516 3.147-2.382 0-3.876-1.846-3.876-4.834 0-2.936 1.485-4.79 3.832-4.79 1.732 0 2.936.835 3.428 2.364h1.977c-.43-2.566-2.522-4.201-5.405-4.201-3.55 0-5.845 2.601-5.845 6.644 0 4.096 2.268 6.654 5.863 6.654 3.322 0 5.475-2.083 5.475-5.327zM17.518 18V5.317H15.55V18h1.97zm5.142 0v-5.256h5.449v-1.74h-5.45V7.11h5.95V5.317h-7.918V18h1.969z" fill="#fff"/></svg></g></svg></div></div><figcaption>透视正确</figcaption></figure><figure data-size="normal"><noscript>&lt;img src="https://pic2.zhimg.com/50/v2-6036b14d33f06a0626615a0be3ffb7a1_hd.gif?source=1940ef5c" data-size="normal" data-rawwidth="802" data-rawheight="632" data-thumbnail="https://pic4.zhimg.com/50/v2-6036b14d33f06a0626615a0be3ffb7a1_hd.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="802" data-original="https://pic4.zhimg.com/v2-6036b14d33f06a0626615a0be3ffb7a1_r.jpg?source=1940ef5c"/&gt;</noscript><div class="RichText-gifPlaceholder"><div class="GifPlayer" data-size="normal" data-za-detail-view-path-module="GifItem"><img class="ztext-gif" role="presentation" src="https://pic4.zhimg.com/50/v2-6036b14d33f06a0626615a0be3ffb7a1_hd.jpg?source=1940ef5c" data-thumbnail="https://pic4.zhimg.com/50/v2-6036b14d33f06a0626615a0be3ffb7a1_hd.jpg?source=1940ef5c" data-size="normal" /><svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60" class="GifPlayer-icon"><g fill="none" fill-rule="evenodd"><ellipse fill="#000" opacity="0.45" cx="30" cy="30" rx="30" ry="30"/><ellipse stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="4,1,4" cx="30" cy="30" rx="26" ry="26"/><svg x="16" y="18.5" class="GifPlayer-icon"><path d="M12.842 12.981V11.4H7.64v1.653h3.27v.272c-.018 1.881-1.442 3.147-3.516 3.147-2.382 0-3.876-1.846-3.876-4.834 0-2.936 1.485-4.79 3.832-4.79 1.732 0 2.936.835 3.428 2.364h1.977c-.43-2.566-2.522-4.201-5.405-4.201-3.55 0-5.845 2.601-5.845 6.644 0 4.096 2.268 6.654 5.863 6.654 3.322 0 5.475-2.083 5.475-5.327zM17.518 18V5.317H15.55V18h1.97zm5.142 0v-5.256h5.449v-1.74h-5.45V7.11h5.95V5.317h-7.918V18h1.969z" fill="#fff"/></svg></g></svg></div></div><figcaption>透视不正确</figcaption></figure><figure data-size="normal"><noscript>&lt;img src="https://pic1.zhimg.com/50/v2-27b5072898d600fc8d3cee4e695eea7b_hd.gif?source=1940ef5c" data-size="normal" data-rawwidth="802" data-rawheight="632" data-thumbnail="https://pic4.zhimg.com/50/v2-27b5072898d600fc8d3cee4e695eea7b_hd.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="802" data-original="https://pic1.zhimg.com/v2-27b5072898d600fc8d3cee4e695eea7b_r.jpg?source=1940ef5c"/&gt;</noscript><div class="RichText-gifPlaceholder"><div class="GifPlayer" data-size="normal" data-za-detail-view-path-module="GifItem"><img class="ztext-gif" role="presentation" src="https://pic4.zhimg.com/50/v2-27b5072898d600fc8d3cee4e695eea7b_hd.jpg?source=1940ef5c" data-thumbnail="https://pic4.zhimg.com/50/v2-27b5072898d600fc8d3cee4e695eea7b_hd.jpg?source=1940ef5c" data-size="normal" /><svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60" class="GifPlayer-icon"><g fill="none" fill-rule="evenodd"><ellipse fill="#000" opacity="0.45" cx="30" cy="30" rx="30" ry="30"/><ellipse stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="4,1,4" cx="30" cy="30" rx="26" ry="26"/><svg x="16" y="18.5" class="GifPlayer-icon"><path d="M12.842 12.981V11.4H7.64v1.653h3.27v.272c-.018 1.881-1.442 3.147-3.516 3.147-2.382 0-3.876-1.846-3.876-4.834 0-2.936 1.485-4.79 3.832-4.79 1.732 0 2.936.835 3.428 2.364h1.977c-.43-2.566-2.522-4.201-5.405-4.201-3.55 0-5.845 2.601-5.845 6.644 0 4.096 2.268 6.654 5.863 6.654 3.322 0 5.475-2.083 5.475-5.327zM17.518 18V5.317H15.55V18h1.97zm5.142 0v-5.256h5.449v-1.74h-5.45V7.11h5.95V5.317h-7.918V18h1.969z" fill="#fff"/></svg></g></svg></div></div><figcaption>透视正确</figcaption></figure><p>Tiny Renderer也没有对三角形进行完整的裁剪。因为我们有自由活动的相机，所以三角形的裁剪就不能忽略了。最直接的裁剪方法是只要三角形有一个顶点在视锥之外就直接不绘制这个三角形。这种裁剪方案实现起来非常简单，但是会在视锥边缘产生大量缺失的三角面。完整的齐次裁剪则没有这个问题。</p><figure data-size="normal"><noscript>&lt;img src="https://pic4.zhimg.com/50/v2-75b4fa663a8b024806776255529cb0e8_hd.jpg?source=1940ef5c" data-size="normal" data-rawwidth="810" data-rawheight="635" data-default-watermark-src="https://pic4.zhimg.com/50/v2-9eafb6bd8a5a5745916466191758ec01_hd.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="810" data-original="https://pic2.zhimg.com/v2-75b4fa663a8b024806776255529cb0e8_r.jpg?source=1940ef5c"/&gt;</noscript><img src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='810' height='635'&gt;&lt;/svg&gt;" data-size="normal" data-rawwidth="810" data-rawheight="635" data-default-watermark-src="https://pic4.zhimg.com/50/v2-9eafb6bd8a5a5745916466191758ec01_hd.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb lazy" width="810" data-original="https://pic2.zhimg.com/v2-75b4fa663a8b024806776255529cb0e8_r.jpg?source=1940ef5c" data-actualsrc="https://pic4.zhimg.com/50/v2-75b4fa663a8b024806776255529cb0e8_hd.jpg?source=1940ef5c" /><figcaption>简单裁剪</figcaption></figure><figure data-size="normal"><noscript>&lt;img src="https://pic1.zhimg.com/50/v2-4435ca9c68bb4da3003d70032ab1962f_hd.jpg?source=1940ef5c" data-size="normal" data-rawwidth="810" data-rawheight="635" data-default-watermark-src="https://pic1.zhimg.com/50/v2-c5351a8744c499dad0f0ec9fc70a8846_hd.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="810" data-original="https://pic1.zhimg.com/v2-4435ca9c68bb4da3003d70032ab1962f_r.jpg?source=1940ef5c"/&gt;</noscript><img src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='810' height='635'&gt;&lt;/svg&gt;" data-size="normal" data-rawwidth="810" data-rawheight="635" data-default-watermark-src="https://pic1.zhimg.com/50/v2-c5351a8744c499dad0f0ec9fc70a8846_hd.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb lazy" width="810" data-original="https://pic1.zhimg.com/v2-4435ca9c68bb4da3003d70032ab1962f_r.jpg?source=1940ef5c" data-actualsrc="https://pic1.zhimg.com/50/v2-4435ca9c68bb4da3003d70032ab1962f_hd.jpg?source=1940ef5c" /><figcaption>完整裁剪</figcaption></figure><p>在解决了这些问题之后，我们的软件渲染器的渲染能力其实已经和OpenGL比较接近了（当然渲染速度是没法比的）。这时可以考虑整理出一个应用层的框架，把一些通用的功能放在里面，然后在这个基础上实现一些更高级的应用，比如天空盒、阴影、骨骼动画、甚至PBR等，很多光栅化的bug是要在足够复杂的需求的情况下才会容易显现出来的。这里可以参考一下<a href="https://link.zhihu.com/?target=http%3A//learnopengl.com" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://</span><span class="visible">learnopengl.com</span><span class="invisible"></span></a>上的高级应用。</p><a target="_blank" href="https://link.zhihu.com/?target=https%3A//learnopengl.com" data-draft-node="block" data-draft-type="link-card" class="LinkCard old LinkCard--noImage"><span class="LinkCard-content"><span class="LinkCard-text"><span class="LinkCard-title" data-text="true">Learn OpenGL, extensive tutorial resource for learning Modern OpenGL</span><span class="LinkCard-meta"><span style="display:inline-flex;align-items:center">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--InsertLink" fill="currentColor" viewBox="0 0 24 24" width="17" height="17"><path d="M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z"/></svg></span>learnopengl.com</span></span><span class="LinkCard-imageCell"><div class="LinkCard-image LinkCard-image--default"><svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Browser" fill="currentColor" viewBox="0 0 24 24" width="32" height="32"><path d="M11.991 3C7.023 3 3 7.032 3 12s4.023 9 8.991 9C16.968 21 21 16.968 21 12s-4.032-9-9.009-9zm6.237 5.4h-2.655a14.084 14.084 0 0 0-1.242-3.204A7.227 7.227 0 0 1 18.228 8.4zM12 4.836A12.678 12.678 0 0 1 13.719 8.4h-3.438A12.678 12.678 0 0 1 12 4.836zM5.034 13.8A7.418 7.418 0 0 1 4.8 12c0-.621.09-1.224.234-1.8h3.042A14.864 14.864 0 0 0 7.95 12c0 .612.054 1.206.126 1.8H5.034zm.738 1.8h2.655a14.084 14.084 0 0 0 1.242 3.204A7.188 7.188 0 0 1 5.772 15.6zm2.655-7.2H5.772a7.188 7.188 0 0 1 3.897-3.204c-.54.999-.954 2.079-1.242 3.204zM12 19.164a12.678 12.678 0 0 1-1.719-3.564h3.438A12.678 12.678 0 0 1 12 19.164zm2.106-5.364H9.894A13.242 13.242 0 0 1 9.75 12c0-.612.063-1.215.144-1.8h4.212c.081.585.144 1.188.144 1.8 0 .612-.063 1.206-.144 1.8zm.225 5.004c.54-.999.954-2.079 1.242-3.204h2.655a7.227 7.227 0 0 1-3.897 3.204zm1.593-5.004c.072-.594.126-1.188.126-1.8 0-.612-.054-1.206-.126-1.8h3.042c.144.576.234 1.179.234 1.8s-.09 1.224-.234 1.8h-3.042z"/></svg></div></span></span></a><p>因为OpenGL和Direct3D的存在，在现实的编程中我们已经不太能接触到光栅化过程中的细节了。大家的开发都是基于OpenGL/Direct3D或者Unity/Unreal这样的高层接口。这就使得在实现软件渲染器的过程中，经常会遇到需要了解某个知识点，但是Google或百度了N页都找不到相关资料的情况。比如上面提到的透视正确的插值以及齐次坐标的裁剪都已经内建到GPU中了，即使不了解这些知识点也是可以用着色器编程的，因此网络上讨论这些的帖子就很匮乏了。</p><p>所以下面列出了一些我找到的对实现软件渲染器比较有用的资源，希望能节省大家一点百度或Google的时间。</p><a target="_blank" href="https://link.zhihu.com/?target=http%3A//blackpawn.com/texts/pointinpoly/" data-draft-node="block" data-draft-type="link-card" data-image="https://pic2.zhimg.com/v2-074650f1e9e5f1f11bda1997ffe8a2ed_ipico.jpg" data-image-width="183" data-image-height="175" class="LinkCard old LinkCard--hasImage"><span class="LinkCard-backdrop" style="background-image:url(https://pic2.zhimg.com/v2-074650f1e9e5f1f11bda1997ffe8a2ed_ipico.jpg)"></span><span class="LinkCard-content"><span class="LinkCard-text"><span class="LinkCard-title" data-text="true">Point in triangle test</span><span class="LinkCard-meta"><span style="display:inline-flex;align-items:center">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--InsertLink" fill="currentColor" viewBox="0 0 24 24" width="17" height="17"><path d="M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z"/></svg></span>blackpawn.com</span></span><span class="LinkCard-imageCell"><img class="LinkCard-image LinkCard-image--square" alt="图标" src="https://pic2.zhimg.com/v2-074650f1e9e5f1f11bda1997ffe8a2ed_ipico.jpg" /></span></span></a><p>重心坐标（Barycentric coordinate）在我看来是在光栅化过程中灵魂人物一般的存在。在计算得到某个像素点的重心坐标之后，我们可以确定这个像素点是否位于当前三角形之内，从而决定是否需要进一步调用像素着色器；我们可以通过重心坐标对像素点的深度进行插值来进行深度测试；顶点着色器的输出数据（比如法线、UV等）需要使用重心坐标进行透视正确的插值来得到像素着色器的输入数据。Tiny Renderer中对重心坐标的讲解其实并不是特别清晰，相对来说blackpawn的讲解更加透彻，而且还有互动的Flash动画可以辅助理解。</p><a target="_blank" href="https://link.zhihu.com/?target=https%3A//www.comp.nus.edu.sg/~lowkl/publications/lowk_persp_interp_techrep.pdf" data-draft-node="block" data-draft-type="link-card" class="LinkCard old LinkCard--noImage"><span class="LinkCard-content"><span class="LinkCard-text"><span class="LinkCard-title" data-text="true">Perspective-Correct Interpolation</span><span class="LinkCard-meta"><span style="display:inline-flex;align-items:center">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--InsertLink" fill="currentColor" viewBox="0 0 24 24" width="17" height="17"><path d="M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z"/></svg></span>www.comp.nus.edu.sg</span></span><span class="LinkCard-imageCell"><div class="LinkCard-image LinkCard-image--default"><svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Browser" fill="currentColor" viewBox="0 0 24 24" width="32" height="32"><path d="M11.991 3C7.023 3 3 7.032 3 12s4.023 9 8.991 9C16.968 21 21 16.968 21 12s-4.032-9-9.009-9zm6.237 5.4h-2.655a14.084 14.084 0 0 0-1.242-3.204A7.227 7.227 0 0 1 18.228 8.4zM12 4.836A12.678 12.678 0 0 1 13.719 8.4h-3.438A12.678 12.678 0 0 1 12 4.836zM5.034 13.8A7.418 7.418 0 0 1 4.8 12c0-.621.09-1.224.234-1.8h3.042A14.864 14.864 0 0 0 7.95 12c0 .612.054 1.206.126 1.8H5.034zm.738 1.8h2.655a14.084 14.084 0 0 0 1.242 3.204A7.188 7.188 0 0 1 5.772 15.6zm2.655-7.2H5.772a7.188 7.188 0 0 1 3.897-3.204c-.54.999-.954 2.079-1.242 3.204zM12 19.164a12.678 12.678 0 0 1-1.719-3.564h3.438A12.678 12.678 0 0 1 12 19.164zm2.106-5.364H9.894A13.242 13.242 0 0 1 9.75 12c0-.612.063-1.215.144-1.8h4.212c.081.585.144 1.188.144 1.8 0 .612-.063 1.206-.144 1.8zm.225 5.004c.54-.999.954-2.079 1.242-3.204h2.655a7.227 7.227 0 0 1-3.897 3.204zm1.593-5.004c.072-.594.126-1.188.126-1.8 0-.612-.054-1.206-.126-1.8h3.042c.144.576.234 1.179.234 1.8s-.09 1.224-.234 1.8h-3.042z"/></svg></div></span></span></a><a target="_blank" href="https://link.zhihu.com/?target=https%3A//www.khronos.org/registry/OpenGL/specs/es/2.0/es_full_spec_2.0.pdf" data-draft-node="block" data-draft-type="link-card" class="LinkCard old LinkCard--noImage"><span class="LinkCard-content"><span class="LinkCard-text"><span class="LinkCard-title" data-text="true">OpenGL ES 2.0 Specification 第58页</span><span class="LinkCard-meta"><span style="display:inline-flex;align-items:center">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--InsertLink" fill="currentColor" viewBox="0 0 24 24" width="17" height="17"><path d="M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z"/></svg></span>www.khronos.org</span></span><span class="LinkCard-imageCell"><div class="LinkCard-image LinkCard-image--default"><svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Browser" fill="currentColor" viewBox="0 0 24 24" width="32" height="32"><path d="M11.991 3C7.023 3 3 7.032 3 12s4.023 9 8.991 9C16.968 21 21 16.968 21 12s-4.032-9-9.009-9zm6.237 5.4h-2.655a14.084 14.084 0 0 0-1.242-3.204A7.227 7.227 0 0 1 18.228 8.4zM12 4.836A12.678 12.678 0 0 1 13.719 8.4h-3.438A12.678 12.678 0 0 1 12 4.836zM5.034 13.8A7.418 7.418 0 0 1 4.8 12c0-.621.09-1.224.234-1.8h3.042A14.864 14.864 0 0 0 7.95 12c0 .612.054 1.206.126 1.8H5.034zm.738 1.8h2.655a14.084 14.084 0 0 0 1.242 3.204A7.188 7.188 0 0 1 5.772 15.6zm2.655-7.2H5.772a7.188 7.188 0 0 1 3.897-3.204c-.54.999-.954 2.079-1.242 3.204zM12 19.164a12.678 12.678 0 0 1-1.719-3.564h3.438A12.678 12.678 0 0 1 12 19.164zm2.106-5.364H9.894A13.242 13.242 0 0 1 9.75 12c0-.612.063-1.215.144-1.8h4.212c.081.585.144 1.188.144 1.8 0 .612-.063 1.206-.144 1.8zm.225 5.004c.54-.999.954-2.079 1.242-3.204h2.655a7.227 7.227 0 0 1-3.897 3.204zm1.593-5.004c.072-.594.126-1.188.126-1.8 0-.612-.054-1.206-.126-1.8h3.042c.144.576.234 1.179.234 1.8s-.09 1.224-.234 1.8h-3.042z"/></svg></div></span></span></a><p>上面的第一个链接解释了为什么我们需要透视插值并推导了在2D情况下的透视插值公式。第二个链接是OpenGL的规范文档，在第58页给出了3D透视插值的公式，可以直接套用到代码里面。</p><a target="_blank" href="https://link.zhihu.com/?target=http%3A//graphics.idav.ucdavis.edu/education/GraphicsNotes/Clipping.pdf" data-draft-node="block" data-draft-type="link-card" class="LinkCard old LinkCard--noImage"><span class="LinkCard-content"><span class="LinkCard-text"><span class="LinkCard-title" data-text="true">Computer Graphics Notes - Clipping</span><span class="LinkCard-meta"><span style="display:inline-flex;align-items:center">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--InsertLink" fill="currentColor" viewBox="0 0 24 24" width="17" height="17"><path d="M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z"/></svg></span>graphics.idav.ucdavis.edu</span></span><span class="LinkCard-imageCell"><div class="LinkCard-image LinkCard-image--default"><svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Browser" fill="currentColor" viewBox="0 0 24 24" width="32" height="32"><path d="M11.991 3C7.023 3 3 7.032 3 12s4.023 9 8.991 9C16.968 21 21 16.968 21 12s-4.032-9-9.009-9zm6.237 5.4h-2.655a14.084 14.084 0 0 0-1.242-3.204A7.227 7.227 0 0 1 18.228 8.4zM12 4.836A12.678 12.678 0 0 1 13.719 8.4h-3.438A12.678 12.678 0 0 1 12 4.836zM5.034 13.8A7.418 7.418 0 0 1 4.8 12c0-.621.09-1.224.234-1.8h3.042A14.864 14.864 0 0 0 7.95 12c0 .612.054 1.206.126 1.8H5.034zm.738 1.8h2.655a14.084 14.084 0 0 0 1.242 3.204A7.188 7.188 0 0 1 5.772 15.6zm2.655-7.2H5.772a7.188 7.188 0 0 1 3.897-3.204c-.54.999-.954 2.079-1.242 3.204zM12 19.164a12.678 12.678 0 0 1-1.719-3.564h3.438A12.678 12.678 0 0 1 12 19.164zm2.106-5.364H9.894A13.242 13.242 0 0 1 9.75 12c0-.612.063-1.215.144-1.8h4.212c.081.585.144 1.188.144 1.8 0 .612-.063 1.206-.144 1.8zm.225 5.004c.54-.999.954-2.079 1.242-3.204h2.655a7.227 7.227 0 0 1-3.897 3.204zm1.593-5.004c.072-.594.126-1.188.126-1.8 0-.612-.054-1.206-.126-1.8h3.042c.144.576.234 1.179.234 1.8s-.09 1.224-.234 1.8h-3.042z"/></svg></div></span></span></a><a target="_blank" href="https://link.zhihu.com/?target=http%3A//fabiensanglard.net/polygon_codec/" data-draft-node="block" data-draft-type="link-card" class="LinkCard old LinkCard--noImage"><span class="LinkCard-content"><span class="LinkCard-text"><span class="LinkCard-title" data-text="true">Homogeneous clipping</span><span class="LinkCard-meta"><span style="display:inline-flex;align-items:center">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--InsertLink" fill="currentColor" viewBox="0 0 24 24" width="17" height="17"><path d="M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z"/></svg></span>fabiensanglard.net</span></span><span class="LinkCard-imageCell"><div class="LinkCard-image LinkCard-image--default"><svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Browser" fill="currentColor" viewBox="0 0 24 24" width="32" height="32"><path d="M11.991 3C7.023 3 3 7.032 3 12s4.023 9 8.991 9C16.968 21 21 16.968 21 12s-4.032-9-9.009-9zm6.237 5.4h-2.655a14.084 14.084 0 0 0-1.242-3.204A7.227 7.227 0 0 1 18.228 8.4zM12 4.836A12.678 12.678 0 0 1 13.719 8.4h-3.438A12.678 12.678 0 0 1 12 4.836zM5.034 13.8A7.418 7.418 0 0 1 4.8 12c0-.621.09-1.224.234-1.8h3.042A14.864 14.864 0 0 0 7.95 12c0 .612.054 1.206.126 1.8H5.034zm.738 1.8h2.655a14.084 14.084 0 0 0 1.242 3.204A7.188 7.188 0 0 1 5.772 15.6zm2.655-7.2H5.772a7.188 7.188 0 0 1 3.897-3.204c-.54.999-.954 2.079-1.242 3.204zM12 19.164a12.678 12.678 0 0 1-1.719-3.564h3.438A12.678 12.678 0 0 1 12 19.164zm2.106-5.364H9.894A13.242 13.242 0 0 1 9.75 12c0-.612.063-1.215.144-1.8h4.212c.081.585.144 1.188.144 1.8 0 .612-.063 1.206-.144 1.8zm.225 5.004c.54-.999.954-2.079 1.242-3.204h2.655a7.227 7.227 0 0 1-3.897 3.204zm1.593-5.004c.072-.594.126-1.188.126-1.8 0-.612-.054-1.206-.126-1.8h3.042c.144.576.234 1.179.234 1.8s-.09 1.224-.234 1.8h-3.042z"/></svg></div></span></span></a><p>上面的第一个链接由浅入深地讲解了线面裁剪、体面裁剪和齐次裁剪的原理，有详细的公式推导和相应的伪代码实现。第二个链接则是直接提供了完整的齐次裁剪的C语言实现代码。</p><a target="_blank" href="https://link.zhihu.com/?target=https%3A//www.khronos.org/registry/OpenGL/specs/es/2.0/es_full_spec_2.0.pdf" data-draft-node="block" data-draft-type="link-card" class="LinkCard old LinkCard--noImage"><span class="LinkCard-content"><span class="LinkCard-text"><span class="LinkCard-title" data-text="true">OpenGL ES 2.0 Specification 第76-77页</span><span class="LinkCard-meta"><span style="display:inline-flex;align-items:center">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--InsertLink" fill="currentColor" viewBox="0 0 24 24" width="17" height="17"><path d="M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z"/></svg></span>www.khronos.org</span></span><span class="LinkCard-imageCell"><div class="LinkCard-image LinkCard-image--default"><svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Browser" fill="currentColor" viewBox="0 0 24 24" width="32" height="32"><path d="M11.991 3C7.023 3 3 7.032 3 12s4.023 9 8.991 9C16.968 21 21 16.968 21 12s-4.032-9-9.009-9zm6.237 5.4h-2.655a14.084 14.084 0 0 0-1.242-3.204A7.227 7.227 0 0 1 18.228 8.4zM12 4.836A12.678 12.678 0 0 1 13.719 8.4h-3.438A12.678 12.678 0 0 1 12 4.836zM5.034 13.8A7.418 7.418 0 0 1 4.8 12c0-.621.09-1.224.234-1.8h3.042A14.864 14.864 0 0 0 7.95 12c0 .612.054 1.206.126 1.8H5.034zm.738 1.8h2.655a14.084 14.084 0 0 0 1.242 3.204A7.188 7.188 0 0 1 5.772 15.6zm2.655-7.2H5.772a7.188 7.188 0 0 1 3.897-3.204c-.54.999-.954 2.079-1.242 3.204zM12 19.164a12.678 12.678 0 0 1-1.719-3.564h3.438A12.678 12.678 0 0 1 12 19.164zm2.106-5.364H9.894A13.242 13.242 0 0 1 9.75 12c0-.612.063-1.215.144-1.8h4.212c.081.585.144 1.188.144 1.8 0 .612-.063 1.206-.144 1.8zm.225 5.004c.54-.999.954-2.079 1.242-3.204h2.655a7.227 7.227 0 0 1-3.897 3.204zm1.593-5.004c.072-.594.126-1.188.126-1.8 0-.612-.054-1.206-.126-1.8h3.042c.144.576.234 1.179.234 1.8s-.09 1.224-.234 1.8h-3.042z"/></svg></div></span></span></a><p>如果我们要实现天空盒或者IBL的话，textureCube采样函数是必不可少的。给定一个方向，textureCube会从cubemap的六个面中选取一个面并在上面做类似texture2D的采样。和texture2D不同，textureCube的规则比较复杂，比较难脑补出来。又因为这是个着色器语言的内建函数，所以关于其内部实现的讨论也是非常的少。幸运的是，OpenGL的规范文档在第76到77页给出了实现细节，我们直接翻译成相应的代码就可以了。</p><figure data-size="normal"><noscript>&lt;img src="https://pic1.zhimg.com/50/v2-64dcaf2bb27fbad13659f6fa7922920d_hd.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="1001" data-rawheight="379" data-default-watermark-src="https://pic2.zhimg.com/50/v2-4bf35e294dd8f339837ada975f2bd8ad_hd.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="1001" data-original="https://pic4.zhimg.com/v2-64dcaf2bb27fbad13659f6fa7922920d_r.jpg?source=1940ef5c"/&gt;</noscript><img src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='1001' height='379'&gt;&lt;/svg&gt;" data-caption="" data-size="normal" data-rawwidth="1001" data-rawheight="379" data-default-watermark-src="https://pic2.zhimg.com/50/v2-4bf35e294dd8f339837ada975f2bd8ad_hd.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb lazy" width="1001" data-original="https://pic4.zhimg.com/v2-64dcaf2bb27fbad13659f6fa7922920d_r.jpg?source=1940ef5c" data-actualsrc="https://pic1.zhimg.com/50/v2-64dcaf2bb27fbad13659f6fa7922920d_hd.jpg?source=1940ef5c" /></figure><p>最后列出一些因为性能问题或者其他原因目前没有在自己的软件渲染器上实现，但是对最终的渲染效果的提升又非常重要的功能吧。</p><p>首先是和抗锯齿有关的功能，包括多采样抗锯齿（MSAA）、纹理滤波（Texture filtering）和Mipmap。多采样抗锯齿和纹理滤波其实在目前的架构下都是可以比较简单地实现的，只不过会造成一定的性能损耗。Mipmap则是完全没有办法了，因为在现在的架构下我们无法获得屏幕空间的导数，所以也就没办法正确地自动选择Mipmap的层级。</p><p>然后是各种后处理效果（Post-processing）。后处理对画面效果的提升是非常大的，但是相对应的性能消耗也很大，因为它们几乎都是全屏操作，对于软件渲染器来说有点吃不消。因此我目前只是实现了ACES tone mapping，并且只在模型上使用而不是全屏覆盖，这样一来可以在不大的性能消耗的前提下获得比较大的渲染效果提升。</p><figure data-size="normal"><noscript>&lt;img src="https://pic2.zhimg.com/50/v2-cacac925ae92e85347316e5dede69f76_hd.jpg?source=1940ef5c" data-size="normal" data-rawwidth="800" data-rawheight="630" data-default-watermark-src="https://pic4.zhimg.com/50/v2-4d0da1b6c02e24414fe091382e8970d6_hd.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="800" data-original="https://pic1.zhimg.com/v2-cacac925ae92e85347316e5dede69f76_r.jpg?source=1940ef5c"/&gt;</noscript><img src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='800' height='630'&gt;&lt;/svg&gt;" data-size="normal" data-rawwidth="800" data-rawheight="630" data-default-watermark-src="https://pic4.zhimg.com/50/v2-4d0da1b6c02e24414fe091382e8970d6_hd.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb lazy" width="800" data-original="https://pic1.zhimg.com/v2-cacac925ae92e85347316e5dede69f76_r.jpg?source=1940ef5c" data-actualsrc="https://pic2.zhimg.com/50/v2-cacac925ae92e85347316e5dede69f76_hd.jpg?source=1940ef5c" /><figcaption>未开启 ACES tone mapping</figcaption></figure><figure data-size="normal"><noscript>&lt;img src="https://pic2.zhimg.com/50/v2-0fe7ab241eee9653eb9dc0057cfb3da1_hd.jpg?source=1940ef5c" data-size="normal" data-rawwidth="800" data-rawheight="630" data-default-watermark-src="https://pic4.zhimg.com/50/v2-549b94cfed80246f475be11e2dc29ce4_hd.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="800" data-original="https://pic3.zhimg.com/v2-0fe7ab241eee9653eb9dc0057cfb3da1_r.jpg?source=1940ef5c"/&gt;</noscript><img src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='800' height='630'&gt;&lt;/svg&gt;" data-size="normal" data-rawwidth="800" data-rawheight="630" data-default-watermark-src="https://pic4.zhimg.com/50/v2-549b94cfed80246f475be11e2dc29ce4_hd.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb lazy" width="800" data-original="https://pic3.zhimg.com/v2-0fe7ab241eee9653eb9dc0057cfb3da1_r.jpg?source=1940ef5c" data-actualsrc="https://pic2.zhimg.com/50/v2-0fe7ab241eee9653eb9dc0057cfb3da1_hd.jpg?source=1940ef5c" /><figcaption>开启了 ACES tone mapping</figcaption></figure><p>最后是<a href="https://link.zhihu.com/?target=https%3A//www.khronos.org/opengl/wiki/Cubemap_Texture%23Seamless_cubemap" class=" wrap external" target="_blank" rel="nofollow noreferrer">Seamless cubemap</a>功能。在一般的cubemap采样中，textureCube函数会选择6个面中的一个进行2D采样，而完全不会考虑其他的面。在一般情况下这并不会造成很大的问题，但是当我们实现PBR着色器时会发现，IBL采样出来的颜色在高粗糙度的情况下会有很强的方块效应。这是因为一般的IBL烘培软件输出的IBL图片的尺寸会随着粗糙度的增大而减小，而当粗糙度达到最大值时，输出的图片大小就只有1x1这么大了。如果不考虑cubemap中的其他的面的话，那么对于一个球面，IBL采样出来的颜色就只会有6种，正确的做法应该是额外采样相邻的几个面然后进行插值得出最后的结果。但是因为实现Seamless cubemap的代价比较大（参考<a href="https://link.zhihu.com/?target=https%3A//github.com/mesa3d/mesa/blob/mesa-19.1.6/src/gallium/drivers/softpipe/sp_tex_sample.c" class=" wrap external" target="_blank" rel="nofollow noreferrer">Mesa softpipe中的相关实现</a>），所以目前只能通过增大高粗糙度图片的尺寸来暂时绕过这个问题了。</p><figure data-size="normal"><noscript>&lt;img src="https://pic1.zhimg.com/50/v2-4ada10dbd835c66cf66cd42ad2c76e11_hd.jpg?source=1940ef5c" data-size="normal" data-rawwidth="816" data-rawheight="638" data-default-watermark-src="https://pic4.zhimg.com/50/v2-4fc0b15c2cbc42d58455851ef33feec1_hd.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="816" data-original="https://pic2.zhimg.com/v2-4ada10dbd835c66cf66cd42ad2c76e11_r.jpg?source=1940ef5c"/&gt;</noscript><img src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='816' height='638'&gt;&lt;/svg&gt;" data-size="normal" data-rawwidth="816" data-rawheight="638" data-default-watermark-src="https://pic4.zhimg.com/50/v2-4fc0b15c2cbc42d58455851ef33feec1_hd.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb lazy" width="816" data-original="https://pic2.zhimg.com/v2-4ada10dbd835c66cf66cd42ad2c76e11_r.jpg?source=1940ef5c" data-actualsrc="https://pic1.zhimg.com/50/v2-4ada10dbd835c66cf66cd42ad2c76e11_hd.jpg?source=1940ef5c" /><figcaption>随着粗糙度升高Cubemap尺寸减小</figcaption></figure><figure data-size="normal"><noscript>&lt;img src="https://pic4.zhimg.com/50/v2-3040eeea86467f04d911c0bfc8ca83b7_hd.jpg?source=1940ef5c" data-size="normal" data-rawwidth="816" data-rawheight="638" data-default-watermark-src="https://pic1.zhimg.com/50/v2-777dd79654d1eff799c96bb6742e0e12_hd.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="816" data-original="https://pic2.zhimg.com/v2-3040eeea86467f04d911c0bfc8ca83b7_r.jpg?source=1940ef5c"/&gt;</noscript><img src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='816' height='638'&gt;&lt;/svg&gt;" data-size="normal" data-rawwidth="816" data-rawheight="638" data-default-watermark-src="https://pic1.zhimg.com/50/v2-777dd79654d1eff799c96bb6742e0e12_hd.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb lazy" width="816" data-original="https://pic2.zhimg.com/v2-3040eeea86467f04d911c0bfc8ca83b7_r.jpg?source=1940ef5c" data-actualsrc="https://pic4.zhimg.com/50/v2-3040eeea86467f04d911c0bfc8ca83b7_hd.jpg?source=1940ef5c" /><figcaption>强行增大高粗糙度Cubemap的尺寸</figcaption></figure><p></p></span></div><div><div class="ContentItem-time"><a target="_blank" href="//www.zhihu.com/question/24786878/answer/820931418"><span data-tooltip="发布于 2019-09-12 01:12">编辑于 2019-10-17</span></a></div></div><div><div class="ContentItem-actions Sticky RichContent-actions is-fixed is-bottom" style="width: 694px; bottom: 0px; left: 16px;"><span><button aria-label="赞同 1686 " type="button" class="Button VoteButton VoteButton--up"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--TriangleUp VoteButton-TriangleUp" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M2 18.242c0-.326.088-.532.237-.896l7.98-13.203C10.572 3.57 11.086 3 12 3c.915 0 1.429.571 1.784 1.143l7.98 13.203c.15.364.236.57.236.896 0 1.386-.875 1.9-1.955 1.9H3.955c-1.08 0-1.955-.517-1.955-1.9z" fill-rule="evenodd"/></svg></span>赞同 1686</button><button aria-label="反对" type="button" class="Button VoteButton VoteButton--down"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--TriangleDown" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M20.044 3H3.956C2.876 3 2 3.517 2 4.9c0 .326.087.533.236.896L10.216 19c.355.571.87 1.143 1.784 1.143s1.429-.572 1.784-1.143l7.98-13.204c.149-.363.236-.57.236-.896 0-1.386-.876-1.9-1.956-1.9z" fill-rule="evenodd"/></svg></span></button></span><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Comment Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z" fill-rule="evenodd"/></svg></span>129 条评论</button><div class="Popover ShareMenu ContentItem-action"><div class="ShareMenu-toggler" id="Popover32-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover32-content"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Share Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z" fill-rule="evenodd"/></svg></span>分享</button></div></div><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Star Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5.515 19.64l.918-5.355-3.89-3.792c-.926-.902-.639-1.784.64-1.97L8.56 7.74l2.404-4.871c.572-1.16 1.5-1.16 2.072 0L15.44 7.74l5.377.782c1.28.186 1.566 1.068.64 1.97l-3.89 3.793.918 5.354c.219 1.274-.532 1.82-1.676 1.218L12 18.33l-4.808 2.528c-1.145.602-1.896.056-1.677-1.218z" fill-rule="evenodd"/></svg></span>收藏</button><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Heart Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2 8.437C2 5.505 4.294 3.094 7.207 3 9.243 3 11.092 4.19 12 6c.823-1.758 2.649-3 4.651-3C19.545 3 22 5.507 22 8.432 22 16.24 13.842 21 12 21 10.158 21 2 16.24 2 8.437z" fill-rule="evenodd"/></svg></span>喜欢</button><div class="Popover ContentItem-action"><button aria-label="更多" id="Popover33-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover33-content" type="button" class="Button OptionsButton Button--plain Button--withIcon Button--iconOnly"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Dots Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z" fill-rule="evenodd"/></svg></span></button></div><button data-zop-retract-question="true" type="button" class="Button ContentItem-action ContentItem-rightButton Button--plain"><span class="RichContent-collapsedText">收起</span><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--ArrowDown ContentItem-arrowIcon is-active" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M12 13L8.285 9.218a.758.758 0 0 0-1.064 0 .738.738 0 0 0 0 1.052l4.249 4.512a.758.758 0 0 0 1.064 0l4.246-4.512a.738.738 0 0 0 0-1.052.757.757 0 0 0-1.063 0L12.002 13z" fill-rule="evenodd"/></svg></span></button></div><div class="Sticky--holder" style="position: static; inset: auto; display: flex; float: none; margin: 0px -20px -10px; height: 54px; width: 694px;"></div></div></div><div class="ModalWrap"><div><div class=""></div><div class="ModalExp-content"><div class="ModalWrap-content"><div class="ModalWrap-title">继续浏览内容</div><div class="ModalWrap-item"><div class="ModalWrap-itemImg"><img src="https://pic4.zhimg.com/80/v2-88158afcff1e7f4b8b00a1ba81171b61_720w.png" /></div><div class="ModalWrap-itemContent"><div class="ModalWrap-itemTitle">知乎</div><div class="ModalWrap-itemDesc">发现更大的世界</div></div><div class="ModalWrap-itemBtn">打开</div></div><div class="ModalWrap-item"><div class="ModalWrap-itemImg"><img src="https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png" /></div><div class="ModalWrap-itemContent"><div class="ModalWrap-itemTitle">Chrome</div></div><div class="ModalWrap-itemBtn">继续</div></div></div></div></div></div><div><div><div class=""></div><div class="ModalLoading-content"><svg width="30" height="30" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg" class="CircleLoadingBar" aria-hidden="true"><g><circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"/></g></svg></div></div></div></div></div><div class="List-item" tabindex="0"><div class="ContentItem AnswerItem" data-za-index="1" data-zop="{&quot;authorName&quot;:&quot;Milo Yip&quot;,&quot;itemId&quot;:29039253,&quot;title&quot;:&quot;如何开始用 C++ 写一个光栅化渲染器？&quot;,&quot;type&quot;:&quot;answer&quot;}" name="29039253" itemprop="suggestedAnswer" itemtype="http://schema.org/Answer" itemscope="" data-za-detail-view-path-module="AnswerItem" data-za-detail-view-path-index="1" data-za-extra-module="{&quot;card&quot;:{&quot;has_image&quot;:false,&quot;has_video&quot;:false,&quot;content&quot;:{&quot;type&quot;:&quot;Answer&quot;,&quot;token&quot;:&quot;29039253&quot;,&quot;upvote_num&quot;:366,&quot;comment_num&quot;:31,&quot;publish_timestamp&quot;:null,&quot;parent_token&quot;:&quot;24786878&quot;,&quot;author_member_hash_id&quot;:&quot;1e2c9261b85996ccc3c5436850127e33&quot;}}}"><div class="ContentItem-meta"><div class="AuthorInfo AnswerItem-authorInfo AnswerItem-authorInfo--related" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="name" content="Milo Yip" /><meta itemprop="image" content="https://pic1.zhimg.com/v2-041d584bebcc5a34e709f2af38c654c9_l.jpg?source=1940ef5c" /><meta itemprop="url" content="https://www.zhihu.com/people/miloyip" /><meta itemprop="zhihu:followerCount" content="304984" /><span class="UserLink AuthorInfo-avatarWrapper"><div class="Popover"><div id="Popover38-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover38-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/miloyip"><img class="Avatar AuthorInfo-avatar" width="38" height="38" src="https://pic1.zhimg.com/v2-041d584bebcc5a34e709f2af38c654c9_xs.jpg?source=1940ef5c" srcset="https://pic1.zhimg.com/v2-041d584bebcc5a34e709f2af38c654c9_l.jpg?source=1940ef5c 2x" alt="Milo Yip" /></a></div></div></span><div class="AuthorInfo-content"><div class="AuthorInfo-head"><span class="UserLink AuthorInfo-name"><div class="Popover"><div id="Popover39-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover39-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/miloyip">Milo Yip</a></div></div><a href="https://www.zhihu.com/topic/20054793" target="_blank" class="css-n99yhz" aria-label="2016 年度荣誉答主" data-tooltip="2016 年度荣誉答主"><span class="css-g9eqf4-StrutAlign">​<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="css-svsrxm-Octangle" width="18" height="18"><svg viewBox="0 0 24 24" x="-3" y="-3" fill="#FFFFFF" width="30" height="30"><path d="M3.56231227,13.8535307 C2.40051305,12.768677 2.41398885,11.0669203 3.59484487,9.99979213 L3.59222085,9.99654885 C4.26730143,9.45036719 4.79446755,8.21005186 4.7184197,7.34453784 L4.72305873,7.34412719 C4.66942824,5.75539997 5.8824188,4.56066914 7.47188965,4.64242381 L7.47229112,4.6386236 C8.33515314,4.72977993 9.58467253,4.22534048 10.1426329,3.55925173 L10.1462611,3.56228565 C11.2316055,2.40008701 12.9353108,2.41394456 14.0015072,3.59634088 L14.0047263,3.59374004 C14.5498229,4.26841874 15.7896857,4.79521622 16.6545744,4.71844347 L16.6549836,4.72304294 C18.245027,4.66894057 19.4396947,5.88213996 19.3575031,7.47241135 L19.3623099,7.47292747 C19.2704388,8.3358681 19.7742711,9.58421483 20.4407199,10.1424506 L20.437686,10.1460789 C21.5997217,11.2312209 21.5860695,12.9345218 20.4042441,14.0007396 L20.4072865,14.0045125 C19.7325967,14.5495925 19.2055209,15.7896954 19.2815865,16.6561959 L19.2770449,16.6565978 C19.3315454,18.2453037 18.1173775,19.4393568 16.5274188,19.3571512 L16.5269029,19.3619539 C15.6647098,19.270083 14.415408,19.7741709 13.8573671,20.4403558 L13.8537409,20.4373235 C12.76842,21.5995708 11.0650432,21.5864553 9.99899434,20.4039226 L9.99527367,20.406923 C9.45025436,19.7323399 8.21017638,19.2051872 7.34461983,19.2812352 L7.344304,19.2776405 C5.75448683,19.3312904 4.55977145,18.1170085 4.64254978,16.527117 L4.63769921,16.5265942 C4.72957031,15.6644394 4.22547659,14.4151814 3.55928015,13.8571569 L3.56231227,13.8535307 Z"/></svg><path d="M2.63951518,13.3895441 C3.70763333,14.2842292 4.44777637,16.1226061 4.30075305,17.5023312 L4.32211542,17.3063047 C4.17509209,18.6910561 5.17786655,19.7063729 6.5613937,19.5844846 L6.364106,19.6008202 C7.75140298,19.4789319 9.57474349,20.2554985 10.4468305,21.3349009 L10.3224262,21.1803415 C11.1982831,22.2647703 12.6257916,22.2723098 13.5167278,21.2079863 L13.3898102,21.3600325 C14.2845162,20.2919393 16.1229361,19.5518136 17.5026934,19.6988334 L17.3054057,19.6774716 C18.6914461,19.8244915 19.7067866,18.8217404 19.5836389,17.4395022 L19.6012314,17.6367853 C19.4793403,16.2482641 20.255925,14.4249662 21.3353526,13.5528995 L21.1807897,13.677301 C22.2639871,12.8014646 22.2727834,11.3739894 21.2084351,10.483074 L21.3604848,10.6099886 C20.2923667,9.71530351 19.5522236,7.87818322 19.6992469,6.49720154 L19.6778846,6.69448464 C19.8249079,5.30847665 18.8221335,4.2944164 17.4386063,4.41630468 L17.635894,4.39871256 C16.248597,4.52185742 14.4252565,3.74529084 13.5531695,2.66588842 L13.6775738,2.81919121 C12.8017169,1.73601905 11.3742084,1.72722299 10.4832722,2.79154644 L10.6101898,2.63950024 C9.71548377,3.70759343 7.87706394,4.44771919 6.49730661,4.30195588 L6.69459432,4.32206116 C5.30855394,4.17504128 4.29447,5.17904888 4.41636114,6.56128713 L4.3987686,6.36400404 C4.52065973,7.75126861 3.74407501,9.57456653 2.66464737,10.4478898 L2.81921035,10.3222318 C1.73601288,11.1993248 1.72721662,12.6255433 2.79156494,13.5164587 L2.63951518,13.3895441 Z" fill="#FF9607"/><svg class="Zi Zi--Star" fill="#fff" x="6" y="6" viewBox="0 0 24 24" width="12" height="12"><path d="M5.515 19.64l.918-5.355-3.89-3.792c-.926-.902-.639-1.784.64-1.97L8.56 7.74l2.404-4.871c.572-1.16 1.5-1.16 2.072 0L15.44 7.74l5.377.782c1.28.186 1.566 1.068.64 1.97l-3.89 3.793.918 5.354c.219 1.274-.532 1.82-1.676 1.218L12 18.33l-4.808 2.528c-1.145.602-1.896.056-1.677-1.218z" fill-rule="evenodd"/></svg></svg></span></a></span></div><div class="AuthorInfo-detail"><div class="AuthorInfo-badge"><div class="ztext AuthorInfo-badgeText">2016 年度荣誉答主</div></div></div></div></div><div class="LabelContainer-wrapper"></div><div class="css-h5al4j"><span><span class="Voters"><button type="button" class="Button Button--plain">366 人赞同了该回答</button></span></span></div></div><meta itemprop="image" /><meta itemprop="upvoteCount" content="366" /><meta itemprop="url" content="https://www.zhihu.com/question/24786878/answer/29039253" /><meta itemprop="dateCreated" content="2014-08-10T17:20:52.000Z" /><meta itemprop="dateModified" content="2014-08-10T17:20:52.000Z" /><meta itemprop="commentCount" content="31" /><div class="RichContent RichContent--unescapable"><div class="RichContent-inner"><span class="RichText ztext CopyrightRichText-richText" itemprop="text"><p><span><span class="UserLink"><div class="Popover"><div id="Popover46-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover46-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/d073f194bcabc1cec5ef69d0b534de99">@空明流转</a></div></div></span></span> 开发过高大上的SALVIA， <span><span class="UserLink"><div class="Popover"><div id="Popover47-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover47-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/661caec93ce34238ac0021669338cd42">@Yong He</a></div></div></span></span>则提到了Larrabee。我来提供另一些观点。</p><p>首先，如果从学习角度出发，不必一开始完全根据现时GPU的架构及概念，来用软件复制一遍。现时的GPU主要是基于三角形光栅化及z-buffer。</p><p>如果我们从图形学的历史进程来学习，可以这样做练习：</p>2D部分：<br /><ol><li>光栅化2D点（就是在二维数组上画点，了解色彩基本原理，并解决影像输出问题）</li><li>光栅化2D直线（<a href="https://link.zhihu.com/?target=http%3A//zh.wikipedia.org/wiki/%25E5%25B8%2583%25E9%259B%25B7%25E6%25A3%25AE%25E6%25BC%25A2%25E5%25A7%2586%25E7%259B%25B4%25E7%25B7%259A%25E6%25BC%2594%25E7%25AE%2597%25E6%25B3%2595" class=" wrap external" target="_blank" rel="nofollow noreferrer">布雷森漢姆直線演算法</a>、<a href="https://link.zhihu.com/?target=http%3A//zh.wikipedia.org/wiki/%25E5%2590%25B4%25E5%25B0%258F%25E6%259E%2597%25E7%259B%25B4%25E7%25BA%25BF%25E7%25AE%2597%25E6%25B3%2595" class=" wrap external" target="_blank" rel="nofollow noreferrer">吴小林直线算法</a>等）<br /></li><li>2D直线的剪切算法（见<a href="https://link.zhihu.com/?target=http%3A//en.wikipedia.org/wiki/Line_clipping" class=" wrap external" target="_blank" rel="nofollow noreferrer">Line clipping</a>）<br /></li><li>光栅化2D三角形（scan conversion）。避免重复光栅化相邻三角形边界的像素（edge equation）。</li><li>光栅化简单／复杂多边形</li></ol>3D部分：<br /><ol><li>把顶点从三维世界空间变换至二维屏幕空间，绘画顶点（如银河星系数据），操控摄像机旋转模型。</li><li>在剪切空间进行3D直线的剪切算法，把顶点连线（如各种三维正多面体）光栅化成wire frame模型</li><li>以多边形来定义三维模型。使用<a href="https://link.zhihu.com/?target=http%3A//zh.wikipedia.org/wiki/%25E7%2594%25BB%25E5%25AE%25B6%25E7%25AE%2597%25E6%25B3%2595" class=" wrap external" target="_blank" rel="nofollow noreferrer">画家算法</a>来光栅化那些多边形。</li><li>改为使用<a href="https://link.zhihu.com/?target=http%3A//zh.wikipedia.org/wiki/%25E6%25B7%25B1%25E5%25BA%25A6%25E7%25BC%2593%25E5%2586%25B2" class=" wrap external" target="_blank" rel="nofollow noreferrer">深度缓冲</a>。</li><li>实现简单的纹理映射，先做屏幕空间的插值，然后实现简单的perspective-correct texture mapping。</li><li>实现简单的顶点光照，使用顶点颜色插值实现Gouraud shading。</li><li>通过顶点法线插值，实现Phong shading。<br /></li><li>实现其他贴图技术，如mipmapping（也可试<a href="https://link.zhihu.com/?target=http%3A//en.wikipedia.org/wiki/Summed_area_table" class=" wrap external" target="_blank" rel="nofollow noreferrer">Summed area table</a>）、bilinear/trilinear filtering、bump mapping、normal mapping、environment mapping等。</li></ol><br /><p>我们还可以光栅化一些GPU不支持的primitive，例如Blinn大神在1979年就直接光栅化透示正确的球体来渲染太空CG：<br /></p><figure><noscript>&lt;img src="https://pic1.zhimg.com/50/824476424605f1e346a84700fe67ac66_hd.jpg?source=1940ef5c" data-rawwidth="575" data-rawheight="536" class="origin_image zh-lightbox-thumb" width="575" data-original="https://pic2.zhimg.com/824476424605f1e346a84700fe67ac66_r.jpg?source=1940ef5c"/&gt;</noscript><img src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='575' height='536'&gt;&lt;/svg&gt;" data-rawwidth="575" data-rawheight="536" class="origin_image zh-lightbox-thumb lazy" width="575" data-original="https://pic2.zhimg.com/824476424605f1e346a84700fe67ac66_r.jpg?source=1940ef5c" data-actualsrc="https://pic1.zhimg.com/50/824476424605f1e346a84700fe67ac66_hd.jpg?source=1940ef5c" /></figure>可以参考[1]的1-3章。<p></p><p>话说，我想过写一本关于这些的"科普读物"，不过总觉得受众太少……</p>[1] Blinn, Jim. <i>Jim Blinn's corner: notation, notation, notation</i>. Morgan Kaufmann, 2003.</span></div><div><div class="ContentItem-time"><a target="_blank" href="//www.zhihu.com/question/24786878/answer/29039253"><span data-tooltip="发布于 2014-08-11 01:20">发布于 2014-08-11</span></a></div></div><div class="ContentItem-actions RichContent-actions"><span><button aria-label="赞同 366 " type="button" class="Button VoteButton VoteButton--up"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--TriangleUp VoteButton-TriangleUp" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M2 18.242c0-.326.088-.532.237-.896l7.98-13.203C10.572 3.57 11.086 3 12 3c.915 0 1.429.571 1.784 1.143l7.98 13.203c.15.364.236.57.236.896 0 1.386-.875 1.9-1.955 1.9H3.955c-1.08 0-1.955-.517-1.955-1.9z" fill-rule="evenodd"/></svg></span>赞同 366</button><button aria-label="反对" type="button" class="Button VoteButton VoteButton--down"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--TriangleDown" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M20.044 3H3.956C2.876 3 2 3.517 2 4.9c0 .326.087.533.236.896L10.216 19c.355.571.87 1.143 1.784 1.143s1.429-.572 1.784-1.143l7.98-13.204c.149-.363.236-.57.236-.896 0-1.386-.876-1.9-1.956-1.9z" fill-rule="evenodd"/></svg></span></button></span><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Comment Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z" fill-rule="evenodd"/></svg></span>31 条评论</button><div class="Popover ShareMenu ContentItem-action"><div class="ShareMenu-toggler" id="Popover14-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover14-content"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Share Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z" fill-rule="evenodd"/></svg></span>分享</button></div></div><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Star Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5.515 19.64l.918-5.355-3.89-3.792c-.926-.902-.639-1.784.64-1.97L8.56 7.74l2.404-4.871c.572-1.16 1.5-1.16 2.072 0L15.44 7.74l5.377.782c1.28.186 1.566 1.068.64 1.97l-3.89 3.793.918 5.354c.219 1.274-.532 1.82-1.676 1.218L12 18.33l-4.808 2.528c-1.145.602-1.896.056-1.677-1.218z" fill-rule="evenodd"/></svg></span>收藏</button><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Heart Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2 8.437C2 5.505 4.294 3.094 7.207 3 9.243 3 11.092 4.19 12 6c.823-1.758 2.649-3 4.651-3C19.545 3 22 5.507 22 8.432 22 16.24 13.842 21 12 21 10.158 21 2 16.24 2 8.437z" fill-rule="evenodd"/></svg></span>喜欢</button><div class="Popover ContentItem-action"><button aria-label="更多" id="Popover15-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover15-content" type="button" class="Button OptionsButton Button--plain Button--withIcon Button--iconOnly"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Dots Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z" fill-rule="evenodd"/></svg></span></button></div><button data-zop-retract-question="true" type="button" class="Button ContentItem-action ContentItem-rightButton Button--plain"><span class="RichContent-collapsedText">收起</span><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--ArrowDown ContentItem-arrowIcon is-active" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M12 13L8.285 9.218a.758.758 0 0 0-1.064 0 .738.738 0 0 0 0 1.052l4.249 4.512a.758.758 0 0 0 1.064 0l4.246-4.512a.738.738 0 0 0 0-1.052.757.757 0 0 0-1.063 0L12.002 13z" fill-rule="evenodd"/></svg></span></button></div></div><div class="ModalWrap"><div><div class=""></div><div class="ModalExp-content"><div class="ModalWrap-content"><div class="ModalWrap-title">继续浏览内容</div><div class="ModalWrap-item"><div class="ModalWrap-itemImg"><img src="https://pic4.zhimg.com/80/v2-88158afcff1e7f4b8b00a1ba81171b61_720w.png" /></div><div class="ModalWrap-itemContent"><div class="ModalWrap-itemTitle">知乎</div><div class="ModalWrap-itemDesc">发现更大的世界</div></div><div class="ModalWrap-itemBtn">打开</div></div><div class="ModalWrap-item"><div class="ModalWrap-itemImg"><img src="https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png" /></div><div class="ModalWrap-itemContent"><div class="ModalWrap-itemTitle">Chrome</div></div><div class="ModalWrap-itemBtn">继续</div></div></div></div></div></div><div><div><div class=""></div><div class="ModalLoading-content"><svg width="30" height="30" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg" class="CircleLoadingBar" aria-hidden="true"><g><circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"/></g></svg></div></div></div></div></div><div class="List-item" tabindex="0"><div class="ContentItem AnswerItem" data-za-index="2" data-zop="{&quot;authorName&quot;:&quot;孙小磊&quot;,&quot;itemId&quot;:1483055155,&quot;title&quot;:&quot;如何开始用 C++ 写一个光栅化渲染器？&quot;,&quot;type&quot;:&quot;answer&quot;}" name="1483055155" itemprop="suggestedAnswer" itemtype="http://schema.org/Answer" itemscope="" data-za-detail-view-path-module="AnswerItem" data-za-detail-view-path-index="2" data-za-extra-module="{&quot;card&quot;:{&quot;has_image&quot;:false,&quot;has_video&quot;:false,&quot;content&quot;:{&quot;type&quot;:&quot;Answer&quot;,&quot;token&quot;:&quot;1483055155&quot;,&quot;upvote_num&quot;:504,&quot;comment_num&quot;:20,&quot;publish_timestamp&quot;:null,&quot;parent_token&quot;:&quot;24786878&quot;,&quot;author_member_hash_id&quot;:&quot;ab522bf4f51da10b7b33844ea18ee7de&quot;}}}"><div class="ContentItem-meta"><div class="AuthorInfo AnswerItem-authorInfo AnswerItem-authorInfo--related" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="name" content="孙小磊" /><meta itemprop="image" content="https://pic1.zhimg.com/v2-fc9cde55ced779c4031b8c80a3355efb_l.jpg?source=1940ef5c" /><meta itemprop="url" content="https://www.zhihu.com/people/sun-lei-22-19" /><meta itemprop="zhihu:followerCount" content="2968" /><span class="UserLink AuthorInfo-avatarWrapper"><div class="Popover"><div id="Popover40-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover40-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/sun-lei-22-19"><img class="Avatar AuthorInfo-avatar" width="38" height="38" src="https://pic1.zhimg.com/v2-fc9cde55ced779c4031b8c80a3355efb_xs.jpg?source=1940ef5c" srcset="https://pic1.zhimg.com/v2-fc9cde55ced779c4031b8c80a3355efb_l.jpg?source=1940ef5c 2x" alt="孙小磊" /></a></div></div></span><div class="AuthorInfo-content"><div class="AuthorInfo-head"><span class="UserLink AuthorInfo-name"><div class="Popover"><div id="Popover41-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover41-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/sun-lei-22-19">孙小磊</a></div></div></span></div><div class="AuthorInfo-detail"><div class="AuthorInfo-badge"><div class="ztext AuthorInfo-badgeText">研二计算机在读，爱好游戏动漫</div></div></div></div></div><div class="LabelContainer-wrapper"></div><div class="css-h5al4j"><span><span class="Voters"><button type="button" class="Button Button--plain">504 人赞同了该回答</button></span></span></div></div><meta itemprop="image" /><meta itemprop="upvoteCount" content="504" /><meta itemprop="url" content="https://www.zhihu.com/question/24786878/answer/1483055155" /><meta itemprop="dateCreated" content="2020-09-20T02:18:08.000Z" /><meta itemprop="dateModified" content="2020-09-20T02:19:31.000Z" /><meta itemprop="commentCount" content="20" /><div class="RichContent RichContent--unescapable"><div class="RichContent-inner"><span class="RichText ztext CopyrightRichText-richText" itemprop="text"><p>在今年上半年阅读了诸多高赞回答之后，就下定决心自己也学习整一个光栅化渲染器，最近也算是勉强完成了，因为个人对渲染器实现或是图形知识也基本零开始来的，因此感觉可以分享一下自己的学习过程和建议。（这里同时十分感谢 <span><span class="UserLink"><div class="Popover"><div id="Popover48-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover48-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/4045e2038d58be9abf26d6d37fb7a670">@zauonlok</a></div></div></span></span>  实现的渲染器，收益良多 ）</p><p>SRender项目地址：</p><p><a href="https://link.zhihu.com/?target=https%3A//github.com/SunXLei/SRender" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">github.com/SunXLei/SRen</span><span class="invisible">der</span><span class="ellipsis"></span></a></p><p>项目同时也提供了二进制可执行文件，配合模型资源可以直接使用。</p><p>整个SRender的实现除了展示渲染结果的windows系统API，没有其他的依赖，核心逻辑代码在2000多行，整体结构简单，同时我也写有不少注释，方便希望学习阅读的同学，直接从main函数入口去看就行。</p><p>一些屏幕截图：</p><figure data-size="normal"><noscript>&lt;img src="https://pic2.zhimg.com/50/v2-ca92619f5f32928ae6d77cad57a9cb20_hd.jpg?source=1940ef5c" data-size="normal" data-rawwidth="602" data-rawheight="520" data-default-watermark-src="https://pic1.zhimg.com/50/v2-d1eaec479d693fc56d4a1dd7fe55c222_hd.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="602" data-original="https://pic1.zhimg.com/v2-ca92619f5f32928ae6d77cad57a9cb20_r.jpg?source=1940ef5c"/&gt;</noscript><img src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='602' height='520'&gt;&lt;/svg&gt;" data-size="normal" data-rawwidth="602" data-rawheight="520" data-default-watermark-src="https://pic1.zhimg.com/50/v2-d1eaec479d693fc56d4a1dd7fe55c222_hd.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb lazy" width="602" data-original="https://pic1.zhimg.com/v2-ca92619f5f32928ae6d77cad57a9cb20_r.jpg?source=1940ef5c" data-actualsrc="https://pic2.zhimg.com/50/v2-ca92619f5f32928ae6d77cad57a9cb20_hd.jpg?source=1940ef5c" /><figcaption>雷律芽衣</figcaption></figure><figure data-size="normal"><noscript>&lt;img src="https://pic2.zhimg.com/50/v2-8820d93bfe66e9113e76355c3f84e6ba_hd.jpg?source=1940ef5c" data-size="normal" data-rawwidth="498" data-rawheight="501" data-default-watermark-src="https://pic1.zhimg.com/50/v2-6ec3c3878fbd0e6ac24d829bd2a4c56f_hd.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="498" data-original="https://pic4.zhimg.com/v2-8820d93bfe66e9113e76355c3f84e6ba_r.jpg?source=1940ef5c"/&gt;</noscript><img src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='498' height='501'&gt;&lt;/svg&gt;" data-size="normal" data-rawwidth="498" data-rawheight="501" data-default-watermark-src="https://pic1.zhimg.com/50/v2-6ec3c3878fbd0e6ac24d829bd2a4c56f_hd.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb lazy" width="498" data-original="https://pic4.zhimg.com/v2-8820d93bfe66e9113e76355c3f84e6ba_r.jpg?source=1940ef5c" data-actualsrc="https://pic2.zhimg.com/50/v2-8820d93bfe66e9113e76355c3f84e6ba_hd.jpg?source=1940ef5c" /><figcaption>琪亚娜</figcaption></figure><figure data-size="normal"><noscript>&lt;img src="https://pic1.zhimg.com/50/v2-dcd178ad3f2db6f3c71779266de2ae13_hd.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="761" data-rawheight="443" data-default-watermark-src="https://pic4.zhimg.com/50/v2-fcd87959c2b50ff40d6078efe1f1f6ca_hd.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="761" data-original="https://pic1.zhimg.com/v2-dcd178ad3f2db6f3c71779266de2ae13_r.jpg?source=1940ef5c"/&gt;</noscript><img src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='761' height='443'&gt;&lt;/svg&gt;" data-caption="" data-size="normal" data-rawwidth="761" data-rawheight="443" data-default-watermark-src="https://pic4.zhimg.com/50/v2-fcd87959c2b50ff40d6078efe1f1f6ca_hd.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb lazy" width="761" data-original="https://pic1.zhimg.com/v2-dcd178ad3f2db6f3c71779266de2ae13_r.jpg?source=1940ef5c" data-actualsrc="https://pic1.zhimg.com/50/v2-dcd178ad3f2db6f3c71779266de2ae13_hd.jpg?source=1940ef5c" /></figure><p>主要实现功能：</p><ul><li>Blinn-Phong 基础着色</li><li>背面剔除以及齐次空间裁剪</li><li>基于物理的渲染和金属工作流</li><li>实时IBL(Image-based lighting)</li><li>...</li></ul><p>以下是我的一些个人学习过程分享</p><p>首先是很多人都推荐的一个github上的项目tinyrenderer:</p><p><a href="https://link.zhihu.com/?target=https%3A//github.com/ssloy/tinyrenderer" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">github.com/ssloy/tinyre</span><span class="invisible">nderer</span><span class="ellipsis"></span></a></p><p>跟着这个项目的文章确实很快可以实现出来一个简易的光栅化渲染器出来，但缺点是文章里很多知识讲解的并不是十分清楚，因此对于像我一样一开始没有什么图形基础的同学更加建议能够学习一遍闫令琪老师的图形入门课程，B站链接如下：</p><a target="_blank" href="https://link.zhihu.com/?target=https%3A//www.bilibili.com/video/BV1X7411F744%3Ffrom%3Dsearch%26seid%3D13728008737010812958" data-draft-node="block" data-draft-type="link-card" data-image="https://pic1.zhimg.com/v2-0236aa4f8d07681fc1631fb1fba01fb4_180x120.jpg" data-image-width="1010" data-image-height="631" class="LinkCard old LinkCard--hasImage"><span class="LinkCard-backdrop" style="background-image:url(https://pic1.zhimg.com/v2-0236aa4f8d07681fc1631fb1fba01fb4_180x120.jpg)"></span><span class="LinkCard-content"><span class="LinkCard-text"><span class="LinkCard-title" data-text="true">GAMES101-现代计算机图形学入门-闫令琪_哔哩哔哩 (゜-゜)つロ 干杯~-bilibili</span><span class="LinkCard-meta"><span style="display:inline-flex;align-items:center">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--InsertLink" fill="currentColor" viewBox="0 0 24 24" width="17" height="17"><path d="M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z"/></svg></span>www.bilibili.com</span></span><span class="LinkCard-imageCell"><img class="LinkCard-image LinkCard-image--horizontal" alt="图标" src="https://pic1.zhimg.com/v2-0236aa4f8d07681fc1631fb1fba01fb4_180x120.jpg" /></span></span></a><p>这门课真的是十分良心，闫令琪老师对知识的讲解深入浅出，通俗易懂。同时也配套了8个课程作业，从光栅化到光线追踪，以及简单的物理模拟都有涉及，因此这意味着，只要能够通关这门课程，写出一个简单的光栅化渲染器并不是问题。当然对于学有余力的同学推荐配合这本<a href="https://link.zhihu.com/?target=https%3A//book.douban.com/subject/26868819/" class=" wrap external" target="_blank" rel="nofollow noreferrer">虎书</a>也能加深基础知识的理解。</p><p>除却这门课程与参考书之外，在实现光栅化渲染器的过程当中还有一些小坑需要注意，如透视校正插值：</p><a target="_blank" href="https://zhuanlan.zhihu.com/p/144331875" data-draft-node="block" data-draft-type="link-card" data-image="https://pic2.zhimg.com/v2-f8ce5b59f29a79c8ac9d4ef5b253cd05_180x120.jpg" data-image-width="1437" data-image-height="971" class="LinkCard old LinkCard--hasImage"><span class="LinkCard-backdrop" style="background-image:url(https://pic2.zhimg.com/v2-f8ce5b59f29a79c8ac9d4ef5b253cd05_180x120.jpg)"></span><span class="LinkCard-content"><span class="LinkCard-text"><span class="LinkCard-title" data-text="true">孙小磊：计算机图形学六：透视矫正插值和图形渲染管线总结</span><span class="LinkCard-meta"><span style="display:inline-flex;align-items:center">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--InsertLink" fill="currentColor" viewBox="0 0 24 24" width="17" height="17"><path d="M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z"/></svg></span>zhuanlan.zhihu.com</span></span><span class="LinkCard-imageCell"><img class="LinkCard-image LinkCard-image--horizontal" alt="图标" src="https://pic2.zhimg.com/v2-f8ce5b59f29a79c8ac9d4ef5b253cd05_180x120.jpg" /></span></span></a><p>切线空间坐标轴的计算：</p><a target="_blank" href="https://zhuanlan.zhihu.com/p/144357517" data-draft-node="block" data-draft-type="link-card" data-image="https://pic3.zhimg.com/v2-4d291dcdaf80a02290805716bb73d2b6_ipico.jpg" data-image-width="1192" data-image-height="1192" class="LinkCard old LinkCard--hasImage"><span class="LinkCard-backdrop" style="background-image:url(https://pic3.zhimg.com/v2-4d291dcdaf80a02290805716bb73d2b6_ipico.jpg)"></span><span class="LinkCard-content"><span class="LinkCard-text"><span class="LinkCard-title" data-text="true">孙小磊：计算机图形学八：纹理映射的应用(法线贴图，凹凸贴图与阴影贴图等相关应用的原理详解)</span><span class="LinkCard-meta"><span style="display:inline-flex;align-items:center">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--InsertLink" fill="currentColor" viewBox="0 0 24 24" width="17" height="17"><path d="M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z"/></svg></span>zhuanlan.zhihu.com</span></span><span class="LinkCard-imageCell"><img class="LinkCard-image LinkCard-image--square" alt="图标" src="https://pic3.zhimg.com/v2-4d291dcdaf80a02290805716bb73d2b6_ipico.jpg" /></span></span></a><p>(咳咳，这里我就厚颜无耻的贴自己写的总结文章了，其实同时也是GAMES101这门课的配套笔记，这两篇各自参考的英文原文我都在相应文章的底部参考有给出)</p><p>另外关于基础PBR的原理及实现推荐learnopengl上的教程：</p><a target="_blank" href="https://link.zhihu.com/?target=https%3A//learnopengl.com/PBR/Theory" data-draft-node="block" data-draft-type="link-card" data-image="https://pic3.zhimg.com/v2-e47e6c1ed42afd424e25c03b7e98c74a_180x120.jpg" data-image-width="600" data-image-height="362" class="LinkCard old LinkCard--hasImage"><span class="LinkCard-backdrop" style="background-image:url(https://pic3.zhimg.com/v2-e47e6c1ed42afd424e25c03b7e98c74a_180x120.jpg)"></span><span class="LinkCard-content"><span class="LinkCard-text"><span class="LinkCard-title" data-text="true">LearnOpenGL - Theory</span><span class="LinkCard-meta"><span style="display:inline-flex;align-items:center">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--InsertLink" fill="currentColor" viewBox="0 0 24 24" width="17" height="17"><path d="M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z"/></svg></span>learnopengl.com</span></span><span class="LinkCard-imageCell"><img class="LinkCard-image LinkCard-image--horizontal" alt="图标" src="https://pic3.zhimg.com/v2-e47e6c1ed42afd424e25c03b7e98c74a_180x120.jpg" /></span></span></a><p>原理的讲解很清晰，也有相关的opengl实现代码，因此把相关的文章阅读一遍基本也就可以实现出来了，当然对于opengl不熟悉的同学也可以参考我项目中纯c++的实现。</p><p>对于IBL(Image-based lighting)来说，知乎也有很多大佬优秀的文章，里面的许多公式推导是learnopengl教程中没有的，如：</p><a target="_blank" href="https://zhuanlan.zhihu.com/p/66518450" data-draft-node="block" data-draft-type="link-card" data-image="https://pic3.zhimg.com/v2-e843867c2e99c30cdf753f1736dc81ae_180x120.jpg" data-image-width="1139" data-image-height="855" class="LinkCard old LinkCard--hasImage"><span class="LinkCard-backdrop" style="background-image:url(https://pic3.zhimg.com/v2-e843867c2e99c30cdf753f1736dc81ae_180x120.jpg)"></span><span class="LinkCard-content"><span class="LinkCard-text"><span class="LinkCard-title" data-text="true">Ubp.a：深入理解 PBR/基于图像照明 (IBL)</span><span class="LinkCard-meta"><span style="display:inline-flex;align-items:center">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--InsertLink" fill="currentColor" viewBox="0 0 24 24" width="17" height="17"><path d="M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z"/></svg></span>zhuanlan.zhihu.com</span></span><span class="LinkCard-imageCell"><img class="LinkCard-image LinkCard-image--horizontal" alt="图标" src="https://pic3.zhimg.com/v2-e843867c2e99c30cdf753f1736dc81ae_180x120.jpg" /></span></span></a><a target="_blank" href="https://zhuanlan.zhihu.com/p/61962884" data-draft-node="block" data-draft-type="link-card" data-image="https://pic4.zhimg.com/v2-beef8f2749c6210f80516d1defae3c8b_180x120.jpg" data-image-width="2640" data-image-height="1383" class="LinkCard old LinkCard--hasImage"><span class="LinkCard-backdrop" style="background-image:url(https://pic4.zhimg.com/v2-beef8f2749c6210f80516d1defae3c8b_180x120.jpg)"></span><span class="LinkCard-content"><span class="LinkCard-text"><span class="LinkCard-title" data-text="true">moriya苏蛙可：DX12渲染管线(1) - 基于物理的渲染(PBR)</span><span class="LinkCard-meta"><span style="display:inline-flex;align-items:center">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--InsertLink" fill="currentColor" viewBox="0 0 24 24" width="17" height="17"><path d="M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z"/></svg></span>zhuanlan.zhihu.com</span></span><span class="LinkCard-imageCell"><img class="LinkCard-image LinkCard-image--horizontal" alt="图标" src="https://pic4.zhimg.com/v2-beef8f2749c6210f80516d1defae3c8b_180x120.jpg" /></span></span></a><p>第二篇文章中也有详细的IBL实现代码可以参考。</p><p>关于图形界面的实现，我也是参考了 <span><span class="UserLink"><div class="Popover"><div id="Popover49-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover49-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/4045e2038d58be9abf26d6d37fb7a670">@zauonlok</a></div></div></span></span> 回答，在windows平台上直接利用了系统API，并加以实现了相机视角的简单旋转和移动：</p><a target="_blank" href="https://link.zhihu.com/?target=https%3A//github.com/SunXLei/SRender/blob/master/win32/win32.cpp" data-draft-node="block" data-draft-type="link-card" class="LinkCard old LinkCard--noImage"><span class="LinkCard-content"><span class="LinkCard-text"><span class="LinkCard-title" data-text="true">https://github.com/SunXLei/SRender/blob/master/win32/win32.cpp</span><span class="LinkCard-meta"><span style="display:inline-flex;align-items:center">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--InsertLink" fill="currentColor" viewBox="0 0 24 24" width="17" height="17"><path d="M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z"/></svg></span>github.com</span></span><span class="LinkCard-imageCell"><div class="LinkCard-image LinkCard-image--default"><svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Browser" fill="currentColor" viewBox="0 0 24 24" width="32" height="32"><path d="M11.991 3C7.023 3 3 7.032 3 12s4.023 9 8.991 9C16.968 21 21 16.968 21 12s-4.032-9-9.009-9zm6.237 5.4h-2.655a14.084 14.084 0 0 0-1.242-3.204A7.227 7.227 0 0 1 18.228 8.4zM12 4.836A12.678 12.678 0 0 1 13.719 8.4h-3.438A12.678 12.678 0 0 1 12 4.836zM5.034 13.8A7.418 7.418 0 0 1 4.8 12c0-.621.09-1.224.234-1.8h3.042A14.864 14.864 0 0 0 7.95 12c0 .612.054 1.206.126 1.8H5.034zm.738 1.8h2.655a14.084 14.084 0 0 0 1.242 3.204A7.188 7.188 0 0 1 5.772 15.6zm2.655-7.2H5.772a7.188 7.188 0 0 1 3.897-3.204c-.54.999-.954 2.079-1.242 3.204zM12 19.164a12.678 12.678 0 0 1-1.719-3.564h3.438A12.678 12.678 0 0 1 12 19.164zm2.106-5.364H9.894A13.242 13.242 0 0 1 9.75 12c0-.612.063-1.215.144-1.8h4.212c.081.585.144 1.188.144 1.8 0 .612-.063 1.206-.144 1.8zm.225 5.004c.54-.999.954-2.079 1.242-3.204h2.655a7.227 7.227 0 0 1-3.897 3.204zm1.593-5.004c.072-.594.126-1.188.126-1.8 0-.612-.054-1.206-.126-1.8h3.042c.144.576.234 1.179.234 1.8s-.09 1.224-.234 1.8h-3.042z"/></svg></div></span></span></a><p>最后除了光栅化渲染器，如果你对光线追踪渲染器也十分感兴趣的话，阅读参考Peter Shirley的Raytracing三部也是不错的选择，该作者同样也是上面推荐的虎书的作者之一。</p><a target="_blank" href="https://link.zhihu.com/?target=https%3A//github.com/RayTracing/raytracing.github.io" data-draft-node="block" data-draft-type="link-card" class="LinkCard old LinkCard--noImage"><span class="LinkCard-content"><span class="LinkCard-text"><span class="LinkCard-title" data-text="true">https://github.com/RayTracing/raytracing.github.io</span><span class="LinkCard-meta"><span style="display:inline-flex;align-items:center">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--InsertLink" fill="currentColor" viewBox="0 0 24 24" width="17" height="17"><path d="M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z"/></svg></span>github.com</span></span><span class="LinkCard-imageCell"><div class="LinkCard-image LinkCard-image--default"><svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Browser" fill="currentColor" viewBox="0 0 24 24" width="32" height="32"><path d="M11.991 3C7.023 3 3 7.032 3 12s4.023 9 8.991 9C16.968 21 21 16.968 21 12s-4.032-9-9.009-9zm6.237 5.4h-2.655a14.084 14.084 0 0 0-1.242-3.204A7.227 7.227 0 0 1 18.228 8.4zM12 4.836A12.678 12.678 0 0 1 13.719 8.4h-3.438A12.678 12.678 0 0 1 12 4.836zM5.034 13.8A7.418 7.418 0 0 1 4.8 12c0-.621.09-1.224.234-1.8h3.042A14.864 14.864 0 0 0 7.95 12c0 .612.054 1.206.126 1.8H5.034zm.738 1.8h2.655a14.084 14.084 0 0 0 1.242 3.204A7.188 7.188 0 0 1 5.772 15.6zm2.655-7.2H5.772a7.188 7.188 0 0 1 3.897-3.204c-.54.999-.954 2.079-1.242 3.204zM12 19.164a12.678 12.678 0 0 1-1.719-3.564h3.438A12.678 12.678 0 0 1 12 19.164zm2.106-5.364H9.894A13.242 13.242 0 0 1 9.75 12c0-.612.063-1.215.144-1.8h4.212c.081.585.144 1.188.144 1.8 0 .612-.063 1.206-.144 1.8zm.225 5.004c.54-.999.954-2.079 1.242-3.204h2.655a7.227 7.227 0 0 1-3.897 3.204zm1.593-5.004c.072-.594.126-1.188.126-1.8 0-.612-.054-1.206-.126-1.8h3.042c.144.576.234 1.179.234 1.8s-.09 1.224-.234 1.8h-3.042z"/></svg></div></span></span></a><p>----------------------------------------------------------------------------------------------------</p><p>SRender本身实现的目的是为了自己能够更好的理解图形学当中的一些基础知识和算法，所以在效率上兼顾的并不够，同时由于是纯CPU计算实现，也没有添加多线程，在渲染IBL的场景的时候帧率还是有点低。如果有什么实现问题的话，也欢迎指正讨论！</p></span></div><div><div class="ContentItem-time"><a target="_blank" href="//www.zhihu.com/question/24786878/answer/1483055155"><span data-tooltip="发布于 2020-09-20 10:18">编辑于 2020-09-20</span></a></div></div><div class="ContentItem-actions RichContent-actions"><span><button aria-label="赞同 504 " type="button" class="Button VoteButton VoteButton--up"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--TriangleUp VoteButton-TriangleUp" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M2 18.242c0-.326.088-.532.237-.896l7.98-13.203C10.572 3.57 11.086 3 12 3c.915 0 1.429.571 1.784 1.143l7.98 13.203c.15.364.236.57.236.896 0 1.386-.875 1.9-1.955 1.9H3.955c-1.08 0-1.955-.517-1.955-1.9z" fill-rule="evenodd"/></svg></span>赞同 504</button><button aria-label="反对" type="button" class="Button VoteButton VoteButton--down"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--TriangleDown" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M20.044 3H3.956C2.876 3 2 3.517 2 4.9c0 .326.087.533.236.896L10.216 19c.355.571.87 1.143 1.784 1.143s1.429-.572 1.784-1.143l7.98-13.204c.149-.363.236-.57.236-.896 0-1.386-.876-1.9-1.956-1.9z" fill-rule="evenodd"/></svg></span></button></span><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Comment Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z" fill-rule="evenodd"/></svg></span>20 条评论</button><div class="Popover ShareMenu ContentItem-action"><div class="ShareMenu-toggler" id="Popover18-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover18-content"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Share Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z" fill-rule="evenodd"/></svg></span>分享</button></div></div><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Star Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5.515 19.64l.918-5.355-3.89-3.792c-.926-.902-.639-1.784.64-1.97L8.56 7.74l2.404-4.871c.572-1.16 1.5-1.16 2.072 0L15.44 7.74l5.377.782c1.28.186 1.566 1.068.64 1.97l-3.89 3.793.918 5.354c.219 1.274-.532 1.82-1.676 1.218L12 18.33l-4.808 2.528c-1.145.602-1.896.056-1.677-1.218z" fill-rule="evenodd"/></svg></span>收藏</button><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Heart Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2 8.437C2 5.505 4.294 3.094 7.207 3 9.243 3 11.092 4.19 12 6c.823-1.758 2.649-3 4.651-3C19.545 3 22 5.507 22 8.432 22 16.24 13.842 21 12 21 10.158 21 2 16.24 2 8.437z" fill-rule="evenodd"/></svg></span>喜欢</button><div class="Popover ContentItem-action"><button aria-label="更多" id="Popover19-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover19-content" type="button" class="Button OptionsButton Button--plain Button--withIcon Button--iconOnly"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Dots Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z" fill-rule="evenodd"/></svg></span></button></div><button data-zop-retract-question="true" type="button" class="Button ContentItem-action ContentItem-rightButton Button--plain"><span class="RichContent-collapsedText">收起</span><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--ArrowDown ContentItem-arrowIcon is-active" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M12 13L8.285 9.218a.758.758 0 0 0-1.064 0 .738.738 0 0 0 0 1.052l4.249 4.512a.758.758 0 0 0 1.064 0l4.246-4.512a.738.738 0 0 0 0-1.052.757.757 0 0 0-1.063 0L12.002 13z" fill-rule="evenodd"/></svg></span></button></div></div><div class="ModalWrap"><div><div class=""></div><div class="ModalExp-content"><div class="ModalWrap-content"><div class="ModalWrap-title">继续浏览内容</div><div class="ModalWrap-item"><div class="ModalWrap-itemImg"><img src="https://pic4.zhimg.com/80/v2-88158afcff1e7f4b8b00a1ba81171b61_720w.png" /></div><div class="ModalWrap-itemContent"><div class="ModalWrap-itemTitle">知乎</div><div class="ModalWrap-itemDesc">发现更大的世界</div></div><div class="ModalWrap-itemBtn">打开</div></div><div class="ModalWrap-item"><div class="ModalWrap-itemImg"><img src="https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png" /></div><div class="ModalWrap-itemContent"><div class="ModalWrap-itemTitle">Chrome</div></div><div class="ModalWrap-itemBtn">继续</div></div></div></div></div></div><div><div><div class=""></div><div class="ModalLoading-content"><svg width="30" height="30" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg" class="CircleLoadingBar" aria-hidden="true"><g><circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"/></g></svg></div></div></div></div></div><div class="List-item" tabindex="0"><div class="ContentItem AnswerItem" data-za-index="3" data-zop="{&quot;authorName&quot;:&quot;A希亿&quot;,&quot;itemId&quot;:105988273,&quot;title&quot;:&quot;如何开始用 C++ 写一个光栅化渲染器？&quot;,&quot;type&quot;:&quot;answer&quot;}" name="105988273" itemprop="suggestedAnswer" itemtype="http://schema.org/Answer" itemscope="" data-za-detail-view-path-module="AnswerItem" data-za-detail-view-path-index="3" data-za-extra-module="{&quot;card&quot;:{&quot;has_image&quot;:false,&quot;has_video&quot;:false,&quot;content&quot;:{&quot;type&quot;:&quot;Answer&quot;,&quot;token&quot;:&quot;105988273&quot;,&quot;upvote_num&quot;:298,&quot;comment_num&quot;:25,&quot;publish_timestamp&quot;:null,&quot;parent_token&quot;:&quot;24786878&quot;,&quot;author_member_hash_id&quot;:&quot;05f99536c7a95b5aaadb8bc4c84f9f73&quot;}}}"><div class="ContentItem-meta"><div class="AuthorInfo AnswerItem-authorInfo AnswerItem-authorInfo--related" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="name" content="A希亿" /><meta itemprop="image" content="https://pic4.zhimg.com/1c8d5e7d36ddba3b3a7e01daf55f2f49_l.jpg?source=1940ef5c" /><meta itemprop="url" content="https://www.zhihu.com/people/axi-yi" /><meta itemprop="zhihu:followerCount" content="646" /><span class="UserLink AuthorInfo-avatarWrapper"><div class="Popover"><div id="Popover42-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover42-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/axi-yi"><img class="Avatar AuthorInfo-avatar" width="38" height="38" src="https://pic4.zhimg.com/1c8d5e7d36ddba3b3a7e01daf55f2f49_xs.jpg?source=1940ef5c" srcset="https://pic4.zhimg.com/1c8d5e7d36ddba3b3a7e01daf55f2f49_l.jpg?source=1940ef5c 2x" alt="A希亿" /></a></div></div></span><div class="AuthorInfo-content"><div class="AuthorInfo-head"><span class="UserLink AuthorInfo-name"><div class="Popover"><div id="Popover43-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover43-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/axi-yi">A希亿</a></div></div></span></div><div class="AuthorInfo-detail"><div class="AuthorInfo-badge"><div class="ztext AuthorInfo-badgeText">游戏码农，wpi研修中</div></div></div></div></div><div class="LabelContainer-wrapper"></div><div class="css-h5al4j"><span><span class="Voters"><button type="button" class="Button Button--plain">298 人赞同了该回答</button></span></span></div></div><meta itemprop="image" /><meta itemprop="upvoteCount" content="298" /><meta itemprop="url" content="https://www.zhihu.com/question/24786878/answer/105988273" /><meta itemprop="dateCreated" content="2016-06-14T13:19:02.000Z" /><meta itemprop="dateModified" content="2016-06-14T13:19:02.000Z" /><meta itemprop="commentCount" content="25" /><div class="RichContent RichContent--unescapable"><div class="RichContent-inner"><span class="RichText ztext CopyrightRichText-richText" itemprop="text"><p>题主说熟悉C#，我最近刚好写了一个C#版的，虽然没有各位大神的高大上，但是比较简单易懂，也放上来给题主参考一下吧~</p><p>原文链接：<a href="https://link.zhihu.com/?target=http%3A//blog.csdn.net/aceyan0718/article/details/51659381" class=" wrap external" target="_blank" rel="nofollow noreferrer">用C#实现一个简易的软件光栅化渲染器</a></p><br /><p> 这是一个用C#+winform实现的软件光栅化渲染器，今天拿出来与大家分享一下，希望能起到抛砖引玉的作用，给新人一点启发（结构比较简单，注释比较详细^_^），也欢迎司机们拍砖指点和交流~</p><p><strong>目的：</strong></p><p> 巩固图形编程知识，理解渲染流水线所做的事情。</p><p><strong>实现功能：</strong></p><p>1、将顶点数据进行一系列处理显示到屏幕上（废话。。。(¬_¬)）</p><p>2、线框渲染模式、纹理渲染模式、顶点色模式</p><p>3、纹理uv坐标和顶点色等的透视校正插值</p><p>4、纹理双线性过滤采样</p><p>5、背面消隐</p><p>6、Cvv简单裁剪</p><p>7、“基础光照模型”（相当于D3D、OpenGL中的固定管线顶点光照）</p><p><strong>截图：</strong></p><p>光照</p><figure><noscript>&lt;img src="https://pic4.zhimg.com/50/c034cd971f4b63857c5b760d480e42b4_hd.jpg?source=1940ef5c" data-rawwidth="784" data-rawheight="597" class="origin_image zh-lightbox-thumb" width="784" data-original="https://pic2.zhimg.com/c034cd971f4b63857c5b760d480e42b4_r.jpg?source=1940ef5c"/&gt;</noscript><img src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='784' height='597'&gt;&lt;/svg&gt;" data-rawwidth="784" data-rawheight="597" class="origin_image zh-lightbox-thumb lazy" width="784" data-original="https://pic2.zhimg.com/c034cd971f4b63857c5b760d480e42b4_r.jpg?source=1940ef5c" data-actualsrc="https://pic4.zhimg.com/50/c034cd971f4b63857c5b760d480e42b4_hd.jpg?source=1940ef5c" /></figure><p>顶点色</p><figure><noscript>&lt;img src="https://pic4.zhimg.com/50/0a7a1411f1acb4d9ff3981362eb86b70_hd.jpg?source=1940ef5c" data-rawwidth="800" data-rawheight="600" class="origin_image zh-lightbox-thumb" width="800" data-original="https://pic2.zhimg.com/0a7a1411f1acb4d9ff3981362eb86b70_r.jpg?source=1940ef5c"/&gt;</noscript><img src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='800' height='600'&gt;&lt;/svg&gt;" data-rawwidth="800" data-rawheight="600" class="origin_image zh-lightbox-thumb lazy" width="800" data-original="https://pic2.zhimg.com/0a7a1411f1acb4d9ff3981362eb86b70_r.jpg?source=1940ef5c" data-actualsrc="https://pic4.zhimg.com/50/0a7a1411f1acb4d9ff3981362eb86b70_hd.jpg?source=1940ef5c" /></figure><p>线框模式：</p><figure><noscript>&lt;img src="https://pic1.zhimg.com/50/a7015aea10209bdc16195928432019d7_hd.jpg?source=1940ef5c" data-rawwidth="800" data-rawheight="600" class="origin_image zh-lightbox-thumb" width="800" data-original="https://pic1.zhimg.com/a7015aea10209bdc16195928432019d7_r.jpg?source=1940ef5c"/&gt;</noscript><img src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='800' height='600'&gt;&lt;/svg&gt;" data-rawwidth="800" data-rawheight="600" class="origin_image zh-lightbox-thumb lazy" width="800" data-original="https://pic1.zhimg.com/a7015aea10209bdc16195928432019d7_r.jpg?source=1940ef5c" data-actualsrc="https://pic1.zhimg.com/50/a7015aea10209bdc16195928432019d7_hd.jpg?source=1940ef5c" /></figure><br /><br /><p><strong>代码放在Github上面:</strong><a href="https://link.zhihu.com/?target=https%3A//github.com/aceyan/SimpleSoftwareRenderer" class=" wrap external" target="_blank" rel="nofollow noreferrer">GitHub - aceyan/SimpleSoftwareRenderer: 简单的软件渲染by c# winform</a></p><br /><p>下面我会将一些完成这个渲染器所需要的知识点以及相关资料的链接（多是博文）罗列一下，方便查阅。</p><br />零、准备阶段<br /><br /><p>想要实现渲染器首先我们得知道“给定视点、三维物体、光源、照明模式，和纹理等元素，如何绘制一幅二维图像”，这就必须提到一个词“图像绘制管线”（也称绘制流水线），我们得渲染器正是要以软件的形式来模拟这条流水线的运作。</p><p>流水线：<a href="https://link.zhihu.com/?target=http%3A//www.cnblogs.com/wonderKK/p/5022226.html" class=" wrap external" target="_blank" rel="nofollow noreferrer">（转）GPU图形绘制管线</a></p><figure><noscript>&lt;img src="https://pic1.zhimg.com/50/908496d2c36c7beee23f04d8ab6c710f_hd.jpg?source=1940ef5c" data-rawwidth="674" data-rawheight="470" class="origin_image zh-lightbox-thumb" width="674" data-original="https://pic4.zhimg.com/908496d2c36c7beee23f04d8ab6c710f_r.jpg?source=1940ef5c"/&gt;</noscript><img src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='674' height='470'&gt;&lt;/svg&gt;" data-rawwidth="674" data-rawheight="470" class="origin_image zh-lightbox-thumb lazy" width="674" data-original="https://pic4.zhimg.com/908496d2c36c7beee23f04d8ab6c710f_r.jpg?source=1940ef5c" data-actualsrc="https://pic1.zhimg.com/50/908496d2c36c7beee23f04d8ab6c710f_hd.jpg?source=1940ef5c" /></figure><p>理解了绘制管线，我们发现其中充满对矩阵向量等数学工具的运用，那么再实现流水线之前，我们必须先实现这些数学工具，这些数学类网上已经有很多的资料了，但是有几点需要特别说明：</p><strong>1、本程序中使用行矩阵与行向量</strong><p>相关资料：D3d和openGl矩阵区别</p><p><a href="https://link.zhihu.com/?target=http%3A//blog.csdn.net/Nightmare/article/details/3983724" class=" wrap external" target="_blank" rel="nofollow noreferrer">矩阵和向量的乘法顺序</a></p><strong>2、本程序使用左手坐标系</strong><strong>3、实现了color类来方便进行颜色的运算，因为进行光照的时候要使用颜色乘以颜色的计算方法，它跟向量的乘法不同，应该称为“</strong>Modulate<strong>（调制）”，注意不能用向量乘法的计算公式哦。</strong><p>相关资料：</p><p><a href="https://www.zhihu.com/question/24026277/answer/26433842" class="internal">在 Cg 的逐像素着色的最后，每一个颜色值相加和每一个颜色相乘从数学角度有什么差别？ - Milo Yip 的回答</a></p><p>@Milo Yip 大神的博文里面有一段讲颜色计算的：</p><p><a href="https://link.zhihu.com/?target=http%3A//www.cnblogs.com/miloyip/archive/2010/03/29/1698953.html%231794025" class=" wrap external" target="_blank" rel="nofollow noreferrer">用JavaScript玩转计算机图形学(一)光线追踪入门</a></p><strong>4、矩阵求逆</strong><p>由于要进行光照，我们需要变换顶点法线，那么就需要矩阵求逆和求转置的运算。（为什么需要逆转置呢？请看：<a href="https://www.zhihu.com/question/27739027" class="internal">cg语言漫反射光照模型中的worldMatrix_IT是什么意思？是世界变换矩阵的转置的逆？ - 游戏开发</a>）</p><p>其中矩阵求逆比较复杂，本程序使用的是伴随矩阵的方法求矩阵的逆， 必须先求出矩阵的行列式和伴随矩阵，这部分需要一定的线性代数基础知识。</p>4.1矩阵求逆重要定理：<figure><noscript>&lt;img src="https://pic1.zhimg.com/50/946a56359494a87884fa1d16a28a9d7c_hd.jpg?source=1940ef5c" data-rawwidth="713" data-rawheight="420" class="origin_image zh-lightbox-thumb" width="713" data-original="https://pic2.zhimg.com/946a56359494a87884fa1d16a28a9d7c_r.jpg?source=1940ef5c"/&gt;</noscript><img src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='713' height='420'&gt;&lt;/svg&gt;" data-rawwidth="713" data-rawheight="420" class="origin_image zh-lightbox-thumb lazy" width="713" data-original="https://pic2.zhimg.com/946a56359494a87884fa1d16a28a9d7c_r.jpg?source=1940ef5c" data-actualsrc="https://pic1.zhimg.com/50/946a56359494a87884fa1d16a28a9d7c_hd.jpg?source=1940ef5c" /></figure><br /><p><a href="https://link.zhihu.com/?target=http%3A//wenku.baidu.com/link%3Furl%3Ddga27GT5oSK8SDwHaeqPGL_raHnMLNP54oad7q8wJnMOqEpuT4_UAC-BHAeTsL8vGpYkRuphnXng99TLfHOx8_Nn7WMVycFRlUiMgSS-2Ve" class=" wrap external" target="_blank" rel="nofollow noreferrer">逆矩阵的几种求法与解析(很全很经典)_百度文库</a></p>4.2求矩阵行列式<p>本程序使用递归<a href="https://link.zhihu.com/?target=http%3A//lib.csdn.net/base/datastructure" class=" wrap external" target="_blank" rel="nofollow noreferrer">算法</a>求行列式，请查看矩阵行列式的递归定义：</p><p><a href="https://link.zhihu.com/?target=http%3A//wenku.baidu.com/link%3Furl%3D9TSCuxJdfypmsqZLYegHNuKYP1TABFwGT22v-cJut5wenWM-Ll2Bp6zqgDEeIvd9ChV3Laj3czAbdWtjSwaulHHSkUZtrLNcgLqNw2xrjb7" class=" wrap external" target="_blank" rel="nofollow noreferrer">3行列式(递归定义)_图文</a></p>4.3伴随矩阵：<p><a href="https://link.zhihu.com/?target=http%3A//wenku.baidu.com/link%3Furl%3DBVbtO30v7eygbZUloybJtpFkCrpAwypYNyIx7XGX-OItxdWz0w4Y2hpzux729bq4MLKnx0sWwS4mJwm8Nrnf_3zxG9RqzD7LND3mklrwyDe" class=" wrap external" target="_blank" rel="nofollow noreferrer">伴随矩阵_百度文库</a></p><br /><p>实现了数学类，就可以正式进入<strong>流水线</strong>了：</p><br />一、几何阶段<br /><br /><strong>1、顶点从模型空间-----&gt;世界空间</strong><p>这一步要生成世界矩阵（简称m），m是一系列平移、选择等变换的组合</p><p>如果开启了光照，我们还需要把模型空间的法线信息变换到世界空间，对顶点进行光照计算并保存光照结果颜色，以便在光栅化的时候进行差值和颜色调制(Modulate)</p><p>这里实现的“简单光照模型”可以参见《Cg教程_可编程实时图形权威指南》第五章光照</p><strong>2、世界空间</strong>-----&gt;相机空间<p>这一步需要生成视矩阵（简称v）</p><p>推导过程：@zdd的博客 <a href="https://link.zhihu.com/?target=http%3A//www.cnblogs.com/graphics/archive/2012/07/12/2476413.html" class=" wrap external" target="_blank" rel="nofollow noreferrer">View Transform（视图变换）详解</a></p><p>上面的推导中</p><figure><noscript>&lt;img src="https://pic4.zhimg.com/50/0b6a0156ac3868b8c7f4aeb5ba1315b2_hd.jpg?source=1940ef5c" data-rawwidth="279" data-rawheight="150" class="content_image" width="279"/&gt;</noscript><img src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='279' height='150'&gt;&lt;/svg&gt;" data-rawwidth="279" data-rawheight="150" class="content_image lazy" width="279" data-actualsrc="https://pic4.zhimg.com/50/0b6a0156ac3868b8c7f4aeb5ba1315b2_hd.jpg?source=1940ef5c" /></figure>写错了<p></p><p>应该是 </p><p>  rx  ry rz</p><p>[ ux uy uz ]</p><p>  dx dy dz</p><p>但是推导结果是对的</p><strong>3、相机空间---&gt;齐次剪裁空间</strong><p>这里要生成投影矩阵，简称p</p><p>Dx风格的投影矩阵推导：</p><p><a href="https://link.zhihu.com/?target=http%3A//www.cnblogs.com/graphics/archive/2012/07/25/2582119.html" class=" wrap external" target="_blank" rel="nofollow noreferrer">透视投影详解</a></p><p>本程序使用的投影矩阵：</p><figure><noscript>&lt;img src="https://pic1.zhimg.com/50/2b877556bd592b9a5299eff50b4ffcf3_hd.jpg?source=1940ef5c" data-rawwidth="423" data-rawheight="262" class="origin_image zh-lightbox-thumb" width="423" data-original="https://pic2.zhimg.com/2b877556bd592b9a5299eff50b4ffcf3_r.jpg?source=1940ef5c"/&gt;</noscript><img src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='423' height='262'&gt;&lt;/svg&gt;" data-rawwidth="423" data-rawheight="262" class="origin_image zh-lightbox-thumb lazy" width="423" data-original="https://pic2.zhimg.com/2b877556bd592b9a5299eff50b4ffcf3_r.jpg?source=1940ef5c" data-actualsrc="https://pic1.zhimg.com/50/2b877556bd592b9a5299eff50b4ffcf3_hd.jpg?source=1940ef5c" /></figure><br /><p>视空间的顶点乘以这个矩阵之后被变换到齐次剪裁空间，并且w分量保存着视空间的z信息。</p><p>在齐次剪裁空间我们可以对顶点进行简单的裁剪，既将不在</p><p>-w &lt;= x &lt;= w</p><p>-w&lt;= y &lt;= w</p><p>0 &lt;= z &lt;= w</p><p>这个范围的顶点剔除掉，不进行渲染。</p><p>这里采用的是最简单粗暴的剪裁方法，更加复杂的剪裁还需要生成新的顶点，有很多可以深入挖掘的地方:)</p><p>Ps：为了方便后续的透视校正插值，程序中还将1/z 保存在顶点数据中。</p><strong>4、进行图元装配，也就是将顶点以一定的顺序组装成三角形（Primitive Assembly &amp;&amp; Trianglesetup ）</strong><p>本程序中使用了顶点索引的方式来组织顶点数据，并且约定以逆时针顺序组织的三角形的法线朝向屏幕外，换句话说就是逆时针顺序组织的三角形看起来是正面。</p><p>有了这个约定就可以进行背面消隐:</p><p><a href="https://link.zhihu.com/?target=http%3A//blog.csdn.net/cppyin/article/details/6207206" class=" wrap external" target="_blank" rel="nofollow noreferrer">从零实现3D图像引擎：(14)背面消隐的三大陷阱</a></p><strong>5、透视除法</strong><p>  对透视变换得到的含有深度信息(z)的齐次坐标做透视除法。所谓透视除法，<br />  就是把透视变换后的齐次坐标除以(z)。由于透视变换矩阵已经构造好了，当<br />  视锥体内部点经透视处理后的齐次坐标除以(z)后，使得顶点进入</p><p>-1&lt;= x &lt;= 1</p><p>-1&lt;= y &lt;= 1</p><p>0 &lt;= z &lt;= 1  (CVV正方体中)。<br /></p><strong>6、映射到视口</strong><p>将cvv正方体的顶点根据屏幕大小或者视口大小转换为屏幕坐标</p>二、光栅化阶段<br /><br /><strong>1、Rasterization光栅化</strong><p>光栅化决定哪些像素被几何图元覆盖的过程</p>1．1 如果选择线框模式，本程序使用的画线方法是<a href="https://link.zhihu.com/?target=http%3A//www.cnblogs.com/gamesky/archive/2012/08/21/2648623.html" class=" wrap external" target="_blank" rel="nofollow noreferrer">Bresenham快速画直线算法</a><p>相关资料：<a href="https://link.zhihu.com/?target=http%3A//www.cnblogs.com/gamesky/archive/2012/08/21/2648623.html" class=" wrap external" target="_blank" rel="nofollow noreferrer">Bresenham快速画直线算法</a></p>1．2顶点色模式和纹理模式<p>三角形光栅化算法：<a href="https://link.zhihu.com/?target=http%3A//blog.csdn.net/cppyin/article/details/6232453" class=" wrap external" target="_blank" rel="nofollow noreferrer">从零实现3D图像引擎：(15)三角形的光栅化</a></p><p>扫描线填充算法：<a href="https://link.zhihu.com/?target=http%3A//blog.csdn.net/cppyin/article/details/6172211" class=" wrap external" target="_blank" rel="nofollow noreferrer">从零实现3D图像引擎：(2)画2D直线不简单</a></p><p>光栅化过程当中，我们要对uv坐标，顶点颜色、我们保存在顶点信息中的1/z等信息进行透视校正插值：</p><p><a href="https://link.zhihu.com/?target=http%3A//blog.csdn.net/popy007/article/details/5570803" class=" wrap external" target="_blank" rel="nofollow noreferrer">深入探索透视纹理映射（下）</a></p><p>文章中的重要结论：</p><p>我们发现s/z、t/z和x’、y’也是线性关系。而我们之前知道1/z和x’、y’是线性关系。则我们得出新的思路：对1/z关于x’、y’插值得到1/z’，然后对s/z、t/z关于x’、y’进行插值得到s’/z’、t’/z’，然后用s’/z’和t’/z’分别除以1/z’，就得到了s’和t’。</p><p>这就是为什么我们要保存1/z的原因。</p><br /><strong>2、Pixel Operation 像素操作</strong>2.1消除遮挡面<p>根据zbuff  使用1/z来进行ztest，这样就不用给zbuff初始化一个很大的值了。</p>2.2 Texture operation 纹理操作，也就是根据像素的纹理坐标，查询对应的纹理值<p>纹理坐标的透视校正： <a href="https://link.zhihu.com/?target=http%3A//blog.csdn.net/popy007/article/details/5556639" class=" wrap external" target="_blank" rel="nofollow noreferrer">深入探索透视纹理映射（上）</a></p><p>纹理采样，双线性纹理过滤：<a href="https://link.zhihu.com/?target=http%3A//dev.gameres.com/Program/Visual/3D/Bilinear.htm" class=" wrap external" target="_blank" rel="nofollow noreferrer">纹理映射的双线性插值滤波</a></p><p><a href="https://link.zhihu.com/?target=http%3A//blog.csdn.net/i_dovelemon/article/details/27839279" class=" wrap external" target="_blank" rel="nofollow noreferrer">DirectX (9) 纹理映射</a></p>2.3 Blending<p>本程序暂时没有对alpha的处理，后面应该会更新</p>2.4：Filtering<p>相当于后处理，就是对即将写入framebuff（帧缓冲）的像素进行一些处理，本程序暂时没有添加。</p><p>经历了上面的步骤，把要渲染的像素写到framebuff中，再将framebuff渲染到屏幕上就完成了所有步骤（本程序简单的生成了一个bitmap来作为framebuff），这时你应该可以在屏幕上看到你所渲染的东西。如果看起来不太对，那么进入debug吧。一开始也许会觉得调试这样一个绘制流水线会无从下手，因为其中任何一步的偏差都会使最后的渲染发生错误。</p><p>请假了一些大神后找到了不错的调试方法，下面给出一些tips：</p><p>1、调试数学库，用笔算来验证结果的正确性</p><p>2、调试流水线，可以建立一个简单多边形，比如一个quad，用笔算来验证m、v、p三个矩阵的正确性。光栅化的阶段由于要进行插值，计算量比较大，建议使用心算和单步跟踪的方式来进行调试。</p><p>笔算的过程能让你更加了解背后的数学奥秘：）</p><p>最后要感谢一下@cppyin，@zdd， <span><span class="UserLink"><div class="Popover"><div id="Popover50-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover50-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/1e2c9261b85996ccc3c5436850127e33">@Milo Yip</a></div></div></span></span> ， <span><span class="UserLink"><div class="Popover"><div id="Popover51-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover51-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/225cbdbbfac26810c6b71ce96f55de2f">@韦易笑</a></div></div></span></span> 等大神的文章，给我很大帮助。</p><p>特别要推荐 <span><span class="UserLink"><div class="Popover"><div id="Popover52-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover52-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/225cbdbbfac26810c6b71ce96f55de2f">@韦易笑</a></div></div></span></span> 老师写的mini3D：<a href="https://link.zhihu.com/?target=http%3A//www.skywind.me/blog/archives/1498" class=" wrap external" target="_blank" rel="nofollow noreferrer">Skywind Inside</a>，让我受益匪浅。 </p></span></div><div><div class="ContentItem-time"><a target="_blank" href="//www.zhihu.com/question/24786878/answer/105988273"><span data-tooltip="发布于 2016-06-14 21:19">发布于 2016-06-14</span></a></div></div><div class="ContentItem-actions RichContent-actions"><span><button aria-label="赞同 298 " type="button" class="Button VoteButton VoteButton--up"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--TriangleUp VoteButton-TriangleUp" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M2 18.242c0-.326.088-.532.237-.896l7.98-13.203C10.572 3.57 11.086 3 12 3c.915 0 1.429.571 1.784 1.143l7.98 13.203c.15.364.236.57.236.896 0 1.386-.875 1.9-1.955 1.9H3.955c-1.08 0-1.955-.517-1.955-1.9z" fill-rule="evenodd"/></svg></span>赞同 298</button><button aria-label="反对" type="button" class="Button VoteButton VoteButton--down"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--TriangleDown" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M20.044 3H3.956C2.876 3 2 3.517 2 4.9c0 .326.087.533.236.896L10.216 19c.355.571.87 1.143 1.784 1.143s1.429-.572 1.784-1.143l7.98-13.204c.149-.363.236-.57.236-.896 0-1.386-.876-1.9-1.956-1.9z" fill-rule="evenodd"/></svg></span></button></span><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Comment Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z" fill-rule="evenodd"/></svg></span>25 条评论</button><div class="Popover ShareMenu ContentItem-action"><div class="ShareMenu-toggler" id="Popover20-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover20-content"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Share Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z" fill-rule="evenodd"/></svg></span>分享</button></div></div><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Star Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5.515 19.64l.918-5.355-3.89-3.792c-.926-.902-.639-1.784.64-1.97L8.56 7.74l2.404-4.871c.572-1.16 1.5-1.16 2.072 0L15.44 7.74l5.377.782c1.28.186 1.566 1.068.64 1.97l-3.89 3.793.918 5.354c.219 1.274-.532 1.82-1.676 1.218L12 18.33l-4.808 2.528c-1.145.602-1.896.056-1.677-1.218z" fill-rule="evenodd"/></svg></span>收藏</button><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Heart Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2 8.437C2 5.505 4.294 3.094 7.207 3 9.243 3 11.092 4.19 12 6c.823-1.758 2.649-3 4.651-3C19.545 3 22 5.507 22 8.432 22 16.24 13.842 21 12 21 10.158 21 2 16.24 2 8.437z" fill-rule="evenodd"/></svg></span>喜欢</button><div class="Popover ContentItem-action"><button aria-label="更多" id="Popover21-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover21-content" type="button" class="Button OptionsButton Button--plain Button--withIcon Button--iconOnly"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Dots Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z" fill-rule="evenodd"/></svg></span></button></div><button data-zop-retract-question="true" type="button" class="Button ContentItem-action ContentItem-rightButton Button--plain"><span class="RichContent-collapsedText">收起</span><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--ArrowDown ContentItem-arrowIcon is-active" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M12 13L8.285 9.218a.758.758 0 0 0-1.064 0 .738.738 0 0 0 0 1.052l4.249 4.512a.758.758 0 0 0 1.064 0l4.246-4.512a.738.738 0 0 0 0-1.052.757.757 0 0 0-1.063 0L12.002 13z" fill-rule="evenodd"/></svg></span></button></div></div><div class="ModalWrap"><div><div class=""></div><div class="ModalExp-content"><div class="ModalWrap-content"><div class="ModalWrap-title">继续浏览内容</div><div class="ModalWrap-item"><div class="ModalWrap-itemImg"><img src="https://pic4.zhimg.com/80/v2-88158afcff1e7f4b8b00a1ba81171b61_720w.png" /></div><div class="ModalWrap-itemContent"><div class="ModalWrap-itemTitle">知乎</div><div class="ModalWrap-itemDesc">发现更大的世界</div></div><div class="ModalWrap-itemBtn">打开</div></div><div class="ModalWrap-item"><div class="ModalWrap-itemImg"><img src="https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png" /></div><div class="ModalWrap-itemContent"><div class="ModalWrap-itemTitle">Chrome</div></div><div class="ModalWrap-itemBtn">继续</div></div></div></div></div></div><div><div><div class=""></div><div class="ModalLoading-content"><svg width="30" height="30" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg" class="CircleLoadingBar" aria-hidden="true"><g><circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"/></g></svg></div></div></div></div></div><div class="List-item" tabindex="0"><div class="ContentItem AnswerItem" data-za-index="4" data-zop="{&quot;authorName&quot;:&quot;Yong He&quot;,&quot;itemId&quot;:28971381,&quot;title&quot;:&quot;如何开始用 C++ 写一个光栅化渲染器？&quot;,&quot;type&quot;:&quot;answer&quot;}" name="28971381" itemprop="suggestedAnswer" itemtype="http://schema.org/Answer" itemscope="" data-za-detail-view-path-module="AnswerItem" data-za-detail-view-path-index="4" data-za-extra-module="{&quot;card&quot;:{&quot;has_image&quot;:false,&quot;has_video&quot;:false,&quot;content&quot;:{&quot;type&quot;:&quot;Answer&quot;,&quot;token&quot;:&quot;28971381&quot;,&quot;upvote_num&quot;:193,&quot;comment_num&quot;:8,&quot;publish_timestamp&quot;:null,&quot;parent_token&quot;:&quot;24786878&quot;,&quot;author_member_hash_id&quot;:&quot;661caec93ce34238ac0021669338cd42&quot;}}}"><div class="ContentItem-meta"><div class="AuthorInfo AnswerItem-authorInfo AnswerItem-authorInfo--related" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="name" content="Yong He" /><meta itemprop="image" content="https://pic1.zhimg.com/96d0231cc_l.jpg?source=1940ef5c" /><meta itemprop="url" content="https://www.zhihu.com/people/yong-he-8" /><meta itemprop="zhihu:followerCount" content="34676" /><span class="UserLink AuthorInfo-avatarWrapper"><div class="Popover"><div id="Popover44-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover44-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/yong-he-8"><img class="Avatar AuthorInfo-avatar" width="38" height="38" src="https://pic1.zhimg.com/96d0231cc_xs.jpg?source=1940ef5c" srcset="https://pic1.zhimg.com/96d0231cc_l.jpg?source=1940ef5c 2x" alt="Yong He" /></a></div></div></span><div class="AuthorInfo-content"><div class="AuthorInfo-head"><span class="UserLink AuthorInfo-name"><div class="Popover"><div id="Popover45-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover45-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/yong-he-8">Yong He</a></div></div><a href="https://www.zhihu.com/topic/20054793" target="_blank" class="css-n99yhz" aria-label="计算机图形学话题下的优秀答主" data-tooltip="计算机图形学话题下的优秀答主"><span class="css-g9eqf4-StrutAlign">​<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="css-svsrxm-Octangle" width="18" height="18"><svg viewBox="0 0 24 24" x="-3" y="-3" fill="#FFFFFF" width="30" height="30"><path d="M3.56231227,13.8535307 C2.40051305,12.768677 2.41398885,11.0669203 3.59484487,9.99979213 L3.59222085,9.99654885 C4.26730143,9.45036719 4.79446755,8.21005186 4.7184197,7.34453784 L4.72305873,7.34412719 C4.66942824,5.75539997 5.8824188,4.56066914 7.47188965,4.64242381 L7.47229112,4.6386236 C8.33515314,4.72977993 9.58467253,4.22534048 10.1426329,3.55925173 L10.1462611,3.56228565 C11.2316055,2.40008701 12.9353108,2.41394456 14.0015072,3.59634088 L14.0047263,3.59374004 C14.5498229,4.26841874 15.7896857,4.79521622 16.6545744,4.71844347 L16.6549836,4.72304294 C18.245027,4.66894057 19.4396947,5.88213996 19.3575031,7.47241135 L19.3623099,7.47292747 C19.2704388,8.3358681 19.7742711,9.58421483 20.4407199,10.1424506 L20.437686,10.1460789 C21.5997217,11.2312209 21.5860695,12.9345218 20.4042441,14.0007396 L20.4072865,14.0045125 C19.7325967,14.5495925 19.2055209,15.7896954 19.2815865,16.6561959 L19.2770449,16.6565978 C19.3315454,18.2453037 18.1173775,19.4393568 16.5274188,19.3571512 L16.5269029,19.3619539 C15.6647098,19.270083 14.415408,19.7741709 13.8573671,20.4403558 L13.8537409,20.4373235 C12.76842,21.5995708 11.0650432,21.5864553 9.99899434,20.4039226 L9.99527367,20.406923 C9.45025436,19.7323399 8.21017638,19.2051872 7.34461983,19.2812352 L7.344304,19.2776405 C5.75448683,19.3312904 4.55977145,18.1170085 4.64254978,16.527117 L4.63769921,16.5265942 C4.72957031,15.6644394 4.22547659,14.4151814 3.55928015,13.8571569 L3.56231227,13.8535307 Z"/></svg><path d="M2.63951518,13.3895441 C3.70763333,14.2842292 4.44777637,16.1226061 4.30075305,17.5023312 L4.32211542,17.3063047 C4.17509209,18.6910561 5.17786655,19.7063729 6.5613937,19.5844846 L6.364106,19.6008202 C7.75140298,19.4789319 9.57474349,20.2554985 10.4468305,21.3349009 L10.3224262,21.1803415 C11.1982831,22.2647703 12.6257916,22.2723098 13.5167278,21.2079863 L13.3898102,21.3600325 C14.2845162,20.2919393 16.1229361,19.5518136 17.5026934,19.6988334 L17.3054057,19.6774716 C18.6914461,19.8244915 19.7067866,18.8217404 19.5836389,17.4395022 L19.6012314,17.6367853 C19.4793403,16.2482641 20.255925,14.4249662 21.3353526,13.5528995 L21.1807897,13.677301 C22.2639871,12.8014646 22.2727834,11.3739894 21.2084351,10.483074 L21.3604848,10.6099886 C20.2923667,9.71530351 19.5522236,7.87818322 19.6992469,6.49720154 L19.6778846,6.69448464 C19.8249079,5.30847665 18.8221335,4.2944164 17.4386063,4.41630468 L17.635894,4.39871256 C16.248597,4.52185742 14.4252565,3.74529084 13.5531695,2.66588842 L13.6775738,2.81919121 C12.8017169,1.73601905 11.3742084,1.72722299 10.4832722,2.79154644 L10.6101898,2.63950024 C9.71548377,3.70759343 7.87706394,4.44771919 6.49730661,4.30195588 L6.69459432,4.32206116 C5.30855394,4.17504128 4.29447,5.17904888 4.41636114,6.56128713 L4.3987686,6.36400404 C4.52065973,7.75126861 3.74407501,9.57456653 2.66464737,10.4478898 L2.81921035,10.3222318 C1.73601288,11.1993248 1.72721662,12.6255433 2.79156494,13.5164587 L2.63951518,13.3895441 Z" fill="#FF9607"/><svg class="Zi Zi--Star" fill="#fff" x="6" y="6" viewBox="0 0 24 24" width="12" height="12"><path d="M5.515 19.64l.918-5.355-3.89-3.792c-.926-.902-.639-1.784.64-1.97L8.56 7.74l2.404-4.871c.572-1.16 1.5-1.16 2.072 0L15.44 7.74l5.377.782c1.28.186 1.566 1.068.64 1.97l-3.89 3.793.918 5.354c.219 1.274-.532 1.82-1.676 1.218L12 18.33l-4.808 2.528c-1.145.602-1.896.056-1.677-1.218z" fill-rule="evenodd"/></svg></svg></span></a></span></div><div class="AuthorInfo-detail"><div class="AuthorInfo-badge"><div class="ztext AuthorInfo-badgeText">计算机图形学话题下的优秀答主</div></div></div></div></div><div class="LabelContainer-wrapper"></div><div class="css-h5al4j"><span><span class="Voters"><button type="button" class="Button Button--plain">193 人赞同了该回答</button></span></span></div></div><meta itemprop="image" /><meta itemprop="upvoteCount" content="193" /><meta itemprop="url" content="https://www.zhihu.com/question/24786878/answer/28971381" /><meta itemprop="dateCreated" content="2014-08-09T02:59:58.000Z" /><meta itemprop="dateModified" content="2014-08-09T03:05:43.000Z" /><meta itemprop="commentCount" content="8" /><div class="RichContent RichContent--unescapable"><div class="RichContent-inner"><span class="RichText ztext CopyrightRichText-richText" itemprop="text"><p>感谢邀请，这个问题还是要回答一下。我假设你已经知道了图形学的一些基本原理。</p><p>首先，看<strong> Michael Abrash</strong> 的经典文章<a href="https://link.zhihu.com/?target=https%3A//software.intel.com/en-us/articles/rasterization-on-larrabee" class=" wrap external" target="_blank" rel="nofollow noreferrer">Rasterization on Larrabee</a><br />这里讲解了如何实现robust和高效的软件光栅化。</p><p>但光栅化渲染器除了光栅化，还有很多东西。首先需要熟悉Direct3D或者OpenGL API, 这样你就大致知道要实现哪些功能了。如果不追求性能，总体上还是容易的：按照渲染管线一步一步实现即可。首先拿到场景输入(格式参见OpenGL，也即一个vertex buffer, index buffer)，设定好FrameBuffer，然后按照index buffer读三角形，查找顶点，运行Vertex Shader，Vertex Shading的结果可以用一个cache缓存起来以复用。运行完Vertex Shader就有了投影后的三角形坐标，这个时候进行裁剪（裁剪是为了让光栅化过程能高效地进行），然后进行光栅化。</p><p>光栅化后，对每个三角形所覆盖的所有2x2 pixel block，你可以计算出这个像素中心对应的三角形的重心坐标，用重心坐标插值得到pixel shader的输入，然后运行pixel shader。同时对2x2的pixel block进行pixel shading可以保证你能够得到屏幕空间的导数，这样就能用来做纹理过滤了。最后就是进行z-test并且把像素颜色写进FrameBuffer。对所有三角形执行上述步骤就完成了基本的渲染流程。</p><p>值得一提的是rasterization renderer有很多的优化。例如hi-Z, pre-Z, tiled rendering等。在把基本的流程打通一遍之后，可以再写一遍然后试图实现所有的这些优化。</p>另，实现渲染器跟操作系统没太大关系，不过为了成就感，还是建议在熟悉的系统下搞个窗口应用程序吧。因为你实现的好的话，渲染器是可以实时渲染一些场景的，会更有乐趣。</span></div><div><div class="ContentItem-time"><a target="_blank" href="//www.zhihu.com/question/24786878/answer/28971381"><span data-tooltip="发布于 2014-08-09 10:59">编辑于 2014-08-09</span></a></div></div><div class="ContentItem-actions RichContent-actions"><span><button aria-label="赞同 193 " type="button" class="Button VoteButton VoteButton--up"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--TriangleUp VoteButton-TriangleUp" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M2 18.242c0-.326.088-.532.237-.896l7.98-13.203C10.572 3.57 11.086 3 12 3c.915 0 1.429.571 1.784 1.143l7.98 13.203c.15.364.236.57.236.896 0 1.386-.875 1.9-1.955 1.9H3.955c-1.08 0-1.955-.517-1.955-1.9z" fill-rule="evenodd"/></svg></span>赞同 193</button><button aria-label="反对" type="button" class="Button VoteButton VoteButton--down"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--TriangleDown" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M20.044 3H3.956C2.876 3 2 3.517 2 4.9c0 .326.087.533.236.896L10.216 19c.355.571.87 1.143 1.784 1.143s1.429-.572 1.784-1.143l7.98-13.204c.149-.363.236-.57.236-.896 0-1.386-.876-1.9-1.956-1.9z" fill-rule="evenodd"/></svg></span></button></span><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Comment Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z" fill-rule="evenodd"/></svg></span>8 条评论</button><div class="Popover ShareMenu ContentItem-action"><div class="ShareMenu-toggler" id="Popover22-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover22-content"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Share Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z" fill-rule="evenodd"/></svg></span>分享</button></div></div><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Star Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5.515 19.64l.918-5.355-3.89-3.792c-.926-.902-.639-1.784.64-1.97L8.56 7.74l2.404-4.871c.572-1.16 1.5-1.16 2.072 0L15.44 7.74l5.377.782c1.28.186 1.566 1.068.64 1.97l-3.89 3.793.918 5.354c.219 1.274-.532 1.82-1.676 1.218L12 18.33l-4.808 2.528c-1.145.602-1.896.056-1.677-1.218z" fill-rule="evenodd"/></svg></span>收藏</button><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Heart Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2 8.437C2 5.505 4.294 3.094 7.207 3 9.243 3 11.092 4.19 12 6c.823-1.758 2.649-3 4.651-3C19.545 3 22 5.507 22 8.432 22 16.24 13.842 21 12 21 10.158 21 2 16.24 2 8.437z" fill-rule="evenodd"/></svg></span>喜欢</button><div class="Popover ContentItem-action"><button aria-label="更多" id="Popover23-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover23-content" type="button" class="Button OptionsButton Button--plain Button--withIcon Button--iconOnly"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Dots Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z" fill-rule="evenodd"/></svg></span></button></div><button data-zop-retract-question="true" type="button" class="Button ContentItem-action ContentItem-rightButton Button--plain"><span class="RichContent-collapsedText">收起</span><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--ArrowDown ContentItem-arrowIcon is-active" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M12 13L8.285 9.218a.758.758 0 0 0-1.064 0 .738.738 0 0 0 0 1.052l4.249 4.512a.758.758 0 0 0 1.064 0l4.246-4.512a.738.738 0 0 0 0-1.052.757.757 0 0 0-1.063 0L12.002 13z" fill-rule="evenodd"/></svg></span></button></div></div><div class="ModalWrap"><div><div class=""></div><div class="ModalExp-content"><div class="ModalWrap-content"><div class="ModalWrap-title">继续浏览内容</div><div class="ModalWrap-item"><div class="ModalWrap-itemImg"><img src="https://pic4.zhimg.com/80/v2-88158afcff1e7f4b8b00a1ba81171b61_720w.png" /></div><div class="ModalWrap-itemContent"><div class="ModalWrap-itemTitle">知乎</div><div class="ModalWrap-itemDesc">发现更大的世界</div></div><div class="ModalWrap-itemBtn">打开</div></div><div class="ModalWrap-item"><div class="ModalWrap-itemImg"><img src="https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png" /></div><div class="ModalWrap-itemContent"><div class="ModalWrap-itemTitle">Chrome</div></div><div class="ModalWrap-itemBtn">继续</div></div></div></div></div></div><div><div><div class=""></div><div class="ModalLoading-content"><svg width="30" height="30" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg" class="CircleLoadingBar" aria-hidden="true"><g><circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"/></g></svg></div></div></div></div></div><div></div></div></div></div></div></div></div></div></div><div class="Question-sideColumn Question-sideColumn--sticky" data-za-detail-view-path-module="RightSideBar" data-za-extra-module="{}"><div><div class="Sticky"><div class="Card"><div class="Pc-card Card"><a class="Banner-link" href="https://aws.amazon.com/cn/campaigns/mig-credit-contact-us-mac-instance-ext/?trk=ba_a134p0000078TIcAAM&amp;trkCampaign=macos&amp;sc_channel=ba&amp;sc_campaign=zhihu&amp;sc_outcome=Acquisition&amp;sc_geo=CHNA&amp;sc_country=CN&amp;sc_publisher=Others" target="_blank"><div class="Banner-adTag">广告</div><img class="Banner-image" src="https://pic1.zhimg.com/v2-bc73eb800cb9103abf71770936f6539c_540x450.jpeg" alt="广告" /></a><div class="Pc-card-button-close " data-tooltip="不再显示" data-tooltip-position="bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" class="Icon Icon--close Pc-card-button-close-svg "><path fill-rule="evenodd" d="M3 2L2 3l3 3-3 3 1 1 3-3 3 3 1-1-3-3 3-3-1-1-3 3"/></svg></div></div></div><div class="Card" data-za-detail-view-path-module="RelatedQuestions" data-za-extra-module="{}"><div class="Card-header SimilarQuestions-title"><div class="Card-headerText">相关问题</div></div><div class="Card-section SimilarQuestions-list"><div class="SimilarQuestions-item" itemprop="zhihu:similarQuestion" itemtype="http://schema.org/Question" itemscope="" data-za-detail-view-path-module="QuestionItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Question&quot;,&quot;token&quot;:&quot;29182519&quot;}}}"><meta itemprop="name" content="理论计算机图形渲染技术是否已经到了没有什么可以研究的地步了？" /><meta itemprop="url" content="https://www.zhihu.com/question/29182519" /><meta itemprop="answerCount" content="14" /><meta itemprop="zhihu:followerCount" content="1732" /><a target="_blank" type="button" class="Button Button--plain" href="/question/29182519">理论计算机图形渲染技术是否已经到了没有什么可以研究的地步了？</a> 14 个回答</div><div class="SimilarQuestions-item" itemprop="zhihu:similarQuestion" itemtype="http://schema.org/Question" itemscope="" data-za-detail-view-path-module="QuestionItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Question&quot;,&quot;token&quot;:&quot;30810317&quot;}}}"><meta itemprop="name" content="手游程序员想学习图形学知识，图形学、GL/DX、Shader这些有什么合适的学习顺序吗？" /><meta itemprop="url" content="https://www.zhihu.com/question/30810317" /><meta itemprop="answerCount" content="5" /><meta itemprop="zhihu:followerCount" content="272" /><a target="_blank" type="button" class="Button Button--plain" href="/question/30810317">手游程序员想学习图形学知识，图形学、GL/DX、Shader这些有什么合适的学习顺序吗？</a> 5 个回答</div><div class="SimilarQuestions-item" itemprop="zhihu:similarQuestion" itemtype="http://schema.org/Question" itemscope="" data-za-detail-view-path-module="QuestionItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Question&quot;,&quot;token&quot;:&quot;23192307&quot;}}}"><meta itemprop="name" content="没有程序与图形学基础的情况下，如何循序渐进学习理解一个渲染器，以及相关专业知识？" /><meta itemprop="url" content="https://www.zhihu.com/question/23192307" /><meta itemprop="answerCount" content="11" /><meta itemprop="zhihu:followerCount" content="214" /><a target="_blank" type="button" class="Button Button--plain" href="/question/23192307">没有程序与图形学基础的情况下，如何循序渐进学习理解一个渲染器，以及相关专业知识？</a> 11 个回答</div><div class="SimilarQuestions-item" itemprop="zhihu:similarQuestion" itemtype="http://schema.org/Question" itemscope="" data-za-detail-view-path-module="QuestionItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Question&quot;,&quot;token&quot;:&quot;66848391&quot;}}}"><meta itemprop="name" content="计算机图形学，GPU，OpenGL，Unity3D什么关系？" /><meta itemprop="url" content="https://www.zhihu.com/question/66848391" /><meta itemprop="answerCount" content="8" /><meta itemprop="zhihu:followerCount" content="138" /><a target="_blank" type="button" class="Button Button--plain" href="/question/66848391">计算机图形学，GPU，OpenGL，Unity3D什么关系？</a> 8 个回答</div><div class="SimilarQuestions-item" itemprop="zhihu:similarQuestion" itemtype="http://schema.org/Question" itemscope="" data-za-detail-view-path-module="QuestionItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Question&quot;,&quot;token&quot;:&quot;272061658&quot;}}}"><meta itemprop="name" content="做unity游戏开发算法数据结构和图形学shader哪个学习的优先级高呢？" /><meta itemprop="url" content="https://www.zhihu.com/question/272061658" /><meta itemprop="answerCount" content="13" /><meta itemprop="zhihu:followerCount" content="96" /><a target="_blank" type="button" class="Button Button--plain" href="/question/272061658">做unity游戏开发算法数据结构和图形学shader哪个学习的优先级高呢？</a> 13 个回答</div></div></div><div class="Card" data-za-detail-view-path-module="ContentList" data-za-detail-view-path-module_name="相关推荐" data-za-extra-module="{}"><div class="Card-header RelatedCommodities-title"><div class="Card-headerText">相关推荐</div></div><div class="Card-section RelatedCommodities-list"><a target="_blank" href="/pub/book/119898722" type="button" class="Button RelatedCommodities-item Button--plain" data-za-detail-view-path-module="EBookItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;EBook&quot;,&quot;token&quot;:&quot;119898722&quot;}}}"><img class="RelatedCommodities-image" src="https://pic1.zhimg.com/90/v2-c6c13202216168c8be646368c2028295_250x0.jpg?source=31184dd1" alt="live" /><div class="RelatedCommodities-content"><div class="RelatedCommodities-subject RelatedCommodities-subject-two" data-tooltip="计算机图形学编程（使用 OpenGL 和 C++）">计算机图形学编程（使用 OpenGL 和 C++）</div><div class="RelatedCommodities-meta"><div class="RelatedCommodities-bookMeta">255 人读过<span class="RelatedCommodities-bookRead"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Ebook" width="13" height="14" fill="currentColor" viewBox="0 0 24 24"><path d="M16 17.649V2.931a.921.921 0 0 0-.045-.283.943.943 0 0 0-1.182-.604L4.655 5.235A.932.932 0 0 0 4 6.122v14.947c0 .514.421.931.941.931H19.06c.52 0 .941-.417.941-.93V7.292a.936.936 0 0 0-.941-.931h-.773v12.834a.934.934 0 0 1-.83.924L6.464 21.416c-.02.002 2.94-.958 8.883-2.881a.932.932 0 0 0 .653-.886z" fill-rule="evenodd"/></svg></span>阅读</span></div></div></div></a><a target="_blank" href="/pub/book/119975718" type="button" class="Button RelatedCommodities-item Button--plain" data-za-detail-view-path-module="EBookItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;EBook&quot;,&quot;token&quot;:&quot;119975718&quot;}}}"><img class="RelatedCommodities-image" src="https://pic1.zhimg.com/90/v2-4e42412a395b945766ca13481d346465_250x0.jpg?source=31184dd1" alt="live" /><div class="RelatedCommodities-content"><div class="RelatedCommodities-subject" data-tooltip="三维图像编程实验">三维图像编程实验</div><div class="RelatedCommodities-description">周振环 郑小中 赵明编著</div><div class="RelatedCommodities-meta"><div class="RelatedCommodities-bookMeta">5 人读过<span class="RelatedCommodities-bookRead"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Ebook" width="13" height="14" fill="currentColor" viewBox="0 0 24 24"><path d="M16 17.649V2.931a.921.921 0 0 0-.045-.283.943.943 0 0 0-1.182-.604L4.655 5.235A.932.932 0 0 0 4 6.122v14.947c0 .514.421.931.941.931H19.06c.52 0 .941-.417.941-.93V7.292a.936.936 0 0 0-.941-.931h-.773v12.834a.934.934 0 0 1-.83.924L6.464 21.416c-.02.002 2.94-.958 8.883-2.881a.932.932 0 0 0 .653-.886z" fill-rule="evenodd"/></svg></span>阅读</span></div></div></div></a><a target="_blank" href="/pub/book/119630387" type="button" class="Button RelatedCommodities-item Button--plain" data-za-detail-view-path-module="EBookItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;EBook&quot;,&quot;token&quot;:&quot;119630387&quot;}}}"><img class="RelatedCommodities-image" src="https://pic1.zhimg.com/90/v2-d3de325e0bc492d895e3b046d35082fc_250x0.jpg?source=31184dd1" alt="live" /><div class="RelatedCommodities-content"><div class="RelatedCommodities-subject RelatedCommodities-subject-two" data-tooltip="Unity 2017 经典游戏开发教程：算法分析与实现">Unity 2017 经典游戏开发教程：算法分析与实现</div><div class="RelatedCommodities-meta"><div class="RelatedCommodities-bookMeta">54 人读过<span class="RelatedCommodities-bookRead"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Ebook" width="13" height="14" fill="currentColor" viewBox="0 0 24 24"><path d="M16 17.649V2.931a.921.921 0 0 0-.045-.283.943.943 0 0 0-1.182-.604L4.655 5.235A.932.932 0 0 0 4 6.122v14.947c0 .514.421.931.941.931H19.06c.52 0 .941-.417.941-.93V7.292a.936.936 0 0 0-.941-.931h-.773v12.834a.934.934 0 0 1-.83.924L6.464 21.416c-.02.002 2.94-.958 8.883-2.881a.932.932 0 0 0 .653-.886z" fill-rule="evenodd"/></svg></span>阅读</span></div></div></div></a></div></div><div class="Card"><div class="Pc-card Card"><a class="Banner-link" href="https://www.ueeshop.com/?f=zhihu&amp;k=2" target="_blank"><div class="Banner-adTag">广告</div><img class="Banner-image" src="https://pic1.zhimg.com/v2-095e4416d6862ef636596807644b2d28_540x450.jpeg" alt="广告" /></a><div class="Pc-card-button-close " data-tooltip="不再显示" data-tooltip-position="bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" class="Icon Icon--close Pc-card-button-close-svg "><path fill-rule="evenodd" d="M3 2L2 3l3 3-3 3 1 1 3-3 3 3 1-1-3-3 3-3-1-1-3 3"/></svg></div></div></div><footer class="Footer"><a class="Footer-item" target="_blank" rel="noopener noreferrer" href="//liukanshan.zhihu.com/">刘看山</a><span class="Footer-dot"></span><a class="Footer-item" target="_blank" rel="noopener noreferrer" href="/question/19581624">知乎指南</a><span class="Footer-dot"></span><a class="Footer-item" target="_blank" rel="noopener noreferrer" href="/term/zhihu-terms">知乎协议</a><span class="Footer-dot"></span><a class="Footer-item" target="_blank" rel="noopener noreferrer" href="/term/privacy">知乎隐私保护指引</a><br /><a class="Footer-item" target="_blank" href="/app">应用</a><span class="Footer-dot"></span><a class="Footer-item" target="_blank" rel="noopener noreferrer" href="https://app.mokahr.com/apply/zhihu">工作</a><span class="Footer-dot"></span><button type="button" class="Button OrgCreateButton">申请开通知乎机构号</button><br /><a class="Footer-item" target="_blank" rel="noopener noreferrer" href="https://zhuanlan.zhihu.com/p/28852607">侵权举报</a><span class="Footer-dot"></span><a class="Footer-item" target="_blank" rel="noopener noreferrer" href="http://www.12377.cn">网上有害信息举报专区</a><br /><a class="Footer-item" target="_blank" rel="noopener noreferrer" href="https://tsm.miit.gov.cn/dxxzsp/">京 ICP 证 110745 号</a><br /><a class="Footer-item" target="_blank" rel="noopener noreferrer" href="https://beian.miit.gov.cn/">京 ICP 备 13052560 号 - 1</a><br /><a class="Footer-item" target="_blank" rel="noopener noreferrer" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010802020088"><img src="https://pic3.zhimg.com/80/v2-d0289dc0a46fc5b15b3363ffa78cf6c7.png" />京公网安备 11010802020088 号</a><br /><span class="Footer-item">互联网药品信息服务资格证书<br />（京）- 非经营性 - 2017 - 0067</span><span class="Footer-item">违法和不良信息举报：010-82716601</span><br /><a class="Footer-item" target="_blank" href="/term/child-jubao">儿童色情信息举报专区</a><br /><a class="Footer-item" target="_blank" href="/certificates">证照中心</a><span class="Footer-dot"></span><a class="Footer-item" target="_blank" rel="noopener noreferrer" href="//ir.zhihu.com">Investor Relations</a><br /><a class="Footer-item" target="_blank" href="/contact">联系我们</a><span> © 2021 知乎</span></footer></div></div></div></div></div></main><div data-zop-usertoken="{&quot;urlToken&quot;:&quot;yangquanhai&quot;}"></div><div class="CornerButtons"><div class="CornerAnimayedFlex CornerAnimayedFlex--hidden"><button data-tooltip="回到顶部" data-tooltip-position="left" data-tooltip-will-hide-on-click="true" aria-label="回到顶部" type="button" class="Button CornerButton Button--plain"><svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--BackToTop" aria-label="回到顶部" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M16.036 19.59a1 1 0 0 1-.997.995H9.032a.996.996 0 0 1-.997-.996v-7.005H5.03c-1.1 0-1.36-.633-.578-1.416L11.33 4.29a1.003 1.003 0 0 1 1.412 0l6.878 6.88c.782.78.523 1.415-.58 1.415h-3.004v7.005z"/></svg></button></div></div></div></div><script id="js-clientConfig" type="text/json">{"host":"zhihu.com","protocol":"https:","wwwHost":"www.zhihu.com","videoHost":"video.zhihu.com","fetchRoot":{"www":"https:\u002F\u002Fwww.zhihu.com","api":"https:\u002F\u002Fapi.zhihu.com","lens":"https:\u002F\u002Flens.zhihu.com","zhuanlan":"https:\u002F\u002Fzhuanlan.zhihu.com","walletpay":"https:\u002F\u002Fwalletpay.zhihu.com","captcha":"https:\u002F\u002Fcaptcha.zhihu.com"}}</script><script id="js-initialData" type="text/json">{"initialState":{"common":{"ask":{}},"loading":{"global":{"count":0},"local":{"question\u002Fget\u002F":false,"question\u002FgetAnswers\u002F24786878":false}},"club":{"tags":{},"admins":{"data":[]},"members":{"data":[]},"explore":{"candidateSyncClubs":{}},"profile":{},"checkin":{},"comments":{"paging":{},"loading":{},"meta":{},"ids":{}},"postList":{"paging":{},"loading":{},"ids":{}},"recommend":{"data":[]},"silences":{"data":[]},"application":{"profile":null}},"entities":{"users":{"5b6cbee5d01bbbae90228c8baf07c3aa":{"uid":615253332370133000,"userType":"people","id":"5b6cbee5d01bbbae90228c8baf07c3aa"}},"questions":{"24786878":{"type":"question","id":24786878,"title":"如何开始用 C++ 写一个光栅化渲染器？","questionType":"normal","created":1407548626,"updatedTime":1407741745,"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fquestions\u002F24786878","isMuted":false,"isVisible":true,"isNormal":true,"isEditable":false,"adminClosedComment":false,"hasPublishingDraft":false,"answerCount":41,"visitCount":447393,"commentCount":1,"followerCount":4191,"collapsedAnswerCount":0,"excerpt":"题主有一些基本的编程技能（.c# )，但是对内存和底层的知识并不熟悉，其余还有一些基本的图形学知识，也远远没有到GPU架构的那一层次，所以想利用业余时间用C++做一个光栅渲染器，可能会花很多时间，但愿意一点一点来，所以提问一下各位大神 1 在OSX 玩的不是很熟的情况下，是不是只能在windows的编程环境下去做这个事情？ 2 有哪些必看的书籍推荐？ 3 从哪里开始着手？","commentPermission":"all","detail":"题主有一些基本的编程技能（.c# )，但是对内存和底层的知识并不熟悉，其余还有一些基本的图形学知识，也远远没有到GPU架构的那一层次，所以想利用业余时间用C++做一个光栅渲染器，可能会花很多时间，但愿意一点一点来，所以提问一下各位大神\u003Cbr\u002F\u003E1 在OSX 玩的不是很熟的情况下，是不是只能在windows的编程环境下去做这个事情？\u003Cbr\u002F\u003E2 有哪些必看的书籍推荐？\u003Cbr\u002F\u003E3 从哪里开始着手？","editableDetail":"题主有一些基本的编程技能（.c# )，但是对内存和底层的知识并不熟悉，其余还有一些基本的图形学知识，也远远没有到GPU架构的那一层次，所以想利用业余时间用C++做一个光栅渲染器，可能会花很多时间，但愿意一点一点来，所以提问一下各位大神\u003Cbr\u003E1 在OSX 玩的不是很熟的情况下，是不是只能在windows的编程环境下去做这个事情？\u003Cbr\u003E2 有哪些必看的书籍推荐？\u003Cbr\u003E3 从哪里开始着手？","status":{"isLocked":false,"isClose":false,"isEvaluate":false,"isSuggest":false},"relationship":{"isAuthor":false,"isFollowing":false,"isAnonymous":false,"canLock":false,"canStickAnswers":false,"canCollapseAnswers":false,"voting":0},"topics":[{"id":"19553361","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19553361","name":"游戏开发","avatarUrl":"https:\u002F\u002Fpic1.zhimg.com\u002F130887c7689dc9631634a26a5f3df106_l.jpg?source=1940ef5c","topicType":"CHANNEL"},{"id":"19556258","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19556258","name":"游戏引擎","avatarUrl":"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-02d0f71bb74437bbabd519a1d300e209_720w.jpg?source=54b3c3a5","topicType":"NORMAL"},{"id":"19580349","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19580349","name":"计算机科学","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002F50\u002Fv2-5e706b9bf3415cd7c0ffd4eb1e1cba2d_720w.jpg?source=54b3c3a5","topicType":"CHANNEL"},{"id":"19584970","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19584970","name":"C++","avatarUrl":"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-e5f8ab95c0e99a29704fae7e629f9f77_720w.jpg?source=54b3c3a5","topicType":"CHANNEL"},{"id":"19613730","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19613730","name":"计算机图形学","avatarUrl":"https:\u002F\u002Fpic1.zhimg.com\u002F95b86ea8b502d9aef1b13f621bba2ef3_l.jpg?source=1940ef5c","topicType":"NORMAL"}],"author":{"id":"2b562a8e23b8c61c4ecd79f39e90bb00","urlToken":"hd-coder","name":"腊肉寒冬","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-96c85f2a721567dc7f328a68ef59fbf9_l.jpg?source=1940ef5c","avatarUrlTemplate":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-96c85f2a721567dc7f328a68ef59fbf9.jpg?source=1940ef5c","isOrg":false,"type":"people","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fpeople\u002F2b562a8e23b8c61c4ecd79f39e90bb00","userType":"people","headline":"兵马未动，粮草先行。","badge":[],"badgeV2":{"title":"","mergedBadges":[],"detailBadges":[],"icon":"","nightIcon":""},"gender":1,"isAdvertiser":false,"isPrivacy":false},"canComment":{"status":true,"reason":""},"thumbnailInfo":{"count":0,"type":"thumbnail_info","thumbnails":[]},"reviewInfo":{"type":"","tips":"","editTips":"","isReviewing":false,"editIsReviewing":false},"relatedCards":[],"muteInfo":{"type":""},"showAuthor":false,"isLabeled":false,"showEncourageAuthor":false,"voteupCount":68,"canVote":true,"visibleOnlyToAuthor":false}},"answers":{"28971381":{"id":28971381,"type":"answer","answerType":"normal","question":{"type":"question","id":24786878,"title":"如何开始用 C++ 写一个光栅化渲染器？","questionType":"normal","created":1407548626,"updatedTime":1407741745,"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fquestions\u002F24786878","relationship":{}},"author":{"id":"661caec93ce34238ac0021669338cd42","urlToken":"yong-he-8","name":"Yong He","avatarUrl":"https:\u002F\u002Fpic1.zhimg.com\u002F96d0231cc_l.jpg?source=1940ef5c","avatarUrlTemplate":"https:\u002F\u002Fpic1.zhimg.com\u002F96d0231cc.jpg?source=1940ef5c","isOrg":false,"type":"people","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fpeople\u002F661caec93ce34238ac0021669338cd42","userType":"people","headline":"CS PhD student","badge":[{"type":"best_answerer","description":"优秀答主","topics":[{"id":"19613730","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19613730","name":"计算机图形学","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002F95b86ea8b502d9aef1b13f621bba2ef3_l.jpg?source=1940ef5c","topicType":"NORMAL"}]}],"badgeV2":{"title":"计算机图形学话题下的优秀答主","mergedBadges":[{"type":"best","detailType":"best","title":"优秀答主","description":"计算机图形学话题下的优秀答主","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F20054793","sources":[{"id":"19613730","token":"19613730","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19613730","name":"计算机图形学","avatarPath":"95b86ea8b502d9aef1b13f621bba2ef3","avatarUrl":"https:\u002F\u002Fpic3.zhimg.com\u002F95b86ea8b502d9aef1b13f621bba2ef3_hd.jpg","description":"","priority":0}],"icon":"","nightIcon":""}],"detailBadges":[{"type":"best","detailType":"best_answerer","title":"优秀答主","description":"计算机图形学话题下的优秀答主","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F20054793","sources":[{"id":"19613730","token":"19613730","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19613730","name":"计算机图形学","avatarPath":"95b86ea8b502d9aef1b13f621bba2ef3","avatarUrl":"https:\u002F\u002Fpic3.zhimg.com\u002F95b86ea8b502d9aef1b13f621bba2ef3_hd.jpg","description":"","priority":0}],"icon":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-bf0eec3c31c8e866c468f60eb296696c_l.png","nightIcon":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-c724649168d8f9d36d7c3d13140a2594_l.png"}],"icon":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-bf0eec3c31c8e866c468f60eb296696c_l.png","nightIcon":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-c724649168d8f9d36d7c3d13140a2594_l.png"},"gender":1,"isAdvertiser":false,"followerCount":34676,"isFollowed":false,"isPrivacy":false},"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fanswers\u002F28971381","isCollapsed":false,"createdTime":1407553198,"updatedTime":1407553543,"extras":"","isCopyable":true,"isNormal":true,"voteupCount":193,"commentCount":8,"isSticky":false,"adminClosedComment":false,"commentPermission":"all","canComment":{"reason":"","status":true},"reshipmentSettings":"allowed","content":"感谢邀请，这个问题还是要回答一下。我假设你已经知道了图形学的一些基本原理。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E首先，看\u003Cstrong\u003E Michael Abrash\u003C\u002Fstrong\u003E 的经典文章\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fsoftware.intel.com\u002Fen-us\u002Farticles\u002Frasterization-on-larrabee\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003ERasterization on Larrabee\u003C\u002Fa\u003E\u003Cbr\u002F\u003E这里讲解了如何实现robust和高效的软件光栅化。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E但光栅化渲染器除了光栅化，还有很多东西。首先需要熟悉Direct3D或者OpenGL API, 这样你就大致知道要实现哪些功能了。如果不追求性能，总体上还是容易的：按照渲染管线一步一步实现即可。首先拿到场景输入(格式参见OpenGL，也即一个vertex buffer, index buffer)，设定好FrameBuffer，然后按照index buffer读三角形，查找顶点，运行Vertex Shader，Vertex Shading的结果可以用一个cache缓存起来以复用。运行完Vertex Shader就有了投影后的三角形坐标，这个时候进行裁剪（裁剪是为了让光栅化过程能高效地进行），然后进行光栅化。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E光栅化后，对每个三角形所覆盖的所有2x2 pixel block，你可以计算出这个像素中心对应的三角形的重心坐标，用重心坐标插值得到pixel shader的输入，然后运行pixel shader。同时对2x2的pixel block进行pixel shading可以保证你能够得到屏幕空间的导数，这样就能用来做纹理过滤了。最后就是进行z-test并且把像素颜色写进FrameBuffer。对所有三角形执行上述步骤就完成了基本的渲染流程。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E值得一提的是rasterization renderer有很多的优化。例如hi-Z, pre-Z, tiled rendering等。在把基本的流程打通一遍之后，可以再写一遍然后试图实现所有的这些优化。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E另，实现渲染器跟操作系统没太大关系，不过为了成就感，还是建议在熟悉的系统下搞个窗口应用程序吧。因为你实现的好的话，渲染器是可以实时渲染一些场景的，会更有乐趣。","editableContent":"","excerpt":"感谢邀请，这个问题还是要回答一下。我假设你已经知道了图形学的一些基本原理。 首先，看 Michael Abrash 的经典文章Rasterization on Larrabee 这里讲解了如何实现robust和高效的软件光栅化。 但光栅化渲染器除了光栅化，还有很多东西。首先需要熟悉Direct3D或者OpenGL API, 这样你就大致知道要实现哪些功能了。如果不追求性能，总体上还是容易的：按照渲染管线一步一步实现即可。首先拿到场景输入(格式参见OpenGL，也即一个ver…","collapsedBy":"nobody","collapseReason":"","annotationAction":null,"markInfos":[],"relevantInfo":{"isRelevant":false,"relevantType":"","relevantText":""},"suggestEdit":{"reason":"","status":false,"tip":"","title":"","unnormalDetails":{"status":"","description":"","reason":"","reasonId":0,"note":""},"url":""},"isLabeled":false,"rewardInfo":{"canOpenReward":false,"isRewardable":false,"rewardMemberCount":0,"rewardTotalMoney":0,"tagline":""},"relationship":{"isAuthor":false,"isAuthorized":false,"isNothelp":false,"isThanked":false,"isRecognized":false,"voting":0,"upvotedFollowees":[]},"adAnswer":null},"29039253":{"id":29039253,"type":"answer","answerType":"normal","question":{"type":"question","id":24786878,"title":"如何开始用 C++ 写一个光栅化渲染器？","questionType":"normal","created":1407548626,"updatedTime":1407741745,"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fquestions\u002F24786878","relationship":{}},"author":{"id":"1e2c9261b85996ccc3c5436850127e33","urlToken":"miloyip","name":"Milo Yip","avatarUrl":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-041d584bebcc5a34e709f2af38c654c9_l.jpg?source=1940ef5c","avatarUrlTemplate":"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-041d584bebcc5a34e709f2af38c654c9.jpg?source=1940ef5c","isOrg":false,"type":"people","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fpeople\u002F1e2c9261b85996ccc3c5436850127e33","userType":"people","headline":"游戏程序员、《游戏引擎架构》译者","badge":[{"type":"best_answerer","description":"优秀答主","topics":[{"id":"19613730","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19613730","name":"计算机图形学","avatarUrl":"https:\u002F\u002Fpic1.zhimg.com\u002F95b86ea8b502d9aef1b13f621bba2ef3_l.jpg?source=1940ef5c","topicType":"NORMAL"},{"id":"19553361","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19553361","name":"游戏开发","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002F130887c7689dc9631634a26a5f3df106_l.jpg?source=1940ef5c","topicType":"CHANNEL"},{"id":"19554298","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19554298","name":"编程","avatarUrl":"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fv2-27b8ba1e647956fa6f1a2a8ad90138ef_720w.jpg?source=54b3c3a5","topicType":"CHANNEL"},{"id":"19580349","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19580349","name":"计算机科学","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002F50\u002Fv2-5e706b9bf3415cd7c0ffd4eb1e1cba2d_720w.jpg?source=54b3c3a5","topicType":"CHANNEL"},{"id":"19584970","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19584970","name":"C++","avatarUrl":"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-e5f8ab95c0e99a29704fae7e629f9f77_720w.jpg?source=54b3c3a5","topicType":"CHANNEL"},{"id":"19556258","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19556258","name":"游戏引擎","avatarUrl":"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-02d0f71bb74437bbabd519a1d300e209_720w.jpg?source=54b3c3a5","topicType":"NORMAL"},{"id":"19553510","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19553510","name":"算法","avatarUrl":"https:\u002F\u002Fpic3.zhimg.com\u002F50\u002Fv2-aedb03e53d6cd64945a7daca17a32cac_720w.jpg?source=54b3c3a5","topicType":"CHANNEL"}]}],"badgeV2":{"title":"2016 年度荣誉答主","mergedBadges":[{"type":"best","detailType":"best","title":"优秀答主","description":"计算机科学等 7 个话题下的优秀答主","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F20054793","sources":[{"id":"19580349","token":"19580349","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19580349","name":"计算机科学","avatarPath":"v2-2425584cf56e7caae35080a03010a30a.png","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-2425584cf56e7caae35080a03010a30a_hd.jpg","description":"","priority":0},{"id":"19553361","token":"19553361","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19553361","name":"游戏开发","avatarPath":"130887c7689dc9631634a26a5f3df106","avatarUrl":"https:\u002F\u002Fpic4.zhimg.com\u002F130887c7689dc9631634a26a5f3df106_hd.jpg","description":"","priority":0},{"id":"19553510","token":"19553510","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19553510","name":"算法","avatarPath":"v2-aedb03e53d6cd64945a7daca17a32cac","avatarUrl":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-aedb03e53d6cd64945a7daca17a32cac_hd.jpg","description":"","priority":0},{"id":"19584970","token":"19584970","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19584970","name":"C++","avatarPath":"v2-e5f8ab95c0e99a29704fae7e629f9f77","avatarUrl":"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-e5f8ab95c0e99a29704fae7e629f9f77_hd.jpg","description":"","priority":0},{"id":"19554298","token":"19554298","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19554298","name":"编程","avatarPath":"v2-27b8ba1e647956fa6f1a2a8ad90138ef","avatarUrl":"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-27b8ba1e647956fa6f1a2a8ad90138ef_hd.jpg","description":"","priority":0},{"id":"19556258","token":"19556258","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19556258","name":"游戏引擎","avatarPath":"v2-02d0f71bb74437bbabd519a1d300e209","avatarUrl":"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-02d0f71bb74437bbabd519a1d300e209_hd.jpg","description":"","priority":0},{"id":"19613730","token":"19613730","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19613730","name":"计算机图形学","avatarPath":"95b86ea8b502d9aef1b13f621bba2ef3","avatarUrl":"https:\u002F\u002Fpic4.zhimg.com\u002F95b86ea8b502d9aef1b13f621bba2ef3_hd.jpg","description":"","priority":0}],"icon":"","nightIcon":""}],"detailBadges":[{"type":"reward","detailType":"honored_vip","title":"年度荣誉答主","description":"2016 年度荣誉答主","url":"","sources":[{"id":"2016","token":"","type":"year","url":"","name":"","avatarPath":"","avatarUrl":"","description":"","priority":0}],"icon":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-bf0eec3c31c8e866c468f60eb296696c_l.png","nightIcon":"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-c724649168d8f9d36d7c3d13140a2594_l.png"},{"type":"best","detailType":"best_answerer","title":"优秀答主","description":"计算机科学等 7 个话题下的优秀答主","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F20054793","sources":[{"id":"19580349","token":"19580349","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19580349","name":"计算机科学","avatarPath":"v2-2425584cf56e7caae35080a03010a30a.png","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-2425584cf56e7caae35080a03010a30a_hd.jpg","description":"","priority":0},{"id":"19553361","token":"19553361","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19553361","name":"游戏开发","avatarPath":"130887c7689dc9631634a26a5f3df106","avatarUrl":"https:\u002F\u002Fpic4.zhimg.com\u002F130887c7689dc9631634a26a5f3df106_hd.jpg","description":"","priority":0},{"id":"19553510","token":"19553510","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19553510","name":"算法","avatarPath":"v2-aedb03e53d6cd64945a7daca17a32cac","avatarUrl":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-aedb03e53d6cd64945a7daca17a32cac_hd.jpg","description":"","priority":0},{"id":"19584970","token":"19584970","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19584970","name":"C++","avatarPath":"v2-e5f8ab95c0e99a29704fae7e629f9f77","avatarUrl":"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-e5f8ab95c0e99a29704fae7e629f9f77_hd.jpg","description":"","priority":0},{"id":"19554298","token":"19554298","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19554298","name":"编程","avatarPath":"v2-27b8ba1e647956fa6f1a2a8ad90138ef","avatarUrl":"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-27b8ba1e647956fa6f1a2a8ad90138ef_hd.jpg","description":"","priority":0},{"id":"19556258","token":"19556258","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19556258","name":"游戏引擎","avatarPath":"v2-02d0f71bb74437bbabd519a1d300e209","avatarUrl":"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-02d0f71bb74437bbabd519a1d300e209_hd.jpg","description":"","priority":0},{"id":"19613730","token":"19613730","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19613730","name":"计算机图形学","avatarPath":"95b86ea8b502d9aef1b13f621bba2ef3","avatarUrl":"https:\u002F\u002Fpic4.zhimg.com\u002F95b86ea8b502d9aef1b13f621bba2ef3_hd.jpg","description":"","priority":0}],"icon":"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-bf0eec3c31c8e866c468f60eb296696c_l.png","nightIcon":"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-c724649168d8f9d36d7c3d13140a2594_l.png"}],"icon":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-bf0eec3c31c8e866c468f60eb296696c_l.png","nightIcon":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-c724649168d8f9d36d7c3d13140a2594_l.png"},"gender":1,"isAdvertiser":false,"followerCount":304984,"isFollowed":false,"isPrivacy":false},"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fanswers\u002F29039253","isCollapsed":false,"createdTime":1407691252,"updatedTime":1407691252,"extras":"","isCopyable":false,"isNormal":true,"voteupCount":366,"commentCount":31,"isSticky":false,"adminClosedComment":false,"commentPermission":"all","canComment":{"reason":"","status":true},"reshipmentSettings":"need_payment","content":"\u003Ca data-hash=\"d073f194bcabc1cec5ef69d0b534de99\" href=\"https:\u002F\u002Fwww.zhihu.com\u002Fpeople\u002Fd073f194bcabc1cec5ef69d0b534de99\" class=\"member_mention\" data-editable=\"true\" data-title=\"@空明流转\" data-hovercard=\"p$b$d073f194bcabc1cec5ef69d0b534de99\"\u003E@空明流转\u003C\u002Fa\u003E 开发过高大上的SALVIA， \u003Ca data-hash=\"661caec93ce34238ac0021669338cd42\" href=\"https:\u002F\u002Fwww.zhihu.com\u002Fpeople\u002F661caec93ce34238ac0021669338cd42\" class=\"member_mention\" data-editable=\"true\" data-title=\"@Yong He\" data-hovercard=\"p$b$661caec93ce34238ac0021669338cd42\"\u003E@Yong He\u003C\u002Fa\u003E则提到了Larrabee。我来提供另一些观点。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E首先，如果从学习角度出发，不必一开始完全根据现时GPU的架构及概念，来用软件复制一遍。现时的GPU主要是基于三角形光栅化及z-buffer。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E如果我们从图形学的历史进程来学习，可以这样做练习：\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E2D部分：\u003Cbr\u002F\u003E\u003Col\u003E\u003Cli\u003E光栅化2D点（就是在二维数组上画点，了解色彩基本原理，并解决影像输出问题）\u003C\u002Fli\u003E\u003Cli\u003E光栅化2D直线（\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fzh.wikipedia.org\u002Fwiki\u002F%25E5%25B8%2583%25E9%259B%25B7%25E6%25A3%25AE%25E6%25BC%25A2%25E5%25A7%2586%25E7%259B%25B4%25E7%25B7%259A%25E6%25BC%2594%25E7%25AE%2597%25E6%25B3%2595\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E布雷森漢姆直線演算法\u003C\u002Fa\u003E、\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fzh.wikipedia.org\u002Fwiki\u002F%25E5%2590%25B4%25E5%25B0%258F%25E6%259E%2597%25E7%259B%25B4%25E7%25BA%25BF%25E7%25AE%2597%25E6%25B3%2595\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E吴小林直线算法\u003C\u002Fa\u003E等）\u003Cbr\u002F\u003E\u003C\u002Fli\u003E\u003Cli\u003E2D直线的剪切算法（见\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FLine_clipping\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003ELine clipping\u003C\u002Fa\u003E）\u003Cbr\u002F\u003E\u003C\u002Fli\u003E\u003Cli\u003E光栅化2D三角形（scan conversion）。避免重复光栅化相邻三角形边界的像素（edge equation）。\u003C\u002Fli\u003E\u003Cli\u003E光栅化简单／复杂多边形\u003C\u002Fli\u003E\u003C\u002Fol\u003E3D部分：\u003Cbr\u002F\u003E\u003Col\u003E\u003Cli\u003E把顶点从三维世界空间变换至二维屏幕空间，绘画顶点（如银河星系数据），操控摄像机旋转模型。\u003C\u002Fli\u003E\u003Cli\u003E在剪切空间进行3D直线的剪切算法，把顶点连线（如各种三维正多面体）光栅化成wire frame模型\u003C\u002Fli\u003E\u003Cli\u003E以多边形来定义三维模型。使用\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fzh.wikipedia.org\u002Fwiki\u002F%25E7%2594%25BB%25E5%25AE%25B6%25E7%25AE%2597%25E6%25B3%2595\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E画家算法\u003C\u002Fa\u003E来光栅化那些多边形。\u003C\u002Fli\u003E\u003Cli\u003E改为使用\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fzh.wikipedia.org\u002Fwiki\u002F%25E6%25B7%25B1%25E5%25BA%25A6%25E7%25BC%2593%25E5%2586%25B2\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E深度缓冲\u003C\u002Fa\u003E。\u003C\u002Fli\u003E\u003Cli\u003E实现简单的纹理映射，先做屏幕空间的插值，然后实现简单的perspective-correct texture mapping。\u003C\u002Fli\u003E\u003Cli\u003E实现简单的顶点光照，使用顶点颜色插值实现Gouraud shading。\u003C\u002Fli\u003E\u003Cli\u003E通过顶点法线插值，实现Phong shading。\u003Cbr\u002F\u003E\u003C\u002Fli\u003E\u003Cli\u003E实现其他贴图技术，如mipmapping（也可试\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FSummed_area_table\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003ESummed area table\u003C\u002Fa\u003E）、bilinear\u002Ftrilinear filtering、bump mapping、normal mapping、environment mapping等。\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003Cbr\u002F\u003E我们还可以光栅化一些GPU不支持的primitive，例如Blinn大神在1979年就直接光栅化透示正确的球体来渲染太空CG：\u003Cbr\u002F\u003E\u003Cfigure\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002F824476424605f1e346a84700fe67ac66_hd.jpg?source=1940ef5c\" data-rawwidth=\"575\" data-rawheight=\"536\" class=\"origin_image zh-lightbox-thumb\" width=\"575\" data-original=\"https:\u002F\u002Fpic2.zhimg.com\u002F824476424605f1e346a84700fe67ac66_r.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&amp;lt;svg xmlns=&amp;#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&amp;#39; width=&amp;#39;575&amp;#39; height=&amp;#39;536&amp;#39;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\" data-rawwidth=\"575\" data-rawheight=\"536\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"575\" data-original=\"https:\u002F\u002Fpic2.zhimg.com\u002F824476424605f1e346a84700fe67ac66_r.jpg?source=1940ef5c\" data-actualsrc=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002F824476424605f1e346a84700fe67ac66_hd.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Ffigure\u003E可以参考[1]的1-3章。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E话说，我想过写一本关于这些的&amp;#34;科普读物&amp;#34;，不过总觉得受众太少……\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E[1] Blinn, Jim. \u003Ci\u003EJim Blinn&amp;#39;s corner: notation, notation, notation\u003C\u002Fi\u003E. Morgan Kaufmann, 2003.","editableContent":"","excerpt":"@空明流转 开发过高大上的SALVIA， @Yong He 则提到了Larrabee。我来提供另一些观点。 首先，如果从学习角度出发，不必一开始完全根据现时GPU的架构及概念，来用软件复制一遍。现时的GPU主要是基于三角形光栅化及z-buffer。 如果我们从图形学的历史进程来学习，可以这样做练习： 2D部分： 光栅化2D点（就是在二维数组上画点，了解色彩基本原理，并解决影像输出问题）光栅化2D直线（布雷森漢姆直線演算法 、吴小林直线算法 等） 2D直…","collapsedBy":"nobody","collapseReason":"","annotationAction":null,"markInfos":[],"relevantInfo":{"isRelevant":false,"relevantType":"","relevantText":""},"suggestEdit":{"reason":"","status":false,"tip":"","title":"","unnormalDetails":{"status":"","description":"","reason":"","reasonId":0,"note":""},"url":""},"isLabeled":false,"rewardInfo":{"canOpenReward":false,"isRewardable":false,"rewardMemberCount":0,"rewardTotalMoney":0,"tagline":""},"relationship":{"isAuthor":false,"isAuthorized":false,"isNothelp":false,"isThanked":false,"isRecognized":false,"voting":0,"upvotedFollowees":[]},"adAnswer":null},"105988273":{"id":105988273,"type":"answer","answerType":"normal","question":{"type":"question","id":24786878,"title":"如何开始用 C++ 写一个光栅化渲染器？","questionType":"normal","created":1407548626,"updatedTime":1407741745,"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fquestions\u002F24786878","relationship":{}},"author":{"id":"05f99536c7a95b5aaadb8bc4c84f9f73","urlToken":"axi-yi","name":"A希亿","avatarUrl":"https:\u002F\u002Fpic4.zhimg.com\u002F1c8d5e7d36ddba3b3a7e01daf55f2f49_l.jpg?source=1940ef5c","avatarUrlTemplate":"https:\u002F\u002Fpic1.zhimg.com\u002F1c8d5e7d36ddba3b3a7e01daf55f2f49.jpg?source=1940ef5c","isOrg":false,"type":"people","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fpeople\u002F05f99536c7a95b5aaadb8bc4c84f9f73","userType":"people","headline":"游戏码农，wpi研修中","badge":[],"badgeV2":{"title":"","mergedBadges":[],"detailBadges":[],"icon":"","nightIcon":""},"gender":1,"isAdvertiser":false,"followerCount":646,"isFollowed":false,"isPrivacy":false},"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fanswers\u002F105988273","isCollapsed":false,"createdTime":1465910342,"updatedTime":1465910342,"extras":"","isCopyable":false,"isNormal":true,"voteupCount":298,"commentCount":25,"isSticky":false,"adminClosedComment":false,"commentPermission":"all","canComment":{"reason":"","status":true},"reshipmentSettings":"disallowed","content":"\u003Cp\u003E题主说熟悉C#，我最近刚好写了一个C#版的，虽然没有各位大神的高大上，但是比较简单易懂，也放上来给题主参考一下吧~\u003C\u002Fp\u003E\u003Cp\u003E原文链接：\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fblog.csdn.net\u002Faceyan0718\u002Farticle\u002Fdetails\u002F51659381\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E用C#实现一个简易的软件光栅化渲染器\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\u003Cp\u003E 这是一个用C#+winform实现的软件光栅化渲染器，今天拿出来与大家分享一下，希望能起到抛砖引玉的作用，给新人一点启发（结构比较简单，注释比较详细^_^），也欢迎司机们拍砖指点和交流~\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003E目的：\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Cp\u003E 巩固图形编程知识，理解渲染流水线所做的事情。\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003E实现功能：\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Cp\u003E1、将顶点数据进行一系列处理显示到屏幕上（废话。。。(¬_¬)）\u003C\u002Fp\u003E\u003Cp\u003E2、线框渲染模式、纹理渲染模式、顶点色模式\u003C\u002Fp\u003E\u003Cp\u003E3、纹理uv坐标和顶点色等的透视校正插值\u003C\u002Fp\u003E\u003Cp\u003E4、纹理双线性过滤采样\u003C\u002Fp\u003E\u003Cp\u003E5、背面消隐\u003C\u002Fp\u003E\u003Cp\u003E6、Cvv简单裁剪\u003C\u002Fp\u003E\u003Cp\u003E7、“基础光照模型”（相当于D3D、OpenGL中的固定管线顶点光照）\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003E截图：\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Cp\u003E光照\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fc034cd971f4b63857c5b760d480e42b4_hd.jpg?source=1940ef5c\" data-rawwidth=\"784\" data-rawheight=\"597\" class=\"origin_image zh-lightbox-thumb\" width=\"784\" data-original=\"https:\u002F\u002Fpic2.zhimg.com\u002Fc034cd971f4b63857c5b760d480e42b4_r.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&amp;lt;svg xmlns=&amp;#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&amp;#39; width=&amp;#39;784&amp;#39; height=&amp;#39;597&amp;#39;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\" data-rawwidth=\"784\" data-rawheight=\"597\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"784\" data-original=\"https:\u002F\u002Fpic2.zhimg.com\u002Fc034cd971f4b63857c5b760d480e42b4_r.jpg?source=1940ef5c\" data-actualsrc=\"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fc034cd971f4b63857c5b760d480e42b4_hd.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E顶点色\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002F0a7a1411f1acb4d9ff3981362eb86b70_hd.jpg?source=1940ef5c\" data-rawwidth=\"800\" data-rawheight=\"600\" class=\"origin_image zh-lightbox-thumb\" width=\"800\" data-original=\"https:\u002F\u002Fpic2.zhimg.com\u002F0a7a1411f1acb4d9ff3981362eb86b70_r.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&amp;lt;svg xmlns=&amp;#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&amp;#39; width=&amp;#39;800&amp;#39; height=&amp;#39;600&amp;#39;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\" data-rawwidth=\"800\" data-rawheight=\"600\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"800\" data-original=\"https:\u002F\u002Fpic2.zhimg.com\u002F0a7a1411f1acb4d9ff3981362eb86b70_r.jpg?source=1940ef5c\" data-actualsrc=\"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002F0a7a1411f1acb4d9ff3981362eb86b70_hd.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E线框模式：\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fa7015aea10209bdc16195928432019d7_hd.jpg?source=1940ef5c\" data-rawwidth=\"800\" data-rawheight=\"600\" class=\"origin_image zh-lightbox-thumb\" width=\"800\" data-original=\"https:\u002F\u002Fpic1.zhimg.com\u002Fa7015aea10209bdc16195928432019d7_r.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&amp;lt;svg xmlns=&amp;#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&amp;#39; width=&amp;#39;800&amp;#39; height=&amp;#39;600&amp;#39;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\" data-rawwidth=\"800\" data-rawheight=\"600\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"800\" data-original=\"https:\u002F\u002Fpic1.zhimg.com\u002Fa7015aea10209bdc16195928432019d7_r.jpg?source=1940ef5c\" data-actualsrc=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fa7015aea10209bdc16195928432019d7_hd.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E\u003Cp\u003E\u003Cstrong\u003E代码放在Github上面:\u003C\u002Fstrong\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fgithub.com\u002Faceyan\u002FSimpleSoftwareRenderer\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EGitHub - aceyan\u002FSimpleSoftwareRenderer: 简单的软件渲染by c# winform\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\u003Cp\u003E下面我会将一些完成这个渲染器所需要的知识点以及相关资料的链接（多是博文）罗列一下，方便查阅。\u003C\u002Fp\u003E\u003Cbr\u002F\u003E零、准备阶段\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E\u003Cp\u003E想要实现渲染器首先我们得知道“给定视点、三维物体、光源、照明模式，和纹理等元素，如何绘制一幅二维图像”，这就必须提到一个词“图像绘制管线”（也称绘制流水线），我们得渲染器正是要以软件的形式来模拟这条流水线的运作。\u003C\u002Fp\u003E\u003Cp\u003E流水线：\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fwww.cnblogs.com\u002FwonderKK\u002Fp\u002F5022226.html\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E（转）GPU图形绘制管线\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002F908496d2c36c7beee23f04d8ab6c710f_hd.jpg?source=1940ef5c\" data-rawwidth=\"674\" data-rawheight=\"470\" class=\"origin_image zh-lightbox-thumb\" width=\"674\" data-original=\"https:\u002F\u002Fpic4.zhimg.com\u002F908496d2c36c7beee23f04d8ab6c710f_r.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&amp;lt;svg xmlns=&amp;#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&amp;#39; width=&amp;#39;674&amp;#39; height=&amp;#39;470&amp;#39;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\" data-rawwidth=\"674\" data-rawheight=\"470\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"674\" data-original=\"https:\u002F\u002Fpic4.zhimg.com\u002F908496d2c36c7beee23f04d8ab6c710f_r.jpg?source=1940ef5c\" data-actualsrc=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002F908496d2c36c7beee23f04d8ab6c710f_hd.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E理解了绘制管线，我们发现其中充满对矩阵向量等数学工具的运用，那么再实现流水线之前，我们必须先实现这些数学工具，这些数学类网上已经有很多的资料了，但是有几点需要特别说明：\u003C\u002Fp\u003E\u003Cstrong\u003E1、本程序中使用行矩阵与行向量\u003C\u002Fstrong\u003E\u003Cp\u003E相关资料：D3d和openGl矩阵区别\u003C\u002Fp\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fblog.csdn.net\u002FNightmare\u002Farticle\u002Fdetails\u002F3983724\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E矩阵和向量的乘法顺序\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cstrong\u003E2、本程序使用左手坐标系\u003C\u002Fstrong\u003E\u003Cstrong\u003E3、实现了color类来方便进行颜色的运算，因为进行光照的时候要使用颜色乘以颜色的计算方法，它跟向量的乘法不同，应该称为“\u003C\u002Fstrong\u003EModulate\u003Cstrong\u003E（调制）”，注意不能用向量乘法的计算公式哦。\u003C\u002Fstrong\u003E\u003Cp\u003E相关资料：\u003C\u002Fp\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fwww.zhihu.com\u002Fquestion\u002F24026277\u002Fanswer\u002F26433842\" class=\"internal\"\u003E在 Cg 的逐像素着色的最后，每一个颜色值相加和每一个颜色相乘从数学角度有什么差别？ - Milo Yip 的回答\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cp\u003E@Milo Yip 大神的博文里面有一段讲颜色计算的：\u003C\u002Fp\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fwww.cnblogs.com\u002Fmiloyip\u002Farchive\u002F2010\u002F03\u002F29\u002F1698953.html%231794025\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E用JavaScript玩转计算机图形学(一)光线追踪入门\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cstrong\u003E4、矩阵求逆\u003C\u002Fstrong\u003E\u003Cp\u003E由于要进行光照，我们需要变换顶点法线，那么就需要矩阵求逆和求转置的运算。（为什么需要逆转置呢？请看：\u003Ca href=\"https:\u002F\u002Fwww.zhihu.com\u002Fquestion\u002F27739027\" class=\"internal\"\u003Ecg语言漫反射光照模型中的worldMatrix_IT是什么意思？是世界变换矩阵的转置的逆？ - 游戏开发\u003C\u002Fa\u003E）\u003C\u002Fp\u003E\u003Cp\u003E其中矩阵求逆比较复杂，本程序使用的是伴随矩阵的方法求矩阵的逆， 必须先求出矩阵的行列式和伴随矩阵，这部分需要一定的线性代数基础知识。\u003C\u002Fp\u003E4.1矩阵求逆重要定理：\u003Cfigure\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002F946a56359494a87884fa1d16a28a9d7c_hd.jpg?source=1940ef5c\" data-rawwidth=\"713\" data-rawheight=\"420\" class=\"origin_image zh-lightbox-thumb\" width=\"713\" data-original=\"https:\u002F\u002Fpic2.zhimg.com\u002F946a56359494a87884fa1d16a28a9d7c_r.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&amp;lt;svg xmlns=&amp;#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&amp;#39; width=&amp;#39;713&amp;#39; height=&amp;#39;420&amp;#39;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\" data-rawwidth=\"713\" data-rawheight=\"420\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"713\" data-original=\"https:\u002F\u002Fpic2.zhimg.com\u002F946a56359494a87884fa1d16a28a9d7c_r.jpg?source=1940ef5c\" data-actualsrc=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002F946a56359494a87884fa1d16a28a9d7c_hd.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Cbr\u002F\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fwenku.baidu.com\u002Flink%3Furl%3Ddga27GT5oSK8SDwHaeqPGL_raHnMLNP54oad7q8wJnMOqEpuT4_UAC-BHAeTsL8vGpYkRuphnXng99TLfHOx8_Nn7WMVycFRlUiMgSS-2Ve\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E逆矩阵的几种求法与解析(很全很经典)_百度文库\u003C\u002Fa\u003E\u003C\u002Fp\u003E4.2求矩阵行列式\u003Cp\u003E本程序使用递归\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Flib.csdn.net\u002Fbase\u002Fdatastructure\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E算法\u003C\u002Fa\u003E求行列式，请查看矩阵行列式的递归定义：\u003C\u002Fp\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fwenku.baidu.com\u002Flink%3Furl%3D9TSCuxJdfypmsqZLYegHNuKYP1TABFwGT22v-cJut5wenWM-Ll2Bp6zqgDEeIvd9ChV3Laj3czAbdWtjSwaulHHSkUZtrLNcgLqNw2xrjb7\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E3行列式(递归定义)_图文\u003C\u002Fa\u003E\u003C\u002Fp\u003E4.3伴随矩阵：\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fwenku.baidu.com\u002Flink%3Furl%3DBVbtO30v7eygbZUloybJtpFkCrpAwypYNyIx7XGX-OItxdWz0w4Y2hpzux729bq4MLKnx0sWwS4mJwm8Nrnf_3zxG9RqzD7LND3mklrwyDe\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E伴随矩阵_百度文库\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\u003Cp\u003E实现了数学类，就可以正式进入\u003Cstrong\u003E流水线\u003C\u002Fstrong\u003E了：\u003C\u002Fp\u003E\u003Cbr\u002F\u003E一、几何阶段\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E\u003Cstrong\u003E1、顶点从模型空间-----&amp;gt;世界空间\u003C\u002Fstrong\u003E\u003Cp\u003E这一步要生成世界矩阵（简称m），m是一系列平移、选择等变换的组合\u003C\u002Fp\u003E\u003Cp\u003E如果开启了光照，我们还需要把模型空间的法线信息变换到世界空间，对顶点进行光照计算并保存光照结果颜色，以便在光栅化的时候进行差值和颜色调制(Modulate)\u003C\u002Fp\u003E\u003Cp\u003E这里实现的“简单光照模型”可以参见《Cg教程_可编程实时图形权威指南》第五章光照\u003C\u002Fp\u003E\u003Cstrong\u003E2、世界空间\u003C\u002Fstrong\u003E-----&amp;gt;相机空间\u003Cp\u003E这一步需要生成视矩阵（简称v）\u003C\u002Fp\u003E\u003Cp\u003E推导过程：@zdd的博客 \u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fwww.cnblogs.com\u002Fgraphics\u002Farchive\u002F2012\u002F07\u002F12\u002F2476413.html\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EView Transform（视图变换）详解\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cp\u003E上面的推导中\u003Cfigure\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002F0b6a0156ac3868b8c7f4aeb5ba1315b2_hd.jpg?source=1940ef5c\" data-rawwidth=\"279\" data-rawheight=\"150\" class=\"content_image\" width=\"279\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&amp;lt;svg xmlns=&amp;#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&amp;#39; width=&amp;#39;279&amp;#39; height=&amp;#39;150&amp;#39;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\" data-rawwidth=\"279\" data-rawheight=\"150\" class=\"content_image lazy\" width=\"279\" data-actualsrc=\"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002F0b6a0156ac3868b8c7f4aeb5ba1315b2_hd.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Ffigure\u003E写错了\u003C\u002Fp\u003E\u003Cp\u003E应该是 \u003C\u002Fp\u003E\u003Cp\u003E  rx  ry rz\u003C\u002Fp\u003E\u003Cp\u003E[ ux uy uz ]\u003C\u002Fp\u003E\u003Cp\u003E  dx dy dz\u003C\u002Fp\u003E\u003Cp\u003E但是推导结果是对的\u003C\u002Fp\u003E\u003Cstrong\u003E3、相机空间---&amp;gt;齐次剪裁空间\u003C\u002Fstrong\u003E\u003Cp\u003E这里要生成投影矩阵，简称p\u003C\u002Fp\u003E\u003Cp\u003EDx风格的投影矩阵推导：\u003C\u002Fp\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fwww.cnblogs.com\u002Fgraphics\u002Farchive\u002F2012\u002F07\u002F25\u002F2582119.html\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E透视投影详解\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cp\u003E本程序使用的投影矩阵：\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002F2b877556bd592b9a5299eff50b4ffcf3_hd.jpg?source=1940ef5c\" data-rawwidth=\"423\" data-rawheight=\"262\" class=\"origin_image zh-lightbox-thumb\" width=\"423\" data-original=\"https:\u002F\u002Fpic2.zhimg.com\u002F2b877556bd592b9a5299eff50b4ffcf3_r.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&amp;lt;svg xmlns=&amp;#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&amp;#39; width=&amp;#39;423&amp;#39; height=&amp;#39;262&amp;#39;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\" data-rawwidth=\"423\" data-rawheight=\"262\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"423\" data-original=\"https:\u002F\u002Fpic2.zhimg.com\u002F2b877556bd592b9a5299eff50b4ffcf3_r.jpg?source=1940ef5c\" data-actualsrc=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002F2b877556bd592b9a5299eff50b4ffcf3_hd.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Cbr\u002F\u003E\u003Cp\u003E视空间的顶点乘以这个矩阵之后被变换到齐次剪裁空间，并且w分量保存着视空间的z信息。\u003C\u002Fp\u003E\u003Cp\u003E在齐次剪裁空间我们可以对顶点进行简单的裁剪，既将不在\u003C\u002Fp\u003E\u003Cp\u003E-w &amp;lt;= x &amp;lt;= w\u003C\u002Fp\u003E\u003Cp\u003E-w&amp;lt;= y &amp;lt;= w\u003C\u002Fp\u003E\u003Cp\u003E0 &amp;lt;= z &amp;lt;= w\u003C\u002Fp\u003E\u003Cp\u003E这个范围的顶点剔除掉，不进行渲染。\u003C\u002Fp\u003E\u003Cp\u003E这里采用的是最简单粗暴的剪裁方法，更加复杂的剪裁还需要生成新的顶点，有很多可以深入挖掘的地方:)\u003C\u002Fp\u003E\u003Cp\u003EPs：为了方便后续的透视校正插值，程序中还将1\u002Fz 保存在顶点数据中。\u003C\u002Fp\u003E\u003Cstrong\u003E4、进行图元装配，也就是将顶点以一定的顺序组装成三角形（Primitive Assembly &amp;amp;&amp;amp; Trianglesetup ）\u003C\u002Fstrong\u003E\u003Cp\u003E本程序中使用了顶点索引的方式来组织顶点数据，并且约定以逆时针顺序组织的三角形的法线朝向屏幕外，换句话说就是逆时针顺序组织的三角形看起来是正面。\u003C\u002Fp\u003E\u003Cp\u003E有了这个约定就可以进行背面消隐:\u003C\u002Fp\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fblog.csdn.net\u002Fcppyin\u002Farticle\u002Fdetails\u002F6207206\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E从零实现3D图像引擎：(14)背面消隐的三大陷阱\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cstrong\u003E5、透视除法\u003C\u002Fstrong\u003E\u003Cp\u003E  对透视变换得到的含有深度信息(z)的齐次坐标做透视除法。所谓透视除法，\u003Cbr\u002F\u003E  就是把透视变换后的齐次坐标除以(z)。由于透视变换矩阵已经构造好了，当\u003Cbr\u002F\u003E  视锥体内部点经透视处理后的齐次坐标除以(z)后，使得顶点进入\u003C\u002Fp\u003E\u003Cp\u003E-1&amp;lt;= x &amp;lt;= 1\u003C\u002Fp\u003E\u003Cp\u003E-1&amp;lt;= y &amp;lt;= 1\u003C\u002Fp\u003E\u003Cp\u003E0 &amp;lt;= z &amp;lt;= 1  (CVV正方体中)。\u003Cbr\u002F\u003E\u003C\u002Fp\u003E\u003Cstrong\u003E6、映射到视口\u003C\u002Fstrong\u003E\u003Cp\u003E将cvv正方体的顶点根据屏幕大小或者视口大小转换为屏幕坐标\u003C\u002Fp\u003E二、光栅化阶段\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E\u003Cstrong\u003E1、Rasterization光栅化\u003C\u002Fstrong\u003E\u003Cp\u003E光栅化决定哪些像素被几何图元覆盖的过程\u003C\u002Fp\u003E1．1 如果选择线框模式，本程序使用的画线方法是\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fwww.cnblogs.com\u002Fgamesky\u002Farchive\u002F2012\u002F08\u002F21\u002F2648623.html\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EBresenham快速画直线算法\u003C\u002Fa\u003E\u003Cp\u003E相关资料：\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fwww.cnblogs.com\u002Fgamesky\u002Farchive\u002F2012\u002F08\u002F21\u002F2648623.html\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EBresenham快速画直线算法\u003C\u002Fa\u003E\u003C\u002Fp\u003E1．2顶点色模式和纹理模式\u003Cp\u003E三角形光栅化算法：\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fblog.csdn.net\u002Fcppyin\u002Farticle\u002Fdetails\u002F6232453\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E从零实现3D图像引擎：(15)三角形的光栅化\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cp\u003E扫描线填充算法：\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fblog.csdn.net\u002Fcppyin\u002Farticle\u002Fdetails\u002F6172211\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E从零实现3D图像引擎：(2)画2D直线不简单\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cp\u003E光栅化过程当中，我们要对uv坐标，顶点颜色、我们保存在顶点信息中的1\u002Fz等信息进行透视校正插值：\u003C\u002Fp\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fblog.csdn.net\u002Fpopy007\u002Farticle\u002Fdetails\u002F5570803\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E深入探索透视纹理映射（下）\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cp\u003E文章中的重要结论：\u003C\u002Fp\u003E\u003Cp\u003E我们发现s\u002Fz、t\u002Fz和x’、y’也是线性关系。而我们之前知道1\u002Fz和x’、y’是线性关系。则我们得出新的思路：对1\u002Fz关于x’、y’插值得到1\u002Fz’，然后对s\u002Fz、t\u002Fz关于x’、y’进行插值得到s’\u002Fz’、t’\u002Fz’，然后用s’\u002Fz’和t’\u002Fz’分别除以1\u002Fz’，就得到了s’和t’。\u003C\u002Fp\u003E\u003Cp\u003E这就是为什么我们要保存1\u002Fz的原因。\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\u003Cstrong\u003E2、Pixel Operation 像素操作\u003C\u002Fstrong\u003E2.1消除遮挡面\u003Cp\u003E根据zbuff  使用1\u002Fz来进行ztest，这样就不用给zbuff初始化一个很大的值了。\u003C\u002Fp\u003E2.2 Texture operation 纹理操作，也就是根据像素的纹理坐标，查询对应的纹理值\u003Cp\u003E纹理坐标的透视校正： \u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fblog.csdn.net\u002Fpopy007\u002Farticle\u002Fdetails\u002F5556639\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E深入探索透视纹理映射（上）\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cp\u003E纹理采样，双线性纹理过滤：\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fdev.gameres.com\u002FProgram\u002FVisual\u002F3D\u002FBilinear.htm\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E纹理映射的双线性插值滤波\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fblog.csdn.net\u002Fi_dovelemon\u002Farticle\u002Fdetails\u002F27839279\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EDirectX (9) 纹理映射\u003C\u002Fa\u003E\u003C\u002Fp\u003E2.3 Blending\u003Cp\u003E本程序暂时没有对alpha的处理，后面应该会更新\u003C\u002Fp\u003E2.4：Filtering\u003Cp\u003E相当于后处理，就是对即将写入framebuff（帧缓冲）的像素进行一些处理，本程序暂时没有添加。\u003C\u002Fp\u003E\u003Cp\u003E经历了上面的步骤，把要渲染的像素写到framebuff中，再将framebuff渲染到屏幕上就完成了所有步骤（本程序简单的生成了一个bitmap来作为framebuff），这时你应该可以在屏幕上看到你所渲染的东西。如果看起来不太对，那么进入debug吧。一开始也许会觉得调试这样一个绘制流水线会无从下手，因为其中任何一步的偏差都会使最后的渲染发生错误。\u003C\u002Fp\u003E\u003Cp\u003E请假了一些大神后找到了不错的调试方法，下面给出一些tips：\u003C\u002Fp\u003E\u003Cp\u003E1、调试数学库，用笔算来验证结果的正确性\u003C\u002Fp\u003E\u003Cp\u003E2、调试流水线，可以建立一个简单多边形，比如一个quad，用笔算来验证m、v、p三个矩阵的正确性。光栅化的阶段由于要进行插值，计算量比较大，建议使用心算和单步跟踪的方式来进行调试。\u003C\u002Fp\u003E\u003Cp\u003E笔算的过程能让你更加了解背后的数学奥秘：）\u003C\u002Fp\u003E\u003Cp\u003E最后要感谢一下@cppyin，@zdd， \u003Ca data-hash=\"1e2c9261b85996ccc3c5436850127e33\" href=\"https:\u002F\u002Fwww.zhihu.com\u002Fpeople\u002F1e2c9261b85996ccc3c5436850127e33\" class=\"member_mention\" data-editable=\"true\" data-title=\"@Milo Yip\" data-hovercard=\"p$b$1e2c9261b85996ccc3c5436850127e33\"\u003E@Milo Yip\u003C\u002Fa\u003E ， \u003Ca data-hash=\"225cbdbbfac26810c6b71ce96f55de2f\" href=\"https:\u002F\u002Fwww.zhihu.com\u002Fpeople\u002F225cbdbbfac26810c6b71ce96f55de2f\" class=\"member_mention\" data-editable=\"true\" data-title=\"@韦易笑\" data-hovercard=\"p$b$225cbdbbfac26810c6b71ce96f55de2f\"\u003E@韦易笑\u003C\u002Fa\u003E 等大神的文章，给我很大帮助。\u003C\u002Fp\u003E\u003Cp\u003E特别要推荐 \u003Ca data-hash=\"225cbdbbfac26810c6b71ce96f55de2f\" href=\"https:\u002F\u002Fwww.zhihu.com\u002Fpeople\u002F225cbdbbfac26810c6b71ce96f55de2f\" class=\"member_mention\" data-editable=\"true\" data-title=\"@韦易笑\" data-hovercard=\"p$b$225cbdbbfac26810c6b71ce96f55de2f\"\u003E@韦易笑\u003C\u002Fa\u003E 老师写的mini3D：\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fwww.skywind.me\u002Fblog\u002Farchives\u002F1498\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003ESkywind Inside\u003C\u002Fa\u003E，让我受益匪浅。 \u003C\u002Fp\u003E","editableContent":"","excerpt":"题主说熟悉C#，我最近刚好写了一个C#版的，虽然没有各位大神的高大上，但是比较简单易懂，也放上来给题主参考一下吧~ 原文链接： 用C#实现一个简易的软件光栅化渲染器 这是一个用C#+winform实现的软件光栅化渲染器，今天拿出来与大家分享一下，希望能起到抛砖引玉的作用，给新人一点启发（结构比较简单，注释比较详细^_^），也欢迎司机们拍砖指点和交流~ 目的： 巩固图形编程知识，理解渲染流水线所做的事情。 实现功能：1、将顶…","collapsedBy":"nobody","collapseReason":"","annotationAction":null,"markInfos":[],"relevantInfo":{"isRelevant":false,"relevantType":"","relevantText":""},"suggestEdit":{"reason":"","status":false,"tip":"","title":"","unnormalDetails":{"status":"","description":"","reason":"","reasonId":0,"note":""},"url":""},"isLabeled":false,"rewardInfo":{"canOpenReward":false,"isRewardable":false,"rewardMemberCount":0,"rewardTotalMoney":0,"tagline":""},"relationship":{"isAuthor":false,"isAuthorized":false,"isNothelp":false,"isThanked":false,"isRecognized":false,"voting":0,"upvotedFollowees":[]},"adAnswer":null},"820931418":{"id":820931418,"type":"answer","answerType":"normal","question":{"type":"question","id":24786878,"title":"如何开始用 C++ 写一个光栅化渲染器？","questionType":"normal","created":1407548626,"updatedTime":1407741745,"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fquestions\u002F24786878","relationship":{}},"author":{"id":"4045e2038d58be9abf26d6d37fb7a670","urlToken":"zhou-le-35-71","name":"zauonlok","avatarUrl":"https:\u002F\u002Fpic1.zhimg.com\u002Fda8e974dc_l.jpg?source=1940ef5c","avatarUrlTemplate":"https:\u002F\u002Fpic2.zhimg.com\u002Fda8e974dc.jpg?source=1940ef5c","isOrg":false,"type":"people","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fpeople\u002F4045e2038d58be9abf26d6d37fb7a670","userType":"people","headline":"","badge":[],"badgeV2":{"title":"","mergedBadges":[],"detailBadges":[],"icon":"","nightIcon":""},"gender":-1,"isAdvertiser":false,"followerCount":486,"isFollowed":false,"isPrivacy":false},"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fanswers\u002F820931418","isCollapsed":false,"createdTime":1568221934,"updatedTime":1571287405,"extras":"","isCopyable":true,"isNormal":true,"voteupCount":1686,"commentCount":129,"isSticky":false,"adminClosedComment":false,"commentPermission":"all","canComment":{"reason":"","status":true},"reshipmentSettings":"allowed","content":"\u003Cp\u003E\u003C\u002Fp\u003E\u003Cp\u003E最近终于把自己的软件渲染器写得差不多了，感觉可以分享一下学习经验。\u003C\u002Fp\u003E\u003Cp\u003E项目地址：\u003C\u002Fp\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fzauonlok.github.io\u002Frenderer\u002F\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-d1adf0e6c79c234437b9e5b3b0e061ec_180x120.jpg\" data-image-width=\"800\" data-image-height=\"622\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003ESoftware Renderer\u003C\u002Fa\u003E\u003Cp\u003E二进制包：\u003C\u002Fp\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fgithub.com\u002Fzauonlok\u002Frenderer\u002Freleases\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-0dd18d291c22798fa9c819ef0d0848ff_ipico.jpg\" data-image-width=\"420\" data-image-height=\"420\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EReleases\u003C\u002Fa\u003E\u003Cp\u003E运行截图：\u003C\u002Fp\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fv2-5d84718cdd38cb31a49b796603df84a5_hd.jpg?source=1940ef5c\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"800\" data-rawheight=\"622\" data-default-watermark-src=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-48ffdb2dbf269905c7b25b413b7649a1_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb\" width=\"800\" data-original=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-5d84718cdd38cb31a49b796603df84a5_r.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&amp;lt;svg xmlns=&amp;#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&amp;#39; width=&amp;#39;800&amp;#39; height=&amp;#39;622&amp;#39;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"800\" data-rawheight=\"622\" data-default-watermark-src=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-48ffdb2dbf269905c7b25b413b7649a1_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"800\" data-original=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-5d84718cdd38cb31a49b796603df84a5_r.jpg?source=1940ef5c\" data-actualsrc=\"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fv2-5d84718cdd38cb31a49b796603df84a5_hd.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-b33d0f47a0d52c8b150e83a4e23229e9_hd.jpg?source=1940ef5c\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"800\" data-rawheight=\"622\" data-default-watermark-src=\"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fv2-684686e22ba3263d99134978f093949a_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb\" width=\"800\" data-original=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-b33d0f47a0d52c8b150e83a4e23229e9_r.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&amp;lt;svg xmlns=&amp;#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&amp;#39; width=&amp;#39;800&amp;#39; height=&amp;#39;622&amp;#39;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"800\" data-rawheight=\"622\" data-default-watermark-src=\"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fv2-684686e22ba3263d99134978f093949a_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"800\" data-original=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-b33d0f47a0d52c8b150e83a4e23229e9_r.jpg?source=1940ef5c\" data-actualsrc=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-b33d0f47a0d52c8b150e83a4e23229e9_hd.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fv2-a7cfb4b67e8d9af1c0e64045c68e4384_hd.gif?source=1940ef5c\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"802\" data-rawheight=\"632\" data-thumbnail=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-a7cfb4b67e8d9af1c0e64045c68e4384_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb\" width=\"802\" data-original=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-a7cfb4b67e8d9af1c0e64045c68e4384_r.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&amp;lt;svg xmlns=&amp;#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&amp;#39; width=&amp;#39;802&amp;#39; height=&amp;#39;632&amp;#39;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"802\" data-rawheight=\"632\" data-thumbnail=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-a7cfb4b67e8d9af1c0e64045c68e4384_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"802\" data-original=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-a7cfb4b67e8d9af1c0e64045c68e4384_r.jpg?source=1940ef5c\" data-actualsrc=\"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fv2-a7cfb4b67e8d9af1c0e64045c68e4384_hd.gif?source=1940ef5c\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-3b2a10efadbf22801d50c3979e9c9e5f_hd.gif?source=1940ef5c\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"802\" data-rawheight=\"632\" data-thumbnail=\"https:\u002F\u002Fpic2.zhimg.com\u002F50\u002Fv2-3b2a10efadbf22801d50c3979e9c9e5f_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb\" width=\"802\" data-original=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-3b2a10efadbf22801d50c3979e9c9e5f_r.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&amp;lt;svg xmlns=&amp;#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&amp;#39; width=&amp;#39;802&amp;#39; height=&amp;#39;632&amp;#39;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"802\" data-rawheight=\"632\" data-thumbnail=\"https:\u002F\u002Fpic2.zhimg.com\u002F50\u002Fv2-3b2a10efadbf22801d50c3979e9c9e5f_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"802\" data-original=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-3b2a10efadbf22801d50c3979e9c9e5f_r.jpg?source=1940ef5c\" data-actualsrc=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-3b2a10efadbf22801d50c3979e9c9e5f_hd.gif?source=1940ef5c\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic3.zhimg.com\u002F50\u002Fv2-bd99338d6dcb77741b359209c369cb8b_hd.gif?source=1940ef5c\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"802\" data-rawheight=\"632\" data-thumbnail=\"https:\u002F\u002Fpic2.zhimg.com\u002F50\u002Fv2-bd99338d6dcb77741b359209c369cb8b_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb\" width=\"802\" data-original=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-bd99338d6dcb77741b359209c369cb8b_r.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&amp;lt;svg xmlns=&amp;#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&amp;#39; width=&amp;#39;802&amp;#39; height=&amp;#39;632&amp;#39;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"802\" data-rawheight=\"632\" data-thumbnail=\"https:\u002F\u002Fpic2.zhimg.com\u002F50\u002Fv2-bd99338d6dcb77741b359209c369cb8b_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"802\" data-original=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-bd99338d6dcb77741b359209c369cb8b_r.jpg?source=1940ef5c\" data-actualsrc=\"https:\u002F\u002Fpic3.zhimg.com\u002F50\u002Fv2-bd99338d6dcb77741b359209c369cb8b_hd.gif?source=1940ef5c\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-c64d889f9bfebb8dc016766d57186932_hd.gif?source=1940ef5c\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"802\" data-rawheight=\"632\" data-thumbnail=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-c64d889f9bfebb8dc016766d57186932_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb\" width=\"802\" data-original=\"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-c64d889f9bfebb8dc016766d57186932_r.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&amp;lt;svg xmlns=&amp;#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&amp;#39; width=&amp;#39;802&amp;#39; height=&amp;#39;632&amp;#39;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"802\" data-rawheight=\"632\" data-thumbnail=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-c64d889f9bfebb8dc016766d57186932_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"802\" data-original=\"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-c64d889f9bfebb8dc016766d57186932_r.jpg?source=1940ef5c\" data-actualsrc=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-c64d889f9bfebb8dc016766d57186932_hd.gif?source=1940ef5c\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E功能特性：\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E跨平台，可以在Windows、macOS和Linux上运行\u003C\u002Fli\u003E\u003Cli\u003E无依赖，只使用了C标准库和系统原生API，没有外部库的依赖\u003C\u002Fli\u003E\u003Cli\u003E可编程的渲染管线，通过编写着色器（Shaders）来实现各种不同的效果\u003C\u002Fli\u003E\u003Cli\u003E齐次裁剪（Homogeneous clipping）\u003C\u002Fli\u003E\u003Cli\u003E透视插值（Perspective correct interpolation）\u003C\u002Fli\u003E\u003Cli\u003E背面剔除\u003C\u002Fli\u003E\u003Cli\u003E深度测试\u003C\u002Fli\u003E\u003Cli\u003E透明混合\u003C\u002Fli\u003E\u003Cli\u003E天空盒\u003C\u002Fli\u003E\u003Cli\u003E骨骼动画\u003C\u002Fli\u003E\u003Cli\u003E切线空间法线贴图（Tangent space normal mapping）\u003C\u002Fli\u003E\u003Cli\u003E阴影贴图（Shadow mapping）\u003C\u002Fli\u003E\u003Cli\u003EACES tone mapping算法\u003C\u002Fli\u003E\u003Cli\u003E经典的Blinn–Phong反射模型\u003C\u002Fli\u003E\u003Cli\u003E时髦的Physically based rendering（PBR）\u003C\u002Fli\u003E\u003Cli\u003E用于环境光照的Image-based lighting（IBL）\u003C\u002Fli\u003E\u003Cli\u003E类似于Sketchfab Viewer的环绕式相机\u003C\u002Fli\u003E\u003Cli\u003E类似于Marmoset Viewer的材质查看器\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003E下面推荐一下我在学习和实现过程中发现的一些非常有用的资源以及比较建议的推进路线。\u003C\u002Fp\u003E\u003Cp\u003E首先特别推荐从Sokolov的Tiny Renderer教程开始入门。这是个很硬核的课程，Sokolov从一个最简单的画点函数开始，一个小节一个小节地讲解怎么画出一条线，怎么填充一个面，怎么逐步加入背面剔除、深度测试、透视相机、着色器等高级功能。每个小节的课程都有详细的讲解以及完整的实现代码可供参考。这个教程一共有9个小节，只要学到第6个小节我们就已经可以实现一个具有可编程渲染管线的软件渲染器了，而这时候的总代码量只有500行而已，可以说是非常简洁适合入门了。\u003C\u002Fp\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fgithub.com\u002Fssloy\u002Ftinyrenderer\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-c4bcea4d453d05c6619f1305494e9116_ipico.jpg\" data-image-width=\"400\" data-image-height=\"400\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003ETiny Renderer: software rendering in 500 lines of code\u003C\u002Fa\u003E\u003Cp\u003ETiny Renderer并没有包含图形界面，我们需要把渲染好的画面保存到图片中，然后再用图片查看器打开来查看渲染结果。这其实会对我们实现着色器效果造成很大的不便，因为很多时候我们需要不断调整相机的位置和朝向来检查渲染效果是不是正确的。如果每次都要重复设置相机的位置和朝向、渲染场景并保存为图片、打开图片比较渲染效果这个过程的话，我们的效率会变得很低。所以下一步自然是要给我们的软件渲染器加入可以交互的图形界面，以便实时查看渲染结果了。\u003C\u002Fp\u003E\u003Cp\u003E加入图形界面的方法有很多，我们可以使用现成的Qt、SDL、GLFW等图形界面库，也可以通过直接调用系统API实现。因为软件渲染器需要的图形界面功能是非常少的，只需要提供打开窗口、显示渲染好的画面、接收鼠标键盘事件这些功能就可以了，为此专门引入一个第三方库好像有点太重量级了，所以我是直接使用系统API实现了简单的图形界面，每个平台需要的代码量大概在300行左右。可以参考一下platform.h这个通用的接口文件以及platforms这个目录下的各平台的具体代码实现。（用过GLFW的同学可能会觉得这些接口长得和GLFW的接口很像，嗯，其实这些接口是我从GLFW里面扒出来的，可以看作是超精简版的GLFW。）\u003C\u002Fp\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fgithub.com\u002Fzauonlok\u002Frenderer\u002Fblob\u002Fv1.2\u002Frenderer\u002Fcore\u002Fplatform.h\" data-draft-node=\"block\" data-draft-type=\"link-card\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003Erenderer\u002Fcore\u002Fplatform.h\u003C\u002Fa\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fgithub.com\u002Fzauonlok\u002Frenderer\u002Ftree\u002Fv1.2\u002Frenderer\u002Fplatforms\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-0dd18d291c22798fa9c819ef0d0848ff_ipico.jpg\" data-image-width=\"420\" data-image-height=\"420\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003Erenderer\u002Fplatforms\u003C\u002Fa\u003E\u003Cp\u003E有了图形界面之后，接下来我们可以考虑加入一个方便好用的相机了。常用的相机有两种：第一种是FPS相机，就像在FPS游戏里面一样，可以用鼠标指针调整相机朝向，用WSAD键进行上下左右移动；第二种是环绕相机，相机有一个目标点，可以对着这个目标点环绕（orbit），可以调整和目标点的距离（dolly），也可以平移目标点（pan）。这里我个人更推荐实现一个环绕相机。因为我们在实现软件渲染器的过程中，大部分时间都是在检查某个模型的渲染表现是不是正确的。我们需要旋转到各个角度、拉近或拉远镜头来检查模型上的每个部分的渲染表现。这时候环绕相机要比FPS相机更加趁手。\u003C\u002Fp\u003E\u003Cp\u003EGitHub上可以参考的环绕相机的实现很多，其中我看过做得最好的是Three.js的环绕相机。他们的环绕相机有挺多比较细致的优化，比如在平移目标点时，考虑了目标点与相机的距离，使得物体最后在屏幕空间的移动距离总是鼠标的移动距离保持固定的比例，因此物体可以贴合鼠标一起移动（也就是俗称的跟手的感觉）。\u003C\u002Fp\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fgithub.com\u002Fmrdoob\u002Fthree.js\u002Fblob\u002Fr108\u002Fexamples\u002Fjs\u002Fcontrols\u002FOrbitControls.js%23L390-L395\" data-draft-node=\"block\" data-draft-type=\"link-card\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003Econtrols\u002FOrbitControls.js 第390-395行\u003C\u002Fa\u003E\u003Cp\u003E有了可编程的渲染管线、可交互的图形界面和方便的旋转相机之后，我们其实可以很轻松地在我们的软件渲染器上实验各种图形技术了。在这个过程中，我们会发现之前的可编程渲染管线其实是存在很多问题的。比如，Tiny Renderer在光栅化过程中对变量的插值并不是透视正确的（perspective correct），这会导致模型的纹理坐标发生扭曲，在类似地板这样的由大面积三角形构成的模型上表现得尤为明显。\u003C\u002Fp\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic2.zhimg.com\u002F50\u002Fv2-dcd1a8c51a3465a2b36f82362dd23f50_hd.gif?source=1940ef5c\" data-size=\"normal\" data-rawwidth=\"802\" data-rawheight=\"270\" data-thumbnail=\"https:\u002F\u002Fpic2.zhimg.com\u002F50\u002Fv2-dcd1a8c51a3465a2b36f82362dd23f50_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb\" width=\"802\" data-original=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-dcd1a8c51a3465a2b36f82362dd23f50_r.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&amp;lt;svg xmlns=&amp;#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&amp;#39; width=&amp;#39;802&amp;#39; height=&amp;#39;270&amp;#39;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\" data-size=\"normal\" data-rawwidth=\"802\" data-rawheight=\"270\" data-thumbnail=\"https:\u002F\u002Fpic2.zhimg.com\u002F50\u002Fv2-dcd1a8c51a3465a2b36f82362dd23f50_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"802\" data-original=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-dcd1a8c51a3465a2b36f82362dd23f50_r.jpg?source=1940ef5c\" data-actualsrc=\"https:\u002F\u002Fpic2.zhimg.com\u002F50\u002Fv2-dcd1a8c51a3465a2b36f82362dd23f50_hd.gif?source=1940ef5c\"\u002F\u003E\u003Cfigcaption\u003E透视不正确\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-01230cee9fd6326fe1d02fd7632f7d20_hd.gif?source=1940ef5c\" data-size=\"normal\" data-rawwidth=\"802\" data-rawheight=\"270\" data-thumbnail=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-01230cee9fd6326fe1d02fd7632f7d20_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb\" width=\"802\" data-original=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-01230cee9fd6326fe1d02fd7632f7d20_r.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&amp;lt;svg xmlns=&amp;#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&amp;#39; width=&amp;#39;802&amp;#39; height=&amp;#39;270&amp;#39;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\" data-size=\"normal\" data-rawwidth=\"802\" data-rawheight=\"270\" data-thumbnail=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-01230cee9fd6326fe1d02fd7632f7d20_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"802\" data-original=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-01230cee9fd6326fe1d02fd7632f7d20_r.jpg?source=1940ef5c\" data-actualsrc=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-01230cee9fd6326fe1d02fd7632f7d20_hd.gif?source=1940ef5c\"\u002F\u003E\u003Cfigcaption\u003E透视正确\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic2.zhimg.com\u002F50\u002Fv2-6036b14d33f06a0626615a0be3ffb7a1_hd.gif?source=1940ef5c\" data-size=\"normal\" data-rawwidth=\"802\" data-rawheight=\"632\" data-thumbnail=\"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fv2-6036b14d33f06a0626615a0be3ffb7a1_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb\" width=\"802\" data-original=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-6036b14d33f06a0626615a0be3ffb7a1_r.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&amp;lt;svg xmlns=&amp;#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&amp;#39; width=&amp;#39;802&amp;#39; height=&amp;#39;632&amp;#39;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\" data-size=\"normal\" data-rawwidth=\"802\" data-rawheight=\"632\" data-thumbnail=\"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fv2-6036b14d33f06a0626615a0be3ffb7a1_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"802\" data-original=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-6036b14d33f06a0626615a0be3ffb7a1_r.jpg?source=1940ef5c\" data-actualsrc=\"https:\u002F\u002Fpic2.zhimg.com\u002F50\u002Fv2-6036b14d33f06a0626615a0be3ffb7a1_hd.gif?source=1940ef5c\"\u002F\u003E\u003Cfigcaption\u003E透视不正确\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-27b5072898d600fc8d3cee4e695eea7b_hd.gif?source=1940ef5c\" data-size=\"normal\" data-rawwidth=\"802\" data-rawheight=\"632\" data-thumbnail=\"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fv2-27b5072898d600fc8d3cee4e695eea7b_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb\" width=\"802\" data-original=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-27b5072898d600fc8d3cee4e695eea7b_r.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&amp;lt;svg xmlns=&amp;#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&amp;#39; width=&amp;#39;802&amp;#39; height=&amp;#39;632&amp;#39;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\" data-size=\"normal\" data-rawwidth=\"802\" data-rawheight=\"632\" data-thumbnail=\"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fv2-27b5072898d600fc8d3cee4e695eea7b_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"802\" data-original=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-27b5072898d600fc8d3cee4e695eea7b_r.jpg?source=1940ef5c\" data-actualsrc=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-27b5072898d600fc8d3cee4e695eea7b_hd.gif?source=1940ef5c\"\u002F\u003E\u003Cfigcaption\u003E透视正确\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003ETiny Renderer也没有对三角形进行完整的裁剪。因为我们有自由活动的相机，所以三角形的裁剪就不能忽略了。最直接的裁剪方法是只要三角形有一个顶点在视锥之外就直接不绘制这个三角形。这种裁剪方案实现起来非常简单，但是会在视锥边缘产生大量缺失的三角面。完整的齐次裁剪则没有这个问题。\u003C\u002Fp\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fv2-75b4fa663a8b024806776255529cb0e8_hd.jpg?source=1940ef5c\" data-size=\"normal\" data-rawwidth=\"810\" data-rawheight=\"635\" data-default-watermark-src=\"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fv2-9eafb6bd8a5a5745916466191758ec01_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb\" width=\"810\" data-original=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-75b4fa663a8b024806776255529cb0e8_r.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&amp;lt;svg xmlns=&amp;#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&amp;#39; width=&amp;#39;810&amp;#39; height=&amp;#39;635&amp;#39;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\" data-size=\"normal\" data-rawwidth=\"810\" data-rawheight=\"635\" data-default-watermark-src=\"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fv2-9eafb6bd8a5a5745916466191758ec01_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"810\" data-original=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-75b4fa663a8b024806776255529cb0e8_r.jpg?source=1940ef5c\" data-actualsrc=\"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fv2-75b4fa663a8b024806776255529cb0e8_hd.jpg?source=1940ef5c\"\u002F\u003E\u003Cfigcaption\u003E简单裁剪\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-4435ca9c68bb4da3003d70032ab1962f_hd.jpg?source=1940ef5c\" data-size=\"normal\" data-rawwidth=\"810\" data-rawheight=\"635\" data-default-watermark-src=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-c5351a8744c499dad0f0ec9fc70a8846_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb\" width=\"810\" data-original=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-4435ca9c68bb4da3003d70032ab1962f_r.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&amp;lt;svg xmlns=&amp;#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&amp;#39; width=&amp;#39;810&amp;#39; height=&amp;#39;635&amp;#39;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\" data-size=\"normal\" data-rawwidth=\"810\" data-rawheight=\"635\" data-default-watermark-src=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-c5351a8744c499dad0f0ec9fc70a8846_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"810\" data-original=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-4435ca9c68bb4da3003d70032ab1962f_r.jpg?source=1940ef5c\" data-actualsrc=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-4435ca9c68bb4da3003d70032ab1962f_hd.jpg?source=1940ef5c\"\u002F\u003E\u003Cfigcaption\u003E完整裁剪\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E在解决了这些问题之后，我们的软件渲染器的渲染能力其实已经和OpenGL比较接近了（当然渲染速度是没法比的）。这时可以考虑整理出一个应用层的框架，把一些通用的功能放在里面，然后在这个基础上实现一些更高级的应用，比如天空盒、阴影、骨骼动画、甚至PBR等，很多光栅化的bug是要在足够复杂的需求的情况下才会容易显现出来的。这里可以参考一下\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Flearnopengl.com\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E\u003Cspan class=\"invisible\"\u003Ehttp:\u002F\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"visible\"\u003Elearnopengl.com\u003C\u002Fspan\u003E\u003Cspan class=\"invisible\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E上的高级应用。\u003C\u002Fp\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Flearnopengl.com\" data-draft-node=\"block\" data-draft-type=\"link-card\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003ELearn OpenGL, extensive tutorial resource for learning Modern OpenGL\u003C\u002Fa\u003E\u003Cp\u003E因为OpenGL和Direct3D的存在，在现实的编程中我们已经不太能接触到光栅化过程中的细节了。大家的开发都是基于OpenGL\u002FDirect3D或者Unity\u002FUnreal这样的高层接口。这就使得在实现软件渲染器的过程中，经常会遇到需要了解某个知识点，但是Google或百度了N页都找不到相关资料的情况。比如上面提到的透视正确的插值以及齐次坐标的裁剪都已经内建到GPU中了，即使不了解这些知识点也是可以用着色器编程的，因此网络上讨论这些的帖子就很匮乏了。\u003C\u002Fp\u003E\u003Cp\u003E所以下面列出了一些我找到的对实现软件渲染器比较有用的资源，希望能节省大家一点百度或Google的时间。\u003C\u002Fp\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fblackpawn.com\u002Ftexts\u002Fpointinpoly\u002F\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-074650f1e9e5f1f11bda1997ffe8a2ed_ipico.jpg\" data-image-width=\"183\" data-image-height=\"175\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EPoint in triangle test\u003C\u002Fa\u003E\u003Cp\u003E重心坐标（Barycentric coordinate）在我看来是在光栅化过程中灵魂人物一般的存在。在计算得到某个像素点的重心坐标之后，我们可以确定这个像素点是否位于当前三角形之内，从而决定是否需要进一步调用像素着色器；我们可以通过重心坐标对像素点的深度进行插值来进行深度测试；顶点着色器的输出数据（比如法线、UV等）需要使用重心坐标进行透视正确的插值来得到像素着色器的输入数据。Tiny Renderer中对重心坐标的讲解其实并不是特别清晰，相对来说blackpawn的讲解更加透彻，而且还有互动的Flash动画可以辅助理解。\u003C\u002Fp\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fwww.comp.nus.edu.sg\u002F~lowkl\u002Fpublications\u002Flowk_persp_interp_techrep.pdf\" data-draft-node=\"block\" data-draft-type=\"link-card\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EPerspective-Correct Interpolation\u003C\u002Fa\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fwww.khronos.org\u002Fregistry\u002FOpenGL\u002Fspecs\u002Fes\u002F2.0\u002Fes_full_spec_2.0.pdf\" data-draft-node=\"block\" data-draft-type=\"link-card\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EOpenGL ES 2.0 Specification 第58页\u003C\u002Fa\u003E\u003Cp\u003E上面的第一个链接解释了为什么我们需要透视插值并推导了在2D情况下的透视插值公式。第二个链接是OpenGL的规范文档，在第58页给出了3D透视插值的公式，可以直接套用到代码里面。\u003C\u002Fp\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fgraphics.idav.ucdavis.edu\u002Feducation\u002FGraphicsNotes\u002FClipping.pdf\" data-draft-node=\"block\" data-draft-type=\"link-card\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EComputer Graphics Notes - Clipping\u003C\u002Fa\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Ffabiensanglard.net\u002Fpolygon_codec\u002F\" data-draft-node=\"block\" data-draft-type=\"link-card\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EHomogeneous clipping\u003C\u002Fa\u003E\u003Cp\u003E上面的第一个链接由浅入深地讲解了线面裁剪、体面裁剪和齐次裁剪的原理，有详细的公式推导和相应的伪代码实现。第二个链接则是直接提供了完整的齐次裁剪的C语言实现代码。\u003C\u002Fp\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fwww.khronos.org\u002Fregistry\u002FOpenGL\u002Fspecs\u002Fes\u002F2.0\u002Fes_full_spec_2.0.pdf\" data-draft-node=\"block\" data-draft-type=\"link-card\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EOpenGL ES 2.0 Specification 第76-77页\u003C\u002Fa\u003E\u003Cp\u003E如果我们要实现天空盒或者IBL的话，textureCube采样函数是必不可少的。给定一个方向，textureCube会从cubemap的六个面中选取一个面并在上面做类似texture2D的采样。和texture2D不同，textureCube的规则比较复杂，比较难脑补出来。又因为这是个着色器语言的内建函数，所以关于其内部实现的讨论也是非常的少。幸运的是，OpenGL的规范文档在第76到77页给出了实现细节，我们直接翻译成相应的代码就可以了。\u003C\u002Fp\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-64dcaf2bb27fbad13659f6fa7922920d_hd.jpg?source=1940ef5c\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1001\" data-rawheight=\"379\" data-default-watermark-src=\"https:\u002F\u002Fpic2.zhimg.com\u002F50\u002Fv2-4bf35e294dd8f339837ada975f2bd8ad_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb\" width=\"1001\" data-original=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-64dcaf2bb27fbad13659f6fa7922920d_r.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&amp;lt;svg xmlns=&amp;#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&amp;#39; width=&amp;#39;1001&amp;#39; height=&amp;#39;379&amp;#39;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1001\" data-rawheight=\"379\" data-default-watermark-src=\"https:\u002F\u002Fpic2.zhimg.com\u002F50\u002Fv2-4bf35e294dd8f339837ada975f2bd8ad_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1001\" data-original=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-64dcaf2bb27fbad13659f6fa7922920d_r.jpg?source=1940ef5c\" data-actualsrc=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-64dcaf2bb27fbad13659f6fa7922920d_hd.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E最后列出一些因为性能问题或者其他原因目前没有在自己的软件渲染器上实现，但是对最终的渲染效果的提升又非常重要的功能吧。\u003C\u002Fp\u003E\u003Cp\u003E首先是和抗锯齿有关的功能，包括多采样抗锯齿（MSAA）、纹理滤波（Texture filtering）和Mipmap。多采样抗锯齿和纹理滤波其实在目前的架构下都是可以比较简单地实现的，只不过会造成一定的性能损耗。Mipmap则是完全没有办法了，因为在现在的架构下我们无法获得屏幕空间的导数，所以也就没办法正确地自动选择Mipmap的层级。\u003C\u002Fp\u003E\u003Cp\u003E然后是各种后处理效果（Post-processing）。后处理对画面效果的提升是非常大的，但是相对应的性能消耗也很大，因为它们几乎都是全屏操作，对于软件渲染器来说有点吃不消。因此我目前只是实现了ACES tone mapping，并且只在模型上使用而不是全屏覆盖，这样一来可以在不大的性能消耗的前提下获得比较大的渲染效果提升。\u003C\u002Fp\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic2.zhimg.com\u002F50\u002Fv2-cacac925ae92e85347316e5dede69f76_hd.jpg?source=1940ef5c\" data-size=\"normal\" data-rawwidth=\"800\" data-rawheight=\"630\" data-default-watermark-src=\"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fv2-4d0da1b6c02e24414fe091382e8970d6_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb\" width=\"800\" data-original=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-cacac925ae92e85347316e5dede69f76_r.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&amp;lt;svg xmlns=&amp;#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&amp;#39; width=&amp;#39;800&amp;#39; height=&amp;#39;630&amp;#39;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\" data-size=\"normal\" data-rawwidth=\"800\" data-rawheight=\"630\" data-default-watermark-src=\"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fv2-4d0da1b6c02e24414fe091382e8970d6_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"800\" data-original=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-cacac925ae92e85347316e5dede69f76_r.jpg?source=1940ef5c\" data-actualsrc=\"https:\u002F\u002Fpic2.zhimg.com\u002F50\u002Fv2-cacac925ae92e85347316e5dede69f76_hd.jpg?source=1940ef5c\"\u002F\u003E\u003Cfigcaption\u003E未开启 ACES tone mapping\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic2.zhimg.com\u002F50\u002Fv2-0fe7ab241eee9653eb9dc0057cfb3da1_hd.jpg?source=1940ef5c\" data-size=\"normal\" data-rawwidth=\"800\" data-rawheight=\"630\" data-default-watermark-src=\"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fv2-549b94cfed80246f475be11e2dc29ce4_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb\" width=\"800\" data-original=\"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-0fe7ab241eee9653eb9dc0057cfb3da1_r.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&amp;lt;svg xmlns=&amp;#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&amp;#39; width=&amp;#39;800&amp;#39; height=&amp;#39;630&amp;#39;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\" data-size=\"normal\" data-rawwidth=\"800\" data-rawheight=\"630\" data-default-watermark-src=\"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fv2-549b94cfed80246f475be11e2dc29ce4_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"800\" data-original=\"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-0fe7ab241eee9653eb9dc0057cfb3da1_r.jpg?source=1940ef5c\" data-actualsrc=\"https:\u002F\u002Fpic2.zhimg.com\u002F50\u002Fv2-0fe7ab241eee9653eb9dc0057cfb3da1_hd.jpg?source=1940ef5c\"\u002F\u003E\u003Cfigcaption\u003E开启了 ACES tone mapping\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E最后是\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fwww.khronos.org\u002Fopengl\u002Fwiki\u002FCubemap_Texture%23Seamless_cubemap\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003ESeamless cubemap\u003C\u002Fa\u003E功能。在一般的cubemap采样中，textureCube函数会选择6个面中的一个进行2D采样，而完全不会考虑其他的面。在一般情况下这并不会造成很大的问题，但是当我们实现PBR着色器时会发现，IBL采样出来的颜色在高粗糙度的情况下会有很强的方块效应。这是因为一般的IBL烘培软件输出的IBL图片的尺寸会随着粗糙度的增大而减小，而当粗糙度达到最大值时，输出的图片大小就只有1x1这么大了。如果不考虑cubemap中的其他的面的话，那么对于一个球面，IBL采样出来的颜色就只会有6种，正确的做法应该是额外采样相邻的几个面然后进行插值得出最后的结果。但是因为实现Seamless cubemap的代价比较大（参考\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fgithub.com\u002Fmesa3d\u002Fmesa\u002Fblob\u002Fmesa-19.1.6\u002Fsrc\u002Fgallium\u002Fdrivers\u002Fsoftpipe\u002Fsp_tex_sample.c\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EMesa softpipe中的相关实现\u003C\u002Fa\u003E），所以目前只能通过增大高粗糙度图片的尺寸来暂时绕过这个问题了。\u003C\u002Fp\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-4ada10dbd835c66cf66cd42ad2c76e11_hd.jpg?source=1940ef5c\" data-size=\"normal\" data-rawwidth=\"816\" data-rawheight=\"638\" data-default-watermark-src=\"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fv2-4fc0b15c2cbc42d58455851ef33feec1_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb\" width=\"816\" data-original=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-4ada10dbd835c66cf66cd42ad2c76e11_r.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&amp;lt;svg xmlns=&amp;#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&amp;#39; width=&amp;#39;816&amp;#39; height=&amp;#39;638&amp;#39;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\" data-size=\"normal\" data-rawwidth=\"816\" data-rawheight=\"638\" data-default-watermark-src=\"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fv2-4fc0b15c2cbc42d58455851ef33feec1_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"816\" data-original=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-4ada10dbd835c66cf66cd42ad2c76e11_r.jpg?source=1940ef5c\" data-actualsrc=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-4ada10dbd835c66cf66cd42ad2c76e11_hd.jpg?source=1940ef5c\"\u002F\u003E\u003Cfigcaption\u003E随着粗糙度升高Cubemap尺寸减小\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fv2-3040eeea86467f04d911c0bfc8ca83b7_hd.jpg?source=1940ef5c\" data-size=\"normal\" data-rawwidth=\"816\" data-rawheight=\"638\" data-default-watermark-src=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-777dd79654d1eff799c96bb6742e0e12_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb\" width=\"816\" data-original=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-3040eeea86467f04d911c0bfc8ca83b7_r.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&amp;lt;svg xmlns=&amp;#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&amp;#39; width=&amp;#39;816&amp;#39; height=&amp;#39;638&amp;#39;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\" data-size=\"normal\" data-rawwidth=\"816\" data-rawheight=\"638\" data-default-watermark-src=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-777dd79654d1eff799c96bb6742e0e12_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"816\" data-original=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-3040eeea86467f04d911c0bfc8ca83b7_r.jpg?source=1940ef5c\" data-actualsrc=\"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fv2-3040eeea86467f04d911c0bfc8ca83b7_hd.jpg?source=1940ef5c\"\u002F\u003E\u003Cfigcaption\u003E强行增大高粗糙度Cubemap的尺寸\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E","editableContent":"","excerpt":"最近终于把自己的软件渲染器写得差不多了，感觉可以分享一下学习经验。 项目地址： Software Renderer 二进制包： Releases 运行截图： [图片] [图片] [图片] [图片] [图片] [图片] 功能特性： 跨平台，可以在Windows、macOS和Linux上运行无依赖，只使用了C标准库和系统原生API，没有外部库的依赖可编程的渲染管线，通过编写着色器（Shaders）来实现各种不同的效果齐次裁剪（Homogeneous clipping）透视插值（Perspective correct interpolation）背面剔除深度测试透明混合天…","collapsedBy":"nobody","collapseReason":"","annotationAction":null,"markInfos":[],"relevantInfo":{"isRelevant":false,"relevantType":"","relevantText":""},"suggestEdit":{"reason":"","status":false,"tip":"","title":"","unnormalDetails":{"status":"","description":"","reason":"","reasonId":0,"note":""},"url":""},"isLabeled":false,"rewardInfo":{"canOpenReward":false,"isRewardable":false,"rewardMemberCount":0,"rewardTotalMoney":0,"tagline":""},"relationship":{"isAuthor":false,"isAuthorized":false,"isNothelp":false,"isThanked":false,"isRecognized":false,"voting":0,"upvotedFollowees":[]},"adAnswer":null},"1483055155":{"id":1483055155,"type":"answer","answerType":"normal","question":{"type":"question","id":24786878,"title":"如何开始用 C++ 写一个光栅化渲染器？","questionType":"normal","created":1407548626,"updatedTime":1407741745,"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fquestions\u002F24786878","relationship":{}},"author":{"id":"ab522bf4f51da10b7b33844ea18ee7de","urlToken":"sun-lei-22-19","name":"孙小磊","avatarUrl":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-fc9cde55ced779c4031b8c80a3355efb_l.jpg?source=1940ef5c","avatarUrlTemplate":"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-fc9cde55ced779c4031b8c80a3355efb.jpg?source=1940ef5c","isOrg":false,"type":"people","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fpeople\u002Fab522bf4f51da10b7b33844ea18ee7de","userType":"people","headline":"研二计算机在读，爱好游戏动漫","badge":[],"badgeV2":{"title":"","mergedBadges":[],"detailBadges":[],"icon":"","nightIcon":""},"gender":1,"isAdvertiser":false,"followerCount":2968,"isFollowed":false,"isPrivacy":false},"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fanswers\u002F1483055155","isCollapsed":false,"createdTime":1600568288,"updatedTime":1600568371,"extras":"","isCopyable":true,"isNormal":true,"voteupCount":504,"commentCount":20,"isSticky":false,"adminClosedComment":false,"commentPermission":"all","canComment":{"reason":"","status":true},"reshipmentSettings":"allowed","content":"\u003Cp\u003E在今年上半年阅读了诸多高赞回答之后，就下定决心自己也学习整一个光栅化渲染器，最近也算是勉强完成了，因为个人对渲染器实现或是图形知识也基本零开始来的，因此感觉可以分享一下自己的学习过程和建议。（这里同时十分感谢 \u003Ca class=\"member_mention\" href=\"https:\u002F\u002Fwww.zhihu.com\u002Fpeople\u002F4045e2038d58be9abf26d6d37fb7a670\" data-hash=\"4045e2038d58be9abf26d6d37fb7a670\" data-hovercard=\"p$b$4045e2038d58be9abf26d6d37fb7a670\"\u003E@zauonlok\u003C\u002Fa\u003E  实现的渲染器，收益良多 ）\u003C\u002Fp\u003E\u003Cp\u003ESRender项目地址：\u003C\u002Fp\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fgithub.com\u002FSunXLei\u002FSRender\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E\u003Cspan class=\"invisible\"\u003Ehttps:\u002F\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"visible\"\u003Egithub.com\u002FSunXLei\u002FSRen\u003C\u002Fspan\u003E\u003Cspan class=\"invisible\"\u003Eder\u003C\u002Fspan\u003E\u003Cspan class=\"ellipsis\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cp\u003E项目同时也提供了二进制可执行文件，配合模型资源可以直接使用。\u003C\u002Fp\u003E\u003Cp\u003E整个SRender的实现除了展示渲染结果的windows系统API，没有其他的依赖，核心逻辑代码在2000多行，整体结构简单，同时我也写有不少注释，方便希望学习阅读的同学，直接从main函数入口去看就行。\u003C\u002Fp\u003E\u003Cp\u003E一些屏幕截图：\u003C\u002Fp\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic2.zhimg.com\u002F50\u002Fv2-ca92619f5f32928ae6d77cad57a9cb20_hd.jpg?source=1940ef5c\" data-size=\"normal\" data-rawwidth=\"602\" data-rawheight=\"520\" data-default-watermark-src=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-d1eaec479d693fc56d4a1dd7fe55c222_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb\" width=\"602\" data-original=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-ca92619f5f32928ae6d77cad57a9cb20_r.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&amp;lt;svg xmlns=&amp;#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&amp;#39; width=&amp;#39;602&amp;#39; height=&amp;#39;520&amp;#39;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\" data-size=\"normal\" data-rawwidth=\"602\" data-rawheight=\"520\" data-default-watermark-src=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-d1eaec479d693fc56d4a1dd7fe55c222_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"602\" data-original=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-ca92619f5f32928ae6d77cad57a9cb20_r.jpg?source=1940ef5c\" data-actualsrc=\"https:\u002F\u002Fpic2.zhimg.com\u002F50\u002Fv2-ca92619f5f32928ae6d77cad57a9cb20_hd.jpg?source=1940ef5c\"\u002F\u003E\u003Cfigcaption\u003E雷律芽衣\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic2.zhimg.com\u002F50\u002Fv2-8820d93bfe66e9113e76355c3f84e6ba_hd.jpg?source=1940ef5c\" data-size=\"normal\" data-rawwidth=\"498\" data-rawheight=\"501\" data-default-watermark-src=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-6ec3c3878fbd0e6ac24d829bd2a4c56f_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb\" width=\"498\" data-original=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-8820d93bfe66e9113e76355c3f84e6ba_r.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&amp;lt;svg xmlns=&amp;#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&amp;#39; width=&amp;#39;498&amp;#39; height=&amp;#39;501&amp;#39;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\" data-size=\"normal\" data-rawwidth=\"498\" data-rawheight=\"501\" data-default-watermark-src=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-6ec3c3878fbd0e6ac24d829bd2a4c56f_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"498\" data-original=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-8820d93bfe66e9113e76355c3f84e6ba_r.jpg?source=1940ef5c\" data-actualsrc=\"https:\u002F\u002Fpic2.zhimg.com\u002F50\u002Fv2-8820d93bfe66e9113e76355c3f84e6ba_hd.jpg?source=1940ef5c\"\u002F\u003E\u003Cfigcaption\u003E琪亚娜\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-dcd178ad3f2db6f3c71779266de2ae13_hd.jpg?source=1940ef5c\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"761\" data-rawheight=\"443\" data-default-watermark-src=\"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fv2-fcd87959c2b50ff40d6078efe1f1f6ca_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb\" width=\"761\" data-original=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-dcd178ad3f2db6f3c71779266de2ae13_r.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&amp;lt;svg xmlns=&amp;#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&amp;#39; width=&amp;#39;761&amp;#39; height=&amp;#39;443&amp;#39;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"761\" data-rawheight=\"443\" data-default-watermark-src=\"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fv2-fcd87959c2b50ff40d6078efe1f1f6ca_hd.jpg?source=1940ef5c\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"761\" data-original=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-dcd178ad3f2db6f3c71779266de2ae13_r.jpg?source=1940ef5c\" data-actualsrc=\"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-dcd178ad3f2db6f3c71779266de2ae13_hd.jpg?source=1940ef5c\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E主要实现功能：\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003EBlinn-Phong 基础着色\u003C\u002Fli\u003E\u003Cli\u003E背面剔除以及齐次空间裁剪\u003C\u002Fli\u003E\u003Cli\u003E基于物理的渲染和金属工作流\u003C\u002Fli\u003E\u003Cli\u003E实时IBL(Image-based lighting)\u003C\u002Fli\u003E\u003Cli\u003E...\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003E以下是我的一些个人学习过程分享\u003C\u002Fp\u003E\u003Cp\u003E首先是很多人都推荐的一个github上的项目tinyrenderer:\u003C\u002Fp\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fgithub.com\u002Fssloy\u002Ftinyrenderer\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E\u003Cspan class=\"invisible\"\u003Ehttps:\u002F\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"visible\"\u003Egithub.com\u002Fssloy\u002Ftinyre\u003C\u002Fspan\u003E\u003Cspan class=\"invisible\"\u003Enderer\u003C\u002Fspan\u003E\u003Cspan class=\"ellipsis\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cp\u003E跟着这个项目的文章确实很快可以实现出来一个简易的光栅化渲染器出来，但缺点是文章里很多知识讲解的并不是十分清楚，因此对于像我一样一开始没有什么图形基础的同学更加建议能够学习一遍闫令琪老师的图形入门课程，B站链接如下：\u003C\u002Fp\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fwww.bilibili.com\u002Fvideo\u002FBV1X7411F744%3Ffrom%3Dsearch%26seid%3D13728008737010812958\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-0236aa4f8d07681fc1631fb1fba01fb4_180x120.jpg\" data-image-width=\"1010\" data-image-height=\"631\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EGAMES101-现代计算机图形学入门-闫令琪_哔哩哔哩 (゜-゜)つロ 干杯~-bilibili\u003C\u002Fa\u003E\u003Cp\u003E这门课真的是十分良心，闫令琪老师对知识的讲解深入浅出，通俗易懂。同时也配套了8个课程作业，从光栅化到光线追踪，以及简单的物理模拟都有涉及，因此这意味着，只要能够通关这门课程，写出一个简单的光栅化渲染器并不是问题。当然对于学有余力的同学推荐配合这本\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fbook.douban.com\u002Fsubject\u002F26868819\u002F\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E虎书\u003C\u002Fa\u003E也能加深基础知识的理解。\u003C\u002Fp\u003E\u003Cp\u003E除却这门课程与参考书之外，在实现光栅化渲染器的过程当中还有一些小坑需要注意，如透视校正插值：\u003C\u002Fp\u003E\u003Ca href=\"https:\u002F\u002Fzhuanlan.zhihu.com\u002Fp\u002F144331875\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-f8ce5b59f29a79c8ac9d4ef5b253cd05_180x120.jpg\" data-image-width=\"1437\" data-image-height=\"971\" class=\"internal\"\u003E孙小磊：计算机图形学六：透视矫正插值和图形渲染管线总结\u003C\u002Fa\u003E\u003Cp\u003E切线空间坐标轴的计算：\u003C\u002Fp\u003E\u003Ca href=\"https:\u002F\u002Fzhuanlan.zhihu.com\u002Fp\u002F144357517\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-4d291dcdaf80a02290805716bb73d2b6_ipico.jpg\" data-image-width=\"1192\" data-image-height=\"1192\" class=\"internal\"\u003E孙小磊：计算机图形学八：纹理映射的应用(法线贴图，凹凸贴图与阴影贴图等相关应用的原理详解)\u003C\u002Fa\u003E\u003Cp\u003E(咳咳，这里我就厚颜无耻的贴自己写的总结文章了，其实同时也是GAMES101这门课的配套笔记，这两篇各自参考的英文原文我都在相应文章的底部参考有给出)\u003C\u002Fp\u003E\u003Cp\u003E另外关于基础PBR的原理及实现推荐learnopengl上的教程：\u003C\u002Fp\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Flearnopengl.com\u002FPBR\u002FTheory\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-e47e6c1ed42afd424e25c03b7e98c74a_180x120.jpg\" data-image-width=\"600\" data-image-height=\"362\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003ELearnOpenGL - Theory\u003C\u002Fa\u003E\u003Cp\u003E原理的讲解很清晰，也有相关的opengl实现代码，因此把相关的文章阅读一遍基本也就可以实现出来了，当然对于opengl不熟悉的同学也可以参考我项目中纯c++的实现。\u003C\u002Fp\u003E\u003Cp\u003E对于IBL(Image-based lighting)来说，知乎也有很多大佬优秀的文章，里面的许多公式推导是learnopengl教程中没有的，如：\u003C\u002Fp\u003E\u003Ca href=\"https:\u002F\u002Fzhuanlan.zhihu.com\u002Fp\u002F66518450\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-e843867c2e99c30cdf753f1736dc81ae_180x120.jpg\" data-image-width=\"1139\" data-image-height=\"855\" class=\"internal\"\u003EUbp.a：深入理解 PBR\u002F基于图像照明 (IBL)\u003C\u002Fa\u003E\u003Ca href=\"https:\u002F\u002Fzhuanlan.zhihu.com\u002Fp\u002F61962884\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-beef8f2749c6210f80516d1defae3c8b_180x120.jpg\" data-image-width=\"2640\" data-image-height=\"1383\" class=\"internal\"\u003Emoriya苏蛙可：DX12渲染管线(1) - 基于物理的渲染(PBR)\u003C\u002Fa\u003E\u003Cp\u003E第二篇文章中也有详细的IBL实现代码可以参考。\u003C\u002Fp\u003E\u003Cp\u003E关于图形界面的实现，我也是参考了 \u003Ca class=\"member_mention\" href=\"https:\u002F\u002Fwww.zhihu.com\u002Fpeople\u002F4045e2038d58be9abf26d6d37fb7a670\" data-hash=\"4045e2038d58be9abf26d6d37fb7a670\" data-hovercard=\"p$b$4045e2038d58be9abf26d6d37fb7a670\"\u003E@zauonlok\u003C\u002Fa\u003E 回答，在windows平台上直接利用了系统API，并加以实现了相机视角的简单旋转和移动：\u003C\u002Fp\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fgithub.com\u002FSunXLei\u002FSRender\u002Fblob\u002Fmaster\u002Fwin32\u002Fwin32.cpp\" data-draft-node=\"block\" data-draft-type=\"link-card\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E\u003Cspan class=\"invisible\"\u003Ehttps:\u002F\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"visible\"\u003Egithub.com\u002FSunXLei\u002FSRen\u003C\u002Fspan\u003E\u003Cspan class=\"invisible\"\u003Eder\u002Fblob\u002Fmaster\u002Fwin32\u002Fwin32.cpp\u003C\u002Fspan\u003E\u003Cspan class=\"ellipsis\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003Cp\u003E最后除了光栅化渲染器，如果你对光线追踪渲染器也十分感兴趣的话，阅读参考Peter Shirley的Raytracing三部也是不错的选择，该作者同样也是上面推荐的虎书的作者之一。\u003C\u002Fp\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fgithub.com\u002FRayTracing\u002Fraytracing.github.io\" data-draft-node=\"block\" data-draft-type=\"link-card\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E\u003Cspan class=\"invisible\"\u003Ehttps:\u002F\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"visible\"\u003Egithub.com\u002FRayTracing\u002Fr\u003C\u002Fspan\u003E\u003Cspan class=\"invisible\"\u003Eaytracing.github.io\u003C\u002Fspan\u003E\u003Cspan class=\"ellipsis\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003Cp\u003E----------------------------------------------------------------------------------------------------\u003C\u002Fp\u003E\u003Cp\u003ESRender本身实现的目的是为了自己能够更好的理解图形学当中的一些基础知识和算法，所以在效率上兼顾的并不够，同时由于是纯CPU计算实现，也没有添加多线程，在渲染IBL的场景的时候帧率还是有点低。如果有什么实现问题的话，也欢迎指正讨论！\u003C\u002Fp\u003E","editableContent":"","excerpt":"在今年上半年阅读了诸多高赞回答之后，就下定决心自己也学习整一个光栅化渲染器，最近也算是勉强完成了，因为个人对渲染器实现或是图形知识也基本零开始来的，因此感觉可以分享一下自己的学习过程和建议。（这里同时十分感谢 @zauonlok 实现的渲染器，收益良多 ）SRender项目地址： https:\u002F\u002Fgithub.com\u002FSunXLei\u002FSRender 项目同时也提供了二进制可执行文件，配合模型资源可以直接使用。 整个SRender的实现除了展示渲染结果的windows系统API，没有…","collapsedBy":"nobody","collapseReason":"","annotationAction":null,"markInfos":[],"relevantInfo":{"isRelevant":false,"relevantType":"","relevantText":""},"suggestEdit":{"reason":"","status":false,"tip":"","title":"","unnormalDetails":{"status":"","description":"","reason":"","reasonId":0,"note":""},"url":""},"isLabeled":false,"rewardInfo":{"canOpenReward":false,"isRewardable":false,"rewardMemberCount":0,"rewardTotalMoney":0,"tagline":""},"relationship":{"isAuthor":false,"isAuthorized":false,"isNothelp":false,"isThanked":false,"isRecognized":false,"voting":0,"upvotedFollowees":[]},"adAnswer":null}},"articles":{},"columns":{},"topics":{},"roundtables":{},"favlists":{},"comments":{},"notifications":{},"ebooks":{},"activities":{},"feeds":{},"pins":{},"promotions":{},"drafts":{},"chats":{},"posts":{},"clubs":{},"clubTags":{},"zvideos":{}},"currentUser":"5b6cbee5d01bbbae90228c8baf07c3aa","account":{"lockLevel":{},"unlockTicketStatus":false,"unlockTicket":null,"challenge":[],"errorStatus":false,"message":"","isFetching":false,"accountInfo":{},"urlToken":{"loading":false}},"settings":{"socialBind":null,"inboxMsg":null,"notification":{},"email":{},"privacyFlag":null,"blockedUsers":{"isFetching":false,"paging":{"pageNo":1,"pageSize":6},"data":[]},"blockedFollowees":{"isFetching":false,"paging":{"pageNo":1,"pageSize":6},"data":[]},"ignoredTopics":{"isFetching":false,"paging":{"pageNo":1,"pageSize":6},"data":[]},"restrictedTopics":null,"laboratory":{}},"notification":{},"people":{"profileStatus":{},"activitiesByUser":{},"answersByUser":{},"answersSortByVotesByUser":{},"answersIncludedByUser":{},"votedAnswersByUser":{},"thankedAnswersByUser":{},"voteAnswersByUser":{},"thankAnswersByUser":{},"topicAnswersByUser":{},"zvideosByUser":{},"articlesByUser":{},"articlesSortByVotesByUser":{},"articlesIncludedByUser":{},"pinsByUser":{},"questionsByUser":{},"commercialQuestionsByUser":{},"favlistsByUser":{},"followingByUser":{},"followersByUser":{},"mutualsByUser":{},"followingColumnsByUser":{},"followingQuestionsByUser":{},"followingFavlistsByUser":{},"followingTopicsByUser":{},"publicationsByUser":{},"columnsByUser":{},"allFavlistsByUser":{},"brands":null,"creationsByUser":{},"creationsSortByVotesByUser":{},"creationsFeed":{},"infinity":{},"batchUsers":{}},"env":{"ab":{"config":{"experiments":[{"expId":"launch-li_video-3","expPrefix":"li_video","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-qa_art2qa_new-3","expPrefix":"qa_art2qa_new","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-qa_cl_guest-2","expPrefix":"qa_cl_guest","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-qa_repost-2","expPrefix":"qa_repost","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-tp_zrec-8","expPrefix":"tp_zrec","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-us_adjust_new-11","expPrefix":"us_adjust_new","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-us_noti_count-8","expPrefix":"us_noti_count","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_andplay_d-2","expPrefix":"vd_andplay_d","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_hookupplay_an-2","expPrefix":"vd_hookupplay_an","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_ios_play-10","expPrefix":"vd_ios_play","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_timeguide-2","expPrefix":"vd_timeguide","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_video_replay-3","expPrefix":"vd_video_replay","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_zvideo_link-10","expPrefix":"vd_zvideo_link","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-zanswer-2","expPrefix":"zanswer","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-recnew_2th-3","expPrefix":"recnew_2th","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"se_infinity6-4","expPrefix":"se_infinity6","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"se_meta_ss-4","expPrefix":"se_meta_ss","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"qa_cdzixun-1","expPrefix":"qa_cdzixun","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"vd_video_tab-9","expPrefix":"vd_video_tab","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"li_tp_paidanswer-9","expPrefix":"li_tp_paidanswer","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"tp_content-1","expPrefix":"tp_content","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"gw_qrlogin-1","expPrefix":"gw_qrlogin","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"rec_expslotpaid-1","expPrefix":"rec_expslotpaid","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"xuanpinceshi-5_v3","expPrefix":"xuanpinceshi","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"office_xp-2_v2","expPrefix":"office_xp","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"xuanpinab-1_v4","expPrefix":"xuanpinab","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"pc_editorplugin-1_v3","expPrefix":"pc_editorplugin","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"Test_Punk-3_v2","expPrefix":"Test_Punk","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"meta_ebook-2_v2","expPrefix":"meta_ebook","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"webpImg-2_v3","expPrefix":"webpImg","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"vdox_cmt-1_v2","expPrefix":"vdox_cmt","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"ffzix_xgdzwz-3_v1","expPrefix":"ffzix_xgdzwz","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"hwtj_bottom_btn-4_v2","expPrefix":"hwtj_bottom_btn","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"rec_new2th-2_v4","expPrefix":"rec_new2th","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"se_zp_five-4_v1","expPrefix":"se_zp_five","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"hw_aa_30-3_v2","expPrefix":"hw_aa_30","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"hw_aa_50-2_v1","expPrefix":"hw_aa_50","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"se_filter-4_v7","expPrefix":"se_filter","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"se_sug_exp-4_v2","expPrefix":"se_sug_exp","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"se_personal_ab-5_v17","expPrefix":"se_personal_ab","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"phrase_recall-3_v4","expPrefix":"phrase_recall","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"test_3-2_v1","expPrefix":"test_3","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"book_kpwz-2_v1","expPrefix":"book_kpwz","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"se_cp_post3-3_v1","expPrefix":"se_cp_post3","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false}],"params":[{"id":"ge_newyanzhi","type":"String","value":"0","chainId":"_gene_","layerId":"geus_layer_1019","key":2788},{"id":"hw_aa_50","type":"Int","value":"1","chainId":"_gene_","layerId":"hw_aa_50","key":362},{"id":"gue_card_test","type":"String","value":"1","layerId":"gueqa_layer_2"},{"id":"ge_relation2","type":"String","value":"1","chainId":"_gene_","layerId":"gese_layer_815","key":2796},{"id":"gue_v_serial","type":"String","value":"1","layerId":"guevd_layer_695"},{"id":"se_dssm","type":"Int","value":"0","chainId":"_gene_","layerId":"se_dssm","key":392},{"id":"phrase_recall","type":"Int","value":"1","chainId":"_gene_","layerId":"phrase_recall","key":603},{"id":"web_column_auto_invite","type":"String","value":"0","layerId":"webqa_layer_1"},{"id":"se_mixer_roll","type":"Int","value":"0","chainId":"_gene_","layerId":"se_mixer_roll","key":699},{"id":"ge_yuzhi_v1","type":"String","value":"1","chainId":"_gene_","layerId":"gese_layer_1029","key":3127},{"id":"se_ffzx_jushen1","type":"String","value":"0","chainId":"_all_","layerId":"sese_layer_4"},{"id":"pf_noti_entry_num","type":"String","value":"2","chainId":"_all_","layerId":"pfus_layer_718"},{"id":"gue_iosplay","type":"String","value":"1","layerId":"guevd_layer_810"},{"id":"gue_bulletmb","type":"String","value":"0","layerId":"guevd_layer_812"},{"id":"show_ad","type":"Int","value":"0","chainId":"_gene_","layerId":"show_ad","key":27},{"id":"se_personal_ab","type":"Int","value":"2","chainId":"_gene_","layerId":"VzX9","key":554},{"id":"gue_messrec","type":"String","value":"0","layerId":"gueqa_layer_769"},{"id":"web_answer_list_ad","type":"String","value":"1","layerId":"webqa_layer_4"},{"id":"ge_newcard","type":"String","value":"3","chainId":"_gene_","layerId":"geus_layer_839","key":2997},{"id":"qap_question_visitor","type":"String","value":" 0","chainId":"_all_","layerId":"qapqa_layer_2"},{"id":"tp_dingyue_video","type":"String","value":"0","chainId":"_all_","layerId":"tptp_layer_4"},{"id":"top_test_4_liguangyi","type":"String","value":"1","chainId":"_all_","layerId":"iosus_layer_1"},{"id":"xuanpinab","type":"Int","value":"0","layerId":"xuanpinab"},{"id":"web_sem_ab","type":"String","value":"1","layerId":"webgw_layer_3"},{"id":"li_sp_mqbk","type":"String","value":"0","chainId":"_all_","layerId":"lili_layer_748"},{"id":"gue_fo_recom","type":"String","value":"0","layerId":"gueqa_layer_780"},{"id":"office_xp","type":"Int","value":"6666","layerId":"office_xp"},{"id":"test_3","type":"Int","value":"1","chainId":"_gene_","layerId":"dABe","key":637},{"id":"se_cp_question","type":"Int","value":"0","chainId":"_gene_","layerId":"se_cp_question","key":704},{"id":"se_zhiplus_cpc","type":"Int","value":"0","chainId":"_gene_","layerId":"se_zhiplus_cpc","key":716},{"id":"gue_visit_n_artcard","type":"String","value":"1","layerId":"gueqa_layer_579"},{"id":"zr_expslotpaid","type":"String","value":"1","chainId":"_all_","layerId":"zrrec_layer_11"},{"id":"gue_video_replay","type":"String","value":"2","layerId":"guevd_layer_3"},{"id":"haojiakp","type":"Int","value":"0","layerId":"haojiakp"},{"id":"km_detail_knn","type":"Int","value":"0","layerId":"TY59"},{"id":"se_4a","type":"Int","value":"0","chainId":"_gene_","layerId":"rtiq","key":335},{"id":"Full_ans_fav","type":"Int","value":"0","chainId":"_gene_","layerId":"Pnd6","key":372},{"id":"se_cp_answer","type":"Int","value":"0","chainId":"_gene_","layerId":"se_cp_answer","key":705},{"id":"ts_cardtitle","type":"Int","value":"0","layerId":"ZED7"},{"id":"pfd_newbie2","type":"Int","value":"0","chainId":"_gene_","layerId":"pfd_newbie2","key":71},{"id":"se_fix_ebook","type":"Int","value":"0","chainId":"_gene_","layerId":"se_fix_ebook","key":103},{"id":"ge_meta_ss","type":"String","value":"1","chainId":"_gene_","layerId":"gese_layer_834","key":3079},{"id":"gue_andplayd","type":"String","value":"1","layerId":"guevd_layer_686"},{"id":"click_new_tb","type":"Int","value":"0","chainId":"_gene_","layerId":"1vYQ","key":422},{"id":"gue_profile_video","type":"String","value":"1","layerId":"guevd_layer_5"},{"id":"ts_refresh","type":"Int","value":"1","layerId":"EBn6"},{"id":"ts_refresh2","type":"Int","value":"1","layerId":"heWh"},{"id":"recnew_2th","type":"Int","value":"21","chainId":"_gene_","layerId":"l-recnew_2th","key":67},{"id":"se_cp_post3","type":"Int","value":"1","chainId":"_gene_","layerId":"se_cp_post3","key":706},{"id":"ge_item","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_945","key":2971},{"id":"gue_sharp","type":"String","value":"1","layerId":"guevd_layer_686"},{"id":"gue_repost","type":"String","value":"1","layerId":"gueqa_layer_671"},{"id":"zr_slotpaidexp","type":"String","value":"1","chainId":"_all_","layerId":"zrrec_layer_5"},{"id":"xuanpinceshi","type":"Int","value":"3399","layerId":"xuanpinceshi"},{"id":"correct_cnn","type":"Int","value":"0","chainId":"_gene_","layerId":"correct_cnn","key":397},{"id":"andserial","type":"Int","value":"0","chainId":"_gene_","layerId":"andserial","key":711},{"id":"pfd_newbie","type":"Int","value":"0","chainId":"_gene_","layerId":"pfd_newbie","key":63},{"id":"ge_guess","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_938","key":2912},{"id":"web_answerlist_ad","type":"String","value":"0","layerId":"webqa_layer_1"},{"id":"gue_video_guide","type":"String","value":"1","layerId":"guevd_layer_625"},{"id":"webpImg","type":"Int","value":"2","layerId":"JnVt"},{"id":"se_zp_five","type":"Int","value":"1","chainId":"_gene_","layerId":"se_zp_five","key":344},{"id":"li_panswer_topic","type":"String","value":"0","chainId":"_all_","layerId":"lili_layer_602"},{"id":"web_collection_guest","type":"String","value":"1","layerId":"webqa_layer_4"},{"id":"ge_infinity6","type":"String","value":"2","chainId":"_gene_","layerId":"gese_layer_815","key":2817},{"id":"ge_prf_rec","type":"String","value":"0","chainId":"_gene_","layerId":"getop_layer_991","key":3040},{"id":"pf_adjust","type":"String","value":"1","chainId":"_all_","layerId":"pfus_layer_9"},{"id":"rec_new2th","type":"Int","value":"1","chainId":"_gene_","layerId":"Hump","key":320},{"id":"se_dwd_all","type":"Int","value":"0","chainId":"_gene_","layerId":"se_dwd_all","key":621},{"id":"gue_q_share","type":"String","value":"0","layerId":"gueqa_layer_647"},{"id":"gue_goods_card","type":"String","value":"0","layerId":"gueqa_layer_1"},{"id":"ge_dipin_pre","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_1000","key":3124},{"id":"tp_topic_style","type":"String","value":"0","chainId":"_all_","layerId":"tptp_layer_4"},{"id":"li_paid_answer_exp","type":"String","value":"0","chainId":"_all_","layerId":"lili_layer_3"},{"id":"gue_bullet_guide","type":"String","value":"发个弹幕聊聊…","layerId":"guevd_layer_0"},{"id":"gue_bullet_second","type":"String","value":"1","layerId":"guevd_layer_1"},{"id":"Test_Punk","type":"Int","value":"1","layerId":"Test_Punk"},{"id":"se_cvr_boost","type":"Int","value":"0","chainId":"_gene_","layerId":"se_cvr_boost","key":183},{"id":"ge_rec_2th","type":"String","value":"11","chainId":"_gene_","layerId":"geli_layer_965","key":3023},{"id":"ge_search_ui","type":"String","value":"1","chainId":"_gene_","layerId":"gese_layer_838","key":2898},{"id":"ge_upload","type":"String","value":"0","chainId":"_gene_","layerId":"geus_layer_839","key":2892},{"id":"test_rec","type":"Int","value":"10","layerId":"test_rec"},{"id":"book_kpwz","type":"Int","value":"1","chainId":"_gene_","layerId":"Zyox","key":671},{"id":"se_timebox","type":"Int","value":"0","chainId":"_gene_","layerId":"se_timebox","key":689},{"id":"se_images","type":"Int","value":"0","chainId":"_gene_","layerId":"se_images","key":652},{"id":"ge_hard_s_ma","type":"String","value":"0","chainId":"_gene_","layerId":"geli_layer_856","key":3031},{"id":"ge_v_rank_v3","type":"Int","value":"0","chainId":"_gene_","layerId":"FPcB","key":581},{"id":"web_audit_01","type":"String","value":"case1","layerId":"webre_layer_1"},{"id":"pc_editorplugin","type":"Int","value":"0","layerId":"pc_editorplugin"},{"id":"edu_cd1","type":"Int","value":"0","layerId":"l18Y"},{"id":"ad_com_zhi","type":"Int","value":"0","chainId":"_gene_","layerId":"ad_com_zhi","key":571},{"id":"ge_sug_rep","type":"String","value":"1","chainId":"_gene_","layerId":"gese_layer_1034","key":3158},{"id":"zanswer","type":"Int","value":"1","layerId":"l-zanswer"},{"id":"vdox_cmt","type":"Int","value":"0","layerId":"vdox_cmt"},{"id":"ge_newbie3","type":"Int","value":"0","chainId":"_gene_","layerId":"ge_newbie3","key":180},{"id":"gue_art2qa","type":"String","value":"0","layerId":"gueqa_layer_579"},{"id":"se_sug_exp","type":"Int","value":"3","chainId":"_gene_","layerId":"9ZDG","key":522},{"id":"comment","type":"Int","value":"0","chainId":"_gene_","layerId":"comment","key":644},{"id":"web_heifetz_grow_ad","type":"String","value":"1","layerId":"webgw_layer_3"},{"id":"tp_zrec","type":"String","value":"1","chainId":"_all_","layerId":"tptp_layer_619"},{"id":"gue_art_ui","type":"String","value":"2","layerId":"gueqa_layer_647"},{"id":"gue_recmess","type":"String","value":"0","layerId":"gueqa_layer_795"},{"id":"ge_entity","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_946","key":3036},{"id":"li_vip_verti_search","type":"String","value":"0","chainId":"_all_","layerId":"lili_layer_2"},{"id":"gue_zvideo_link","type":"String","value":"1","layerId":"guevd_layer_2"},{"id":"club_fn","type":"Int","value":"1","layerId":"club_fn"},{"id":"hwtj_bottom_btn","type":"Int","value":"4","layerId":"jrhg"},{"id":"hw_aa_30","type":"Int","value":"2","chainId":"_gene_","layerId":"hw_aa_30","key":361},{"id":"gue_cdzixun","type":"String","value":"0","layerId":"gueqa_layer_3"},{"id":"ge_sxzx","type":"String","value":"0","chainId":"_gene_","layerId":"gere_layer_990","key":3060},{"id":"tp_contents","type":"String","value":"2","chainId":"_all_","layerId":"tptp_layer_627"},{"id":"meta_ebook","type":"Int","value":"1","layerId":"meta_ebook"},{"id":"se_prerank_card","type":"Int","value":"0","chainId":"_gene_","layerId":"se_prerank_card","key":656},{"id":"se_lr","type":"Int","value":"0","chainId":"_gene_","layerId":"se_lr","key":698},{"id":"ge_video","type":"String","value":"1","chainId":"_gene_","layerId":"geli_layer_856","key":2831},{"id":"web_scl_rec","type":"String","value":"0","layerId":"webgw_layer_759"},{"id":"ge_usercard1","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_742","key":2740},{"id":"ge_emoji","type":"String","value":"0","chainId":"_gene_","layerId":"getp_layer_827","key":3209},{"id":"rec_3th","type":"Int","value":"11","chainId":"_gene_","layerId":"rec_3th","key":697},{"id":"iosserial","type":"Int","value":"0","chainId":"_gene_","layerId":"iosserial","key":714},{"id":"ffzix_xgdzwz","type":"Int","value":"1","layerId":"ffzix_xgdzwz"},{"id":"se_filter","type":"Int","value":"2","chainId":"_gene_","layerId":"2NQZ","key":363},{"id":"se_mixer_km","type":"Int","value":"0","chainId":"_gene_","layerId":"se_mixer_km","key":649},{"id":"gue_playh_an","type":"String","value":"1","layerId":"guevd_layer_622"},{"id":"se_prank_decay","type":"Int","value":"0","chainId":"_gene_","layerId":"se_prank_decay","key":703},{"id":"web_login","type":"String","value":"0","layerId":"webgw_layer_759"},{"id":"li_edu_page","type":"String","value":"old","chainId":"_all_","layerId":"lili_layer_580"},{"id":"qap_question_author","type":"String","value":"0","chainId":"_all_","layerId":"qapqa_layer_2"},{"id":"gue_vid_tab","type":"String","value":"7","layerId":"guevd_layer_900"}],"chains":[{"chainId":"_all_"}],"encodedParams":"CnjkCmoB7AqIAVsCuwI3DBsAKgK1C30CwALMAk8BdAHBAkcAZwAHDKYBQwDCApsLjQHHAj8AYAtYAQEL4AtAAW0CNAy3AM8LUgtMC58CsQKMAtcLRQI7AlYMtAAKAoQC3AtpAfQLkAK6Ag8LtAqJDLkCygJrAYkCvwISPAABAQABAAEAAgMBAAAAAAAAAAEAFQEAAAAAAAECAAEAAAALAQABAAAAAAABAAMAAAIAAAABAAALAAIAAA=="},"triggers":{}},"userAgent":{"Edge":false,"IE":false,"Wechat":false,"Weibo":false,"QQ":false,"MQQBrowser":false,"Qzone":false,"Mobile":false,"Android":false,"iOS":false,"isAppleDevice":false,"Zhihu":false,"ZhihuHybrid":false,"isBot":false,"Tablet":false,"UC":false,"Sogou":false,"Qihoo":false,"Baidu":false,"BaiduApp":false,"Safari":false,"GoogleBot":false,"AndroidDaily":false,"iOSDaily":false,"WxMiniProgram":false,"BaiduMiniProgram":false,"QQMiniProgram":false,"JDMiniProgram":false,"isWebView":false,"isMiniProgram":false,"origin":"Mozilla\u002F5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\u002F537.36 (KHTML, like Gecko) Chrome\u002F90.0.4430.85 Safari\u002F537.36"},"appViewConfig":{},"ctx":{"path":"\u002Fquestion\u002F24786878","query":{},"href":"http:\u002F\u002Fwww.zhihu.com\u002Fquestion\u002F24786878","host":"www.zhihu.com"},"trafficSource":"production","edition":{"beijing":false,"baidu":false,"sogou":false,"baiduBeijing":false,"sogouBeijing":false,"sogouInput":false,"baiduSearch":false,"googleSearch":false,"miniProgram":false,"xiaomi":false},"theme":"light","enableShortcut":true,"referer":"","xUDId":"AFDb8Tc0yRKPTjhlczFeFEN9vmUruaPySuc=","mode":"ssr","conf":{},"xTrafficFreeOrigin":"","ipInfo":{},"logged":true,"vars":{"passThroughHeaders":{}}},"me":{"columnContributions":[]},"label":{"recognizerLists":{}},"ecommerce":{},"comments":{"pagination":{},"collapsed":{},"reverse":{},"reviewing":{},"conversation":{},"parent":{}},"commentsV2":{"stickers":[],"commentWithPicPermission":{},"notificationsComments":{},"pagination":{},"collapsed":{},"reverse":{},"reviewing":{},"conversation":{},"conversationMore":{},"parent":{}},"pushNotifications":{"default":{"isFetching":false,"isDrained":false,"ids":[]},"follow":{"isFetching":false,"isDrained":false,"ids":[]},"vote_thank":{"isFetching":false,"isDrained":false,"ids":[]},"currentTab":"default","notificationsCount":{"default":0,"follow":0,"vote_thank":0}},"messages":{"data":{},"currentTab":"common","messageCount":0},"register":{"registerValidateSucceeded":null,"registerValidateErrors":{},"registerConfirmError":null,"sendDigitsError":null,"registerConfirmSucceeded":null},"login":{"loginUnregisteredError":false,"loginBindWechatError":false,"loginConfirmError":null,"sendDigitsError":null,"needSMSIdentify":false,"validateDigitsError":false,"loginConfirmSucceeded":null,"qrcodeLoginToken":"","qrcodeLoginScanStatus":0,"qrcodeLoginError":null,"qrcodeLoginReturnNewToken":false},"switches":{},"captcha":{"captchaNeeded":false,"captchaValidated":false,"captchaBase64String":null,"captchaValidationMessage":null,"loginCaptchaExpires":false},"sms":{"supportedCountries":[]},"chat":{"chats":{},"inbox":{"recents":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"strangers":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"friends":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"search":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"config":{"newCount":0,"strangerMessageSwitch":false,"strangerMessageUnread":false,"friendCount":0}},"global":{"isChatMqttExisted":false}},"emoticons":{"emoticonGroupList":[],"emoticonGroupDetail":{}},"creator":{"currentCreatorUrlToken":null,"homeData":{"recommendQuestions":[]},"tools":{"question":{"invitationCount":{"questionFolloweeCount":0,"questionTotalCount":0},"goodatTopics":[]},"customPromotion":{"itemLists":{}},"recommend":{"recommendTimes":{}}},"explore":{"academy":{"tabs":[],"article":{}}},"rights":[],"rightsStatus":{},"levelUpperLimit":10,"account":{"growthLevel":{}},"mcn":{},"applyStatus":{},"videoSupport":{},"mcnManage":{},"tasks":{},"recentlyCreated":[],"analysis":{"all":{},"answer":{},"zvideo":{},"article":{},"pin":{},"singleContent":{}},"announcement":{},"school":{"tabs":[],"contents":[],"banner":null,"entities":{}}},"question":{"followers":{},"concernedFollowers":{},"answers":{"24786878":{"isFetching":false,"isDrained":false,"ids":[820931418,29039253,1483055155,105988273,28971381],"newIds":[820931418,29039253,1483055155,105988273,28971381],"totals":41,"error":false,"isPrevDrained":true,"previous":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fquestions\u002F24786878\u002Fanswers?include=data%5B%2A%5D.is_normal%2Cadmin_closed_comment%2Creward_info%2Cis_collapsed%2Cannotation_action%2Cannotation_detail%2Ccollapse_reason%2Cis_sticky%2Ccollapsed_by%2Csuggest_edit%2Ccomment_count%2Ccan_comment%2Ccontent%2Ceditable_content%2Cattachment%2Cvoteup_count%2Creshipment_settings%2Ccomment_permission%2Ccreated_time%2Cupdated_time%2Creview_info%2Crelevant_info%2Cquestion%2Cexcerpt%2Cis_labeled%2Cpaid_info%2Cpaid_info_content%2Crelationship.is_authorized%2Cis_author%2Cvoting%2Cis_thanked%2Cis_nothelp%2Cis_recognized%3Bdata%5B%2A%5D.mark_infos%5B%2A%5D.url%3Bdata%5B%2A%5D.author.follower_count%2Cbadge%5B%2A%5D.topics%3Bdata%5B%2A%5D.settings.table_of_content.enabled&amp;limit=5&amp;offset=0&amp;platform=desktop&amp;sort_by=default","next":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fquestions\u002F24786878\u002Fanswers?include=data%5B%2A%5D.is_normal%2Cadmin_closed_comment%2Creward_info%2Cis_collapsed%2Cannotation_action%2Cannotation_detail%2Ccollapse_reason%2Cis_sticky%2Ccollapsed_by%2Csuggest_edit%2Ccomment_count%2Ccan_comment%2Ccontent%2Ceditable_content%2Cattachment%2Cvoteup_count%2Creshipment_settings%2Ccomment_permission%2Ccreated_time%2Cupdated_time%2Creview_info%2Crelevant_info%2Cquestion%2Cexcerpt%2Cis_labeled%2Cpaid_info%2Cpaid_info_content%2Crelationship.is_authorized%2Cis_author%2Cvoting%2Cis_thanked%2Cis_nothelp%2Cis_recognized%3Bdata%5B%2A%5D.mark_infos%5B%2A%5D.url%3Bdata%5B%2A%5D.author.follower_count%2Cbadge%5B%2A%5D.topics%3Bdata%5B%2A%5D.settings.table_of_content.enabled&amp;limit=5&amp;offset=5&amp;platform=desktop&amp;sort_by=default"}},"hiddenAnswers":{},"updatedAnswers":{},"collapsedAnswers":{},"notificationAnswers":{},"invitedQuestions":{"total":{"count":null,"isEnd":false,"isLoading":false,"questions":[]},"followees":{"count":null,"isEnd":false,"isLoading":false,"questions":[]}},"laterQuestions":{"count":null,"globalWriteAnimate":false,"isEnd":false,"isLoading":false,"questions":[]},"waitingQuestions":{"recommend":{"isEnd":false,"isLoading":false,"questions":[]},"hot":{"isEnd":false,"isLoading":false,"questions":[]},"newest":{"isEnd":false,"isLoading":false,"questions":[]},"invite":{"isEnd":false,"isLoading":false,"questions":[]}},"invitationCandidates":{},"inviters":{},"invitees":{},"similarQuestions":{},"relatedCommodities":{},"bio":{},"brand":{},"permission":{},"adverts":{},"advancedStyle":{},"commonAnswerCount":0,"hiddenAnswerCount":0,"meta":{},"bluestarRanklist":{},"relatedSearch":{},"autoInvitation":{},"simpleConcernedFollowers":{},"draftStatus":{},"disclaimers":{}},"shareTexts":{},"answers":{"voters":{},"copyrightApplicants":{},"favlists":{},"newAnswer":{},"concernedUpvoters":{},"simpleConcernedUpvoters":{},"paidContent":{},"settings":{}},"banner":{},"topic":{"bios":{},"hot":{},"newest":{},"top":{},"unanswered":{},"questions":{},"followers":{},"contributors":{},"parent":{},"children":{},"bestAnswerers":{},"wikiMeta":{},"index":{},"intro":{},"meta":{},"schema":{},"creatorWall":{},"wikiEditInfo":{},"committedWiki":{},"landingBasicData":{},"landingExcellentItems":[],"landingExcellentEditors":[],"landingCatalog":[],"landingEntries":{}},"explore":{"recommendations":{},"specials":{"entities":{},"order":[]},"roundtables":{"entities":{},"order":[]},"collections":{},"columns":{}},"articles":{"voters":{},"concernedUpvoters":{}},"favlists":{"relations":{}},"pins":{"reviewing":{}},"topstory":{"recommend":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"follow":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"room":{"meta":{},"isFetching":false,"afterId":0,"items":[],"next":null},"followWonderful":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"sidebar":null,"announcement":{},"hotListCategories":[],"hotList":[],"guestFeeds":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"followExtra":{"isNewUser":null,"isFetched":false,"followCount":0,"followers":[]},"hotDaily":{"data":[],"paging":{}},"hotHighlight":{"isFetching":false,"isDrained":false,"data":[],"paging":{}},"banner":{}},"upload":{},"video":{"data":{},"shareVideoDetail":{},"last":{}},"zvideos":{"campaigns":{},"tagoreCategory":[],"recommendations":{},"insertable":{},"recruit":{"form":{"platform":"","nickname":"","followerCount":"","domain":"","contact":""},"submited":false,"ranking":[]},"club":{},"qyActivityData":{},"batchVideos":{},"contribution":{"configs":{},"contributionLists":{},"recommendQuestions":{"isLoading":true,"paging":{"isEnd":false,"isStart":true,"totals":0},"data":[]},"questionSearchResults":{"isLoading":true,"paging":{"isEnd":false,"isStart":true,"totals":0},"data":[]}}},"guide":{"guide":{"isFetching":false,"isShowGuide":false}},"reward":{"answer":{},"article":{},"question":{}},"search":{"recommendSearch":[],"topSearch":{},"searchValue":{},"suggestSearch":{},"attachedInfo":{},"nextOffset":{},"topicReview":{},"generalByQuery":{},"generalByQueryInADay":{},"generalByQueryInAWeek":{},"generalByQueryInThreeMonths":{},"peopleByQuery":{},"clubentityByQuery":{},"clubPostByQuery":{},"topicByQuery":{},"zvideoByQuery":{},"columnByQuery":{},"liveByQuery":{},"albumByQuery":{},"eBookByQuery":{},"kmGeneralByQuery":{}},"publicEditPermission":{},"vessay":{"common":{"draftId":null,"source":{"type":null,"id":null},"autoSave":true,"blockUnload":true,"isCalibratingEditing":false,"editingTrackData":{"editingOutlines":[],"editingVideos":[]},"newAddMaterialData":{},"audioCache":{}},"loading":{"isLoading":false,"text":"正在加载中"},"player":{"currentTime":0,"totalTime":0,"playing":false},"library":{"material":{},"materialSearchResult":{},"music":{},"musicLibraryCategories":[],"musicUrls":{}},"track":{"trackData":{"dataVersion":1,"videoTrack":[],"audioTrack":[],"musicTrack":[],"voiceOverData":{}},"previewEditingTrackData":{"editingSubtitleItem":{},"editingVideoItem":{}},"selectedTrackItems":[],"outlineRemoveMaterial":{},"outlineAppliedStyle":{}}},"readStatus":{},"draftHistory":{"history":{},"drafts":{}},"notifications":{"recent":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"history":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"notificationActors":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"recentNotificationEntry":"all"},"specials":{"entities":{},"all":{"data":[],"paging":{},"isLoading":false}},"collections":{"hot":{"data":[],"paging":{},"isLoading":false},"collectionFeeds":{}},"userProfit":{"permission":{"permissionStatus":{"zhiZixuan":0,"recommend":-1,"task":0,"plugin":0,"infinity":0},"visible":false}},"mcn":{"bindInfo":{},"memberCategoryList":[],"producerList":[],"categoryList":[],"lists":{},"banners":{},"protocolStatus":{"isAgreedNew":true,"isAgreedOld":true},"probationCountdownDays":0},"mcnActivity":{"household":{"products":{},"rankList":{"total":{},"yesterday":{}}}},"brand":{"contentPlugin":{}},"host":{"roundtable":{"subjects":{},"applications":{"total":0},"online":{"total":0},"applies":{},"details":{},"includedResource":{},"hotQuestions":{},"warmupContents":{},"batchInclude":{}},"special":{"applications":{"total":0,"pages":{},"entities":{}},"censorHistory":{},"drafts":{}}},"campaign":{"single":{},"list":{},"videoMakerAcq":{},"vote":{},"cardCollecting":{"message":null,"profile":{"balance":"0","chance":0,"coinNum":0,"gatherClose":false,"isGotMagicCard":false,"isPay":false,"partitionStart":false,"totalDone":0,"withdrawStart":false},"sharePoster":{"share":"","sendCard":"","invite":""},"shareLink":null,"shareIntention":"share","shareKey":null,"shareCardId":null,"inviterInfo":null,"giverInfo":null,"prize":null,"receivedCard":null,"newCoinCount":null,"newCardList":[],"newUserCardCount":1,"taskList":[],"prizeList":null,"cardList":null,"panel":{"showTaskPanel":false,"showRewardPanel":false},"modal":{"showWelcomeModal":false,"showFusionModal":false,"showFusionPromptModal":false,"showShareModal":false,"showBackModal":false}},"zhiboPandian2020":null,"boarding":{}},"knowledgePlan":{"lists":{},"allCreationRankList":{},"featuredQuestions":{}},"wallE":{"protectHistory":{"total":0,"pages":{},"entities":{}}},"roundtables":{"hotQuestions":{},"warmupContents":{},"hotDiscussions":{},"selectedContents":{},"roundtables":{}},"helpCenter":{"entities":{"question":{},"category":{}},"categories":[],"commonQuestions":[],"relatedQuestions":{}},"republish":{},"commercialReport":{"commercialTypes":[]},"creatorMCN":{"mcn":{},"mcnStatistics":{},"isNoAuth":false,"creatorManageData":[],"creatorManageDataTotal":1,"mcnDomains":[]},"commentManage":{"commentList":{"ids":[],"entities":{},"nextOffset":0,"urlToken":""},"subCommentList":{"ids":[],"entities":{},"paging":{"next":"","isEnd":false}}},"zhiPlus":{"permissionStatus":9999}},"subAppName":"main"}</script><script crossorigin="" src="https://static.zhihu.com/heifetz/vendor.bfefaa5cfee5584ea98c.js"></script><script crossorigin="" src="https://static.zhihu.com/heifetz/main.app.251b1debde05e73d44c8.js"></script><script crossorigin="" src="https://static.zhihu.com/heifetz/main.question-routes.2fd83cb5012381307d0a.js"></script><script src="https://hm.baidu.com/hm.js?98beee57fd2ef70ccdd5ca52b9740c49" async=""></script><script crossorigin="" src="https://unpkg.zhimg.com/za-js-sdk@2.31.0/dist/zap.js"></script><script src="https://zz.bdstatic.com/linksubmit/push.js"></script><div><div style="display: none;">想来知乎工作？请发送邮件到 jobs@zhihu.com</div></div><div><div><div class="css-8pdeid"></div></div></div></body></html>