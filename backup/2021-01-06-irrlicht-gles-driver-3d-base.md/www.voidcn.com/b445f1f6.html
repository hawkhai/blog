<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Irrlicht学习笔记(10)--PerPixelLighting - 程序园</title>
    <meta name="keywords" content="irrlicht,学习,笔记,10,perpixellighting" />
    <meta name="description" content="说明: 本例子介绍: 逐像素光照 雾 移动粒子. 使用引擎内置的一个更复杂的材质shader: 使用法线图和视差(parallax)图实现逐像素光照表面 详细步骤,请看源码注释 源码: /**&#10;*逐像素光照,雾,移动光,粒子&#10;*/&#10;#include &lt;iostream&gt;&#10;#include &lt;irrlicht.h&gt;&#10;#include " driverchoice.h"="" using="" namespace"="" />
    <meta name="google-site-verification" content="eVo932LL8QghamZXYXdbvMxZcdr2v6nNXj2f7mfA1cw" />

    <link rel="shortcut icon" href="http://static02.voidcn.com/voidcn/favicon.ico" type="image/x-icon" />
    <link href="http://static02.voidcn.com/voidcn/css/pub.min.css?time=1607228017586" rel="stylesheet" />
    <link href="http://static02.voidcn.com/voidcn/css/application.min.css?time=1607228017586" media="screen" rel="stylesheet" type="text/css" />
    <link href="http://static02.voidcn.com/voidcn/css/font-awesome.css?time=1607228017586" rel="stylesheet" />

    <script type="text/javascript" async="" src="https://www.google-analytics.com/analytics.js"></script><script src="https://hm.baidu.com/hm.js?05fb07b91f60527211b85c9c9b431b73"></script><script src="https://pagead2.googlesyndication.com/pagead/js/r20201203/r20190131/reactive_library_fy2019.js"></script><script src="https://www.googletagservices.com/activeview/js/current/osd.js?cb=%2Fr20100101"></script><script src="https://partner.googleadservices.com/gampad/cookie.js?domain=www.voidcn.com&amp;callback=_gfp_s_&amp;client=ca-pub-6208739752673518"></script><script src="https://pagead2.googlesyndication.com/pagead/js/r20201203/r20190131/show_ads_impl_fy2019.js" id="google_shimpl"></script><script src="http://static02.voidcn.com/voidcn/script/pub.js?time=1607228017586" type="text/javascript"></script>
    <script src="http://static02.voidcn.com/voidcn/script/application.js?time=1607228017586" type="text/javascript"></script>
    <script src="http://static02.voidcn.com/voidcn/script/echo.js?time=1607228017586" type="text/javascript"></script>

    <script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6208739752673518",
            enable_page_level_ads: true
        });
    </script>

<link rel="preload" href="https://adservice.google.com/adsid/integrator.js?domain=www.voidcn.com" as="script" /><script type="text/javascript" src="https://adservice.google.com/adsid/integrator.js?domain=www.voidcn.com"></script><script src="http://bdimg.share.baidu.com/static/api/js/share.js?cdnversion=447200"></script><link href="http://static02.voidcn.com/voidcn/css/share.css" rel="styleSheet" type="text/css" /></head>

<body class="  pace-done" aria-hidden="false"><div class="pace  pace-inactive"><div class="pace-progress" data-progress-text="100%" data-progress="99" style="transform: translate3d(100%, 0px, 0px);">
  <div class="pace-progress-inner"></div>
</div>
<div class="pace-activity"></div></div>

<div id="header" class="navbar-fixed-top">
    <div class="container">
        <div class="navbar">
            <div class="navbar-inner">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>
                <a href="http://www.voidcn.com/" class="brand">程序园</a>
                <nav class="nav-collapse collapse">
                    <ul class="nav navbar primary-nav">
                        <li class="">
                            <a href="http://www.voidcn.com/column">栏目</a>
                        </li>
                        <li class="">
                            <a href="http://www.voidcn.com/tag">标签</a>
                        </li>
                        <li class="">
                            <a href="http://www.voidcn.com/cata">分类</a>
                        </li>
                        <li class="">
                            <a href="http://www.voidcn.com/course">教程</a>
                        </li>
                        <li class="">
                            <a href="http://www.voidcn.com/code">代码</a>
                        </li>
                    </ul>
                    <form class="navbar-search pull-left" action="/gsearch">
                        <input type="text" class="search-query span2" name="q" placeholder="搜索" />
                    </form>
                    <ul class="nav pull-right">
                        <li><a href="javascript:void()"></a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>
</div><script>
    echo.init({
        offset: 100,
        throttle: 250,
        unload: false
    });
</script>
<link href="http://static02.voidcn.com/voidcn/css/share.css?time=1607228017586" rel="stylesheet" />
<link href="http://static02.voidcn.com/voidcn/css/fontello.css?time=1607228017586" rel="stylesheet" />

<div class="container-fluid" style="height: auto !important; min-height: 0px !important;">
	<div class="row-fluid article_row_fluid" style="height: auto !important;">

<div class="span9 contant article_detail_bg" style="height: auto !important; min-height: 0px !important;">

	<h1>Irrlicht学习笔记(10)--PerPixelLighting</h1>
	
    <div class="article_meta">
        <div style="margin-bottom: 2px;">
    		<span class="timestamp">时间  2016-07-10</span>
        </div>

			<div style="margin-bottom: 2px;">
		            <span>标签</span>
						<a target="_blank" href="http://www.voidcn.com/tag/Irrlicht" title="Irrlicht"> <span class="new-label">Irrlicht</span></a>
	        </div>
        
	        <div>
	        	<span class="source">
	            	<i style="float:left;">原文</i>  
	            	<a id="originfo" class="cut cut70" href="javascript:void()" target="_blank" tyle="display:inline-block;" rel="nofollow">http://blog.csdn.net/gqkly/article/details/51870182</a>
	    		</span>
	        </div>
    </div>
    <div class="article_body" id="nei">
	    	<div><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 正文顶部广告 -->
<ins class="adsbygoogle" style="display: block; height: 280px;" data-ad-client="ca-pub-6208739752673518" data-ad-slot="8264218718" data-ad-format="auto" data-adsbygoogle-status="done"><ins id="aswift_1_expand" style="display:inline-table;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:608px;background-color:transparent;" tabindex="0" title="Advertisement" aria-label="Advertisement"><ins id="aswift_1_anchor" style="display: block; border: none; height: 280px; margin: 0px; padding: 0px; position: relative; visibility: visible; width: 608px; background-color: transparent; overflow: visible;"><iframe id="aswift_1" name="aswift_1" style="left:0;position:absolute;top:0;border:0;width:608px;height:280px;" sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" width="608" height="280" frameborder="0" src="https://googleads.g.doubleclick.net/pagead/ads?guci=2.2.0.0.2.2.0.0&amp;client=ca-pub-6208739752673518&amp;output=html&amp;h=280&amp;slotname=8264218718&amp;adk=888873787&amp;adf=687335124&amp;pi=t.ma~as.8264218718&amp;w=608&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1609924791&amp;rafmt=1&amp;psa=0&amp;format=608x280&amp;url=http%3A%2F%2Fwww.voidcn.com%2Farticle%2Fp-ncwwekol-bad.html&amp;flash=0&amp;fwr=0&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;tt_state=W3siaXNzdWVyT3JpZ2luIjoiaHR0cHM6Ly9hZHNlcnZpY2UuZ29vZ2xlLmNvbSIsInN0YXRlIjowfSx7Imlzc3Vlck9yaWdpbiI6Imh0dHBzOi8vYXR0ZXN0YXRpb24uYW5kcm9pZC5jb20iLCJzdGF0ZSI6MH1d&amp;dt=1609924791681&amp;bpp=6&amp;bdt=414&amp;idt=77&amp;shv=r20201203&amp;cbv=r20190131&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;prev_fmts=0x0&amp;nras=1&amp;correlator=5199138211316&amp;frm=20&amp;pv=1&amp;ga_vid=834864808.1609924792&amp;ga_sid=1609924792&amp;ga_hid=260960071&amp;ga_fc=0&amp;u_tz=480&amp;u_his=2&amp;u_java=0&amp;u_h=1080&amp;u_w=1920&amp;u_ah=1040&amp;u_aw=1920&amp;u_cd=24&amp;u_nplug=3&amp;u_nmime=4&amp;adx=40&amp;ady=205&amp;biw=912&amp;bih=889&amp;scr_x=0&amp;scr_y=0&amp;eid=42530671%2C21066428%2C21068083%2C21068109&amp;oid=3&amp;pvsid=1545300313010202&amp;pem=990&amp;rx=0&amp;eae=0&amp;fc=1920&amp;brdim=10%2C10%2C10%2C10%2C1920%2C0%2C945%2C1020%2C929%2C889&amp;vis=1&amp;rsz=%7C%7CeE%7C&amp;abl=CS&amp;pfx=0&amp;fu=8328&amp;bc=23&amp;ifi=1&amp;uci=a!1&amp;fsb=1&amp;xpc=UOyOEyc94O&amp;p=http%3A//www.voidcn.com&amp;dtd=85" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" data-google-container-id="a!1" data-google-query-id="CN71uZv9hu4CFQtmiwodP5YO2A" data-load-complete="true"></iframe></ins></ins></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>
        <div>
           <h1>说明:</h1> 
<div style="margin:0px">
  本例子介绍: 
</div> 
<div style="margin:0px">
  逐像素光照 
</div> 
<div style="margin:0px">
  雾 
</div> 
<div style="margin:0px">
  移动粒子. 
</div> 
<div style="margin:0px">
  使用引擎内置的一个更复杂的材质shader: 
 <span style="line-height:1.6">使用法线图和视差(parallax)图实现逐像素光照表面</span> 
</div> 
<div style="margin:0px"> 
 <span style="line-height:1.6">详细步骤,请看源码注释</span> 
</div> 
<h1 style="margin:0px"><span style="line-height:1.6">源码:</span></h1> 
<div style="margin:0px"> 
 <div style="margin:0px; font-family:Helvetica,'Hiragino Sans GB',微软雅黑,'Microsoft YaHei UI',SimSun,SimHei,arial,sans-serif; font-size:15px; line-height:24px; widows:auto"> 
  <pre name="code" class="csharp hljs cs"><span class="hljs-comment">/**
*逐像素光照,雾,移动光,粒子
*/</span>
<span class="hljs-preprocessor">#include &lt;iostream&gt;</span>
<span class="hljs-preprocessor">#include &lt;irrlicht.h&gt;</span>
<span class="hljs-preprocessor">#include "driverChoice.h"</span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-title">irr</span>;

<span class="hljs-preprocessor">#ifdef _IRR_WINDOWS_</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">pragma</span> comment(lib, "irrlicht.lib")</span>
<span class="hljs-comment">//#pragma comment(linker, "/subsystem:windows /ENTRY:mainCRTStartup")</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">endif</span></span>


<span class="hljs-comment">/**
*1.写一个事件接收器
*作用:用户选择当前材质种类,创建小的GUI窗口显示当前被选用的材质
*/</span>
<span class="hljs-keyword">class</span> <span class="hljs-title">MyEventReceiver</span> :<span class="hljs-title">public</span> <span class="hljs-title">IEventReceiver</span>
{
<span class="hljs-keyword">private</span>:
	<span class="hljs-comment">/**
	*1.1四个变量
	*/</span>
	gui::IGUIStaticText* ProblemText;<span class="hljs-comment">//显示错误内容</span>
	gui::IGUIListBox* ListBox;<span class="hljs-comment">//列表盒,用于展示所有可选内容</span>

	scene::ISceneNode* Room;<span class="hljs-comment">//保存场景节点</span>
	video::IVideoDriver* Driver;<span class="hljs-comment">//保存driver</span>

	<span class="hljs-comment">/**
	*1.2方法
	*二个共有方法:初始化,事件处理函数
	*一个私有方法:设置材质
	*/</span>
<span class="hljs-keyword">public</span>:
	<span class="hljs-comment">//1.2.1构造函数,初始化</span>
	MyEventReceiver(scene::ISceneNode* room, 
		gui::IGUIEnvironment* env, video::IVideoDriver* driver)
	{
		<span class="hljs-comment">//1.2.1.1这两个变量用于改变绘制模式</span>
		Room = room;
		Driver = driver;
		<span class="hljs-comment">//1.2.1.2添加listBox</span>
		<span class="hljs-comment">//调整字体</span>
		gui::IGUISkin* skin = env-&gt;getSkin();
		gui::IGUIFont* font = env-&gt;getFont(<span class="hljs-string">"../media/fonthaettenschweiler.bmp"</span>);
		<span class="hljs-keyword">if</span> (font)
			skin-&gt;setFont(font);

		<span class="hljs-comment">//添加窗口,然后添加列表盒</span>
		gui::IGUIWindow* window = env-&gt;addWindow(
			core::rect&lt;s32&gt;(<span class="hljs-number">0</span>, <span class="hljs-number">375</span>, <span class="hljs-number">160</span>, <span class="hljs-number">470</span>), <span class="hljs-keyword">false</span>, L<span class="hljs-string">"Use 'E'+'R' to change"</span>);
		ListBox = env-&gt;addListBox(
			core::rect&lt;s32&gt;(<span class="hljs-number">2</span>, <span class="hljs-number">32</span>, <span class="hljs-number">165</span>, <span class="hljs-number">88</span>), window);
		<span class="hljs-comment">//添加内容</span>
		ListBox-&gt;addItem(L<span class="hljs-string">"Diffuse"</span>);<span class="hljs-comment">//0</span>
		ListBox-&gt;addItem(L<span class="hljs-string">"Dump mapping"</span>);<span class="hljs-comment">//1</span>
		ListBox-&gt;addItem(L<span class="hljs-string">"Parallax mapping"</span>);<span class="hljs-comment">//2</span>

		<span class="hljs-comment">//1.2.1.3创建错误文本</span>
		ProblemText = env-&gt;addStaticText(
			L<span class="hljs-string">"Your hardware or this renderer is not able to use the "</span>\
			L<span class="hljs-string">"needed shaders for this material. Using fall back materials."</span>,
			core::rect&lt;s32&gt;(<span class="hljs-number">150</span>, <span class="hljs-number">20</span>, <span class="hljs-number">570</span>, <span class="hljs-number">80</span>));
		ProblemText-&gt;setOverrideColor(video::SColor(<span class="hljs-number">100</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>));

		<span class="hljs-comment">//1.2.1.4设置初始材质</span>
		<span class="hljs-comment">//IMatterialRenderer是材质渲染接口,可以通过它进行扩展</span>
		video::IMaterialRenderer* renderer = Driver-&gt;getMaterialRenderer(
			video::EMT_PARALLAX_MAP_SOLID);
		<span class="hljs-keyword">if</span> (renderer&amp;&amp;renderer-&gt;getRenderCapability() == <span class="hljs-number">0</span>)
			ListBox-&gt;setSelected(<span class="hljs-number">2</span>);<span class="hljs-comment">//selected =2</span>
	}
	<span class="hljs-comment">//1.2.2事件处理函数</span>
	<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">OnEvent</span><span class="hljs-params">(<span class="hljs-keyword">const</span> SEvent&amp; <span class="hljs-keyword">event</span>)</span>
	</span>{
		<span class="hljs-comment">//检查用户是否按下E和R</span>
		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">event</span>.EventType == irr::EET_KEY_INPUT_EVENT&amp;&amp;
			!<span class="hljs-keyword">event</span>.KeyInput.PressedDown&amp;&amp;Room&amp;&amp;ListBox)
		{
			<span class="hljs-comment">//改变选择的对象</span>
			<span class="hljs-keyword">int</span> sel = ListBox-&gt;getSelected();
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">event</span>.KeyInput.Key == irr::KEY_KEY_R)
				++sel;
			<span class="hljs-function"><span class="hljs-keyword">else</span> <span class="hljs-title">if</span> <span class="hljs-params">(<span class="hljs-keyword">event</span>.KeyInput.Key == irr::KEY_KEY_E)</span>
				--sel</span>;
			<span class="hljs-keyword">else</span>
				<span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;

			<span class="hljs-keyword">if</span> (sel &gt; <span class="hljs-number">2</span>)sel = <span class="hljs-number">0</span>;
			<span class="hljs-keyword">if</span> (sel &lt; <span class="hljs-number">0</span>)sel = <span class="hljs-number">2</span>;
			ListBox-&gt;setSelected(sel);

			setMaterial();
		}
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<span class="hljs-comment">//error!如果不加这行,将不能处理其他消息</span>
	}
<span class="hljs-keyword">private</span>:
	<span class="hljs-comment">//1.2.3设置材质</span>
	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setMaterial</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-comment">//使用当前列表盒选用的材质设置房间</span>
		video::E_MATERIAL_TYPE type = video::EMT_SOLID;

		<span class="hljs-comment">//改变材质设置</span>
		<span class="hljs-keyword">switch</span> (ListBox-&gt;getSelected())
		{
		<span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:
			type = video::EMT_SOLID;
			<span class="hljs-keyword">break</span>;
		<span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
			<span class="hljs-comment">/**
			*实体法线图渲染器
			*第一个图为纹理图,第二个图为法线图
			*只有当顶点是S3DVertexTangents(EVT_TANGENTS)格式才可以使用这种材质
			*可以使用IMeshManipulator::createMeshWithTangent()将任何网格转换成所需格式
			*/</span>
			type = video::EMT_NORMAL_MAP_SOLID;
			<span class="hljs-keyword">break</span>;
		<span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
			<span class="hljs-comment">/**
			*和EMT_NORMAL_MAP_SOLID差不多,只是只有的是parallax图
			*更加真实
			*需要硬件支持:顶点着色器1.1,片元着色器1.4
			*第一个图为纹理图,第二个图为法线图(32bits)(高度图)
			*法线图纹理需要在其透明度通道中包含高度信息
			*高度信息可以通过函数IVideoDriver::makeNormalMapTexture自动设置,
			*函数参数:第一个:纹理图(其alpha通道可改变),第二个:amplitude,缩放比例
			*/</span>
			type = video::EMT_PARALLAX_MAP_SOLID;
			<span class="hljs-keyword">break</span>;
		}
		Room-&gt;setMaterialType(type);
		<span class="hljs-comment">/*
		*如果材质不能正常显示,需要发出警告信息,
		*检查硬件是否支持:
		*IMaterialRenderer::getRenderCapability(),返回0就支持
		*/</span>
		video::IMaterialRenderer* renderer = Driver-&gt;getMaterialRenderer(type);
		<span class="hljs-keyword">if</span> (!renderer || renderer-&gt;getRenderCapability() != <span class="hljs-number">0</span>)
			ProblemText-&gt;setVisible(<span class="hljs-keyword">true</span>);
		<span class="hljs-keyword">else</span>
			ProblemText-&gt;setVisible(<span class="hljs-keyword">false</span>);
	}
};
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span>** argv)</span>
</span>{
	video::E_DRIVER_TYPE driverType = driverChoiceConsole();
	IrrlichtDevice *device =
		createDevice(driverType, core::dimension2d&lt;u32&gt;(<span class="hljs-number">720</span>, <span class="hljs-number">455</span>), <span class="hljs-number">32</span>,
		<span class="hljs-keyword">false</span>, <span class="hljs-keyword">true</span>, <span class="hljs-keyword">false</span>, <span class="hljs-number">0</span>);
	<span class="hljs-keyword">if</span> (!device)
		<span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
	device-&gt;setWindowCaption(L<span class="hljs-string">"11PerPixelLighting"</span>);

	video::IVideoDriver *driver = device-&gt;getVideoDriver();
	scene::ISceneManager *smgr = device-&gt;getSceneManager();
	gui::IGUIEnvironment *guiev = device-&gt;getGUIEnvironment();
	<span class="hljs-comment">/*
	*2.准备工作:
	*加载logo,设置FPS摄像机,让引擎始终创建32位纹理,
	*最后一项是parallax图所必须的
	*/</span>
	driver-&gt;setTextureCreationFlag(video::ETCF_ALWAYS_32_BIT, <span class="hljs-keyword">true</span>);
	guiev-&gt;addImage(
		driver-&gt;getTexture(<span class="hljs-string">"../media/irrlichtlogo2.png"</span>),
		core::position2di(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>));
	scene::ICameraSceneNode* camera = smgr-&gt;addCameraSceneNodeFPS();
	camera-&gt;setPosition(core::vector3df(-<span class="hljs-number">200</span>, <span class="hljs-number">200</span>, -<span class="hljs-number">200</span>));
	device-&gt;getCursorControl()-&gt;setVisible(<span class="hljs-keyword">false</span>);

	<span class="hljs-comment">/*
	*3.添加雾.
	*有多种雾,这里是使用pixel fog,配合将使用的材质
	*对每一个场景节点,只有将其EMF_FOG_ENABLE置true,才会被雾影响
	*/</span>
	driver-&gt;setFog(
		video::SColor(<span class="hljs-number">0</span>, <span class="hljs-number">138</span>, <span class="hljs-number">125</span>, <span class="hljs-number">81</span>),<span class="hljs-comment">//color</span>
		video::EFT_FOG_LINEAR,<span class="hljs-comment">//fogType</span>
		<span class="hljs-number">250</span>,<span class="hljs-comment">//start</span>
		<span class="hljs-number">1000</span>,<span class="hljs-comment">//end</span>
		<span class="hljs-number">0.003</span>,<span class="hljs-comment">//density</span>
		<span class="hljs-keyword">true</span>,<span class="hljs-comment">//pixelFog</span>
		<span class="hljs-keyword">false</span><span class="hljs-comment">//rangeFog</span>
		);

	<span class="hljs-comment">/*
	*4.加载房间
	*修复纹理:ImeshManipulator::makePlanarTextureMapping()
	*/</span>
	scene::IAnimatedMesh* roomMesh = smgr-&gt;getMesh(<span class="hljs-string">"../media/room.3ds"</span>);
	scene::ISceneNode* room = <span class="hljs-number">0</span>;
	<span class="hljs-keyword">if</span> (roomMesh)
	{
		smgr-&gt;getMeshManipulator()-&gt;makePlanarTextureMapping(roomMesh-&gt;getMesh(<span class="hljs-number">0</span>), <span class="hljs-number">0.003</span>f);
		<span class="hljs-comment">/*
		*4.1
		*贴纹理图,
		*法线图作为第二层图,
		*法线图由加载进来的灰度纹理形式的高度图生成
		*通常法线图可以用自己创建的法线图,
		*这里用VideoDriver::makeNormalMapTexture产生
		*/</span>
		video::ITexture* normalMap =
			driver-&gt;getTexture(<span class="hljs-string">"../media/rockwall_height.bmp"</span>);
		<span class="hljs-keyword">if</span> (normalMap)
			driver-&gt;makeNormalMapTexture(normalMap, <span class="hljs-number">9.0</span>f<span class="hljs-comment">/*越大越凹凸*/</span>);
		<span class="hljs-comment">/*
		*4.2
		*所要使用的材质需要其他信息,比如:
		*tangents,binormals
		*所以需要计算这些信息.
		*使用:IMeshManipulator::createMeshWithTangents()创建
		*它从其他网格拷贝创建带有切线tangents和副法线binormals的网格
		*然后需要用这个网格创建一个标注的网格
		*然后就可以设置其他参宿了
		*/</span>
		scene::IMesh* tangentMesh = smgr-&gt;getMeshManipulator()-&gt;
			createMeshWithTangents(roomMesh-&gt;getMesh(<span class="hljs-number">0</span>));
		room = smgr-&gt;addMeshSceneNode(tangentMesh);
		room-&gt;setMaterialTexture(<span class="hljs-number">0</span>, driver-&gt;getTexture(<span class="hljs-string">"../media/rockwall.jpg"</span>));
		room-&gt;setMaterialTexture(<span class="hljs-number">1</span>, normalMap);
		room-&gt;getMaterial(<span class="hljs-number">0</span>).SpecularColor.<span class="hljs-keyword">set</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
		room-&gt;setMaterialFlag(video::EMF_FOG_ENABLE, <span class="hljs-keyword">true</span>);
		room-&gt;getMaterial(<span class="hljs-number">0</span>).MaterialTypeParam = <span class="hljs-number">0.035</span>f;<span class="hljs-comment">//自由参数</span>

		tangentMesh-&gt;drop();
	}
	<span class="hljs-comment">/*
	*5.添加一个球
	*/</span>


	<span class="hljs-comment">/*
	*6.添加移动光源
	*逐像素光照在移动光照下才能凸显
	*这里添加两个移动光源,都绑定一个绕圈的动画和一个布告板
	*其中一个绑定一个粒子系统
	*/</span>

	<span class="hljs-comment">/*
	*6.1.红色灯光
	*/</span>
	scene::ILightSceneNode* light1 =
		smgr-&gt;addLightSceneNode(<span class="hljs-number">0</span>, core::vector3df(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>),
		video::SColorf(<span class="hljs-number">0.5</span>f, <span class="hljs-number">1.0</span>f, <span class="hljs-number">0.5</span>f, <span class="hljs-number">0.0</span>f), <span class="hljs-number">800.0</span>f);
	light1-&gt;setDebugDataVisible(scene::EDS_BBOX);<span class="hljs-comment">//显示包围盒</span>
	<span class="hljs-comment">//动画</span>
	scene::ISceneNodeAnimator* anim = smgr-&gt;createFlyCircleAnimator(
		core::vector3df(<span class="hljs-number">50</span>, <span class="hljs-number">300</span>, <span class="hljs-number">0</span>), <span class="hljs-number">190</span>, -<span class="hljs-number">0.003</span>f);<span class="hljs-comment">//中心点,半径,速度</span>
	light1-&gt;addAnimator(anim);
	anim-&gt;drop();
	<span class="hljs-comment">//布告板</span>
	scene::ISceneNode* bill = smgr-&gt;addBillboardSceneNode(
		light1, core::dimension2d&lt;f32&gt;(<span class="hljs-number">60</span>, <span class="hljs-number">60</span>));
	bill-&gt;setMaterialFlag(video::EMF_LIGHTING, <span class="hljs-keyword">false</span>);
	bill-&gt;setMaterialFlag(video::EMF_ZWRITE_ENABLE, <span class="hljs-keyword">false</span>);<span class="hljs-comment">//不添加到z缓存</span>
	bill-&gt;setMaterialType(video::EMT_TRANSPARENT_ADD_COLOR);
	bill-&gt;setMaterialTexture(<span class="hljs-number">0</span>, driver-&gt;getTexture(<span class="hljs-string">"../media/particlered.bmp"</span>));


	<span class="hljs-comment">/*
	*6.2.light2
	*额外:添加粒子系统,
	*由于这个版本(irr1.7.3)的这个材质shader使用的是ps1.1,vs1.1所以只能添加两个灯光
	*/</span>
	scene::ILightSceneNode* light2 =
		smgr-&gt;addLightSceneNode(<span class="hljs-number">0</span>, core::vector3df(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>),
		video::SColorf(<span class="hljs-number">1.0</span>f, <span class="hljs-number">0.2</span>f, <span class="hljs-number">0.2</span>f, <span class="hljs-number">0.0</span>f), <span class="hljs-number">800.0</span>f);
	<span class="hljs-comment">//动画</span>
	anim = smgr-&gt;createFlyCircleAnimator(
		core::vector3df(<span class="hljs-number">0</span>, <span class="hljs-number">150</span>, <span class="hljs-number">0</span>), <span class="hljs-number">200</span>, <span class="hljs-number">0.001</span>f,core::vector3df(<span class="hljs-number">0.2</span>f,<span class="hljs-number">0.9</span>f,<span class="hljs-number">0.</span>f));<span class="hljs-comment">//中心点,半径,速,方向</span>
	light2-&gt;addAnimator(anim);
	anim-&gt;drop();
	<span class="hljs-comment">//布告板</span>
	bill = smgr-&gt;addBillboardSceneNode(
		light2, core::dimension2d&lt;f32&gt;(<span class="hljs-number">120</span>, <span class="hljs-number">120</span>));
	bill-&gt;setMaterialFlag(video::EMF_LIGHTING, <span class="hljs-keyword">false</span>);
	bill-&gt;setMaterialFlag(video::EMF_ZWRITE_ENABLE, <span class="hljs-keyword">false</span>);<span class="hljs-comment">//不添加到z缓存</span>
	bill-&gt;setMaterialType(video::EMT_TRANSPARENT_ADD_COLOR);
	bill-&gt;setMaterialTexture(<span class="hljs-number">0</span>, driver-&gt;getTexture(<span class="hljs-string">"../media/particlewhite.bmp"</span>));
	<span class="hljs-comment">//添加粒子系统</span>
	scene::IParticleSystemSceneNode* ps =
		smgr-&gt;addParticleSystemSceneNode(<span class="hljs-keyword">false</span>, light2);
	<span class="hljs-comment">//发射器</span>
	scene::IParticleEmitter* em = ps-&gt;createBoxEmitter(
		core::aabbox3d&lt;f32&gt;(-<span class="hljs-number">3</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>),
		core::vector3df(<span class="hljs-number">0.0</span>f, <span class="hljs-number">0.03</span>f, <span class="hljs-number">0.0</span>f),
		<span class="hljs-number">80</span>, <span class="hljs-number">100</span>,
		video::SColor(<span class="hljs-number">0</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>), video::SColor(<span class="hljs-number">0</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>),
		<span class="hljs-number">400</span>, <span class="hljs-number">1100</span>
		);
	em-&gt;setMinStartSize(core::dimension2d&lt;f32&gt;(<span class="hljs-number">30.0</span>f, <span class="hljs-number">40.0</span>f));
	em-&gt;setMaxStartSize(core::dimension2d&lt;f32&gt;(<span class="hljs-number">30.0</span>f, <span class="hljs-number">40.0</span>f));
	ps-&gt;setEmitter(em);
	em-&gt;drop();
	<span class="hljs-comment">//添加控制器</span>
	scene::IParticleAffector* paf = ps-&gt;createFadeOutParticleAffector();
	ps-&gt;addAffector(paf);
	paf-&gt;drop();
	<span class="hljs-comment">//调整材质设置</span>
	ps-&gt;setMaterialFlag(video::EMF_LIGHTING, <span class="hljs-keyword">false</span>);
	ps-&gt;setMaterialFlag(video::EMF_ZWRITE_ENABLE, <span class="hljs-keyword">false</span>);
	ps-&gt;setMaterialTexture(<span class="hljs-number">0</span>, driver-&gt;getTexture(<span class="hljs-string">"../media/fireball.bmp"</span>));
	ps-&gt;setMaterialType(video::EMT_TRANSPARENT_ADD_COLOR);

	<span class="hljs-function">MyEventReceiver <span class="hljs-title">receiver</span><span class="hljs-params">(room, guiev, driver)</span></span>;
	device-&gt;setEventReceiver(&amp;receiver);


	<span class="hljs-keyword">int</span> lastFPS = -<span class="hljs-number">1</span>;
	<span class="hljs-keyword">while</span> (device-&gt;run())
	{
		driver-&gt;beginScene(<span class="hljs-keyword">true</span>, <span class="hljs-keyword">true</span>, video::SColor(<span class="hljs-number">255</span>, <span class="hljs-number">100</span>, <span class="hljs-number">101</span>, <span class="hljs-number">140</span>));

		smgr-&gt;drawAll();
		guiev-&gt;drawAll();

		driver-&gt;endScene();

		<span class="hljs-keyword">int</span> fps = driver-&gt;getFPS();
		<span class="hljs-keyword">if</span> (lastFPS != fps)
		{
			core::stringw str = L<span class="hljs-string">"11PerPixelLighting ["</span>;
			str += driver-&gt;getName();
			str += <span class="hljs-string">"]FPS."</span>,
				str += fps;
			device-&gt;setWindowCaption(str.c_str());
			lastFPS = fps;
		}
	}
	device-&gt;drop();

	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}</pre>   
 </div>   
</div>
        </div>
            <div class="margin-top-20"></div>
        	<div><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 正文底部广告 -->
<ins class="adsbygoogle" style="display: block; height: 280px;" data-ad-client="ca-pub-6208739752673518" data-ad-slot="9020893119" data-ad-format="auto" data-adsbygoogle-status="done"><ins id="aswift_2_expand" style="display:inline-table;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:608px;background-color:transparent;"><ins id="aswift_2_anchor" style="display:block;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:608px;background-color:transparent;"></ins></ins></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>
    </div>
		<div>
	    	<div class="relative">相关文章</div>
	    	<ul class="relative_list">
		                <li>
		                    1. <a href="http://www.voidcn.com/article/p-hpzwioef-bac.html" target="_blank" title="Irrlicht学习笔记(2)--quake3map"> Irrlicht学习笔记(2)--quake3map </a>
		                </li>
		                <li>
		                    2. <a href="http://www.voidcn.com/article/p-amtvmgph-bad.html" target="_blank" title="Irrlicht学习笔记(4)--Movement"> Irrlicht学习笔记(4)--Movement </a>
		                </li>
		                <li>
		                    3. <a href="http://www.voidcn.com/article/p-hdmtraxc-bad.html" target="_blank" title="Irrlicht学习笔记(7.2)--Collision"> Irrlicht学习笔记(7.2)--Collision </a>
		                </li>
		                <li>
		                    4. <a href="http://www.voidcn.com/article/p-tqqpyzdm-bad.html" target="_blank" title="Irrlicht学习笔记(9)--Shader"> Irrlicht学习笔记(9)--Shader </a>
		                </li>
		                <li>
		                    5. <a href="http://www.voidcn.com/article/p-wzerhafe-bad.html" target="_blank" title="Irrlicht学习笔记(11)--TerrainRender"> Irrlicht学习笔记(11)--TerrainRender </a>
		                </li>
		                <li>
		                    6. <a href="http://www.voidcn.com/article/p-ewfrasyz-bac.html" target="_blank" title="Irrlicht学习笔记(3)--CustomSceneNode"> Irrlicht学习笔记(3)--CustomSceneNode </a>
		                </li>
		                <li>
		                    7. <a href="http://www.voidcn.com/article/p-ghmuazwq-bad.html" target="_blank" title="Irrlicht学习笔记(6)--2DGraphics"> Irrlicht学习笔记(6)--2DGraphics </a>
		                </li>
		                <li>
		                    8. <a href="http://www.voidcn.com/article/p-fzjnsmin-bad.html" target="_blank" title="Irrlicht学习笔记(8)--SpecialFX"> Irrlicht学习笔记(8)--SpecialFX </a>
		                </li>
		                <li>
		                    9. <a href="http://www.voidcn.com/article/p-rupmpuyw-bac.html" target="_blank" title="Irrlicht学习笔记(1)--helloworld"> Irrlicht学习笔记(1)--helloworld </a>
		                </li>
		                <li>
		                    10. <a href="http://www.voidcn.com/article/p-uwoucihy-bad.html" target="_blank" title="Irrlicht学习笔记(5)--UserInterface"> Irrlicht学习笔记(5)--UserInterface </a>
		                </li>
	            <li><a href="http://www.voidcn.com/relative/p-ncwwekol-bad.html" target="_blank" title="Irrlicht学习笔记(10)--PerPixelLighting 的相关文章"> 更多相关文章...</a></li>
	        </ul>

                <div class="margin-top-20"></div>
                <div>
                    <div><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display: block; text-align: center; height: 155px;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-6208739752673518" data-ad-slot="3534271784" data-adsbygoogle-status="done"><ins id="aswift_3_expand" style="display:inline-table;border:none;height:155px;margin:0;padding:0;position:relative;visibility:visible;width:618px;background-color:transparent;"><ins id="aswift_3_anchor" style="display:block;border:none;height:155px;margin:0;padding:0;position:relative;visibility:visible;width:618px;background-color:transparent;"></ins></ins></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script></div>
                </div>
            <div class="margin-top-20"></div>

	        <div class="relative">相关标签/搜索</div>
	        <ul>
	        			<a target="_blank" href="http://www.voidcn.com/tag/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0" title="学习笔记"> <span class="new-label">学习笔记</span></a>
	        			<a target="_blank" href="http://www.voidcn.com/tag/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%9D" title="学习笔记”"> <span class="new-label">学习笔记”</span></a>
	        			<a target="_blank" href="http://www.voidcn.com/tag/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%80" title="学习笔记　"> <span class="new-label">学习笔记　</span></a>
	        			<a target="_blank" href="http://www.voidcn.com/tag/%E7%AC%94%E8%AE%B0%E5%AD%A6%E4%B9%A0" title="笔记学习"> <span class="new-label">笔记学习</span></a>
	        			<a target="_blank" href="http://www.voidcn.com/tag/maven%E7%AC%94%E8%AE%B0%EF%BC%8C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0" title="maven笔记，学习笔记"> <span class="new-label">maven笔记，学习笔记</span></a>
	        			<a target="_blank" href="http://www.voidcn.com/tag/%E5%AD%A6%E4%B9%A0%EF%BC%8C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0" title="学习，学习笔记"> <span class="new-label">学习，学习笔记</span></a>
	        			<a target="_blank" href="http://www.voidcn.com/tag/hadoop%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0" title="hadoop学习笔记"> <span class="new-label">hadoop学习笔记</span></a>
	        			<a target="_blank" href="http://www.voidcn.com/tag/C%2B%2B+%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0" title="C++ 学习笔记"> <span class="new-label">C++ 学习笔记</span></a>
	        			<a target="_blank" href="http://www.voidcn.com/tag/iOS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0" title="iOS学习笔记"> <span class="new-label">iOS学习笔记</span></a>
	        			<a target="_blank" href="http://www.voidcn.com/tag/PHP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0" title="PHP学习笔记"> <span class="new-label">PHP学习笔记</span></a>
	        			<a target="_blank" href="http://www.voidcn.com/cata/2270005" title="Irrlicht学习"> <span class="new-label">Irrlicht学习</span></a>
	        			<a target="_blank" href="http://www.voidcn.com/cata/287012" title="IRRLICHT 学习"> <span class="new-label">IRRLICHT 学习</span></a>
	        			<a target="_blank" href="http://www.voidcn.com/cata/1430926" title="irrlicht"> <span class="new-label">irrlicht</span></a>
	        			<a target="_blank" href="http://www.voidcn.com/cata/1733605" title="Irrlicht"> <span class="new-label">Irrlicht</span></a>
	        			<a target="_blank" href="http://www.voidcn.com/cata/748009" title="irrlicht"> <span class="new-label">irrlicht</span></a>
	        			<a target="_blank" href="http://www.voidcn.com/cata/1415981" title="Irrlicht"> <span class="new-label">Irrlicht</span></a>
	        			<a target="_blank" href="http://www.voidcn.com/cata/2575201" title="Irrlicht"> <span class="new-label">Irrlicht</span></a>
	        			<a target="_blank" href="http://www.voidcn.com/cata/1828727" title="irrlicht"> <span class="new-label">irrlicht</span></a>
	        			<a target="_blank" href="http://www.voidcn.com/cata/689144" title="IrrLicht"> <span class="new-label">IrrLicht</span></a>
	        			<a target="_blank" href="http://www.voidcn.com/cata/1708647" title="irrlicht"> <span class="new-label">irrlicht</span></a>
		        		<a target="_blank" href="http://www.voidcn.com/search/stvqcd"><span class="new-label">onvif学习笔记</span></a>
		        		<a target="_blank" href="http://www.voidcn.com/search/effcbl"><span class="new-label">Flink学习笔记</span></a>
		        		<a target="_blank" href="http://www.voidcn.com/search/crworm"><span class="new-label">pcl学习笔记</span></a>
		        		<a target="_blank" href="http://www.voidcn.com/search/wshnyu"><span class="new-label">rnn学习笔记</span></a>
		        		<a target="_blank" href="http://www.voidcn.com/search/ajqesv"><span class="new-label">ros学习笔记</span></a>
		        		<a target="_blank" href="http://www.voidcn.com/search/hxuydk"><span class="new-label">vagrant学习笔记</span></a>
		        		<a target="_blank" href="http://www.voidcn.com/search/nvgzxq"><span class="new-label">hive 学习笔记</span></a>
		        		<a target="_blank" href="http://www.voidcn.com/search/ojvtqs"><span class="new-label">mxnet 学习笔记</span></a>
		        		<a target="_blank" href="http://www.voidcn.com/search/fnmjlo"><span class="new-label">mxnet学习笔记</span></a>
		        		<a target="_blank" href="http://www.voidcn.com/search/kjfmbk"><span class="new-label">caffe 学习笔记</span></a>
	        </ul>
	    </div>
    
    <div class="article_social">
        <div class="article_like">
            <div class="circle circle-like" id="my_zan" data_id="eEvIVb6"></div>
        </div>
        <div class="clear"></div>
        <div class="share">
			<span class="share-left bdsharebuttonbox bdshare-button-style0-24" data-tag="share_1" data-bd-bind="1609924807114">
				<a href="#" class="bds_more icon-share" data-cmd="more">
					<span class="bds_count" data-cmd="count" title="累计分享0次">0</span>
				</a>
			</span>
			<div class="share-right action action-share bdsharebuttonbox bdshare-button-style0-24" data-tag="share_1" data-bd-bind="1609924807114">
				<span class="bdshare">
					<a href="#" class="bds_sinaweibo icon-weibo" data-cmd="tsina" title="分享到新浪微博">分享到微博</a>
					<a href="#" class="bds_weixin icon-wechat" data-cmd="weixin" title="分享到微信">分享到微信</a>
					<a href="#" class="bds_qq icon-qq" data-cmd="sqq" title="分享到QQ好友">分享到QQ</a>
				</span>
			</div>
		</div>
		<div class="clear"></div>
    <div class="bottom_plink huodong-detail-plink-banner clearfix">
        </div>
    </div>



	<script>
		$(function () {
		    $("#originfo").text("http://blog.csdn.net/gqkly/article/details/51870182");
		    $("#originfo").hover(function(){
		        $("#originfo").attr("href" , "/link?url=http://blog.csdn.net/gqkly/article/details/51870182");
			},function(){
		        $("#originfo").attr("href" , "javascript:void()");
			});
		});
	</script>
	
    <script src="http://static02.voidcn.com/voidcn/script/article.js?time=1607228017586" type="text/javascript"></script>

</div>
<div class="span3 article_right_side" style="height: auto !important; min-height: 0px !important;">
    <div class="right_top" style="height: auto !important;">
    	<div id="right_site_articles" class="article_detail_bg">
    <div class="article-part-title">
        <span>每日一句</span>
    </div>
    <ul class="side_article_list">
    	每一个你不满意的现在，都有一个你没有努力的曾经。
    </ul>
</div><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 侧边栏 自适应 -->
<ins class="adsbygoogle" style="display: block; height: 600px;" data-ad-client="ca-pub-6208739752673518" data-ad-slot="8798382113" data-ad-format="auto" data-adsbygoogle-status="done"><ins id="aswift_4_expand" style="display:inline-table;border:none;height:600px;margin:0;padding:0;position:relative;visibility:visible;width:200px;background-color:transparent;" tabindex="0" title="Advertisement" aria-label="Advertisement"><ins id="aswift_4_anchor" style="display: block; border: none; height: 600px; margin: 0px; padding: 0px; position: relative; visibility: visible; width: 200px; background-color: transparent; overflow: visible;"><iframe id="aswift_4" name="aswift_4" style="left:0;position:absolute;top:0;border:0;width:200px;height:600px;" sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" width="200" height="600" frameborder="0" src="https://googleads.g.doubleclick.net/pagead/ads?guci=2.2.0.0.2.2.0.0&amp;client=ca-pub-6208739752673518&amp;output=html&amp;h=600&amp;slotname=8798382113&amp;adk=3858201898&amp;adf=1666180184&amp;pi=t.ma~as.8798382113&amp;w=200&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1609924791&amp;rafmt=1&amp;psa=0&amp;format=200x600&amp;url=http%3A%2F%2Fwww.voidcn.com%2Farticle%2Fp-ncwwekol-bad.html&amp;flash=0&amp;fwr=0&amp;rpe=1&amp;resp_fmts=4&amp;wgl=1&amp;tt_state=W3siaXNzdWVyT3JpZ2luIjoiaHR0cHM6Ly9hZHNlcnZpY2UuZ29vZ2xlLmNvbSIsInN0YXRlIjowfSx7Imlzc3Vlck9yaWdpbiI6Imh0dHBzOi8vYXR0ZXN0YXRpb24uYW5kcm9pZC5jb20iLCJzdGF0ZSI6MH1d&amp;dt=1609924791859&amp;bpp=6&amp;bdt=592&amp;idt=6&amp;shv=r20201203&amp;cbv=r20190131&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;prev_fmts=0x0%2C608x280&amp;nras=1&amp;correlator=5199138211316&amp;frm=20&amp;pv=1&amp;ga_vid=834864808.1609924792&amp;ga_sid=1609924792&amp;ga_hid=260960071&amp;ga_fc=0&amp;u_tz=480&amp;u_his=2&amp;u_java=0&amp;u_h=1080&amp;u_w=1920&amp;u_ah=1040&amp;u_aw=1920&amp;u_cd=24&amp;u_nplug=3&amp;u_nmime=4&amp;adx=692&amp;ady=161&amp;biw=912&amp;bih=889&amp;scr_x=0&amp;scr_y=0&amp;eid=42530671%2C21066428%2C21068083%2C21068109&amp;oid=3&amp;pvsid=1545300313010202&amp;pem=990&amp;rx=0&amp;eae=0&amp;fc=1920&amp;brdim=10%2C10%2C10%2C10%2C1920%2C0%2C945%2C1020%2C929%2C889&amp;vis=1&amp;rsz=%7C%7CeE%7C&amp;abl=CS&amp;pfx=0&amp;fu=8328&amp;bc=23&amp;ifi=4&amp;uci=a!4&amp;fsb=1&amp;xpc=N9XAfINCfk&amp;p=http%3A//www.voidcn.com&amp;dtd=10" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" data-google-container-id="a!4" data-google-query-id="COGqupv9hu4CFRNdYAodd2YKAQ" data-load-complete="true"></iframe></ins></ins></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

    <div id="right_site_articles">
        <div class="article-part-title">
            <span>最新文章</span>
        </div>
        <ul class="side_article_list">
	                <li class="side_article_list_item">1.
	                    <a href="http://www.voidcn.com/article/p-dzzuthbu-bza.html" target="_blank" title="Valentina Studio for mac(免费的数据库管理器)"> Valentina Studio for mac(免费的数据库管理器) </a>
	                </li>
	                <li class="side_article_list_item">2.
	                    <a href="http://www.voidcn.com/article/p-nmkfplru-bza.html" target="_blank" title="vue 组件的通信方式（完整版）"> vue 组件的通信方式（完整版） </a>
	                </li>
	                <li class="side_article_list_item">3.
	                    <a href="http://www.voidcn.com/article/p-kcbaiwgu-bza.html" target="_blank" title="JavaScript 函数工具"> JavaScript 函数工具 </a>
	                </li>
	                <li class="side_article_list_item">4.
	                    <a href="http://www.voidcn.com/article/p-zgfrbxjl-bza.html" target="_blank" title="通配符的匹配很全面, 但无法找到元素 'context:component-scan' 的声明"> 通配符的匹配很全面, 但无法找到元素 'context:component-scan' 的声明 </a>
	                </li>
	                <li class="side_article_list_item">5.
	                    <a href="http://www.voidcn.com/article/p-ctctutqz-bza.html" target="_blank" title="使用html2canvas 生成img"> 使用html2canvas 生成img </a>
	                </li>
	                <li class="side_article_list_item">6.
	                    <a href="http://www.voidcn.com/article/p-hbexeylq-bza.html" target="_blank" title="4种常见的缓存问题及解决方案详解"> 4种常见的缓存问题及解决方案详解 </a>
	                </li>
	                <li class="side_article_list_item">7.
	                    <a href="http://www.voidcn.com/article/p-cswlzrfm-bza.html" target="_blank" title="Spring Boot 自定义数据源 DruidDataSource"> Spring Boot 自定义数据源 DruidDataSource </a>
	                </li>
	                <li class="side_article_list_item">8.
	                    <a href="http://www.voidcn.com/article/p-etrpficu-bza.html" target="_blank" title="2019.10.22"> 2019.10.22 </a>
	                </li>
	                <li class="side_article_list_item">9.
	                    <a href="http://www.voidcn.com/article/p-wpoapryi-bza.html" target="_blank" title="redis 锁的案例"> redis 锁的案例 </a>
	                </li>
	                <li class="side_article_list_item">10.
	                    <a href="http://www.voidcn.com/article/p-pdhhyypo-bza.html" target="_blank" title="day_29"> day_29 </a>
	                </li>
        </ul>
        
        
    </div>

<div id="right_site_articles" class="article_detail_bg margin-top10">
    <div class="article-part-title">
        <span><a href="/contact" target="_blank">公众号推荐</a></span>
    </div>
    <div class="side_article_list user-head">
        <span style="color: #5ba607;font-size:14px;">   一个历史类的公众号，欢迎关注</span><br />
        <img src="https://open.weixin.qq.com/qr/code?username=modu2049" alt="一两拨千金" />
    </div>
</div>    </div>

    <div class="operate_zone">
<div id="right_site_articles" class="article_detail_bg margin-top10">
    <div class="article-part-title">
        <span><a href="/contact" target="_blank">本站公众号</a></span>
    </div>
    <div class="side_article_list user-head">
    	<span style="color: #5ba607;font-size:14px;">   欢迎关注本站公众号,获取更多程序园信息</span><br />
    	<img src="http://open.weixin.qq.com/qr/code?username=develong" alt="开发小院" />
    </div>
</div>

    <div id="right_site_articles">
        <div class="article-part-title">
            <span>相关文章</span>
        </div>
        <ul class="side_article_list">
	                <li class="side_article_list_item">1.
	                    <a href="http://www.voidcn.com/article/p-hpzwioef-bac.html" target="_blank" title="Irrlicht学习笔记(2)--quake3map"> Irrlicht学习笔记(2)--quake3map </a>
	                </li>
	                <li class="side_article_list_item">2.
	                    <a href="http://www.voidcn.com/article/p-amtvmgph-bad.html" target="_blank" title="Irrlicht学习笔记(4)--Movement"> Irrlicht学习笔记(4)--Movement </a>
	                </li>
	                <li class="side_article_list_item">3.
	                    <a href="http://www.voidcn.com/article/p-hdmtraxc-bad.html" target="_blank" title="Irrlicht学习笔记(7.2)--Collision"> Irrlicht学习笔记(7.2)--Collision </a>
	                </li>
	                <li class="side_article_list_item">4.
	                    <a href="http://www.voidcn.com/article/p-tqqpyzdm-bad.html" target="_blank" title="Irrlicht学习笔记(9)--Shader"> Irrlicht学习笔记(9)--Shader </a>
	                </li>
	                <li class="side_article_list_item">5.
	                    <a href="http://www.voidcn.com/article/p-wzerhafe-bad.html" target="_blank" title="Irrlicht学习笔记(11)--TerrainRender"> Irrlicht学习笔记(11)--TerrainRender </a>
	                </li>
	                <li class="side_article_list_item">6.
	                    <a href="http://www.voidcn.com/article/p-ewfrasyz-bac.html" target="_blank" title="Irrlicht学习笔记(3)--CustomSceneNode"> Irrlicht学习笔记(3)--CustomSceneNode </a>
	                </li>
	                <li class="side_article_list_item">7.
	                    <a href="http://www.voidcn.com/article/p-ghmuazwq-bad.html" target="_blank" title="Irrlicht学习笔记(6)--2DGraphics"> Irrlicht学习笔记(6)--2DGraphics </a>
	                </li>
	                <li class="side_article_list_item">8.
	                    <a href="http://www.voidcn.com/article/p-fzjnsmin-bad.html" target="_blank" title="Irrlicht学习笔记(8)--SpecialFX"> Irrlicht学习笔记(8)--SpecialFX </a>
	                </li>
	                <li class="side_article_list_item">9.
	                    <a href="http://www.voidcn.com/article/p-rupmpuyw-bac.html" target="_blank" title="Irrlicht学习笔记(1)--helloworld"> Irrlicht学习笔记(1)--helloworld </a>
	                </li>
	                <li class="side_article_list_item">10.
	                    <a href="http://www.voidcn.com/article/p-uwoucihy-bad.html" target="_blank" title="Irrlicht学习笔记(5)--UserInterface"> Irrlicht学习笔记(5)--UserInterface </a>
	                </li>
        </ul>
        
        	<div style="padding-left:10px;font-size:14px;padding-bottom:10px;">
        		<a href="http://www.voidcn.com/relative/p-ncwwekol-bad.html" target="_blank" title="Irrlicht学习笔记(10)--PerPixelLighting 的相关文章"> &gt;&gt;更多相关文章&lt;&lt; </a>
    		</div>
        
    </div>

    </div>
</div>

	</div>

	<script type="text/javascript">
        $('table').each(function (i) {
            var size = $(this).children().size();
            if (size &gt; 1) {
                $(this).attr('class', "table table-bordered");
            } else if (size == 1) {
                var e11 = $(this).children(":first");
                var e1 = e11[0];
                var name = e1.nodeName.toLowerCase();
                if ("tbody" == name) {
                    if (e1.children.length &gt; 1) {
                        $(this).attr('class', "table table-bordered");
                    } else if (e1.children.length == 1) {
                        var e12 = e1.children[0];
                        var name2 = e12.nodeName.toLowerCase();
                        if ("tr" == name2) {
                            if (e12.children.length &gt; 1) {
                                $(this).attr('class', "table table-bordered");
                            }
                        }
                    }
                }
            }
        });
        window.page = 0;
        window.last = 0;
        window.first = true;
        resize_article_image('#nei', 550);
        
        
        
		+ (function($){
			window._bd_share_config = {
				common: {
					"bdText": "【" + $("title").text() + "】" + $(".post-content p:lt(2)").text(),
					"bdMini": "2",
					"bdMiniList": false,
					"bdPic": $(".post-content img:first") ? $(".post-content img:first").attr("src") : "",
					"bdStyle": "0",
					"bdSize": "24"
				},
				share: [{
					bdCustomStyle: 'http://static02.voidcn.com/voidcn/css/share.css'
				}],
			};
			with(document) 0[(getElementsByTagName("head")[0] || body).appendChild(createElement("script")).src = "http://bdimg.share.baidu.com/static/api/js/share.js?cdnversion=" + ~ ( - new Date() / 36e5)];
		})(window.jQuery);
    </script>
</div><ins class="adsbygoogle adsbygoogle-noablate" data-adsbygoogle-status="done" style="display: none !important;"><ins id="aswift_0_expand" style="display:inline-table;border:none;height:0px;margin:0;padding:0;position:relative;visibility:visible;width:0px;background-color:transparent;" tabindex="0" title="Advertisement" aria-label="Advertisement"><ins id="aswift_0_anchor" style="display:block;border:none;height:0px;margin:0;padding:0;position:relative;visibility:visible;width:0px;background-color:transparent;"><iframe id="aswift_0" name="aswift_0" style="left:0;position:absolute;top:0;border:0;width:undefinedpx;height:undefinedpx;" sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" frameborder="0" src="https://googleads.g.doubleclick.net/pagead/ads?guci=2.2.0.0.2.2.0.0&amp;client=ca-pub-6208739752673518&amp;output=html&amp;adk=1812271804&amp;adf=3025194257&amp;lmt=1609924791&amp;plat=1%3A8%2C2%3A16777224%2C9%3A32776%2C10%3A32%2C11%3A32%2C16%3A8388608%2C17%3A32%2C24%3A32%2C25%3A32%2C30%3A1048576%2C32%3A32%2C40%3A32&amp;format=0x0&amp;url=http%3A%2F%2Fwww.voidcn.com%2Farticle%2Fp-ncwwekol-bad.html&amp;ea=0&amp;flash=0&amp;pra=5&amp;wgl=1&amp;tt_state=W3siaXNzdWVyT3JpZ2luIjoiaHR0cHM6Ly9hZHNlcnZpY2UuZ29vZ2xlLmNvbSIsInN0YXRlIjowfSx7Imlzc3Vlck9yaWdpbiI6Imh0dHBzOi8vYXR0ZXN0YXRpb24uYW5kcm9pZC5jb20iLCJzdGF0ZSI6MH1d&amp;dt=1609924791667&amp;bpp=14&amp;bdt=400&amp;idt=54&amp;shv=r20201203&amp;cbv=r20190131&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;nras=1&amp;correlator=5199138211316&amp;frm=20&amp;pv=2&amp;ga_vid=834864808.1609924792&amp;ga_sid=1609924792&amp;ga_hid=260960071&amp;ga_fc=0&amp;u_tz=480&amp;u_his=2&amp;u_java=0&amp;u_h=1080&amp;u_w=1920&amp;u_ah=1040&amp;u_aw=1920&amp;u_cd=24&amp;u_nplug=3&amp;u_nmime=4&amp;adx=-12245933&amp;ady=-12245933&amp;biw=912&amp;bih=889&amp;scr_x=0&amp;scr_y=0&amp;eid=42530671%2C21066428%2C21068083%2C21068109&amp;oid=3&amp;pvsid=1545300313010202&amp;pem=990&amp;rx=0&amp;eae=2&amp;fc=1920&amp;brdim=10%2C10%2C10%2C10%2C1920%2C0%2C945%2C1020%2C929%2C889&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=8200&amp;bc=23&amp;ifi=0&amp;uci=a!0&amp;fsb=1&amp;dtd=83" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" data-google-container-id="a!0" data-load-complete="true"></iframe></ins></ins></ins><iframe id="google_osd_static_frame_8907300406837" name="google_osd_static_frame" style="display: none; width: 0px; height: 0px;"></iframe>
<script type="text/javascript" src="http://static02.voidcn.com/voidcn/plugin/highlight/highlight.pack.js"></script>
<link href="http://static02.voidcn.com/voidcn/plugin/highlight/styles/docco.css" media="screen" rel="stylesheet" type="text/css" />
<script type="text/javascript">
$('pre').each(function(i, e) {
    hljs.highlightBlock(e, "&lt;span class='indent'&gt;  &lt;/span&gt;", false)
});
</script>
<div class="footer">
    <div class="footer-inner" style="padding-top: 50px;padding-bottom: 50px">
        <a href="http://www.voidcn.com/contact" target="_blank">意见反馈</a>
        <a href="http://www.voidcn.com/search">最近搜索</a>
        <a href="http://www.voidcn.com/recent">最新文章</a>
       	<script src="https://s4.cnzz.com/z_stat.php?id=1258680759&amp;web_id=1258680759" language="JavaScript"></script><script src="https://c.cnzz.com/core.php?web_id=1258680759&amp;t=z" charset="utf-8" type="text/javascript"></script><a href="https://www.cnzz.com/stat/website.php?web_id=1258680759" target="_blank" title="站长统计">站长统计</a>
        <a href="http://www.beian.miit.gov.cn/" target="_blank">沪ICP备13005482号-6</a>

            <a href="http://www.voidme.com/php" target="_blank">PHP</a>
            <a href="http://www.voidme.com/php-reference" target="_blank">PHP参考手册</a>
            <a href="http://www.voidme.com/php7" target="_blank">PHP7</a>


       		<div style="display:none;"><script src="https://s4.cnzz.com/z_stat.php?id=1261868352&amp;web_id=1261868352" language="JavaScript"></script><script src="https://c.cnzz.com/core.php?web_id=1261868352&amp;t=z" charset="utf-8" type="text/javascript"></script><a href="https://www.cnzz.com/stat/website.php?web_id=1261868352" target="_blank" title="站长统计">站长统计</a></div>
    </div>
    <div style="display:none;">
		<script>
		var _hmt = _hmt || [];
		(function() {
		  var hm = document.createElement("script");
		  hm.src = "https://hm.baidu.com/hm.js?05fb07b91f60527211b85c9c9b431b73";
		  var s = document.getElementsByTagName("script")[0]; 
		  s.parentNode.insertBefore(hm, s);
		})();
		</script>
	</div>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-77509369-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-77509369-1');
    </script>
</div>

<script type="text/javascript" src="http://static02.voidcn.com/voidcn/script/tip.js?time=1607228017586" async=""></script>


<div class="return" title="返回顶部" style="display: none;"></div></body><iframe id="google_esf" name="google_esf" src="https://googleads.g.doubleclick.net/pagead/html/r20201203/r20190131/zrt_lookup.html#" data-ad-client="ca-pub-6208739752673518" style="display: none;"></iframe><ins class="adsbygoogle adsbygoogle-noablate" style="display: none !important; width: 100vw !important; height: 100vh !important; inset: 0px auto auto 0px !important; clear: none !important; float: none !important; margin: 0px !important; max-height: none !important; max-width: none !important; opacity: 1 !important; overflow: visible !important; padding: 0px !important; position: fixed !important; vertical-align: baseline !important; visibility: visible !important; z-index: 2147483647 !important; background-color: white !important;" data-adsbygoogle-status="done" aria-hidden="true" data-vignette-loaded="true"><ins id="aswift_5_expand" style="display: inline-table !important; border: none !important; height: 100vh !important; margin: 0px !important; padding: 0px !important; position: relative !important; visibility: visible !important; width: 100vw !important; background-color: transparent !important; inset: auto !important; clear: none !important; float: none !important; max-height: none !important; max-width: none !important; opacity: 1 !important; overflow: visible !important; vertical-align: baseline !important; z-index: auto !important;" tabindex="0" title="Advertisement" aria-label="Advertisement"><ins id="aswift_5_anchor" style="display: block !important; border: none !important; height: 100vh !important; margin: 0px !important; padding: 0px !important; position: relative !important; visibility: visible !important; width: 100vw !important; background-color: transparent !important; inset: auto !important; clear: none !important; float: none !important; max-height: none !important; max-width: none !important; opacity: 1 !important; overflow: visible !important; vertical-align: baseline !important; z-index: auto !important;"><iframe id="aswift_5" name="" sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" width="" height="" frameborder="0" src="https://googleads.g.doubleclick.net/pagead/html/r20201203/r20190131/zrt_lookup.html?fsb=1#RS-0-&amp;adk=1812271808&amp;client=ca-pub-6208739752673518&amp;fa=8&amp;ifi=5&amp;uci=a!5&amp;xpc=yFYmcbcv1P&amp;p=http%3A//www.voidcn.com" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" style="width: 100vw !important; height: 100vh !important; inset: 0px auto auto 0px !important; position: absolute !important; clear: none !important; display: inline !important; float: none !important; margin: 0px !important; max-height: none !important; max-width: none !important; opacity: 1 !important; overflow: visible !important; padding: 0px !important; vertical-align: baseline !important; visibility: visible !important; z-index: auto !important;" data-google-container-id="a!5" data-google-query-id="CPjmuZv9hu4CFdR0iwod36YPcQ" data-load-complete="true"></iframe></ins></ins></ins></html>