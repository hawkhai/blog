<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><meta charset="utf-8" /><title>libv8 の gem install にハマって解決したメモ - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="Xe6+2jfiXOQ8RU3w53f+W6ivBzWMgb0Xnj/jL5drFGWNARz9zR1BTwXi/BwJb+X1AdRE4Vx46DgSs+MFpHWgag==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/style-b75c892d3adb6f11a545f65304f60739.min.css" /><script type="text/javascript" async="" src="https://www.google-analytics.com/analytics.js"></script><script type="text/javascript" async="" src="https://www.googletagmanager.com/gtag/js?id=UA-47960765-1&amp;l=dataLayer&amp;cx=c"></script><script type="text/javascript" async="" src="https://www.google-analytics.com/analytics.js"></script><script src="https://www.googletagservices.com/activeview/js/current/osd.js?cb=%2Fr20100101"></script><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-6e875e1c6efb7787d1078fb7ea4e7c43.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image" /><meta content="@Qiita" name="twitter:site" /><meta content="@south37777" name="twitter:creator" /><meta property="og:type" content="article" /><meta property="og:title" content="libv8 の gem install にハマって解決したメモ - Qiita" /><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-1.2.2&amp;w=1200&amp;mark=https%3A%2F%2Fqiita-user-contents.imgix.net%2F~text%3Fixlib%3Drb-1.2.2%26w%3D840%26h%3D380%26txt%3Dlibv8%2520%25E3%2581%25AE%2520gem%2520install%2520%25E3%2581%25AB%25E3%2583%258F%25E3%2583%259E%25E3%2581%25A3%25E3%2581%25A6%25E8%25A7%25A3%25E6%25B1%25BA%25E3%2581%2597%25E3%2581%259F%25E3%2583%25A1%25E3%2583%25A2%26txt-color%3D%2523333%26txt-font%3DHiragino%2520Sans%2520W6%26txt-size%3D54%26txt-clip%3Dellipsis%26txt-align%3Dcenter%252Cmiddle%26s%3D1f18b7cb41e14019c1b5da16890c873d&amp;mark-align=center%2Cmiddle&amp;blend=https%3A%2F%2Fqiita-user-contents.imgix.net%2F~text%3Fixlib%3Drb-1.2.2%26w%3D840%26h%3D500%26txt%3D%2540south37%26txt-color%3D%2523333%26txt-font%3DHiragino%2520Sans%2520W6%26txt-size%3D45%26txt-align%3Dright%252Cbottom%26s%3D858f57302a3921cdb18cd3a9dc4ff176&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=92b114adb47be245019c51e03471cd22" /><meta property="og:description" content="&#10;&#10;libv8 の gem install に失敗する&#10;&#10;$ bundle install&#10;.&#10;.&#10;.&#10;Installing libv8 3.16.14.13 with native extensions&#10;&#10;Gem::Ext::Bui..." /><meta content="https://qiita.com/south37/items/9a3269c28d9fba80f0b7" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="Ruby,Gem,libv8" name="keywords" /><style data-emotion-css="1lpnfiw 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r ah51ux 4lkrad 1u064zm 1hbd3g7" }="">.css-1lpnfiw{display:none;right:0;top:24px;width:250px;}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-ah51ux{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#5D707C;}.css-4lkrad{display:inline-block;width:56px;height:12.747967479674797px;fill:#55C500;}.css-1u064zm{display:inline-block;border:2px solid #ccc;font-size:1.4rem;padding:4px 0;text-align:center;cursor:pointer;width:100%;background-color:#fff;color:#333;border-color:#ddd;font-weight:bold;}.css-1u064zm:hover{border-color:#adadad;background-color:#e6e6e6;color:#333;}.css-1hbd3g7{height:250px;}</style><script src="https://www.googletagmanager.com/gtag/js?id=UA-24675221-12"></script><style data-emotion="css"></style><style data-jss="" data-meta="MuiTooltip">
.MuiTooltip-popper {
  flip: false;
  z-index: 1500;
  pointer-events: none;
}
.MuiTooltip-popperInteractive {
  pointer-events: auto;
}
.MuiTooltip-popperArrow[x-placement*="bottom"] .MuiTooltip-arrow {
  top: 0;
  flip: false;
  left: 0;
  width: 2em;
  height: 1em;
  margin-top: -0.95em;
  margin-left: 4px;
  margin-right: 4px;
}
.MuiTooltip-popperArrow[x-placement*="top"] .MuiTooltip-arrow {
  flip: false;
  left: 0;
  width: 2em;
  bottom: 0;
  height: 1em;
  margin-left: 4px;
  margin-right: 4px;
  margin-bottom: -0.95em;
}
.MuiTooltip-popperArrow[x-placement*="right"] .MuiTooltip-arrow {
  flip: false;
  left: 0;
  width: 1em;
  height: 2em;
  margin-top: 4px;
  margin-left: -0.95em;
  margin-bottom: 4px;
}
.MuiTooltip-popperArrow[x-placement*="left"] .MuiTooltip-arrow {
  flip: false;
  right: 0;
  width: 1em;
  height: 2em;
  margin-top: 4px;
  margin-right: -0.95em;
  margin-bottom: 4px;
}
.MuiTooltip-popperArrow[x-placement*="left"] .MuiTooltip-arrow::before {
  flip: false;
  border-color: transparent transparent transparent currentcolor;
  border-width: 1em 0 1em 1em;
}
.MuiTooltip-popperArrow[x-placement*="right"] .MuiTooltip-arrow::before {
  flip: false;
  border-color: transparent currentcolor transparent transparent;
  border-width: 1em 1em 1em 0;
}
.MuiTooltip-popperArrow[x-placement*="top"] .MuiTooltip-arrow::before {
  flip: false;
  border-color: currentcolor transparent transparent transparent;
  border-width: 1em 1em 0 1em;
}
.MuiTooltip-popperArrow[x-placement*="bottom"] .MuiTooltip-arrow::before {
  flip: false;
  border-color: transparent transparent currentcolor transparent;
  border-width: 0 1em 1em 1em;
}
.MuiTooltip-tooltip {
  color: #fff;
  padding: 4px 8px;
  font-size: 0.625rem;
  max-width: 300px;
  word-wrap: break-word;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 500;
  line-height: 1.4em;
  border-radius: 4px;
  background-color: rgba(97, 97, 97, 0.9);
}
.MuiTooltip-tooltipArrow {
  margin: 0;
  position: relative;
}
.MuiTooltip-arrow {
  color: rgba(97, 97, 97, 0.9);
  position: absolute;
  font-size: 6px;
}
.MuiTooltip-arrow::before {
  width: 0;
  height: 0;
  margin: auto;
  content: "";
  display: block;
  border-style: solid;
}
.MuiTooltip-touch {
  padding: 8px 16px;
  font-size: 0.875rem;
  font-weight: 400;
  line-height: 1.14286em;
}
.MuiTooltip-tooltipPlacementLeft {
  margin: 0 24px ;
  transform-origin: right center;
}
@media (min-width:600px) {
  .MuiTooltip-tooltipPlacementLeft {
    margin: 0 14px;
  }
}
.MuiTooltip-tooltipPlacementRight {
  margin: 0 24px;
  transform-origin: left center;
}
@media (min-width:600px) {
  .MuiTooltip-tooltipPlacementRight {
    margin: 0 14px;
  }
}
.MuiTooltip-tooltipPlacementTop {
  margin: 24px 0;
  transform-origin: center bottom;
}
@media (min-width:600px) {
  .MuiTooltip-tooltipPlacementTop {
    margin: 14px 0;
  }
}
.MuiTooltip-tooltipPlacementBottom {
  margin: 24px 0;
  transform-origin: center top;
}
@media (min-width:600px) {
  .MuiTooltip-tooltipPlacementBottom {
    margin: 14px 0;
  }
}
</style><script type="text/x-mathjax-config">MathJax.Hub.Config({
    skipStartupTypeset: true,
    showProcessingMessages: false,
    tex2jax: {
      inlineMath: [['$', '$']],
      displayMath: [['$$', '$$']],
      processEscapes: true,
      processEnvironments: false,
      processRefs: false,
      skipTags: ['script','noscript','style','textarea','pre','code','a','h1','h2','h3','h4','h5','h6']
    }
   })</script><script src="https://www.googletagservices.com/tag/js/gpt.js"></script><script src="https://securepubads.g.doubleclick.net/gpt/pubads_impl_2020120801.js" async=""></script><link rel="preload" href="https://adservice.google.com/adsid/integrator.js?domain=qiita.com" as="script" /><script type="text/javascript" src="https://adservice.google.com/adsid/integrator.js?domain=qiita.com"></script><link rel="prefetch" href="https://a8be079015d455ff03abc7d9bce475cf.safeframe.googlesyndication.com/safeframe/1-0-37/html/container.html" /><link rel="prefetch" href="https://tpc.googlesyndication.com/safeframe/1-0-37/html/container.html" /></head><body><div class="allWrapper"><div class="st-HeaderContainer"><div id="GlobalHeader-react-component-2501537c-86ef-41e4-ad68-825a54906cc1"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo mr-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"/><path d="M250.81 29.66h23.48v18.9h-23.48z"/><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"/><circle cx="216.33" cy="21.4" r="12.28"/></svg></a><div><div class="st-Header_realmSelector" tabindex="0"><span class="fa fa-fw fa-caret-down"></span></div><div class="st-Header_dropdown st-RealmSelector"><div class="st-RealmSelector_realms"><a class="st-Header_dropdownItem st-RealmItem" href="https://qiita.com/"><div class="st-RealmItem_statusIcon"><span class="fa fa-fw fa-check"></span></div><div class="st-RealmItem_humanName">Qiita</div></a></div><hr /><div class="st-RealmSelector_supplements"><div class="st-RealmSelector_label">You are not logged in to any team</div><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem st-RealmSelectorSupplement"><div class="st-RealmSelectorSupplement_icon"><span class="fa fa-fw fa-sign-in"></span></div><div>Log in to Qiita Team...</div></a></div></div></div><div><div class="st-Header_community" tabindex="0">Community<span class="fa fa-fw fa-caret-down ml-1of2"></span></div><div class="st-Header_dropdown"><a href="/organizations" class="st-Header_dropdownItem"><span class="fa fa-fw fa-building-o mr-1of2"></span>List of all organizatioins</a><a href="/advent-calendar" class="st-Header_dropdownItem"><span class="fa fa-fw fa-calendar mr-1of2"></span>Advent Calendar</a><div class="st-Header_dropdownSeparator"></div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank"><span class="fa fa-fw fa-search mr-1of2"></span>Qiita Jobs</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank"><span class="fa fa-fw fa-comments-o mr-1of2"></span>Qiitadon (β)</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank"><span class="fa fa-fw fa-newspaper-o mr-1of2"></span>Qiita Zine</a><div class="st-Header_dropdownSeparator"></div><a href="https://help.qiita.com/ja/articles/qiita-community-guideline" class="st-Header_dropdownItem" target="_blank"><span class="fa fa-fw fa-book mr-1of2"></span>Community Guideline</a><a href="https://help.qiita.com/ja/articles/qiita-article-guideline" class="st-Header_dropdownItem" target="_blank"><span class="fa fa-fw fa-book mr-1of2"></span>How to write good articles</a><a href="/release-notes" class="st-Header_dropdownItem" target="_blank"><span class="fa fa-fw fa-book mr-1of2"></span>Release note</a></div></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search"></span><input type="search" class="st-Header_searchInput" autocomplete="off" placeholder="Search" value="" name="q" required="" /></form><div class="st-Header_searchButton"><span class="fa fa-search"></span></div></div><div class="st-Header_end"><a class="st-Header_signupButton" href="/signup?redirect_to=%2Fsouth37%2Fitems%2F9a3269c28d9fba80f0b7">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2Fsouth37%2Fitems%2F9a3269c28d9fba80f0b7">Login</a></div><div class="st-Header_overlay"></div><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autocomplete="off" placeholder="Search" value="" name="q" required="" /></form></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-2501537c-86ef-41e4-ad68-825a54906cc1">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><div class="ac-CampaignLink"><div class="ac-CampaignLink_container"><a id="adcal_header_banner" href="https://qiita.com/advent-calendar/2020/freee-api">MacBook AirとApple Watchをプレゼント！業務をハックするTips募集中</a><a id="adcal_header_banner_side" href="https://qiita.com/advent-calendar/2020/freee-api">詳しくはこちら</a></div></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"south37","type":"items","id":"9a3269c28d9fba80f0b7"},"user_id":null,"event_category":"Advent Calendar Header Banner 2","event_action":"Show","data":{"message":"MacBook AirとApple Watchをプレゼント！業務をハックするTips募集中","url":"https://qiita.com/advent-calendar/2020/freee-api","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('adcal_header_banner').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"south37","type":"items","id":"9a3269c28d9fba80f0b7"},"user_id":null,"event_category":"Advent Calendar Header Banner 2","event_action":"Click","data":{"pos_id":"adcal_header_banner","message":"MacBook AirとApple Watchをプレゼント！業務をハックするTips募集中","url":"https://qiita.com/advent-calendar/2020/freee-api","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('adcal_header_banner_side').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"south37","type":"items","id":"9a3269c28d9fba80f0b7"},"user_id":null,"event_category":"Advent Calendar Header Banner 2","event_action":"Click","data":{"pos_id":"adcal_header_banner_side","message":"MacBook AirとApple Watchをプレゼント！業務をハックするTips募集中","url":"https://qiita.com/advent-calendar/2020/freee-api","sub_message":"詳しくはこちら"}}
  )
})</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/ruby","name":"Ruby"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2016-06-01T17:51:29.000+09:00","dateModified":"2016-09-27T03:08:03.000+09:00","headline":"libv8 の gem install にハマって解決したメモ","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-1.2.2\u0026w=1200\u0026mark=https%3A%2F%2Fqiita-user-contents.imgix.net%2F~text%3Fixlib%3Drb-1.2.2%26w%3D840%26h%3D380%26txt%3Dlibv8%2520%25E3%2581%25AE%2520gem%2520install%2520%25E3%2581%25AB%25E3%2583%258F%25E3%2583%259E%25E3%2581%25A3%25E3%2581%25A6%25E8%25A7%25A3%25E6%25B1%25BA%25E3%2581%2597%25E3%2581%259F%25E3%2583%25A1%25E3%2583%25A2%26txt-color%3D%2523333%26txt-font%3DHiragino%2520Sans%2520W6%26txt-size%3D54%26txt-clip%3Dellipsis%26txt-align%3Dcenter%252Cmiddle%26s%3D1f18b7cb41e14019c1b5da16890c873d\u0026mark-align=center%2Cmiddle\u0026blend=https%3A%2F%2Fqiita-user-contents.imgix.net%2F~text%3Fixlib%3Drb-1.2.2%26w%3D840%26h%3D500%26txt%3D%2540south37%26txt-color%3D%2523333%26txt-font%3DHiragino%2520Sans%2520W6%26txt-size%3D45%26txt-align%3Dright%252Cbottom%26s%3D858f57302a3921cdb18cd3a9dc4ff176\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=92b114adb47be245019c51e03471cd22","mainEntityOfPage":"https://qiita.com/south37/items/9a3269c28d9fba80f0b7","author":{"@type":"Person","address":"Tokyo, Japan","email":null,"identifier":"south37","name":"south37","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F10920%2Fprofile-images%2F1473681852?ixlib=rb-1.2.2\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=5c99a2739148acd4e432f97fc392e09c","url":"https://qiita.com/south37","description":"RubyとかJavaScriptとか書きます。\r\n","memberOf":[{"@type":"Organization","address":"東京都港区白金台5-12-7　MG白金台ビル4階","legalName":"Wantedly, Inc.","image":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/2ec41196cc077f2d3044d6d4a5d5b141c1b7a397/original.jpg?1436504451","logo":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/6600325034f57ff945b9b39ad914a63c46a792d8/original.jpg?1370362971","identifier":"wantedly","description":"「シゴトでココロオドル」ためのビジネスSNS「Wantedly」の開発・運営をしています。"}]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-green-36e6153054916b1d8ed7fc47163039da.png"}}}</script><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/south37/items/9a3269c28d9fba80f0b7","location":"/south37/items/9a3269c28d9fba80f0b7","scheme":"https","host":"qiita.com","port":null,"pathname":"/south37/items/9a3269c28d9fba80f0b7","search":null,"httpAcceptLanguage":"zh-CN,zh;q=0.9","actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"IBXsjjwrTLpivBNLrglp5xeuNLfOCJVA0vZXVQtyhWPw+k6pxtRREVsboqdAEXJJvtV3Yx7xwG9eeld/OGwxbA==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-ab7295fb-e721-419b-88f1-9462e4e49cbc"><div class="p-items"><div class="p-items_wrapper"><div class="p-items_container"><div class="p-items_main"><div class="p-items_article"><div class="it-Header"><div class="u-flex-center-between mb-3"><div class="it-Header_info"><div class="it-Header_author"><a href="/south37"><img src="https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F10920%2Fprofile-images%2F1473681852?ixlib=rb-1.2.2&amp;auto=compress%2Cformat&amp;lossless=0&amp;w=48&amp;s=ad20e5e16f75aa3c9d56a02e81003633" alt="south37" class="it-Header_authorImage" /></a><a href="/south37" class="it-Header_authorName">@<!-- -->south37</a></div><div class="it-Header_time"><span title="2016-06-01" class=""><meta content="2016-06-01T08:51:29Z" /><time datetime="2016-09-26T18:08:03Z">updated at 2016-09-27</time></span></div><div class="it-Header_meta"><div class="it-Header_manipulate"><div class="it-Header_dropdown"><span class="it-Header_dropdownToggle" tabindex="0"><span class="fa fa-ellipsis-h fa-lg"></span></span><div class="css-1lpnfiw"><div><div class="css-1gj7nt">Improve article</div><a href="/drafts/9a3269c28d9fba80f0b7/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div></div><div class="css-1gj7nt">Improve article</div><a href="/south37/items/9a3269c28d9fba80f0b7/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/south37/items/9a3269c28d9fba80f0b7/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/south37/items/9a3269c28d9fba80f0b7/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"/></svg></span>Show all likers</a><a href="/south37/items/9a3269c28d9fba80f0b7.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div></div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required="" />It's illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required="" />It's socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required="" />It's advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required="" />It's spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required="" />Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit" /></div></form></div></div></div></div></div><h1 class="it-Header_title">libv8 の gem install にハマって解決したメモ</h1><div class="it-Tags"><a href="/tags/ruby" class="it-Tags_item"><span>Ruby</span></a><a href="/tags/gem" class="it-Tags_item"><span>Gem</span></a><a href="/tags/libv8" class="it-Tags_item"><span>libv8</span></a></div></div><div class="it-ActionsMobile"><div class="it-ActionsMobile_like likable"><button title="Looks Good To Me!" class=""><span style="margin-right: 12px;"><svg size="58" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 564.81 145.68" color="#55C500" class="css-1graf1l ezzk7cf0"><path d="M0 3.85h38.39v106.5h64.16v32H0zM195.41 66.82h71.82q.91 17.84-4 32.35A68.89 68.89 0 01248.71 124a65.49 65.49 0 01-22.9 16 74.08 74.08 0 01-29.17 5.65 78.16 78.16 0 01-54.17-21.32 74.1 74.1 0 01-16.42-23.21 68.08 68.08 0 01-6-28.41 67.7 67.7 0 016-28.42 74.44 74.44 0 0116.42-23.1 76.37 76.37 0 0124.32-15.52 78.92 78.92 0 0184.43 16.06l-25 25A36.52 36.52 0 00213.57 36a37.65 37.65 0 00-31.83-.87 37.7 37.7 0 00-12.08 8.57 40.75 40.75 0 00-8.17 12.91 42.8 42.8 0 00-3 16.22 42.91 42.91 0 003 16.17 40.44 40.44 0 008.17 13 37.4 37.4 0 0012.08 8.57 36.07 36.07 0 0014.9 3.11q14.38 0 22.13-5.35a25.46 25.46 0 0010.31-14.65h-33.77zM319.44 36.21h-36.55v-32h111.18v32h-36.45v106.5h-38.18zM486.82 109l-29.73-44.18v77.89H418.7V4.24h33.83l39 55.09 39.86-55.09h33.42v138.47h-38.38V65.23L496.19 109z"/></svg></span><span>40</span></button></div><div class="it-ActionsMobile_stock"><button title="Stock" class=""><svg size="18" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" class="css-11epjv6 e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"/></svg></button></div></div><div class="it-DeprecationAlert_three mb-5 p-2"><span class="fa fa-warning mr-1"></span>More than 3 years have passed since last update.</div><section class="it-MdContent"><div id="personal-public-article-body"><div>
<h2>
<span id="libv8-の-gem-install-に失敗する" class="fragment"></span><a href="#libv8-%E3%81%AE-gem-install-%E3%81%AB%E5%A4%B1%E6%95%97%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>libv8 の gem install に失敗する</h2>

<div class="code-frame" data-lang="text"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre>$ bundle install
.
.
.
Installing libv8 3.16.14.13 with native extensions

Gem::Ext::BuildError: ERROR: Failed to build gem native extension.

    current directory: /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/ext/libv8
/Users/minami/.rbenv/versions/2.3.0/bin/ruby -r ./siteconf20160427-41464-dwbunz.rb extconf.rb
creating Makefile
Compiling v8 for x64
Using python 2.7.10
Using compiler: /usr/bin/c++ (clang version 7.3.0)
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool: file: /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/atomicops_internals_x86_gcc.o has no symbols
In file included from ../src/accessors.cc:28:
In file included from ../src/v8.h:60:
In file included from ../src/objects-inl.h:38:
In file included from ../src/elements.h:32:
../src/objects.h:5252:44: error: shifting a negative signed value is undefined [-Werror,-Wshift-negative-value]
  static const int kElementsKindMask = (-1 &lt;&lt; kElementsKindShift) &amp;
                                        ~~ ^
../src/objects.h:7386:36: error: shifting a negative signed value is undefined [-Werror,-Wshift-negative-value]
      (~kMaxCachedArrayIndexLength &lt;&lt; kArrayIndexHashLengthShift) |
       ~~~~~~~~~~~~~~~~~~~~~~~~~~~ ^
2 errors generated.
make[1]: *** [/Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/v8_base/src/accessors.o] Error 1
make: *** [x64.release] Error 2
/Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/ext/libv8/location.rb:36:in `block in verify_installation!': libv8 did not install properly, expected binary v8 archive '/Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/tools/gyp/libv8_base.a'to exist, but it was not found (Libv8::Location::Vendor::ArchiveNotFound)
        from /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/ext/libv8/location.rb:35:in `each'
        from /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/ext/libv8/location.rb:35:in `verify_installation!'
        from /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/ext/libv8/location.rb:26:in `install!'
        from extconf.rb:7:in `&lt;main&gt;'
GYP_GENERATORS=make \
        build/gyp/gyp --generator-output="out" build/all.gyp \
                      -Ibuild/standalone.gypi --depth=. \
                      -Dv8_target_arch=x64 \
                      -S.x64  -Dv8_enable_backtrace=1 -Dv8_can_use_vfp2_instructions=true -Darm_fpu=vfpv2 -Dv8_can_use_vfp3_instructions=true -Darm_fpu=vfpv3 -Dwerror=''
  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/allocation.o
  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/atomicops_internals_x86_gcc.o
  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/bignum.o
  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/bignum-dtoa.o
  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/cached-powers.o
  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/conversions.o
  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/diy-fp.o
  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/dtoa.o
  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/fast-dtoa.o
  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/fixed-dtoa.o
  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/once.o
  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/preparse-data.o
  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/preparser.o
  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/preparser-api.o
  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/scanner.o
  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/strtod.o
  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/token.o
  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/unicode.o
  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/utils.o
  LIBTOOL-STATIC /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/libpreparser_lib.a
  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser/preparser/preparser-process.o
  LINK(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/preparser
  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/v8_base/src/accessors.o

extconf failed, exit code 1

Gem files will remain installed in /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13 for inspection.
Results logged to /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/extensions/x86_64-darwin-15/2.3.0-static/libv8-3.16.14.13/gem_make.out
</pre></div></div>

<p>libv8 のビルドで失敗してる。</p>

<p><a href="http://qiita.com/mana-bin/items/0ee8b35c1726bacd8ecf" class="autolink" id="reference-78d25fc8ef47013ac296">http://qiita.com/mana-bin/items/0ee8b35c1726bacd8ecf</a> を参考に、 bundle install 時のオプションを変更</p>

<div class="code-frame" data-lang="text"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre>$ bundle config build.libv8 --with-system-v8
</pre></div></div>

<p>再度 bundle install。今度は、<code>therubyracer</code> の install に失敗。</p>

<div class="code-frame" data-lang="text"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre>Installing therubyracer 0.12.2 with native extensions

Gem::Ext::BuildError: ERROR: Failed to build gem native extension.

    current directory: /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/therubyracer-0.12.2/ext/v8
/Users/minami/.rbenv/versions/2.3.0/bin/ruby -r ./siteconf20160427-47511-1o6c9vy.rb extconf.rb
checking for main() in -lpthread... yes
checking for main() in -lobjc... yes
checking for v8.h... no
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of necessary
libraries and/or headers.  Check the mkmf.log file for more details.  You may
need configuration options.

Provided configuration options:
        --with-opt-dir
        --without-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=/Users/minami/.rbenv/versions/2.3.0/bin/$(RUBY_BASE_NAME)
        --with-pthreadlib
        --without-pthreadlib
        --with-objclib
        --without-objclib
        --enable-debug
        --disable-debug
        --with-v8-dir
        --without-v8-dir
        --with-v8-include
        --without-v8-include=${v8-dir}/include
        --with-v8-lib
        --without-v8-lib=${v8-dir}/lib
/Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/ext/libv8/location.rb:50:in `configure': You have chosen to use the version of V8 found on your system (Libv8::Location::System::NotFoundError)
and *not* the one that is bundle with the libv8 rubygem. However,
it could not be located. please make sure you have a version of
v8 that is compatible with 3.16.14.13 installed. You may
need to special --with-v8-dir options if it is in a non-standard
location

thanks,
The Mgmt

        from /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/lib/libv8.rb:7:in `configure_makefile'
        from extconf.rb:32:in `&lt;main&gt;'

To see why this extension failed to compile, please check the mkmf.log which can be found here:

  /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/extensions/x86_64-darwin-15/2.3.0-static/therubyracer-0.12.2/mkmf.log

extconf failed, exit code 1

Gem files will remain installed in /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/therubyracer-0.12.2 for inspection.
Results logged to /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/extensions/x86_64-darwin-15/2.3.0-static/therubyracer-0.12.2/gem_make.out
</pre></div></div>

<p>log ファイルを見ると、 <code>v8.h</code> が見つからないとか出てる。</p>

<div class="code-frame" data-lang="text"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre># ~/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/extensions/x86_64-darwin-15/2.3.0-static/therubyracer-0.12.2/mkmf.log

 54 --------------------
 55
 56 find_header: checking for v8.h... -------------------- no
 57
 58 "clang -E -I/Users/minami/.rbenv/versions/2.3.0/include/ruby-2.3.0/x86_64-darwin15 -I/Users/minami/.rbenv/versions/2.3.0/include/ruby-2.3.0/ruby/backward -I/Users/minami/.rbenv/versions/2.3.0/inclu
 59 clang: warning: argument unused during compilation: '-rdynamic'
 60 conftest.c:3:10: fatal error: 'v8.h' file not found
 61 #include &lt;v8.h&gt;
 62          ^
 63 1 error generated.
 64 checked program was:
 65 /* begin */
 66 1: #include "ruby.h"
 67 2:
 68 3: #include &lt;v8.h&gt;
 69 /* end */
 70
 71 --------------------
 72
</pre></div></div>

<p><a href="http://wknar.hatenablog.com/entry/update-gcc-and-v8" class="autolink" rel="nofollow noopener" target="_blank">http://wknar.hatenablog.com/entry/update-gcc-and-v8</a> 曰く、<code>brew install v8</code> すれば v8.h が見つかるようになるらしかったので、してみた。</p>

<div class="code-frame" data-lang="text"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre>$ brew install v8
==&gt; Downloading https://homebrew.bintray.com/bottles/v8-4.9.385.28.el_capitan.bottle.tar.gz
######################################################################## 100.0%
==&gt; Pouring v8-4.9.385.28.el_capitan.bottle.tar.gz
🍺  /usr/local/Cellar/v8/4.9.385.28: 26 files, 676.4M
brew install v8  4.80s user 3.18s system 7% cpu 1:43.79 total
</pre></div></div>

<p>この状態でまた bundle install。が、同様のエラー。</p>

<p>v8.h は <code>/usr/local/Cellar/v8/4.9.385.28/include/v8.h</code> にあるが、どうも path が通ってないっぽい？？？？</p>

<h2>
<span id="最終的に" class="fragment"></span><a href="#%E6%9C%80%E7%B5%82%E7%9A%84%E3%81%AB"><i class="fa fa-link"></i></a>最終的に</h2>

<p>home-brew で古い v8 を install した。<br />
具体的には、<code>brew install homebrew/versions/v8-315</code> で version <code>3.15.11.18</code> を install。<br />
<code>libv8</code> では <code>—with-system-v8</code> を指定し、さらに <code>therubyracer</code> install の際には <code>v8-315</code> の directory を <code>v8-dir</code> として指定するようにした。</p>

<div class="code-frame" data-lang="text"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre>$ brew install homebrew/versions/v8-315
$ bundle config build.libv8 --with-system-v8
$ bundle config build.therubyracer --with-v8-dir=/usr/local/opt/v8-315/
</pre></div></div>
</div></div></section><div class="it-Footer"><div class="it-Footer_actions"><div class="it-Footer_editRequest"><a href="/drafts/9a3269c28d9fba80f0b7/edit" class="u-link-no-underline"><span>Edit request</span></a></div><div class="it-Footer_stock"><button><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" class="css-ah51ux e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"/></svg><span class="it-Footer_stockLabel">Stock</span></button></div><div class="it-Footer_like" title="Looks Good To Me!"><button style="background-color:#fff"><span style="width:100%;height:100%;display:flex;align-items:center;justify-content:center"><svg size="56" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 564.81 145.68" color="#55C500" class="css-4lkrad ezzk7cf0"><path d="M0 3.85h38.39v106.5h64.16v32H0zM195.41 66.82h71.82q.91 17.84-4 32.35A68.89 68.89 0 01248.71 124a65.49 65.49 0 01-22.9 16 74.08 74.08 0 01-29.17 5.65 78.16 78.16 0 01-54.17-21.32 74.1 74.1 0 01-16.42-23.21 68.08 68.08 0 01-6-28.41 67.7 67.7 0 016-28.42 74.44 74.44 0 0116.42-23.1 76.37 76.37 0 0124.32-15.52 78.92 78.92 0 0184.43 16.06l-25 25A36.52 36.52 0 00213.57 36a37.65 37.65 0 00-31.83-.87 37.7 37.7 0 00-12.08 8.57 40.75 40.75 0 00-8.17 12.91 42.8 42.8 0 00-3 16.22 42.91 42.91 0 003 16.17 40.44 40.44 0 008.17 13 37.4 37.4 0 0012.08 8.57 36.07 36.07 0 0014.9 3.11q14.38 0 22.13-5.35a25.46 25.46 0 0010.31-14.65h-33.77zM319.44 36.21h-36.55v-32h111.18v32h-36.45v106.5h-38.18zM486.82 109l-29.73-44.18v77.89H418.7V4.24h33.83l39 55.09 39.86-55.09h33.42v138.47h-38.38V65.23L496.19 109z"/></svg></span></button><a href="/south37/items/9a3269c28d9fba80f0b7/likers" class="it-Footer_likeCount">40</a></div></div><div class="it-Footer_social"><div class="it-Footer_shareButton it-Footer_shareButton-twitter"><span class="fa fa-twitter"></span></div><div class="it-Footer_shareButton it-Footer_shareButton-facebook"><span class="fa fa-facebook"></span></div></div></div><div class="ai-Container"><div class="ai-User"><a href="/south37"><img src="https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F10920%2Fprofile-images%2F1473681852?ixlib=rb-1.2.2&amp;auto=compress%2Cformat&amp;lossless=0&amp;w=75&amp;s=5c99a2739148acd4e432f97fc392e09c" alt="south37" class="ai-User_image" /></a><div class="ai-User_body"><div class="ai-User_header"><a href="/south37" class="ai-User_name">Minami Nao</a><a href="/south37" class="ai-User_urlname">@<!-- -->south37</a><span itemscope="" itemtype="http://schema.org/Organization"><a href="/organizations/wantedly"><img src="https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/6600325034f57ff945b9b39ad914a63c46a792d8/original.jpg?1370362971" alt="wantedly" class="ai-User_organization" /></a></span></div><div class="ai-User_description">RubyとかJavaScriptとか書きます。
</div><a href="http://south37.hatenablog.com/" class="ai-User_website">http://south37.hatenablog.com/</a><div class="ai-User_footer"><button class="css-1u064zm e7r9vc50">Follow</button></div></div></div><div class="ai-Organization" itemscope="" itemtype="http://schema.org/Organization"><a href="/organizations/wantedly"><img src="https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/6600325034f57ff945b9b39ad914a63c46a792d8/original.jpg?1370362971" alt="wantedly" class="ai-Organization_image" /></a><div class="ai-Organization_body"><div class="ai-Organization_header"><a href="/organizations/wantedly" class="ai-Organization_name"><span>Wantedly, Inc.</span></a></div><div class="ai-Organization_description">「シゴトでココロオドル」ためのビジネスSNS「Wantedly」の開発・運営をしています。</div><a href="https://wantedlyinc.com/ja/presentations" class="ai-Organization_website">https://wantedlyinc.com/ja/presentations</a></div></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By "stocking" the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2Fsouth37%2Fitems%2F9a3269c28d9fba80f0b7&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2Fsouth37%2Fitems%2F9a3269c28d9fba80f0b7&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div><div><div class="it-Ads_afterBodyContainer it-Ads_afterBodyContainer-wide mt-3"><div class="it-Ads_afterBodyWrapper mr-1"><div id="dfp-slot-article-after-body-for-pc-left" class="ad-300x250" data-test-adunitpath="/383564218/qiita.com_items-show_sidebar-top" elementtiming="gpt-dfp-slot-article-after-body-for-pc-left" data-testid="ArticleAdsAfterBody_AdUnit" data-google-query-id="CMXfqOT61u0CFRIqvAodlTYPHg"><div id="google_ads_iframe_/383564218/qiita.com_items-show_sidebar-top_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/383564218/qiita.com_items-show_sidebar-top_0" title="3rd party ad content" name="google_ads_iframe_/383564218/qiita.com_items-show_sidebar-top_0" width="300" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" srcdoc="" style="border: 0px; vertical-align: bottom;" data-google-container-id="1" data-load-complete="true"></iframe></div></div></div><div class="it-Ads_afterBodyWrapper"><div id="dfp-slot-article-after-body-for-pc-right" class="ad-300x250" data-test-adunitpath="/383564218/qiita.com_items-show_sidebar-bottom" elementtiming="gpt-dfp-slot-article-after-body-for-pc-right" data-testid="ArticleAdsAfterBody_AdUnit" data-google-query-id="CJ_oqOT61u0CFRONvAodYxgDsQ"><div id="google_ads_iframe_/383564218/qiita.com_items-show_sidebar-bottom_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/383564218/qiita.com_items-show_sidebar-bottom_0" title="3rd party ad content" name="google_ads_iframe_/383564218/qiita.com_items-show_sidebar-bottom_0" width="300" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" srcdoc="" style="border: 0px; vertical-align: bottom;" data-google-container-id="2" data-load-complete="true"></iframe></div></div></div></div></div></div></div><div class="p-items_options"><div class="mt-2"></div></div><div class="p-items_toc"><div class="mt-2"></div></div></div></div><div class="p-items_wrapper p-items_wrapper-white"><div class="p-items_container"><div class="p-items_leftDummy"></div><div class="p-items_main"><div class="p-items_aside mt-5 px-5 p-2@s"><div id="logly-lift-4279493"><div class="tl-DummyItemList p-2"><div class="tl-DummyItemList_content tl-DummyItem"><div class="tl-DummyItem_image mr-1"></div><div class="tl-DummyItem_body"><div class="tl-DummyItem_text mb-1"></div><div class="tl-DummyItem_text mb-1"></div><div class="tl-DummyItem_text mb-1"></div></div></div><div class="tl-DummyItemList_content tl-DummyItem"><div class="tl-DummyItem_image mr-1"></div><div class="tl-DummyItem_body"><div class="tl-DummyItem_text mb-1"></div><div class="tl-DummyItem_text mb-1"></div><div class="tl-DummyItem_text mb-1"></div></div></div><div class="tl-DummyItemList_content tl-DummyItem"><div class="tl-DummyItem_image mr-1"></div><div class="tl-DummyItem_body"><div class="tl-DummyItem_text mb-1"></div><div class="tl-DummyItem_text mb-1"></div><div class="tl-DummyItem_text mb-1"></div></div></div><div class="tl-DummyItemList_content tl-DummyItem"><div class="tl-DummyItem_image mr-1"></div><div class="tl-DummyItem_body"><div class="tl-DummyItem_text mb-1"></div><div class="tl-DummyItem_text mb-1"></div><div class="tl-DummyItem_text mb-1"></div></div></div><div class="tl-DummyItemList_content tl-DummyItem"><div class="tl-DummyItem_image mr-1"></div><div class="tl-DummyItem_body"><div class="tl-DummyItem_text mb-1"></div><div class="tl-DummyItem_text mb-1"></div><div class="tl-DummyItem_text mb-1"></div></div></div></div></div></div><div class="p-items_aside mt-5 px-5 p-2@s"></div><div><div class="it-Ads_afterReferenceContainer"><div class="it-Ads_afterReferenceWrapper"><div id="dfp-slot-article-after-reference" class="ad-300x250" data-test-adunitpath="/383564218/qiita.com_items-show_under-article-mobile_2" elementtiming="gpt-dfp-slot-article-after-reference" data-testid="ArticleAdsAfterReference_AdUnit" data-google-query-id="CJfdqOT61u0CFRMEXAodgK0A7w"><div id="google_ads_iframe_/383564218/qiita.com_items-show_under-article-mobile_2_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/383564218/qiita.com_items-show_under-article-mobile_2_0" title="3rd party ad content" name="google_ads_iframe_/383564218/qiita.com_items-show_under-article-mobile_2_0" width="300" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" srcdoc="" data-google-container-id="3" style="border: 0px; vertical-align: bottom;" data-load-complete="true"></iframe></div></div></div></div></div><div class="p-items_aside mt-6 px-5 p-2@s" id="comments-wrapper"><div id="comments" class="co-ItemWrapper"><div class="co-ItemWrapper_title mb-2"><span class="fa fa-comments mr-1"></span>Comments</div><div class="mb-4">No comments</div><div class="co-AnonymousForm p-3"><div class="co-AnonymousForm_title mb-1">Sign up for free and join this conversation.</div><a href="/signup?callback_action=login_or_signup&amp;redirect_to=https%3A%2F%2Fqiita.com%2Fsouth37%2Fitems%2F9a3269c28d9fba80f0b7&amp;realm=qiita" class="co-AnonymousForm_signup">Sign Up</a><div class="co-AnonymousForm_sub mt-1">If you already have a Qiita account <a href="/login?callback_action=login_or_signup&amp;redirect_to=https%3A%2F%2Fqiita.com%2Fsouth37%2Fitems%2F9a3269c28d9fba80f0b7&amp;realm=qiita" class="co-AnonymousForm_login">Login</a></div></div></div></div></div><div class="p-items_rightDummy"></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-ab7295fb-e721-419b-88f1-9462e4e49cbc">{"article":{"body":"\n\u003ch2\u003e\n\u003cspan id=\"libv8-の-gem-install-に失敗する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#libv8-%E3%81%AE-gem-install-%E3%81%AB%E5%A4%B1%E6%95%97%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003elibv8 の gem install に失敗する\u003c/h2\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e$ bundle install\n.\n.\n.\nInstalling libv8 3.16.14.13 with native extensions\n\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    current directory: /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/ext/libv8\n/Users/minami/.rbenv/versions/2.3.0/bin/ruby -r ./siteconf20160427-41464-dwbunz.rb extconf.rb\ncreating Makefile\nCompiling v8 for x64\nUsing python 2.7.10\nUsing compiler: /usr/bin/c++ (clang version 7.3.0)\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool: file: /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/atomicops_internals_x86_gcc.o has no symbols\nIn file included from ../src/accessors.cc:28:\nIn file included from ../src/v8.h:60:\nIn file included from ../src/objects-inl.h:38:\nIn file included from ../src/elements.h:32:\n../src/objects.h:5252:44: error: shifting a negative signed value is undefined [-Werror,-Wshift-negative-value]\n  static const int kElementsKindMask = (-1 \u0026lt;\u0026lt; kElementsKindShift) \u0026amp;\n                                        ~~ ^\n../src/objects.h:7386:36: error: shifting a negative signed value is undefined [-Werror,-Wshift-negative-value]\n      (~kMaxCachedArrayIndexLength \u0026lt;\u0026lt; kArrayIndexHashLengthShift) |\n       ~~~~~~~~~~~~~~~~~~~~~~~~~~~ ^\n2 errors generated.\nmake[1]: *** [/Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/v8_base/src/accessors.o] Error 1\nmake: *** [x64.release] Error 2\n/Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/ext/libv8/location.rb:36:in `block in verify_installation!': libv8 did not install properly, expected binary v8 archive '/Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/tools/gyp/libv8_base.a'to exist, but it was not found (Libv8::Location::Vendor::ArchiveNotFound)\n        from /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/ext/libv8/location.rb:35:in `each'\n        from /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/ext/libv8/location.rb:35:in `verify_installation!'\n        from /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/ext/libv8/location.rb:26:in `install!'\n        from extconf.rb:7:in `\u0026lt;main\u0026gt;'\nGYP_GENERATORS=make \\\n        build/gyp/gyp --generator-output=\"out\" build/all.gyp \\\n                      -Ibuild/standalone.gypi --depth=. \\\n                      -Dv8_target_arch=x64 \\\n                      -S.x64  -Dv8_enable_backtrace=1 -Dv8_can_use_vfp2_instructions=true -Darm_fpu=vfpv2 -Dv8_can_use_vfp3_instructions=true -Darm_fpu=vfpv3 -Dwerror=''\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/allocation.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/atomicops_internals_x86_gcc.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/bignum.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/bignum-dtoa.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/cached-powers.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/conversions.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/diy-fp.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/dtoa.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/fast-dtoa.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/fixed-dtoa.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/once.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/preparse-data.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/preparser.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/preparser-api.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/scanner.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/strtod.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/token.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/unicode.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/utils.o\n  LIBTOOL-STATIC /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/libpreparser_lib.a\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser/preparser/preparser-process.o\n  LINK(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/preparser\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/v8_base/src/accessors.o\n\nextconf failed, exit code 1\n\nGem files will remain installed in /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13 for inspection.\nResults logged to /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/extensions/x86_64-darwin-15/2.3.0-static/libv8-3.16.14.13/gem_make.out\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003elibv8 のビルドで失敗してる。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"http://qiita.com/mana-bin/items/0ee8b35c1726bacd8ecf\" class=\"autolink\" id=\"reference-78d25fc8ef47013ac296\"\u003ehttp://qiita.com/mana-bin/items/0ee8b35c1726bacd8ecf\u003c/a\u003e を参考に、 bundle install 時のオプションを変更\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e$ bundle config build.libv8 --with-system-v8\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e再度 bundle install。今度は、\u003ccode\u003etherubyracer\u003c/code\u003e の install に失敗。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003eInstalling therubyracer 0.12.2 with native extensions\n\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    current directory: /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/therubyracer-0.12.2/ext/v8\n/Users/minami/.rbenv/versions/2.3.0/bin/ruby -r ./siteconf20160427-47511-1o6c9vy.rb extconf.rb\nchecking for main() in -lpthread... yes\nchecking for main() in -lobjc... yes\nchecking for v8.h... no\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n        --with-opt-dir\n        --without-opt-dir\n        --with-opt-include\n        --without-opt-include=${opt-dir}/include\n        --with-opt-lib\n        --without-opt-lib=${opt-dir}/lib\n        --with-make-prog\n        --without-make-prog\n        --srcdir=.\n        --curdir\n        --ruby=/Users/minami/.rbenv/versions/2.3.0/bin/$(RUBY_BASE_NAME)\n        --with-pthreadlib\n        --without-pthreadlib\n        --with-objclib\n        --without-objclib\n        --enable-debug\n        --disable-debug\n        --with-v8-dir\n        --without-v8-dir\n        --with-v8-include\n        --without-v8-include=${v8-dir}/include\n        --with-v8-lib\n        --without-v8-lib=${v8-dir}/lib\n/Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/ext/libv8/location.rb:50:in `configure': You have chosen to use the version of V8 found on your system (Libv8::Location::System::NotFoundError)\nand *not* the one that is bundle with the libv8 rubygem. However,\nit could not be located. please make sure you have a version of\nv8 that is compatible with 3.16.14.13 installed. You may\nneed to special --with-v8-dir options if it is in a non-standard\nlocation\n\nthanks,\nThe Mgmt\n\n        from /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/lib/libv8.rb:7:in `configure_makefile'\n        from extconf.rb:32:in `\u0026lt;main\u0026gt;'\n\nTo see why this extension failed to compile, please check the mkmf.log which can be found here:\n\n  /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/extensions/x86_64-darwin-15/2.3.0-static/therubyracer-0.12.2/mkmf.log\n\nextconf failed, exit code 1\n\nGem files will remain installed in /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/therubyracer-0.12.2 for inspection.\nResults logged to /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/extensions/x86_64-darwin-15/2.3.0-static/therubyracer-0.12.2/gem_make.out\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003elog ファイルを見ると、 \u003ccode\u003ev8.h\u003c/code\u003e が見つからないとか出てる。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e# ~/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/extensions/x86_64-darwin-15/2.3.0-static/therubyracer-0.12.2/mkmf.log\n\n 54 --------------------\n 55\n 56 find_header: checking for v8.h... -------------------- no\n 57\n 58 \"clang -E -I/Users/minami/.rbenv/versions/2.3.0/include/ruby-2.3.0/x86_64-darwin15 -I/Users/minami/.rbenv/versions/2.3.0/include/ruby-2.3.0/ruby/backward -I/Users/minami/.rbenv/versions/2.3.0/inclu\n 59 clang: warning: argument unused during compilation: '-rdynamic'\n 60 conftest.c:3:10: fatal error: 'v8.h' file not found\n 61 #include \u0026lt;v8.h\u0026gt;\n 62          ^\n 63 1 error generated.\n 64 checked program was:\n 65 /* begin */\n 66 1: #include \"ruby.h\"\n 67 2:\n 68 3: #include \u0026lt;v8.h\u0026gt;\n 69 /* end */\n 70\n 71 --------------------\n 72\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ca href=\"http://wknar.hatenablog.com/entry/update-gcc-and-v8\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://wknar.hatenablog.com/entry/update-gcc-and-v8\u003c/a\u003e 曰く、\u003ccode\u003ebrew install v8\u003c/code\u003e すれば v8.h が見つかるようになるらしかったので、してみた。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e$ brew install v8\n==\u0026gt; Downloading https://homebrew.bintray.com/bottles/v8-4.9.385.28.el_capitan.bottle.tar.gz\n######################################################################## 100.0%\n==\u0026gt; Pouring v8-4.9.385.28.el_capitan.bottle.tar.gz\n🍺  /usr/local/Cellar/v8/4.9.385.28: 26 files, 676.4M\nbrew install v8  4.80s user 3.18s system 7% cpu 1:43.79 total\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこの状態でまた bundle install。が、同様のエラー。\u003c/p\u003e\n\n\u003cp\u003ev8.h は \u003ccode\u003e/usr/local/Cellar/v8/4.9.385.28/include/v8.h\u003c/code\u003e にあるが、どうも path が通ってないっぽい？？？？\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"最終的に\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%9C%80%E7%B5%82%E7%9A%84%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e最終的に\u003c/h2\u003e\n\n\u003cp\u003ehome-brew で古い v8 を install した。\u003cbr\u003e\n具体的には、\u003ccode\u003ebrew install homebrew/versions/v8-315\u003c/code\u003e で version \u003ccode\u003e3.15.11.18\u003c/code\u003e を install。\u003cbr\u003e\n\u003ccode\u003elibv8\u003c/code\u003e では \u003ccode\u003e—with-system-v8\u003c/code\u003e を指定し、さらに \u003ccode\u003etherubyracer\u003c/code\u003e install の際には \u003ccode\u003ev8-315\u003c/code\u003e の directory を \u003ccode\u003ev8-dir\u003c/code\u003e として指定するようにした。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e$ brew install homebrew/versions/v8-315\n$ bundle config build.libv8 --with-system-v8\n$ bundle config build.therubyracer --with-v8-dir=/usr/local/opt/v8-315/\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n","createdAt":"2016-06-01T08:51:29Z","elapsedYearsFromUpdatedAt":4,"encryptedId":"6pB9f9BMT1IL1Ru/mmtTQlE1LYu8gmsl--mRw6tKdYuiV2XPFd--Np9N6AZ/FlgOb74ehlnrUg==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"likesCount":40,"linkUrl":"https://qiita.com/south37/items/9a3269c28d9fba80f0b7","originalId":396861,"stockedCount":29,"title":"libv8 の gem install にハマって解決したメモ","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#libv8-%E3%81%AE-gem-install-%E3%81%AB%E5%A4%B1%E6%95%97%E3%81%99%E3%82%8B\"\u003elibv8 の gem install に失敗する\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%9C%80%E7%B5%82%E7%9A%84%E3%81%AB\"\u003e最終的に\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":10890,"updatedAt":"2016-09-26T18:08:03Z","uuid":"9a3269c28d9fba80f0b7","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"n+LLny6CfMuwch/RcleqBP8Qlb0=--sdZcSg1382Crac46--Xf5NoJF7zFE/6lV+LASMTw==","originalId":10920,"description":"RubyとかJavaScriptとか書きます。\r\n","name":"Minami Nao","profileImageUrl":"https://qiita-image-store.s3.amazonaws.com/0/10920/profile-images/1473681852","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F10920%2Fprofile-images%2F1473681852?ixlib=rb-1.2.2\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=ad20e5e16f75aa3c9d56a02e81003633","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F10920%2Fprofile-images%2F1473681852?ixlib=rb-1.2.2\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=5c99a2739148acd4e432f97fc392e09c","urlName":"south37","isBlockingViewer":false,"isFollowedByViewer":false,"isFollowableByViewer":true,"websiteUrl":"http://south37.hatenablog.com/","facebookUrl":"https://facebook.com/nao.minami.908","githubUrl":"https://github.com/south37","linkedinUrl":null,"twitterUrl":"https://twitter.com/south37777","revealedOrganizations":{"edges":[{"node":{"name":"Wantedly, Inc.","logoUrl":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/6600325034f57ff945b9b39ad914a63c46a792d8/original.jpg?1370362971","urlName":"wantedly","description":"「シゴトでココロオドル」ためのビジネスSNS「Wantedly」の開発・運営をしています。","url":"https://wantedlyinc.com/ja/presentations"}}]}},"tags":[{"name":"Ruby","urlName":"ruby"},{"name":"Gem","urlName":"gem"},{"name":"libv8","urlName":"libv8"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0},"organization":null},"analyticsTrackingId":"UA-47960765-1"}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewBox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28"/><path d="M250.81 29.66h23.48v18.9h-23.48z"/><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"/><circle cx="216.33" cy="21.4" r="12.28"/></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a href="/release-notes">Release</a></div><div class="st-Footer_column"><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2020 Increments Inc.</div></footer><div id="Snackbar-react-component-6d4cdee1-1ebc-4e27-8dd0-12f3b140807f"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-6d4cdee1-1ebc-4e27-8dd0-12f3b140807f">{}</script>
      
<div id="LoginModal-react-component-e359f44e-dc94-4f2e-8346-cbf75628047b"><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body lm-Dialog"><div class="fa fa-times lm-Dialog_close"></div><div class="lm-Dialog_title">Why do not you register as a user and use Qiita more conveniently?</div><div class="lm-Dialog_message-pc">You need to log in to use this function. Qiita can be used more conveniently after logging in.</div><div class="lm-Dialog_message-mobile">You seem to be reading articles frequently this month. Qiita can be used more conveniently after logging in.</div><ol class="lm-Dialog_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By "stocking" the articles you like, you can search right away</div></li></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2Fsouth37%2Fitems%2F9a3269c28d9fba80f0b7&amp;realm=qiita" class="lm-Dialog_button lm-Dialog_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2Fsouth37%2Fitems%2F9a3269c28d9fba80f0b7&amp;realm=qiita" class="lm-Dialog_button lm-Dialog_button-signin">Login</a></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-e359f44e-dc94-4f2e-8346-cbf75628047b">{}</script>
      
<div id="UserHoverCard-react-component-bf597d51-793a-4ca8-80c3-71717c285ee4"><div class="uh-Container" style="left: 0px; top: 0px;"><div>ユーザーは見つかりませんでした</div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="UserHoverCard" data-dom-id="UserHoverCard-react-component-bf597d51-793a-4ca8-80c3-71717c285ee4">{}</script>
      
<div id="StockModal-react-component-d8bb94cb-355d-4888-9774-61e75e434dcd"><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body css-obxdku"><div class="css-e5tuit"><div class="css-1gykiw6">Categories to Stock</div><span class="fa fa-times css-1wvl6ln"></span></div><div class="css-inhgmy"></div><div class="css-1mkdie5"><button class="css-jr6o77">Create new category</button></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-d8bb94cb-355d-4888-9774-61e75e434dcd">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;Uu21kck3LVd6vyYkQSkYh3c2uhCN2OAfkaCTUGT0oQyCAhe2M8gw/EMYl8ivMQMp3k35xF0htTAdLJN6V+oVAw==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}"><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\n\u003ch2\u003e\n\u003cspan id=\"libv8-の-gem-install-に失敗する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#libv8-%E3%81%AE-gem-install-%E3%81%AB%E5%A4%B1%E6%95%97%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003elibv8 の gem install に失敗する\u003c/h2\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e$ bundle install\n.\n.\n.\nInstalling libv8 3.16.14.13 with native extensions\n\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    current directory: /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/ext/libv8\n/Users/minami/.rbenv/versions/2.3.0/bin/ruby -r ./siteconf20160427-41464-dwbunz.rb extconf.rb\ncreating Makefile\nCompiling v8 for x64\nUsing python 2.7.10\nUsing compiler: /usr/bin/c++ (clang version 7.3.0)\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool: file: /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/atomicops_internals_x86_gcc.o has no symbols\nIn file included from ../src/accessors.cc:28:\nIn file included from ../src/v8.h:60:\nIn file included from ../src/objects-inl.h:38:\nIn file included from ../src/elements.h:32:\n../src/objects.h:5252:44: error: shifting a negative signed value is undefined [-Werror,-Wshift-negative-value]\n  static const int kElementsKindMask = (-1 \u0026lt;\u0026lt; kElementsKindShift) \u0026amp;\n                                        ~~ ^\n../src/objects.h:7386:36: error: shifting a negative signed value is undefined [-Werror,-Wshift-negative-value]\n      (~kMaxCachedArrayIndexLength \u0026lt;\u0026lt; kArrayIndexHashLengthShift) |\n       ~~~~~~~~~~~~~~~~~~~~~~~~~~~ ^\n2 errors generated.\nmake[1]: *** [/Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/v8_base/src/accessors.o] Error 1\nmake: *** [x64.release] Error 2\n/Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/ext/libv8/location.rb:36:in `block in verify_installation!': libv8 did not install properly, expected binary v8 archive '/Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/tools/gyp/libv8_base.a'to exist, but it was not found (Libv8::Location::Vendor::ArchiveNotFound)\n        from /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/ext/libv8/location.rb:35:in `each'\n        from /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/ext/libv8/location.rb:35:in `verify_installation!'\n        from /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/ext/libv8/location.rb:26:in `install!'\n        from extconf.rb:7:in `\u0026lt;main\u0026gt;'\nGYP_GENERATORS=make \\\n        build/gyp/gyp --generator-output=\"out\" build/all.gyp \\\n                      -Ibuild/standalone.gypi --depth=. \\\n                      -Dv8_target_arch=x64 \\\n                      -S.x64  -Dv8_enable_backtrace=1 -Dv8_can_use_vfp2_instructions=true -Darm_fpu=vfpv2 -Dv8_can_use_vfp3_instructions=true -Darm_fpu=vfpv3 -Dwerror=''\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/allocation.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/atomicops_internals_x86_gcc.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/bignum.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/bignum-dtoa.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/cached-powers.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/conversions.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/diy-fp.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/dtoa.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/fast-dtoa.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/fixed-dtoa.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/once.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/preparse-data.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/preparser.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/preparser-api.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/scanner.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/strtod.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/token.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/unicode.o\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser_lib/src/utils.o\n  LIBTOOL-STATIC /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/libpreparser_lib.a\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/preparser/preparser/preparser-process.o\n  LINK(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/preparser\n  CXX(target) /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/vendor/v8/out/x64.release/obj.target/v8_base/src/accessors.o\n\nextconf failed, exit code 1\n\nGem files will remain installed in /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13 for inspection.\nResults logged to /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/extensions/x86_64-darwin-15/2.3.0-static/libv8-3.16.14.13/gem_make.out\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003elibv8 のビルドで失敗してる。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"http://qiita.com/mana-bin/items/0ee8b35c1726bacd8ecf\" class=\"autolink\" id=\"reference-78d25fc8ef47013ac296\"\u003ehttp://qiita.com/mana-bin/items/0ee8b35c1726bacd8ecf\u003c/a\u003e を参考に、 bundle install 時のオプションを変更\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e$ bundle config build.libv8 --with-system-v8\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e再度 bundle install。今度は、\u003ccode\u003etherubyracer\u003c/code\u003e の install に失敗。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003eInstalling therubyracer 0.12.2 with native extensions\n\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    current directory: /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/therubyracer-0.12.2/ext/v8\n/Users/minami/.rbenv/versions/2.3.0/bin/ruby -r ./siteconf20160427-47511-1o6c9vy.rb extconf.rb\nchecking for main() in -lpthread... yes\nchecking for main() in -lobjc... yes\nchecking for v8.h... no\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n        --with-opt-dir\n        --without-opt-dir\n        --with-opt-include\n        --without-opt-include=${opt-dir}/include\n        --with-opt-lib\n        --without-opt-lib=${opt-dir}/lib\n        --with-make-prog\n        --without-make-prog\n        --srcdir=.\n        --curdir\n        --ruby=/Users/minami/.rbenv/versions/2.3.0/bin/$(RUBY_BASE_NAME)\n        --with-pthreadlib\n        --without-pthreadlib\n        --with-objclib\n        --without-objclib\n        --enable-debug\n        --disable-debug\n        --with-v8-dir\n        --without-v8-dir\n        --with-v8-include\n        --without-v8-include=${v8-dir}/include\n        --with-v8-lib\n        --without-v8-lib=${v8-dir}/lib\n/Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/ext/libv8/location.rb:50:in `configure': You have chosen to use the version of V8 found on your system (Libv8::Location::System::NotFoundError)\nand *not* the one that is bundle with the libv8 rubygem. However,\nit could not be located. please make sure you have a version of\nv8 that is compatible with 3.16.14.13 installed. You may\nneed to special --with-v8-dir options if it is in a non-standard\nlocation\n\nthanks,\nThe Mgmt\n\n        from /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/libv8-3.16.14.13/lib/libv8.rb:7:in `configure_makefile'\n        from extconf.rb:32:in `\u0026lt;main\u0026gt;'\n\nTo see why this extension failed to compile, please check the mkmf.log which can be found here:\n\n  /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/extensions/x86_64-darwin-15/2.3.0-static/therubyracer-0.12.2/mkmf.log\n\nextconf failed, exit code 1\n\nGem files will remain installed in /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/therubyracer-0.12.2 for inspection.\nResults logged to /Users/minami/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/extensions/x86_64-darwin-15/2.3.0-static/therubyracer-0.12.2/gem_make.out\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003elog ファイルを見ると、 \u003ccode\u003ev8.h\u003c/code\u003e が見つからないとか出てる。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e# ~/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/extensions/x86_64-darwin-15/2.3.0-static/therubyracer-0.12.2/mkmf.log\n\n 54 --------------------\n 55\n 56 find_header: checking for v8.h... -------------------- no\n 57\n 58 \"clang -E -I/Users/minami/.rbenv/versions/2.3.0/include/ruby-2.3.0/x86_64-darwin15 -I/Users/minami/.rbenv/versions/2.3.0/include/ruby-2.3.0/ruby/backward -I/Users/minami/.rbenv/versions/2.3.0/inclu\n 59 clang: warning: argument unused during compilation: '-rdynamic'\n 60 conftest.c:3:10: fatal error: 'v8.h' file not found\n 61 #include \u0026lt;v8.h\u0026gt;\n 62          ^\n 63 1 error generated.\n 64 checked program was:\n 65 /* begin */\n 66 1: #include \"ruby.h\"\n 67 2:\n 68 3: #include \u0026lt;v8.h\u0026gt;\n 69 /* end */\n 70\n 71 --------------------\n 72\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ca href=\"http://wknar.hatenablog.com/entry/update-gcc-and-v8\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://wknar.hatenablog.com/entry/update-gcc-and-v8\u003c/a\u003e 曰く、\u003ccode\u003ebrew install v8\u003c/code\u003e すれば v8.h が見つかるようになるらしかったので、してみた。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e$ brew install v8\n==\u0026gt; Downloading https://homebrew.bintray.com/bottles/v8-4.9.385.28.el_capitan.bottle.tar.gz\n######################################################################## 100.0%\n==\u0026gt; Pouring v8-4.9.385.28.el_capitan.bottle.tar.gz\n🍺  /usr/local/Cellar/v8/4.9.385.28: 26 files, 676.4M\nbrew install v8  4.80s user 3.18s system 7% cpu 1:43.79 total\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこの状態でまた bundle install。が、同様のエラー。\u003c/p\u003e\n\n\u003cp\u003ev8.h は \u003ccode\u003e/usr/local/Cellar/v8/4.9.385.28/include/v8.h\u003c/code\u003e にあるが、どうも path が通ってないっぽい？？？？\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"最終的に\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%9C%80%E7%B5%82%E7%9A%84%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e最終的に\u003c/h2\u003e\n\n\u003cp\u003ehome-brew で古い v8 を install した。\u003cbr\u003e\n具体的には、\u003ccode\u003ebrew install homebrew/versions/v8-315\u003c/code\u003e で version \u003ccode\u003e3.15.11.18\u003c/code\u003e を install。\u003cbr\u003e\n\u003ccode\u003elibv8\u003c/code\u003e では \u003ccode\u003e—with-system-v8\u003c/code\u003e を指定し、さらに \u003ccode\u003etherubyracer\u003c/code\u003e install の際には \u003ccode\u003ev8-315\u003c/code\u003e の directory を \u003ccode\u003ev8-dir\u003c/code\u003e として指定するようにした。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e$ brew install homebrew/versions/v8-315\n$ bundle config build.libv8 --with-system-v8\n$ bundle config build.therubyracer --with-v8-dir=/usr/local/opt/v8-315/\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n","createdAt":"2016-06-01T08:51:29Z","elapsedYearsFromUpdatedAt":4,"encryptedId":"6pB9f9BMT1IL1Ru/mmtTQlE1LYu8gmsl--mRw6tKdYuiV2XPFd--Np9N6AZ/FlgOb74ehlnrUg==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"likesCount":40,"linkUrl":"https://qiita.com/south37/items/9a3269c28d9fba80f0b7","originalId":396861,"stockedCount":29,"title":"libv8 の gem install にハマって解決したメモ","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#libv8-%E3%81%AE-gem-install-%E3%81%AB%E5%A4%B1%E6%95%97%E3%81%99%E3%82%8B\"\u003elibv8 の gem install に失敗する\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%9C%80%E7%B5%82%E7%9A%84%E3%81%AB\"\u003e最終的に\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":10890,"updatedAt":"2016-09-26T18:08:03Z","uuid":"9a3269c28d9fba80f0b7","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"n+LLny6CfMuwch/RcleqBP8Qlb0=--sdZcSg1382Crac46--Xf5NoJF7zFE/6lV+LASMTw==","originalId":10920,"description":"RubyとかJavaScriptとか書きます。\r\n","name":"Minami Nao","profileImageUrl":"https://qiita-image-store.s3.amazonaws.com/0/10920/profile-images/1473681852","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F10920%2Fprofile-images%2F1473681852?ixlib=rb-1.2.2\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=ad20e5e16f75aa3c9d56a02e81003633","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F10920%2Fprofile-images%2F1473681852?ixlib=rb-1.2.2\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=5c99a2739148acd4e432f97fc392e09c","urlName":"south37","isBlockingViewer":false,"isFollowedByViewer":false,"isFollowableByViewer":true,"websiteUrl":"http://south37.hatenablog.com/","facebookUrl":"https://facebook.com/nao.minami.908","githubUrl":"https://github.com/south37","linkedinUrl":null,"twitterUrl":"https://twitter.com/south37777","revealedOrganizations":{"edges":[{"node":{"name":"Wantedly, Inc.","logoUrl":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/6600325034f57ff945b9b39ad914a63c46a792d8/original.jpg?1370362971","urlName":"wantedly","description":"「シゴトでココロオドル」ためのビジネスSNS「Wantedly」の開発・運営をしています。","url":"https://wantedlyinc.com/ja/presentations"}}]}},"tags":[{"name":"Ruby","urlName":"ruby"},{"name":"Gem","urlName":"gem"},{"name":"libv8","urlName":"libv8"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0},"organization":null},"comments":[],"client":null,"ads_event_emitter":null}}</script></div><iframe id="google_osd_static_frame_7428389015820" name="google_osd_static_frame" style="display: none; width: 0px; height: 0px;"></iframe></body></html>