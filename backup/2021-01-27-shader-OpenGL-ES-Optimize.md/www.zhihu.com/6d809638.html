<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="zh" data-hairline="true" data-theme="light" data-react-helmet="data-theme"><head><meta charset="utf-8" /><title>(1 封私信 / 80 条消息) 为什么图形学中把矩阵传入shader前就要完成计算，而不在GPU中完成矩阵计算？ - 知乎</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" /><meta name="renderer" content="webkit" /><meta name="force-rendering" content="webkit" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="google-site-verification" content="FTeR0c8arOPKh8c5DYh_9uu98_zJbaWw53J-Sch9MTg" /><meta data-react-helmet="true" name="description" property="og:description" content="问题1：请问下大佬，我看了很多图形学的书，全部都是在CPU中把矩阵计算完成再传入shader的，比如投影矩阵…" /><meta data-react-helmet="true" name="keywords" content="OpenGL,图形处理器（GPU）,DirectX,矩阵,shader" /><link data-react-helmet="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-152.a53ae37b.png" /><link data-react-helmet="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-152.a53ae37b.png" sizes="152x152" /><link data-react-helmet="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-120.bbce8f18.png" sizes="120x120" /><link data-react-helmet="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-76.cbade8f9.png" sizes="76x76" /><link data-react-helmet="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-60.8f6c52aa.png" sizes="60x60" /><link crossorigin="" rel="shortcut icon" type="image/x-icon" href="https://static.zhihu.com/heifetz/favicon.ico" /><link crossorigin="" rel="search" type="application/opensearchdescription+xml" href="https://static.zhihu.com/heifetz/search.xml" title="知乎" /><link rel="dns-prefetch" href="//static.zhimg.com" /><link rel="dns-prefetch" href="//pic1.zhimg.com" /><link rel="dns-prefetch" href="//pic2.zhimg.com" /><link rel="dns-prefetch" href="//pic3.zhimg.com" /><link rel="dns-prefetch" href="//pic4.zhimg.com" /><style>
.u-safeAreaInset-top {
  height: constant(safe-area-inset-top) !important;
  height: env(safe-area-inset-top) !important;
  
}
.u-safeAreaInset-bottom {
  height: constant(safe-area-inset-bottom) !important;
  height: env(safe-area-inset-bottom) !important;
  
}
</style><link href="https://static.zhihu.com/heifetz/main.app.216a26f4.52f5e03efa5d6f29f658.css" crossorigin="" rel="stylesheet" /><link crossorigin="" href="https://static.zhihu.com/heifetz/main.question-routes.216a26f4.a99e5f2ebe90d80dc491.css" rel="stylesheet" /><script defer="" crossorigin="anonymous" src="https://unpkg.zhimg.com/@cfe/sentry-script@0.1.0/dist/init.js" data-sentry-config="{&quot;dsn&quot;:&quot;https://2d8d764432cc4f6fb3bc78ab9528299d@crash2.zhihu.com/1224&quot;,&quot;sampleRate&quot;:0.1,&quot;release&quot;:&quot;2138-d5afb295&quot;,&quot;ignoreErrorNames&quot;:[&quot;NetworkError&quot;,&quot;SecurityError&quot;],&quot;ignoreErrors&quot;:[&quot;origin message&quot;,&quot;Network request failed&quot;,&quot;无法 fetch&quot;,&quot;这个系统不支持该功能。&quot;,&quot;Can't find variable: webkit&quot;,&quot;Can't find variable: $&quot;,&quot;内存不足&quot;,&quot;out of memory&quot;,&quot;DOM Exception 18&quot;,&quot;The operation is insecure&quot;,&quot;[object Event]&quot;,&quot;[object FileError]&quot;,&quot;[object DOMError]&quot;,&quot;[object Object]&quot;,&quot;拒绝访问。&quot;,&quot;Maximum call stack size exceeded&quot;,&quot;缺少 JavaScript 对象&quot;,&quot;componentWillEnter&quot;,&quot;componentWillLeave&quot;,&quot;componentWillAppear&quot;,&quot;getInlineStyleAt&quot;,&quot;getCharacterList&quot;,&quot;draft-js&quot;,&quot;UploadError&quot;,{},{},{},&quot;Non-Error exception captured&quot;],&quot;whitelistUrls&quot;:[&quot;static.zhihu.com&quot;]}"></script><style data-emotion-css="qqgmyv">.css-qqgmyv{width:auto;max-width:1156px;min-width:1000px;padding-left:16px;padding-right:30px;}.css-qqgmyv .AppHeader-userInfo{margin-left:30px;width:auto;}.css-qqgmyv .AppHeader-TabsLink.is-active,.css-qqgmyv .AppHeader-TabsLink:hover{color:#121212;}</style><style data-emotion-css="g0ay3v">.css-g0ay3v{margin-left:25px;margin-right:15px;}.css-g0ay3v .AppHeader-Tab{padding-left:15px;padding-right:15px;}.css-g0ay3v .Tabs-link.is-active::after{height:4px;}</style><style data-emotion-css="1acwmmj">.css-1acwmmj{box-sizing:border-box;margin:0;min-width:0;-webkit-flex:1;-ms-flex:1;flex:1;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><style data-emotion-css="10fy1q8">.css-10fy1q8{max-width:482px;}.css-10fy1q8 .SearchBar-input{border-radius:999px;padding-left:16px;}.css-10fy1q8 .SearchBar-askButton{border-radius:999px;width:70px;margin-left:12px;}.css-10fy1q8 .SearchBar-searchButton{border-bottom-right-radius:999px;border-top-right-radius:999px;}</style><style data-emotion-css="79elbk">.css-79elbk{position:relative;}</style><style data-emotion-css="eew49z">.css-eew49z{min-height:10px;}</style><style data-emotion-css="1cd9gw4">.css-1cd9gw4{margin-left:.3em;}</style><style data-emotion-css="h5al4j">.css-h5al4j{box-sizing:border-box;margin:0;min-width:0;color:#8590A6;font-size:14px;margin-top:10px;margin-bottom:-4px;}</style><style data-emotion-css="1cd9gw4">.css-1cd9gw4{margin-left:.3em;}</style><style data-emotion-css="h5al4j">.css-h5al4j{box-sizing:border-box;margin:0;min-width:0;color:#8590A6;font-size:14px;margin-top:10px;margin-bottom:-4px;}</style><script charset="utf-8" src="https://static.zhihu.com/heifetz/main.zswsdid.917140a8a2c9123233bc.js" crossorigin="anonymous"></script><script charset="utf-8" src="https://static.zhihu.com/heifetz/main.mqtt.103ddc3c6f08f989f7b2.js" crossorigin="anonymous"></script><link rel="stylesheet" type="text/css" href="https://static.zhihu.com/heifetz/main.richinput.216a26f4.9631b90a475479481c13.css" crossorigin="anonymous" /><script charset="utf-8" src="https://static.zhihu.com/heifetz/main.richinput.ffd2472e4a04d2363d5f.js" crossorigin="anonymous"></script><link rel="stylesheet" type="text/css" href="https://static.zhihu.com/heifetz/main.modals.216a26f4.784b0017efd295e5ec5d.css" crossorigin="anonymous" /><script charset="utf-8" src="https://static.zhihu.com/heifetz/main.modals.3ce41658ff3a5eb2f8a2.js" crossorigin="anonymous"></script><link rel="stylesheet" type="text/css" href="https://static.zhihu.com/heifetz/main.navbar-notifications.216a26f4.5e4e83f9b77f85cc209d.css" crossorigin="anonymous" /><script charset="utf-8" src="https://static.zhihu.com/heifetz/main.navbar-notifications.f0e7d2f1e4bbdb1221e8.js" crossorigin="anonymous"></script><link rel="stylesheet" type="text/css" href="https://static.zhihu.com/heifetz/main.navbar-messages.216a26f4.36d55a56e4a27bbfd027.css" crossorigin="anonymous" /><script charset="utf-8" src="https://static.zhihu.com/heifetz/main.navbar-messages.faeb97840bf15ee2caee.js" crossorigin="anonymous"></script><link rel="stylesheet" type="text/css" href="https://static.zhihu.com/heifetz/main.Labels.216a26f4.7d19d2afdc588e36471f.css" crossorigin="anonymous" /><script charset="utf-8" src="https://static.zhihu.com/heifetz/main.Labels.27b7ed5ca1e931009d14.js" crossorigin="anonymous"></script><link rel="stylesheet" type="text/css" href="https://static.zhihu.com/heifetz/main.user-hover-card.216a26f4.1dc515c044e802b993a5.css" crossorigin="anonymous" /><script charset="utf-8" src="https://static.zhihu.com/heifetz/main.user-hover-card.3b29d6088394e95cac1b.js" crossorigin="anonymous"></script><link rel="stylesheet" type="text/css" href="https://static.zhihu.com/heifetz/main.GoodsRecommendGoodsCardList.216a26f4.3a73063149de8a52c56f.css" crossorigin="anonymous" /><script charset="utf-8" src="https://static.zhihu.com/heifetz/main.GoodsRecommendGoodsCardList.f2dc45f6547927b3215b.js" crossorigin="anonymous"></script><style data-emotion="css"></style><link rel="stylesheet" type="text/css" href="https://static.zhihu.com/heifetz/main.signflow.216a26f4.9911fd7944b49d6d7997.css" crossorigin="anonymous" /><script charset="utf-8" src="https://static.zhihu.com/heifetz/main.signflow.b4f845582525656b5356.js" crossorigin="anonymous"></script></head><body style="overflow: auto;"><div id="root"><div><div class="LoadingBar"></div><div><header role="banner" class="Sticky AppHeader" data-za-module="TopNavBar"><div class="AppHeader-inner css-qqgmyv"><a href="//www.zhihu.com" aria-label="知乎"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 30" fill="#0066FF" width="64" height="30"><path d="M29.05 4.582H16.733V25.94h3.018l.403 2.572 4.081-2.572h4.815V4.582zm-5.207 18.69l-2.396 1.509-.235-1.508h-1.724V7.233h6.78v16.04h-2.425zM14.46 14.191H9.982c0-.471.033-.954.039-1.458v-5.5h5.106V5.935a1.352 1.352 0 0 0-.404-.957 1.378 1.378 0 0 0-.968-.396H5.783c.028-.088.056-.177.084-.255.274-.82 1.153-3.326 1.153-3.326a4.262 4.262 0 0 0-2.413.698c-.57.4-.912.682-1.371 1.946-.532 1.453-.997 2.856-1.31 3.693C1.444 8.674.28 11.025.28 11.025a5.85 5.85 0 0 0 2.52-.61c1.119-.593 1.679-1.502 2.054-2.883l.09-.3h2.334v5.5c0 .5-.045.982-.073 1.46h-4.12c-.71 0-1.39.278-1.893.775a2.638 2.638 0 0 0-.783 1.874h6.527a17.717 17.717 0 0 1-.778 3.649 16.796 16.796 0 0 1-3.012 5.273A33.104 33.104 0 0 1 0 28.74s3.13 1.175 5.425-.954c1.388-1.292 2.631-3.814 3.23-5.727a28.09 28.09 0 0 0 1.12-5.229h5.967v-1.37a1.254 1.254 0 0 0-.373-.899 1.279 1.279 0 0 0-.909-.37z"/><path d="M11.27 19.675l-2.312 1.491 5.038 7.458a6.905 6.905 0 0 0 .672-2.218 3.15 3.15 0 0 0-.28-2.168l-3.118-4.563zM51.449 15.195V5.842c4.181-.205 7.988-.405 9.438-.483l.851-.05c.387-.399.885-2.395.689-3.021-.073-.25-.213-.666-.638-.555a33.279 33.279 0 0 1-4.277.727c-2.766.321-3.97.404-7.804.682-6.718.487-12.709.72-12.709.72a2.518 2.518 0 0 0 .788 1.834 2.567 2.567 0 0 0 1.883.706c2.278-.095 5.598-.25 8.996-.41v9.203h-12.78c0 .703.281 1.377.783 1.874a2.69 2.69 0 0 0 1.892.777h10.105v7.075c0 .887-.464 1.192-1.231 1.214h-3.92a4.15 4.15 0 0 0 .837 1.544 4.2 4.2 0 0 0 1.403 1.067 6.215 6.215 0 0 0 2.71.277c1.36-.066 2.967-.826 2.967-3.57v-7.607h11.28c.342 0 .67-.135.91-.374.242-.239.378-.563.378-.902v-1.375H51.449z"/><path d="M42.614 8.873a2.304 2.304 0 0 0-1.508-.926 2.334 2.334 0 0 0-1.727.405l-.376.272 4.255 5.85 2.24-1.62-2.884-3.98zM57.35 8.68l-3.125 4.097 2.24 1.663 4.517-5.927-.375-.277a2.32 2.32 0 0 0-1.722-.452 2.327 2.327 0 0 0-1.536.896z"/></svg></a><ul role="navigation" class="Tabs AppHeader-Tabs css-g0ay3v"><li role="tab" class="Tabs-item AppHeader-Tab Tabs-item--noMeta"><a class="Tabs-link AppHeader-TabsLink" href="//www.zhihu.com/" data-za-not-track-link="true">首页</a></li><li role="tab" class="Tabs-item AppHeader-Tab Tabs-item--noMeta"><a class="Tabs-link AppHeader-TabsLink" href="//www.zhihu.com/xen/vip-web" data-za-not-track-link="true">会员</a></li><li role="tab" class="Tabs-item AppHeader-Tab Tabs-item--noMeta"><a class="Tabs-link AppHeader-TabsLink" href="//www.zhihu.com/explore" data-za-not-track-link="true">发现</a></li><li role="tab" class="Tabs-item AppHeader-Tab Tabs-item--noMeta"><a class="Tabs-link AppHeader-TabsLink" href="//www.zhihu.com/question/waiting" data-za-not-track-link="true">等你来答</a></li></ul><div class="css-1acwmmj"><div class="SearchBar AppHeader-SearchBar css-10fy1q8" role="search" data-za-module="PresetWordItem"><form class="SearchBar-tool"><div><div class="Popover"><label class="SearchBar-input Input-wrapper Input-wrapper--grey"><input type="text" maxlength="100" autocomplete="off" role="combobox" aria-expanded="false" aria-autocomplete="list" aria-activedescendant="AutoComplete3--1" id="Popover2-toggle" aria-haspopup="true" aria-owns="Popover2-content" class="Input" placeholder="小白如何上手编程" value="" /><button aria-label="搜索" type="button" class="Button SearchBar-searchButton Button--primary"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Search SearchBar-searchIcon" fill="currentColor" viewBox="0 0 24 24" width="18" height="18"><path d="M17.068 15.58a8.377 8.377 0 0 0 1.774-5.159 8.421 8.421 0 1 0-8.42 8.421 8.38 8.38 0 0 0 5.158-1.774l3.879 3.88c.957.573 2.131-.464 1.488-1.49l-3.879-3.878zm-6.647 1.157a6.323 6.323 0 0 1-6.316-6.316 6.323 6.323 0 0 1 6.316-6.316 6.323 6.323 0 0 1 6.316 6.316 6.323 6.323 0 0 1-6.316 6.316z" fill-rule="evenodd"/></svg></span></button></label></div></div></form><button type="button" class="Button SearchBar-askButton Button--primary Button--blue">提问</button></div></div><div class="AppHeader-userInfo"><div class="Popover"><button aria-label="80条通知" id="Popover30-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover30-content" type="button" class="Button AppHeader-notifications css-79elbk Button--plain"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Bell" fill="currentColor" viewBox="0 0 24 24" width="22" height="22"><path d="M4.523 15.076l.804-6.757a6.753 6.753 0 0 1 4.945-5.7 1.823 1.823 0 0 1 3.623 0 6.753 6.753 0 0 1 4.945 5.7l.804 6.757a2.293 2.293 0 0 0 1.712 2.108 1.093 1.093 0 0 1-.297 2.15H3.108a1.093 1.093 0 0 1-.297-2.15 2.293 2.293 0 0 0 1.712-2.108zM12.083 23a2.758 2.758 0 0 1-2.753-2.509.229.229 0 0 1 .232-.24h5.043a.229.229 0 0 1 .232.24 2.759 2.759 0 0 1-2.753 2.51z"/></svg></span><div class="css-ybodb">80</div></button></div><div><div class="Popover"><button aria-label="1条私信" id="Popover31-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover31-content" type="button" class="Button AppHeader-messages css-79elbk Button--plain"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Comments" fill="currentColor" viewBox="0 0 24 24" width="22" height="22"><path d="M11 2c5.571 0 9 4.335 9 8 0 6-6.475 9.764-11.481 8.022-.315-.07-.379-.124-.78.078-1.455.54-2.413.921-3.525 1.122-.483.087-.916-.25-.588-.581 0 0 .677-.417.842-1.904.064-.351-.14-.879-.454-1.171A8.833 8.833 0 0 1 2 10c0-3.87 3.394-8 9-8zm10.14 9.628c.758.988.86 2.009.86 3.15 0 1.195-.619 3.11-1.368 3.938-.209.23-.354.467-.308.722.12 1.073.614 1.501.614 1.501.237.239-.188.562-.537.5-.803-.146-1.495-.42-2.546-.811-.29-.146-.336-.106-.563-.057-2.043.711-4.398.475-6.083-.927 5.965-.524 8.727-3.03 9.93-8.016z" fill-rule="evenodd"/></svg></span><div class="css-ybodb">1</div></button></div></div><div class="AppHeader-profile"><div class="Popover AppHeader-menu"><button id="Popover16-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover16-content" type="button" class="Button AppHeader-profileEntry Button--plain"><img class="Avatar AppHeader-profileAvatar AppHeader-profileAvatar--old" width="30" height="30" src="https://pic3.zhimg.com/f1fbab298af0760f5e2c63554e086a15_is.jpg" srcset="https://pic3.zhimg.com/f1fbab298af0760f5e2c63554e086a15_im.jpg 2x" /></button></div><div class="Popover AppHeaderProfileMenu-creatorHintPopover"><div class="AppHeaderProfileMenu-creatorHintToggler" id="Popover17-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover17-content"></div></div></div></div></div><div><div class="PageHeader"><div class="QuestionHeader-content"><div class="QuestionHeader-main"><h1 class="QuestionHeader-title">为什么图形学中把矩阵传入shader前就要完成计算，而不在GPU中完成矩阵计算？</h1></div><div class="QuestionHeader-side" data-za-detail-view-path-module="ToolBar" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Question&quot;,&quot;token&quot;:&quot;367207731&quot;}}}"><div class="QuestionButtonGroup"><button type="button" class="Button FollowButton Button--primary Button--blue">关注问题</button><button type="button" class="Button Button--blue"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Edit QuestionButton-icon" fill="currentColor" viewBox="0 0 24 24" width="16" height="16"><path d="M4.076 16.966a4.19 4.19 0 0 1 1.05-1.76l8.568-8.569a.524.524 0 0 1 .741 0l2.928 2.927a.524.524 0 0 1 0 .74l-8.568 8.57c-.49.49-1.096.852-1.761 1.051l-3.528 1.058a.394.394 0 0 1-.49-.488l1.06-3.53zM20.558 4.83c.59.59.59 1.546 0 2.136l-1.693 1.692a.503.503 0 0 1-.712 0l-2.812-2.812a.504.504 0 0 1 0-.712l1.693-1.693a1.51 1.51 0 0 1 2.135 0l1.389 1.389z"/></svg></span>写回答</button></div></div></div></div></div></header></div><main role="main" class="App-main"><div class="QuestionPage" itemscope="" itemtype="http://schema.org/Question" data-za-detail-view-path-module="QuestionItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Question&quot;,&quot;token&quot;:&quot;367207731&quot;}}}"><meta itemprop="name" content="为什么图形学中把矩阵传入shader前就要完成计算，而不在GPU中完成矩阵计算？" /><meta itemprop="url" content="https://www.zhihu.com/question/367207731" /><meta itemprop="keywords" content="OpenGL,图形处理器（GPU）,DirectX,矩阵,shader" /><meta itemprop="answerCount" content="18" /><meta itemprop="commentCount" content="0" /><meta itemprop="dateCreated" content="2020-01-20T12:49:00.000Z" /><meta itemprop="dateModified" content="2020-01-20T12:54:26.000Z" /><meta itemprop="zhihu:visitsCount" /><meta itemprop="zhihu:followerCount" content="159" /><div data-zop-question="{&quot;title&quot;:&quot;为什么图形学中把矩阵传入shader前就要完成计算，而不在GPU中完成矩阵计算？&quot;,&quot;topics&quot;:[{&quot;name&quot;:&quot;OpenGL&quot;,&quot;id&quot;:&quot;19566193&quot;},{&quot;name&quot;:&quot;图形处理器（GPU）&quot;,&quot;id&quot;:&quot;19570894&quot;},{&quot;name&quot;:&quot;DirectX&quot;,&quot;id&quot;:&quot;19616605&quot;},{&quot;name&quot;:&quot;矩阵&quot;,&quot;id&quot;:&quot;19650614&quot;},{&quot;name&quot;:&quot;shader&quot;,&quot;id&quot;:&quot;20018494&quot;}],&quot;id&quot;:367207731,&quot;isEditable&quot;:false}"><div class="QuestionStatus"></div><div data-za-detail-view-path-module="QuestionDescription" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Question&quot;,&quot;token&quot;:&quot;367207731&quot;}}}"><div class="QuestionHeader"><div class="QuestionHeader-content"><div class="QuestionHeader-main"><div class="QuestionHeader-tags"><div class="QuestionHeader-topics"><div class="Tag QuestionTopic" data-za-detail-view-path-module="TopicItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Topic&quot;,&quot;token&quot;:&quot;19566193&quot;}}}"><span class="Tag-content"><a class="TopicLink" href="//www.zhihu.com/topic/19566193" target="_blank"><div class="Popover"><div id="Popover4-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover4-content">OpenGL</div></div></a></span></div><div class="Tag QuestionTopic" data-za-detail-view-path-module="TopicItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Topic&quot;,&quot;token&quot;:&quot;19570894&quot;}}}"><span class="Tag-content"><a class="TopicLink" href="//www.zhihu.com/topic/19570894" target="_blank"><div class="Popover"><div id="Popover5-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover5-content">图形处理器（GPU）</div></div></a></span></div><div class="Tag QuestionTopic" data-za-detail-view-path-module="TopicItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Topic&quot;,&quot;token&quot;:&quot;19616605&quot;}}}"><span class="Tag-content"><a class="TopicLink" href="//www.zhihu.com/topic/19616605" target="_blank"><div class="Popover"><div id="Popover6-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover6-content">DirectX</div></div></a></span></div><div class="Tag QuestionTopic" data-za-detail-view-path-module="TopicItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Topic&quot;,&quot;token&quot;:&quot;19650614&quot;}}}"><span class="Tag-content"><a class="TopicLink" href="//www.zhihu.com/topic/19650614" target="_blank"><div class="Popover"><div id="Popover7-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover7-content">矩阵</div></div></a></span></div><div class="Tag QuestionTopic" data-za-detail-view-path-module="TopicItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Topic&quot;,&quot;token&quot;:&quot;20018494&quot;}}}"><span class="Tag-content"><a class="TopicLink" href="//www.zhihu.com/topic/20018494" target="_blank"><div class="Popover"><div id="Popover8-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover8-content">shader</div></div></a></span></div></div></div><h1 class="QuestionHeader-title">为什么图形学中把矩阵传入shader前就要完成计算，而不在GPU中完成矩阵计算？</h1><div class="LabelContainer-wrapper"></div><div><div class="css-eew49z"><div class="QuestionRichText QuestionRichText--expandable QuestionRichText--collapsed"><div><span>问题1：请问下大佬，我看了很多图形学的书，全部都是在CPU中把矩阵计算完成再传入shader的，比如投影矩阵，为什么不把 fovy near far …</span><button type="button" class="Button QuestionRichText-more Button--plain">显示全部 <span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--ArrowDown" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M12 13L8.285 9.218a.758.758 0 0 0-1.064 0 .738.738 0 0 0 0 1.052l4.249 4.512a.758.758 0 0 0 1.064 0l4.246-4.512a.738.738 0 0 0 0-1.052.757.757 0 0 0-1.063 0L12.002 13z" fill-rule="evenodd"/></svg></span></button></div></div></div></div></div><div class="QuestionHeader-side"><div class="QuestionHeader-follow-status"><div class="QuestionFollowStatus"><div class="NumberBoard QuestionFollowStatus-counts NumberBoard--divider"><button type="button" class="Button NumberBoard-item Button--plain"><div class="NumberBoard-itemInner"><div class="NumberBoard-itemName">关注者</div><strong class="NumberBoard-itemValue" title="159">159</strong></div></button><div class="NumberBoard-item"><div class="NumberBoard-itemInner"><div class="NumberBoard-itemName">被浏览</div><strong class="NumberBoard-itemValue" title="33020">33,020</strong></div></div></div></div></div></div></div><div class="QuestionHeader-footer"><div class="QuestionHeader-footer-inner"><div class="QuestionHeader-main QuestionHeader-footer-main"><div class="QuestionButtonGroup"><button type="button" class="Button FollowButton Button--primary Button--blue">关注问题</button><button type="button" class="Button Button--blue"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Edit QuestionButton-icon" fill="currentColor" viewBox="0 0 24 24" width="16" height="16"><path d="M4.076 16.966a4.19 4.19 0 0 1 1.05-1.76l8.568-8.569a.524.524 0 0 1 .741 0l2.928 2.927a.524.524 0 0 1 0 .74l-8.568 8.57c-.49.49-1.096.852-1.761 1.051l-3.528 1.058a.394.394 0 0 1-.49-.488l1.06-3.53zM20.558 4.83c.59.59.59 1.546 0 2.136l-1.693 1.692a.503.503 0 0 1-.712 0l-2.812-2.812a.504.504 0 0 1 0-.712l1.693-1.693a1.51 1.51 0 0 1 2.135 0l1.389 1.389z"/></svg></span>写回答</button></div><div class="QuestionHeaderActions"><button type="button" class="Button Button--grey Button--withIcon Button--withLabel" style="margin-right: 16px;"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Invite Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M4 10V8a1 1 0 1 1 2 0v2h2a1 1 0 0 1 0 2H6v2a1 1 0 0 1-2 0v-2H2a1 1 0 0 1 0-2h2zm10.455 2c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm-7 6c0-2.66 4.845-4 7.272-4C17.155 14 22 15.34 22 18v1.375c0 .345-.28.625-.625.625H8.08a.625.625 0 0 1-.625-.625V18z" fill-rule="evenodd"/></svg></span>邀请回答</button><div class="GoodQuestionAction"><button type="button" class="Button GoodQuestionAction-commonBtn Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Like Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z" fill-rule="evenodd"/></svg></span>好问题 13</button></div><div class="QuestionHeader-Comment"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Comment Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z" fill-rule="evenodd"/></svg></span>添加评论</button></div><div class="Popover ShareMenu"><div class="ShareMenu-toggler" id="Popover9-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover9-content"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Share Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z" fill-rule="evenodd"/></svg></span>分享</button></div></div><div class="Popover"><button aria-label="更多" id="Popover10-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover10-content" type="button" class="Button Button--plain Button--withIcon Button--iconOnly"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Dots Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z" fill-rule="evenodd"/></svg></span></button></div></div><div class="QuestionHeader-actions"></div></div></div></div></div></div><div><div class="Sticky"></div></div></div><div class="Question-main"><div class="Question-mainColumn"><div><div class="QuestionAnswers-statusWrapper"></div><div id="QuestionAnswers-answers" class="QuestionAnswers-answers" data-zop-feedlistmap="0,0,1,0" data-za-detail-view-path-module="ContentList" data-za-extra-module="{}"><div class="Card AnswersNavWrapper"><div class="ListShortcut"><div class="List"><div class="List-header"><h4 class="List-headerText"><span>18 个回答</span></h4><div class="List-headerOptions"><div class="Popover"><button role="combobox" aria-expanded="false" id="Popover11-toggle" aria-haspopup="true" aria-owns="Popover11-content" type="button" class="Button InputLike InputButton Select-button Select-plainButton Button--plain">默认排序<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Select Select-arrow" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M12 16.183l2.716-2.966a.757.757 0 0 1 1.064.001.738.738 0 0 1 0 1.052l-3.247 3.512a.758.758 0 0 1-1.064 0L8.22 14.27a.738.738 0 0 1 0-1.052.758.758 0 0 1 1.063 0L12 16.183zm0-9.365L9.284 9.782a.758.758 0 0 1-1.064 0 .738.738 0 0 1 0-1.052l3.248-3.512a.758.758 0 0 1 1.065 0L15.78 8.73a.738.738 0 0 1 0 1.052.757.757 0 0 1-1.063.001L12 6.818z" fill-rule="evenodd"/></svg></button></div></div></div><div><div class=""><div class="List-item" tabindex="0"><div class="ContentItem AnswerItem" data-za-index="0" data-zop="{&quot;authorName&quot;:&quot;文礼&quot;,&quot;itemId&quot;:981569730,&quot;title&quot;:&quot;为什么图形学中把矩阵传入shader前就要完成计算，而不在GPU中完成矩阵计算？&quot;,&quot;type&quot;:&quot;answer&quot;}" name="981569730" itemprop="acceptedAnswer" itemtype="http://schema.org/Answer" itemscope="" data-za-detail-view-path-module="AnswerItem" data-za-detail-view-path-index="0" data-za-extra-module="{&quot;card&quot;:{&quot;has_image&quot;:false,&quot;has_video&quot;:false,&quot;content&quot;:{&quot;type&quot;:&quot;Answer&quot;,&quot;token&quot;:&quot;981569730&quot;,&quot;upvote_num&quot;:54,&quot;comment_num&quot;:8,&quot;publish_timestamp&quot;:null,&quot;parent_token&quot;:&quot;367207731&quot;,&quot;author_member_hash_id&quot;:&quot;f34421c66b88d3f703fdefd24f4b1904&quot;}}}"><div class="ContentItem-meta"><div class="AuthorInfo AnswerItem-authorInfo AnswerItem-authorInfo--related" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="name" content="文礼" /><meta itemprop="image" content="https://pic3.zhimg.com/v2-f3ef123959d86274a1227bcac238c0df_l.jpg?source=1940ef5c" /><meta itemprop="url" content="https://www.zhihu.com/people/netwarm007" /><meta itemprop="zhihu:followerCount" content="109649" /><span class="UserLink AuthorInfo-avatarWrapper"><div class="Popover"><div id="Popover32-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover32-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/netwarm007"><img class="Avatar AuthorInfo-avatar" width="38" height="38" src="https://pic3.zhimg.com/v2-f3ef123959d86274a1227bcac238c0df_xs.jpg?source=1940ef5c" srcset="https://pic3.zhimg.com/v2-f3ef123959d86274a1227bcac238c0df_l.jpg?source=1940ef5c 2x" alt="文礼" /></a></div></div></span><div class="AuthorInfo-content"><div class="AuthorInfo-head"><span class="UserLink AuthorInfo-name"><div class="Popover"><div id="Popover33-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover33-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/netwarm007">文礼</a></div></div></span></div><div class="AuthorInfo-detail"><div class="AuthorInfo-badge"><div class="ztext AuthorInfo-badgeText">超级码农</div></div></div></div></div><div class="LabelContainer-wrapper"></div><div class="css-h5al4j"><span><span class="Voters"><button type="button" class="Button Button--plain">54 人赞同了该回答</button></span></span></div></div><meta itemprop="image" /><meta itemprop="upvoteCount" content="54" /><meta itemprop="url" content="https://www.zhihu.com/question/367207731/answer/981569730" /><meta itemprop="dateCreated" content="2020-01-21T09:38:28.000Z" /><meta itemprop="dateModified" content="2020-01-21T14:12:10.000Z" /><meta itemprop="commentCount" content="8" /><div class="RichContent RichContent--unescapable"><div class="RichContent-inner"><span class="RichText ztext CopyrightRichText-richText" itemprop="text"><ol><li>GPU比CPU快，那是对大量重复计算说的。主要是因为GPU同时能进行几十个上百上千个同样的计算，而CPU只能进行几个。仿射矩阵，一般是绑定在Object，也就是场景物体上的。一个物体只需要一个。而Shader是绑定在顶点或者像素上的，一个Object往往有许多顶点或者对应许多像素。将仿射矩阵的计算放在shader里是可以的，但是如果一个object的所有顶点或者所对应的所有像素都是对应同一个仿射矩阵，那么重复计算是没有意义的，CPU只算一次反而很可能更快；</li><li>GPU是为向量计算专门设计的，对于向量的加减乘除只需要一个时钟周期就可以完成。现代的GPU甚至对于两个4x4矩阵的计算，也能一个时钟周期完成。因此将矩阵拆开成为标量，分别计算平移旋转缩放，反而是更慢的。何况，矩阵不仅能够表示平移旋转缩放，还能表示切变、镜像等很多变换。</li></ol><p>总的来说，你有这样的问题说明你的思考还不够深入，对GPU的工作原理也还认识得比较肤浅，建议加强“学”，暂时少点儿“思”</p></span></div><div><div class="ContentItem-time"><a target="_blank" href="//www.zhihu.com/question/367207731/answer/981569730"><span data-tooltip="发布于 2020-01-21 17:38">编辑于 2020-01-21</span></a></div></div><div class="ContentItem-actions"><span><button aria-label="赞同 54 " type="button" class="Button VoteButton VoteButton--up"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--TriangleUp VoteButton-TriangleUp" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M2 18.242c0-.326.088-.532.237-.896l7.98-13.203C10.572 3.57 11.086 3 12 3c.915 0 1.429.571 1.784 1.143l7.98 13.203c.15.364.236.57.236.896 0 1.386-.875 1.9-1.955 1.9H3.955c-1.08 0-1.955-.517-1.955-1.9z" fill-rule="evenodd"/></svg></span>赞同 54</button><button aria-label="反对" type="button" class="Button VoteButton VoteButton--down"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--TriangleDown" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M20.044 3H3.956C2.876 3 2 3.517 2 4.9c0 .326.087.533.236.896L10.216 19c.355.571.87 1.143 1.784 1.143s1.429-.572 1.784-1.143l7.98-13.204c.149-.363.236-.57.236-.896 0-1.386-.876-1.9-1.956-1.9z" fill-rule="evenodd"/></svg></span></button></span><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Comment Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z" fill-rule="evenodd"/></svg></span>8 条评论</button><div class="Popover ShareMenu ContentItem-action"><div class="ShareMenu-toggler" id="Popover28-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover28-content"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Share Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z" fill-rule="evenodd"/></svg></span>分享</button></div></div><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Star Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5.515 19.64l.918-5.355-3.89-3.792c-.926-.902-.639-1.784.64-1.97L8.56 7.74l2.404-4.871c.572-1.16 1.5-1.16 2.072 0L15.44 7.74l5.377.782c1.28.186 1.566 1.068.64 1.97l-3.89 3.793.918 5.354c.219 1.274-.532 1.82-1.676 1.218L12 18.33l-4.808 2.528c-1.145.602-1.896.056-1.677-1.218z" fill-rule="evenodd"/></svg></span>收藏</button><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Heart Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2 8.437C2 5.505 4.294 3.094 7.207 3 9.243 3 11.092 4.19 12 6c.823-1.758 2.649-3 4.651-3C19.545 3 22 5.507 22 8.432 22 16.24 13.842 21 12 21 10.158 21 2 16.24 2 8.437z" fill-rule="evenodd"/></svg></span>喜欢</button><div class="Popover ContentItem-action"><button aria-label="更多" id="Popover29-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover29-content" type="button" class="Button OptionsButton Button--plain Button--withIcon Button--iconOnly"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Dots Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z" fill-rule="evenodd"/></svg></span></button></div></div></div><div class="ModalWrap"><div><div class=""></div><div class="ModalExp-content"><div class="ModalWrap-content"><div class="ModalWrap-title">继续浏览内容</div><div class="ModalWrap-item"><div class="ModalWrap-itemImg"><img src="https://pic4.zhimg.com/80/v2-88158afcff1e7f4b8b00a1ba81171b61_720w.png" /></div><div class="ModalWrap-itemContent"><div class="ModalWrap-itemTitle">知乎</div><div class="ModalWrap-itemDesc">发现更大的世界</div></div><div class="ModalWrap-itemBtn">打开</div></div><div class="ModalWrap-item"><div class="ModalWrap-itemImg"><img src="https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png" /></div><div class="ModalWrap-itemContent"><div class="ModalWrap-itemTitle">Chrome</div></div><div class="ModalWrap-itemBtn">继续</div></div></div></div></div></div><div><div><div class=""></div><div class="ModalLoading-content"><svg width="30" height="30" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg" class="CircleLoadingBar" aria-hidden="true"><g><circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"/></g></svg></div></div></div></div></div><div class="List-item" tabindex="0"><div class="ContentItem AnswerItem" data-za-index="1" data-zop="{&quot;authorName&quot;:&quot;幽玄&quot;,&quot;itemId&quot;:981202593,&quot;title&quot;:&quot;为什么图形学中把矩阵传入shader前就要完成计算，而不在GPU中完成矩阵计算？&quot;,&quot;type&quot;:&quot;answer&quot;}" name="981202593" itemprop="suggestedAnswer" itemtype="http://schema.org/Answer" itemscope="" data-za-detail-view-path-module="AnswerItem" data-za-detail-view-path-index="1" data-za-extra-module="{&quot;card&quot;:{&quot;has_image&quot;:false,&quot;has_video&quot;:false,&quot;content&quot;:{&quot;type&quot;:&quot;Answer&quot;,&quot;token&quot;:&quot;981202593&quot;,&quot;upvote_num&quot;:22,&quot;comment_num&quot;:1,&quot;publish_timestamp&quot;:null,&quot;parent_token&quot;:&quot;367207731&quot;,&quot;author_member_hash_id&quot;:&quot;9f25f5ca280a92af834fff4453a8e620&quot;}}}"><div class="ContentItem-meta"><div class="AuthorInfo AnswerItem-authorInfo AnswerItem-authorInfo--related" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="name" content="幽玄" /><meta itemprop="image" content="https://pic2.zhimg.com/v2-aad19bb0743777b9f97012a9f092ef99_l.jpg?source=1940ef5c" /><meta itemprop="url" content="https://www.zhihu.com/people/meng-lang-lang" /><meta itemprop="zhihu:followerCount" content="3037" /><span class="UserLink AuthorInfo-avatarWrapper"><div class="Popover"><div id="Popover34-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover34-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/meng-lang-lang"><img class="Avatar AuthorInfo-avatar" width="38" height="38" src="https://pic2.zhimg.com/v2-aad19bb0743777b9f97012a9f092ef99_xs.jpg?source=1940ef5c" srcset="https://pic2.zhimg.com/v2-aad19bb0743777b9f97012a9f092ef99_l.jpg?source=1940ef5c 2x" alt="幽玄" /></a></div></div></span><div class="AuthorInfo-content"><div class="AuthorInfo-head"><span class="UserLink AuthorInfo-name"><div class="Popover"><div id="Popover35-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover35-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/meng-lang-lang">幽玄</a></div></div></span></div><div class="AuthorInfo-detail"><div class="AuthorInfo-badge"></div></div></div></div><div class="LabelContainer-wrapper"></div><div class="css-h5al4j"><span><span class="Voters"><button type="button" class="Button Button--plain">22 人赞同了该回答</button></span></span></div></div><meta itemprop="image" /><meta itemprop="upvoteCount" content="22" /><meta itemprop="url" content="https://www.zhihu.com/question/367207731/answer/981202593" /><meta itemprop="dateCreated" content="2020-01-21T03:30:01.000Z" /><meta itemprop="dateModified" content="2020-01-21T03:30:01.000Z" /><meta itemprop="commentCount" content="1" /><div class="RichContent RichContent--unescapable"><div class="RichContent-inner"><span class="RichText ztext CopyrightRichText-richText" itemprop="text"><p>答1：大多数可编程管线，可以参与编程的GPU阶段主要是vertex 阶段和fragment 阶段，而这俩阶段的特点都是GPU在每一帧要处理多个对象：vertex阶段要同时处理一堆顶点对象，fragment阶段要同时处理一堆像素对象。而对于每一帧，每一个将被渲染的物体它的M(odel)V(iew)P(rojection)矩阵一般是不变的，用CPU生成，计算一次即可。如果放到GPU端，反而要逐个顶点或者逐个像素计算生成一次（想象一下一个物体有一百万个顶点），这完全没必要。</p><p>答2：因为变换不只有平移，还有旋转和缩放等，会占用掉矩阵中的大多数元素。</p><p>多说两点。1，其实4x4的矩阵（一般只用到其中12个元素）并没浪费什么空间，换成很多人看好的四元数也不能改善多少，单四元数只能表示旋转，对偶四元数能表示旋转和平移但不包含缩放，用四元数最好的结果也需要4+4+3=11个变量，矩阵包含这三种变换也只需要12个变量而已。2，四元数的数值表达并不直观，不亲人，而数据来源一般都是亲人的（平移了多少，旋转了多少，缩放了多少，都是可以一眼看出的），即使我们在GPU用上对偶四元数，我们还是要先把这些“亲人的”数据转换成“不亲人的”四元数数据。</p></span></div><div><div class="ContentItem-time"><a target="_blank" href="//www.zhihu.com/question/367207731/answer/981202593"><span data-tooltip="发布于 2020-01-21 11:30">发布于 2020-01-21</span></a></div></div><div class="ContentItem-actions"><span><button aria-label="赞同 22 " type="button" class="Button VoteButton VoteButton--up"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--TriangleUp VoteButton-TriangleUp" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M2 18.242c0-.326.088-.532.237-.896l7.98-13.203C10.572 3.57 11.086 3 12 3c.915 0 1.429.571 1.784 1.143l7.98 13.203c.15.364.236.57.236.896 0 1.386-.875 1.9-1.955 1.9H3.955c-1.08 0-1.955-.517-1.955-1.9z" fill-rule="evenodd"/></svg></span>赞同 22</button><button aria-label="反对" type="button" class="Button VoteButton VoteButton--down"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--TriangleDown" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M20.044 3H3.956C2.876 3 2 3.517 2 4.9c0 .326.087.533.236.896L10.216 19c.355.571.87 1.143 1.784 1.143s1.429-.572 1.784-1.143l7.98-13.204c.149-.363.236-.57.236-.896 0-1.386-.876-1.9-1.956-1.9z" fill-rule="evenodd"/></svg></span></button></span><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Comment Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z" fill-rule="evenodd"/></svg></span>1 条评论</button><div class="Popover ShareMenu ContentItem-action"><div class="ShareMenu-toggler" id="Popover26-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover26-content"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Share Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z" fill-rule="evenodd"/></svg></span>分享</button></div></div><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Star Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5.515 19.64l.918-5.355-3.89-3.792c-.926-.902-.639-1.784.64-1.97L8.56 7.74l2.404-4.871c.572-1.16 1.5-1.16 2.072 0L15.44 7.74l5.377.782c1.28.186 1.566 1.068.64 1.97l-3.89 3.793.918 5.354c.219 1.274-.532 1.82-1.676 1.218L12 18.33l-4.808 2.528c-1.145.602-1.896.056-1.677-1.218z" fill-rule="evenodd"/></svg></span>收藏</button><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Heart Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2 8.437C2 5.505 4.294 3.094 7.207 3 9.243 3 11.092 4.19 12 6c.823-1.758 2.649-3 4.651-3C19.545 3 22 5.507 22 8.432 22 16.24 13.842 21 12 21 10.158 21 2 16.24 2 8.437z" fill-rule="evenodd"/></svg></span>喜欢</button><div class="Popover ContentItem-action"><button aria-label="更多" id="Popover27-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover27-content" type="button" class="Button OptionsButton Button--plain Button--withIcon Button--iconOnly"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Dots Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z" fill-rule="evenodd"/></svg></span></button></div></div></div><div class="ModalWrap"><div><div class=""></div><div class="ModalExp-content"><div class="ModalWrap-content"><div class="ModalWrap-title">继续浏览内容</div><div class="ModalWrap-item"><div class="ModalWrap-itemImg"><img src="https://pic4.zhimg.com/80/v2-88158afcff1e7f4b8b00a1ba81171b61_720w.png" /></div><div class="ModalWrap-itemContent"><div class="ModalWrap-itemTitle">知乎</div><div class="ModalWrap-itemDesc">发现更大的世界</div></div><div class="ModalWrap-itemBtn">打开</div></div><div class="ModalWrap-item"><div class="ModalWrap-itemImg"><img src="https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png" /></div><div class="ModalWrap-itemContent"><div class="ModalWrap-itemTitle">Chrome</div></div><div class="ModalWrap-itemBtn">继续</div></div></div></div></div></div><div><div><div class=""></div><div class="ModalLoading-content"><svg width="30" height="30" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg" class="CircleLoadingBar" aria-hidden="true"><g><circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"/></g></svg></div></div></div></div></div><div class="List-item" tabindex="0"><div class="ContentItem AnswerItem" data-za-index="2" data-zop="{&quot;authorName&quot;:&quot;XZiar&quot;,&quot;itemId&quot;:981607673,&quot;title&quot;:&quot;为什么图形学中把矩阵传入shader前就要完成计算，而不在GPU中完成矩阵计算？&quot;,&quot;type&quot;:&quot;answer&quot;}" name="981607673" itemprop="suggestedAnswer" itemtype="http://schema.org/Answer" itemscope="" data-za-detail-view-path-module="AnswerItem" data-za-detail-view-path-index="2" data-za-extra-module="{&quot;card&quot;:{&quot;has_image&quot;:false,&quot;has_video&quot;:false,&quot;content&quot;:{&quot;type&quot;:&quot;Answer&quot;,&quot;token&quot;:&quot;981607673&quot;,&quot;upvote_num&quot;:11,&quot;comment_num&quot;:0,&quot;publish_timestamp&quot;:null,&quot;parent_token&quot;:&quot;367207731&quot;,&quot;author_member_hash_id&quot;:&quot;f76cc47c7de7323b10ece9d850514561&quot;}}}"><div class="ContentItem-meta"><div class="AuthorInfo AnswerItem-authorInfo AnswerItem-authorInfo--related" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="name" content="XZiar" /><meta itemprop="image" content="https://pic3.zhimg.com/v2-3185693e980c2e65dd4848950d392ddf_l.jpg?source=1940ef5c" /><meta itemprop="url" content="https://www.zhihu.com/people/xziar" /><meta itemprop="zhihu:followerCount" content="38834" /><span class="UserLink AuthorInfo-avatarWrapper"><div class="Popover"><div id="Popover36-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover36-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/xziar"><img class="Avatar AuthorInfo-avatar" width="38" height="38" src="https://pic3.zhimg.com/v2-3185693e980c2e65dd4848950d392ddf_xs.jpg?source=1940ef5c" srcset="https://pic3.zhimg.com/v2-3185693e980c2e65dd4848950d392ddf_l.jpg?source=1940ef5c 2x" alt="XZiar" /></a></div></div></span><div class="AuthorInfo-content"><div class="AuthorInfo-head"><span class="UserLink AuthorInfo-name"><div class="Popover"><div id="Popover37-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover37-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/xziar">XZiar</a></div></div></span></div><div class="AuthorInfo-detail"><div class="AuthorInfo-badge"><div class="ztext AuthorInfo-badgeText">这个知乎很烂，我什么也没法留下。</div></div></div></div></div><div class="LabelContainer-wrapper"></div><div class="css-h5al4j"><span><span class="Voters"><button type="button" class="Button Button--plain">11 人赞同了该回答</button></span></span></div></div><meta itemprop="image" /><meta itemprop="upvoteCount" content="11" /><meta itemprop="url" content="https://www.zhihu.com/question/367207731/answer/981607673" /><meta itemprop="dateCreated" content="2020-01-21T10:18:26.000Z" /><meta itemprop="dateModified" content="2020-01-21T10:18:26.000Z" /><meta itemprop="commentCount" content="0" /><div class="RichContent RichContent--unescapable"><div class="RichContent-inner"><span class="RichText ztext CopyrightRichText-richText" itemprop="text"><p>当然可以放在GPU上做，没人拦着你。</p><p>这里其实是两个问题：</p><p>1.透视矩阵为什么放CPU上做</p><p>2.透视矩阵为什么和VS阶段分开做</p><p>先回答第二个：不考虑合批，一个drawcall里的mesh应该是共享同一个透视矩阵的，所以这个矩阵可以分离出来单独计算一遍，而不是100万个顶点就算100w遍。</p><p>再回答第一个：现在显卡的编程模型没法引入一个单独的“全局共享”的计算阶段，所以这个分离出来的步骤就干脆放在CPU上了，反正算个矩阵对于CPU也就几到几十ns的事，你缺这个时间嘛……</p><p class="ztext-empty-paragraph"><br /></p><p>对于第二个问题：如果你只要做平移，那传一个向量直接操作当然没问题。但又不是只需要做平移，比如旋转怎么办？</p><p>这个时候仿射变换通常就要用到矩阵了。当然对于旋转你用四元数也不是不行。</p><p>更麻烦的是你还要做透视变换，这个时候对于三维点还需要扩展一维进行运算……</p></span></div><div><div class="ContentItem-time"><a target="_blank" href="//www.zhihu.com/question/367207731/answer/981607673"><span data-tooltip="发布于 2020-01-21 18:18">发布于 2020-01-21</span></a></div></div><div class="ContentItem-actions RichContent-actions"><span><button aria-label="赞同 11 " type="button" class="Button VoteButton VoteButton--up"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--TriangleUp VoteButton-TriangleUp" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M2 18.242c0-.326.088-.532.237-.896l7.98-13.203C10.572 3.57 11.086 3 12 3c.915 0 1.429.571 1.784 1.143l7.98 13.203c.15.364.236.57.236.896 0 1.386-.875 1.9-1.955 1.9H3.955c-1.08 0-1.955-.517-1.955-1.9z" fill-rule="evenodd"/></svg></span>赞同 11</button><button aria-label="反对" type="button" class="Button VoteButton VoteButton--down"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--TriangleDown" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M20.044 3H3.956C2.876 3 2 3.517 2 4.9c0 .326.087.533.236.896L10.216 19c.355.571.87 1.143 1.784 1.143s1.429-.572 1.784-1.143l7.98-13.204c.149-.363.236-.57.236-.896 0-1.386-.876-1.9-1.956-1.9z" fill-rule="evenodd"/></svg></span></button></span><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Comment Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z" fill-rule="evenodd"/></svg></span>添加评论</button><div class="Popover ShareMenu ContentItem-action"><div class="ShareMenu-toggler" id="Popover18-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover18-content"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Share Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z" fill-rule="evenodd"/></svg></span>分享</button></div></div><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Star Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5.515 19.64l.918-5.355-3.89-3.792c-.926-.902-.639-1.784.64-1.97L8.56 7.74l2.404-4.871c.572-1.16 1.5-1.16 2.072 0L15.44 7.74l5.377.782c1.28.186 1.566 1.068.64 1.97l-3.89 3.793.918 5.354c.219 1.274-.532 1.82-1.676 1.218L12 18.33l-4.808 2.528c-1.145.602-1.896.056-1.677-1.218z" fill-rule="evenodd"/></svg></span>收藏</button><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Heart Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2 8.437C2 5.505 4.294 3.094 7.207 3 9.243 3 11.092 4.19 12 6c.823-1.758 2.649-3 4.651-3C19.545 3 22 5.507 22 8.432 22 16.24 13.842 21 12 21 10.158 21 2 16.24 2 8.437z" fill-rule="evenodd"/></svg></span>喜欢</button><div class="Popover ContentItem-action"><button aria-label="更多" id="Popover19-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover19-content" type="button" class="Button OptionsButton Button--plain Button--withIcon Button--iconOnly"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Dots Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z" fill-rule="evenodd"/></svg></span></button></div><button data-zop-retract-question="true" type="button" class="Button ContentItem-action ContentItem-rightButton Button--plain"><span class="RichContent-collapsedText">收起</span><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--ArrowDown ContentItem-arrowIcon is-active" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M12 13L8.285 9.218a.758.758 0 0 0-1.064 0 .738.738 0 0 0 0 1.052l4.249 4.512a.758.758 0 0 0 1.064 0l4.246-4.512a.738.738 0 0 0 0-1.052.757.757 0 0 0-1.063 0L12.002 13z" fill-rule="evenodd"/></svg></span></button></div></div><div class="ModalWrap"><div><div class=""></div><div class="ModalExp-content"><div class="ModalWrap-content"><div class="ModalWrap-title">继续浏览内容</div><div class="ModalWrap-item"><div class="ModalWrap-itemImg"><img src="https://pic4.zhimg.com/80/v2-88158afcff1e7f4b8b00a1ba81171b61_720w.png" /></div><div class="ModalWrap-itemContent"><div class="ModalWrap-itemTitle">知乎</div><div class="ModalWrap-itemDesc">发现更大的世界</div></div><div class="ModalWrap-itemBtn">打开</div></div><div class="ModalWrap-item"><div class="ModalWrap-itemImg"><img src="https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png" /></div><div class="ModalWrap-itemContent"><div class="ModalWrap-itemTitle">Chrome</div></div><div class="ModalWrap-itemBtn">继续</div></div></div></div></div></div><div><div><div class=""></div><div class="ModalLoading-content"><svg width="30" height="30" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg" class="CircleLoadingBar" aria-hidden="true"><g><circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"/></g></svg></div></div></div></div></div><div class="List-item" tabindex="0"><div class="ContentItem AnswerItem" data-za-index="3" data-zop="{&quot;authorName&quot;:&quot;马小刀&quot;,&quot;itemId&quot;:1560208609,&quot;title&quot;:&quot;为什么图形学中把矩阵传入shader前就要完成计算，而不在GPU中完成矩阵计算？&quot;,&quot;type&quot;:&quot;answer&quot;}" name="1560208609" itemprop="suggestedAnswer" itemtype="http://schema.org/Answer" itemscope="" data-za-detail-view-path-module="AnswerItem" data-za-detail-view-path-index="3" data-za-extra-module="{&quot;card&quot;:{&quot;has_image&quot;:false,&quot;has_video&quot;:false,&quot;content&quot;:{&quot;type&quot;:&quot;Answer&quot;,&quot;token&quot;:&quot;1560208609&quot;,&quot;upvote_num&quot;:248,&quot;comment_num&quot;:11,&quot;publish_timestamp&quot;:null,&quot;parent_token&quot;:&quot;367207731&quot;,&quot;author_member_hash_id&quot;:&quot;0347a4fa88cafa12abf39b139b1658c1&quot;}}}"><div class="ContentItem-meta"><div class="AuthorInfo AnswerItem-authorInfo AnswerItem-authorInfo--related" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="name" content="马小刀" /><meta itemprop="image" content="https://pic4.zhimg.com/73cfa33e4_l.jpg?source=1940ef5c" /><meta itemprop="url" content="https://www.zhihu.com/people/quat" /><meta itemprop="zhihu:followerCount" content="1985" /><span class="UserLink AuthorInfo-avatarWrapper"><div class="Popover"><div id="Popover38-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover38-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/quat"><img class="Avatar AuthorInfo-avatar" width="38" height="38" src="https://pic4.zhimg.com/73cfa33e4_xs.jpg?source=1940ef5c" srcset="https://pic4.zhimg.com/73cfa33e4_l.jpg?source=1940ef5c 2x" alt="马小刀" /></a></div></div></span><div class="AuthorInfo-content"><div class="AuthorInfo-head"><span class="UserLink AuthorInfo-name"><div class="Popover"><div id="Popover39-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover39-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/quat">马小刀</a></div></div><a href="https://www.zhihu.com/question/48510028" target="_blank" class="css-n99yhz" aria-label="Gameloft C++开发工程师" data-tooltip="Gameloft C++开发工程师"><span class="css-g9eqf4-StrutAlign">​<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="css-svsrxm-Octangle" width="18" height="18"><svg viewBox="0 0 24 24" x="-3" y="-3" fill="#FFFFFF" width="30" height="30"><path d="M3.56231227,13.8535307 C2.40051305,12.768677 2.41398885,11.0669203 3.59484487,9.99979213 L3.59222085,9.99654885 C4.26730143,9.45036719 4.79446755,8.21005186 4.7184197,7.34453784 L4.72305873,7.34412719 C4.66942824,5.75539997 5.8824188,4.56066914 7.47188965,4.64242381 L7.47229112,4.6386236 C8.33515314,4.72977993 9.58467253,4.22534048 10.1426329,3.55925173 L10.1462611,3.56228565 C11.2316055,2.40008701 12.9353108,2.41394456 14.0015072,3.59634088 L14.0047263,3.59374004 C14.5498229,4.26841874 15.7896857,4.79521622 16.6545744,4.71844347 L16.6549836,4.72304294 C18.245027,4.66894057 19.4396947,5.88213996 19.3575031,7.47241135 L19.3623099,7.47292747 C19.2704388,8.3358681 19.7742711,9.58421483 20.4407199,10.1424506 L20.437686,10.1460789 C21.5997217,11.2312209 21.5860695,12.9345218 20.4042441,14.0007396 L20.4072865,14.0045125 C19.7325967,14.5495925 19.2055209,15.7896954 19.2815865,16.6561959 L19.2770449,16.6565978 C19.3315454,18.2453037 18.1173775,19.4393568 16.5274188,19.3571512 L16.5269029,19.3619539 C15.6647098,19.270083 14.415408,19.7741709 13.8573671,20.4403558 L13.8537409,20.4373235 C12.76842,21.5995708 11.0650432,21.5864553 9.99899434,20.4039226 L9.99527367,20.406923 C9.45025436,19.7323399 8.21017638,19.2051872 7.34461983,19.2812352 L7.344304,19.2776405 C5.75448683,19.3312904 4.55977145,18.1170085 4.64254978,16.527117 L4.63769921,16.5265942 C4.72957031,15.6644394 4.22547659,14.4151814 3.55928015,13.8571569 L3.56231227,13.8535307 Z"/></svg><path d="M2.63951518,13.3895441 C3.70763333,14.2842292 4.44777637,16.1226061 4.30075305,17.5023312 L4.32211542,17.3063047 C4.17509209,18.6910561 5.17786655,19.7063729 6.5613937,19.5844846 L6.364106,19.6008202 C7.75140298,19.4789319 9.57474349,20.2554985 10.4468305,21.3349009 L10.3224262,21.1803415 C11.1982831,22.2647703 12.6257916,22.2723098 13.5167278,21.2079863 L13.3898102,21.3600325 C14.2845162,20.2919393 16.1229361,19.5518136 17.5026934,19.6988334 L17.3054057,19.6774716 C18.6914461,19.8244915 19.7067866,18.8217404 19.5836389,17.4395022 L19.6012314,17.6367853 C19.4793403,16.2482641 20.255925,14.4249662 21.3353526,13.5528995 L21.1807897,13.677301 C22.2639871,12.8014646 22.2727834,11.3739894 21.2084351,10.483074 L21.3604848,10.6099886 C20.2923667,9.71530351 19.5522236,7.87818322 19.6992469,6.49720154 L19.6778846,6.69448464 C19.8249079,5.30847665 18.8221335,4.2944164 17.4386063,4.41630468 L17.635894,4.39871256 C16.248597,4.52185742 14.4252565,3.74529084 13.5531695,2.66588842 L13.6775738,2.81919121 C12.8017169,1.73601905 11.3742084,1.72722299 10.4832722,2.79154644 L10.6101898,2.63950024 C9.71548377,3.70759343 7.87706394,4.44771919 6.49730661,4.30195588 L6.69459432,4.32206116 C5.30855394,4.17504128 4.29447,5.17904888 4.41636114,6.56128713 L4.3987686,6.36400404 C4.52065973,7.75126861 3.74407501,9.57456653 2.66464737,10.4478898 L2.81921035,10.3222318 C1.73601288,11.1993248 1.72721662,12.6255433 2.79156494,13.5164587 L2.63951518,13.3895441 Z" fill="#0066FF"/><svg class="Zi Zi--Check" fill="#fff" x="6" y="6" viewBox="0 0 24 24" width="12" height="12"><path d="M10.229 17.516c-.318.327-.75.484-1.199.484-.453 0-.884-.16-1.202-.488l-4.335-4.47a1.77 1.77 0 0 1 .007-2.459 1.663 1.663 0 0 1 2.397.01l3.137 3.246 9.072-9.329a1.662 1.662 0 0 1 2.397 0c.663.681.663 1.786 0 2.466L10.23 17.516z" fill-rule="evenodd"/></svg></svg></span></a></span></div><div class="AuthorInfo-detail"><div class="AuthorInfo-badge"><div class="ztext AuthorInfo-badgeText">Gameloft C++开发工程师</div></div></div></div></div><div class="LabelContainer-wrapper"></div><div class="css-h5al4j"><span><span class="Voters"><button type="button" class="Button Button--plain">248 人赞同了该回答</button></span></span></div></div><meta itemprop="image" /><meta itemprop="upvoteCount" content="248" /><meta itemprop="url" content="https://www.zhihu.com/question/367207731/answer/1560208609" /><meta itemprop="dateCreated" content="2020-11-05T07:55:15.000Z" /><meta itemprop="dateModified" content="2021-04-25T15:12:43.000Z" /><meta itemprop="commentCount" content="11" /><div class="RichContent RichContent--unescapable"><div class="RichContent-inner"><span class="RichText ztext CopyrightRichText-richText" itemprop="text"><p>　　初学者有疑惑很正常，一般的图形学书籍或教程不大会讲这个，好像传递变换矩阵是不言而喻的。那就在这里谈一谈图形学相关的基本数学知识吧～</p><blockquote>问题1：为什么不把 fovy near far  aspect 这些float的参数传入shader ，在shader里面用传进来的这四个float直接拼装计算这个矩阵？GPU不是更快吗？</blockquote><p>　　说GPU更快的，我不由得要反问一句：既然GPU比CPU快，那为什么现在的计算机硬件还在用CPU？甭管什么计算，直接都塞给GPU做得了。你可能还会觉得像我这样只传递了4个 float 变量，你们传递mat4变换矩阵却用了16个 float 变量，还没有我来得经济。</p><p>　　首先，传递 fovy, aspect_ratio, near, far  四个参数给 shader 去计算投影矩阵，是行得通得的，但是没必要。传入vertex shader后，每个流水单元会计算投影矩阵，导致大量重复的计算（有多少个顶点就有多少次重复的计算），虽然不会招致GPU的开销，你只是把CPU该做的活儿分配给GPU做了。CPU主要完成任务调度、逻辑控制、硬件IO。<b>GPU的根本任务是解放和发展计算生产力的</b>，你把本该由一个人干的活儿交给一千多个人去做，每个人输出同样的结果，<b>生产力没有得到提升！</b>CPU 这边也有 SIMD（单指令多数据）指令集SSE，可以同时计算 4 个float，但是这活儿甩给它也是浪费啊，你看看透视投影的代码，需要计算4个值，每个值的途径都不一样，哪里用得上并行？</p><div class="highlight"><pre><code class="language-cpp"><span class="n">mat4</span> <span class="nf">perspective</span><span class="p">(</span><span class="kt">float</span> <span class="n">fieldOfView</span><span class="p">,</span> <span class="kt">float</span> <span class="n">aspectRatio</span><span class="p">,</span> <span class="kt">float</span> <span class="n">near</span><span class="p">,</span> <span class="kt">float</span> <span class="n">far</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">float</span> <span class="n">depth</span> <span class="o">=</span> <span class="n">near</span> <span class="o">-</span> <span class="n">far</span><span class="p">;</span>
	<span class="kt">float</span> <span class="n">_11</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">std</span><span class="o">::</span><span class="n">tan</span><span class="p">(</span><span class="n">fieldOfView</span> <span class="o">/</span> <span class="mi">2</span><span class="p">);</span>
	<span class="kt">float</span> <span class="n">_00</span> <span class="o">=</span> <span class="n">_11</span> <span class="o">/</span> <span class="n">aspect</span><span class="p">;</span>
	<span class="kt">float</span> <span class="n">_22</span> <span class="o">=</span> <span class="p">(</span><span class="n">far</span> <span class="o">+</span> <span class="n">near</span><span class="p">)</span> <span class="o">/</span> <span class="n">depth</span><span class="p">;</span>
	<span class="kt">float</span> <span class="n">_32</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">near</span> <span class="o">*</span> <span class="n">far</span> <span class="o">/</span> <span class="n">depth</span><span class="p">;</span>
	<span class="k">return</span> <span class="n">mat4</span><span class="p">(</span>
		<span class="n">_00</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span>
		  <span class="mi">0</span><span class="p">,</span> <span class="n">_11</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span>
		  <span class="mi">0</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span> <span class="n">_22</span><span class="p">,</span> <span class="n">_32</span><span class="p">,</span>
		  <span class="mi">0</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span>  <span class="o">-</span><span class="mi">1</span><span class="p">,</span>   <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><p>　　再说万一哪一天需求变更，我们的工程不仅用透视投影，还需要切换到正交投影看看效果（比如CAD工程制图），你说“我的shader只支持透视投影，还不支持正交投影，需要再加代码”。别人将 glm::perspective 换成 glm::ortho，三下五除二就弄好了，说“我传递的是投影矩阵，不是 fovy, aspect_ratio, near, far 4个变量，不管正交还是透视都是支持的”。</p><p><b>　　以时间换空间</b>，节省传递数据在某些情况下还是可行的。为了渲染逼真的效果，贴图用的越来越大，占用空间以O(n^2)增长。I/O的数据量随之增大。比如在<a href="https://link.zhihu.com/?target=https%3A//www.pbrt.org/" class=" wrap external" target="_blank" rel="nofollow noreferrer">PBR</a>（Physically Based Rendering）里，法向量贴图数据，本来要传递XYZ三个通道的，你可以只传递XY两个通道，在 shader 里计算 z = sqrt(1 - x * x - y *y)。再比如 instanced rendering，你的模型变换矩阵只有平移 (x, y, z) 和均匀缩放s，没有旋转，你可以传递一个 vec4(x, y, z, s) 而不是mat4 model，在shader 里组装模型矩阵。我这里用的vec4，而不是vec3 + float，只占用一个 uniform 槽位。</p><div class="highlight"><pre><code class="language-glsl"><span class="k">in</span> <span class="k">vec4</span> <span class="n">instance</span><span class="p">;</span>
<span class="k">in</span> <span class="k">vec3</span> <span class="n">position</span><span class="p">;</span>

<span class="k">out</span> <span class="k">vec3</span> <span class="n">worldPosition</span><span class="p">;</span>

<span class="k">void</span> <span class="n">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="cp">#if 1</span>
	<span class="n">mat4</span> <span class="n">model</span> <span class="o">=</span> <span class="n">mat4</span><span class="p">(</span>
			<span class="n">instance</span><span class="p">.</span><span class="n">w</span><span class="p">,</span> <span class="mo">0</span><span class="p">,</span> <span class="mo">0</span><span class="p">,</span> <span class="mo">0</span><span class="p">,</span>
			<span class="mo">0</span><span class="p">,</span> <span class="n">instance</span><span class="p">.</span><span class="n">w</span><span class="p">,</span> <span class="mo">0</span><span class="p">,</span> <span class="mo">0</span><span class="p">,</span>
			<span class="mo">0</span><span class="p">,</span> <span class="mo">0</span><span class="p">,</span> <span class="n">instance</span><span class="p">.</span><span class="n">w</span><span class="p">,</span> <span class="mo">0</span><span class="p">,</span>
			<span class="n">instance</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">instance</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">instance</span><span class="p">.</span><span class="n">z</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
	<span class="n">worldPosition</span> <span class="o">=</span> <span class="p">(</span><span class="n">model</span> <span class="o">*</span> <span class="k">vec4</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)).</span><span class="n">xyz</span><span class="p">;</span>
<span class="cp">#else</span>
	<span class="n">worldPosition</span> <span class="o">=</span> <span class="n">position</span> <span class="o">*</span> <span class="n">instance</span><span class="p">.</span><span class="n">w</span> <span class="o">+</span> <span class="n">instance</span><span class="p">.</span><span class="n">xyz</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="p">}</span>
</code></pre></div><p class="ztext-empty-paragraph"><br /></p><blockquote>问题2：为什么需要用矩阵？直接线性变换不可以吗？</blockquote><p>　　题主需要多补充<b>线性代数</b>的知识了。什么是变换？平移、旋转、缩放、斜切、镜像等操作，这些都是，每个都有单独的公式。用上矩阵这个工具表示，就可以<b>统一描述</b>起来。<b>线性变换 </b>y = A*x 就是空间中的值映射到自身空间中去。这里的 A 就是变换矩阵。在 2D 平面上，用 mat3 表示各种变换。在 3D 空间里，用 mat4 表示各种变换。同理，在 N 维空间里，用 N+1 阶的矩阵表示变换。多出的一维是平移（translation），即加法运算。矩阵无法直接处理加法，加了一个维度解决问题。<b>仿射变换</b>等于线性变换加平移，y = A*x + b 用乘法写变成：<img src="https://www.zhihu.com/equation?tex=%5Cbegin%7Bvmatrix%7Dy+%5C%5C1+%5Cend%7Bvmatrix%7D+%3D+%5Cbegin%7Bvmatrix%7DA+%26+b+%5C%5C+0+%261+%5Cend%7Bvmatrix%7D+%2A+%5Cbegin%7Bvmatrix%7D+X+%5C%5C+1%5Cend%7Bvmatrix%7D" alt="[公式]" eeimg="1" data-formula="\begin{vmatrix}y \\1 \end{vmatrix} = \begin{vmatrix}A &amp; b \\ 0 &amp;1 \end{vmatrix} * \begin{vmatrix} X \\ 1\end{vmatrix}" /> ，也就是大家常听说的<b>齐次坐标系</b>。</p><p>　　题主发现矩阵中有很多0，参与运算很是浪费，毕竟 0 与其他数加减乘除的结果还是 0。用手机届的术语就是——流量给白白浪费了。其实，你看的都是单一的变换矩阵——单独的平移、单独的旋转、单独的缩放，如果组合在一起，矩阵就没有那么多0 了。什么？你说最后一行是 (0, 0, 0, 1)，没必要参与运算呀～是的，所以除了mat3、mat4类型，也提供了 mat3x4、mat4x3 类型给你用。你用的 Direct3D 图形 API，对应 float3x4、float4x3 类型。但是，碰到透视投影最后一行的 (0, 0, -1, 0)，使得你要添加一些矩阵单独元素的计算来完成矩阵计算，这与内置的可同时计算 4 个float的指令（可以类比SSE指令集）比起来，得不偿失。</p><p>　　可优化的空间在这里。注意到在 OpenGL 计算变换后的坐标时，<br />gl_Position = projection * (view * (model * vec4(position, 1.0)));。<br />这里加了括号，可以不加括号，因为<b>矩阵的乘法满足结合律</b>（vec4 可以看成 4x1 的矩阵）。加括号的好处是，降低了计算量，每次都是 ma4 乘以 vec4，不加括号会有两次的 mat4 乘以 mat4。你用的 Direct3D，行优先（row_major），矩阵右乘，所以不用考虑加括号的问题。想一想大学算法课程里面的<b>矩阵连乘</b>，用的<b>动态规划</b>求解最优结合顺序。大多时候，你也会看到传递 modelView 或 viewProjection 或 modelViewProjection 乘好了的矩阵，而不是 model, view, projection三个矩阵都传递。假如多个渲染物体的 view 和 projection 矩阵都是一样的，你就可以在 CPU 端完成计算<br />viewProjection = projection * view; 后再送给GPU接着下面的计算，而不是看到 shader 内置了矩阵的运算，就直接扔给GPU了。</p><p>　　除了变换顶点坐标，涉及光照计算才会变换顶点的法向量。两者的变换代码是不一样的。法向量在世界坐标系的值为 _normal = transpose(inverse(mat3(model))) * normal;，这个在《ＯpenGL编程指南》红宝书的第7版附录上有数学推导，这里不展开讨论。另，该书已经出到第9版了，有兴趣的小伙伴们可以下手。</p><div class="RichText-MCNLinkCardContainer"><a class="MCNLinkCard" data-draft-node="block" data-draft-type="mcn-link-card" data-mcn-id="1307772953271201792" data-mcn-skuid="12234196" data-mcn-source="京东" data-mcn-goods-type="" data-mcn-app-schema-android="" data-mcn-app-schema-ios="" data-mcn-children="0" data-za-detail-view-name="1307772953271201792" data-za-not-track-link="true" href="https://union-click.jd.com/jdc?e=jdext-1307772953271201792-0&amp;p=AyIGZRheEgMSA10ZWhcyEgRWGV4VChU3EUQDS10iXhBeGlcJDBkNXg9JHUlSSkkFSRwSBFYZXhUKFRgMXgdIMlB1BhoaHHx1ZV19HGh0FV0sUyxjW0QLWStbHAIQD1QaWxIBIgdUGlsRBxEEUxprJQIXNwd1g6O0yqLkB4%2B%2FjcePwitaJQIVBlAfXRMAFQ9XHFklAhoDZc31gdeauIyr%2FsOovNLYq46cqca50ytrJQEiXABPElAeEgVUHV0TARoDVxhdFQETB1MTWAkDIgdUGlkXARYFVh81EAMTBlcfUhELEGlXGloWCxAGVBtZJQIiBGVFNRRSQlBXTl4WbEheUFgSVQMbaVYeUx0DEwFdK1kUAxAF" target="_blank" rel="noopener noreferrer"><div class="MCNLinkCard-card"><div class="MCNLinkCard-cardContainer"><div class="MCNLinkCard-imageContainer MCNLinkCard-imageContainer--square"><img class="MCNLinkCard-image" src="https://pic2.zhimg.com/v2-bd5829c768390a6ea7ca9e8b0ca62093_hd.jpg?source=b555e01d" alt="" /></div><div class="MCNLinkCard-info"><div class="MCNLinkCard-titleContainer"><div class="MCNLinkCard-title">OpenGL编程指南（原书第9版）</div></div><div class="MCNLinkCard-source">京东</div><div class="MCNLinkCard-tool"><div class="MCNLinkCard-toolLeft"><div class="MCNLinkCard-price"><span>¥ 101.90</span></div></div><div class="MCNLinkCard-button" role="button">去购买<span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--ArrowRight" fill="currentColor" viewBox="0 0 24 24" width="17" height="17"><path d="M9.218 16.78a.737.737 0 0 0 1.052 0l4.512-4.249a.758.758 0 0 0 0-1.063L10.27 7.22a.737.737 0 0 0-1.052 0 .759.759 0 0 0-.001 1.063L13 12l-3.782 3.716a.758.758 0 0 0 0 1.063z" fill-rule="evenodd"/></svg></span></div></div></div></div></div></a></div><p>其实，_normal = mat3(transpose(inverse(model))) * normal; 也是正确的，但是没有使用后者，因为降阶后的计算量小很多（<b>矩阵求逆</b>的开销大，mat3 比 mat4 求逆的运算量少很多）。上面的 transpose 和 inverse 之间可以交换顺序，即先转置后求逆与先求逆后转置的效果是一样的。如果有<b>先验条件</b>矩阵是<b>单位正交矩阵</b>，则有矩阵的逆等于矩阵的转置这一性质，转置操作是沿着主对角线翻转元素，就根本没有计算可言，带入上面的式子，相当于二次转置，得到原矩阵，式子简化为 _normal = mat3(model) * normal; ，对比顶点的变换 _position = model * vec4(position, 1.0)，削去了平移。这也是对的，平移向量本来就不改变向量的值。既然单位正交矩阵可以大大降低运算量，那怎么得到呢？旋转操作不会改变矩阵的正交性质。缩放会改变，尤其是各个轴的缩放系数不一样时。这也是为什么有人说我光照计算的时候，都是对顶点和法线量乘以模型变换矩阵来变换的，好像也是对的。没错，<b>刚体变换</b>满足要求。</p><p>　　矩阵是表达变换最通用的表达方式，但不一定是表达变换的最佳表达方式，看场合。在动画的关键帧之间经常用到插值（interpolation）。平移和缩放变换可以线性插值（lerp），旋转必须做球面线性插值（slerp）。刚体变换由平移和旋转组成，仿射变换另外加上缩放。<b>仅提供了仿射变换的矩阵，是可以从中分别提取出平移、缩放和旋转的量。</b>复合起来后的变换，在旋转上的信息可能有丢失。比如一个玩偶绕原点三圈，0度和1080度的变换矩阵都是一样的，仅知晓矩阵是无法还原出转动的角度的。帧间动画的插值无法用两个矩阵简单表示，可以改用<b>欧拉角</b>，只要约定好XYZ轴的先后变换顺序。然后用欧拉角又可能出现万向锁（gimbal lock）问题。引入<b>四元数</b><sup data-text="Ken Shoemake - Quaternions" data-url="http://www-scf.usc.edu/~csci520/handouts/shoemaker_quaternion.pdf" data-numero="1" data-draft-node="inline" data-draft-type="reference" data-tooltip="Ken Shoemake - Quaternions http://www-scf.usc.edu/~csci520/handouts/shoemaker_quaternion.pdf" data-tooltip-preset="white" data-tooltip-classname="ztext-referene-tooltip"><a id="ref_1_0" href="#ref_1" data-reference-link="true" aria-labelledby="ref_1">[1]</a></sup>就很方便球面线性插值，极端情况下（接近180度）甚至需要对偶四元数（<a href="https://link.zhihu.com/?target=https%3A//euclideanspace.com/maths/algebra/realNormedAlgebra/other/dualQuaternion/index.htm" class=" wrap external" target="_blank" rel="nofollow noreferrer">dual quaternion</a>）。题主刚开始学，听起来云里雾里，以后学到骨骼的蒙皮动画会遇到的。</p><h2>参考</h2><ol class="ReferenceList"><li id="ref_1" tabindex="0"><a class="ReferenceList-backLink" href="#ref_1_0" aria-label="back" data-reference-link="true">^</a><span>Ken Shoemake - Quaternions</span> <a href="http://www-scf.usc.edu/~csci520/handouts/shoemaker_quaternion.pdf" class="external" target="_blank" rel="noopener noreferrer">http://www-scf.usc.edu/~csci520/handouts/shoemaker_quaternion.pdf</a></li></ol></span></div><div><div class="ContentItem-time"><a target="_blank" href="//www.zhihu.com/question/367207731/answer/1560208609"><span data-tooltip="发布于 2020-11-05 15:55">编辑于 16 小时前</span></a></div><div class="Reward"><div><div class="Reward-tagline">真诚赞赏，手留余香</div><button class="Reward-rewardBtn">赞赏</button></div><div class="Reward-countZero">还没有人赞赏，快来当第一个赞赏的人吧！</div></div></div><div class="ContentItem-actions RichContent-actions"><span><button aria-label="赞同 248 " type="button" class="Button VoteButton VoteButton--up"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--TriangleUp VoteButton-TriangleUp" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M2 18.242c0-.326.088-.532.237-.896l7.98-13.203C10.572 3.57 11.086 3 12 3c.915 0 1.429.571 1.784 1.143l7.98 13.203c.15.364.236.57.236.896 0 1.386-.875 1.9-1.955 1.9H3.955c-1.08 0-1.955-.517-1.955-1.9z" fill-rule="evenodd"/></svg></span>赞同 248</button><button aria-label="反对" type="button" class="Button VoteButton VoteButton--down"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--TriangleDown" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M20.044 3H3.956C2.876 3 2 3.517 2 4.9c0 .326.087.533.236.896L10.216 19c.355.571.87 1.143 1.784 1.143s1.429-.572 1.784-1.143l7.98-13.204c.149-.363.236-.57.236-.896 0-1.386-.876-1.9-1.956-1.9z" fill-rule="evenodd"/></svg></span></button></span><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Comment Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z" fill-rule="evenodd"/></svg></span>11 条评论</button><div class="Popover ShareMenu ContentItem-action"><div class="ShareMenu-toggler" id="Popover20-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover20-content"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Share Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z" fill-rule="evenodd"/></svg></span>分享</button></div></div><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Star Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5.515 19.64l.918-5.355-3.89-3.792c-.926-.902-.639-1.784.64-1.97L8.56 7.74l2.404-4.871c.572-1.16 1.5-1.16 2.072 0L15.44 7.74l5.377.782c1.28.186 1.566 1.068.64 1.97l-3.89 3.793.918 5.354c.219 1.274-.532 1.82-1.676 1.218L12 18.33l-4.808 2.528c-1.145.602-1.896.056-1.677-1.218z" fill-rule="evenodd"/></svg></span>收藏</button><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Heart Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2 8.437C2 5.505 4.294 3.094 7.207 3 9.243 3 11.092 4.19 12 6c.823-1.758 2.649-3 4.651-3C19.545 3 22 5.507 22 8.432 22 16.24 13.842 21 12 21 10.158 21 2 16.24 2 8.437z" fill-rule="evenodd"/></svg></span>喜欢</button><div class="Popover ContentItem-action"><button aria-label="更多" id="Popover21-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover21-content" type="button" class="Button OptionsButton Button--plain Button--withIcon Button--iconOnly"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Dots Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z" fill-rule="evenodd"/></svg></span></button></div><button data-zop-retract-question="true" type="button" class="Button ContentItem-action ContentItem-rightButton Button--plain"><span class="RichContent-collapsedText">收起</span><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--ArrowDown ContentItem-arrowIcon is-active" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M12 13L8.285 9.218a.758.758 0 0 0-1.064 0 .738.738 0 0 0 0 1.052l4.249 4.512a.758.758 0 0 0 1.064 0l4.246-4.512a.738.738 0 0 0 0-1.052.757.757 0 0 0-1.063 0L12.002 13z" fill-rule="evenodd"/></svg></span></button></div></div><div class="ModalWrap"><div><div class=""></div><div class="ModalExp-content"><div class="ModalWrap-content"><div class="ModalWrap-title">继续浏览内容</div><div class="ModalWrap-item"><div class="ModalWrap-itemImg"><img src="https://pic4.zhimg.com/80/v2-88158afcff1e7f4b8b00a1ba81171b61_720w.png" /></div><div class="ModalWrap-itemContent"><div class="ModalWrap-itemTitle">知乎</div><div class="ModalWrap-itemDesc">发现更大的世界</div></div><div class="ModalWrap-itemBtn">打开</div></div><div class="ModalWrap-item"><div class="ModalWrap-itemImg"><img src="https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png" /></div><div class="ModalWrap-itemContent"><div class="ModalWrap-itemTitle">Chrome</div></div><div class="ModalWrap-itemBtn">继续</div></div></div></div></div></div><div><div><div class=""></div><div class="ModalLoading-content"><svg width="30" height="30" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg" class="CircleLoadingBar" aria-hidden="true"><g><circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"/></g></svg></div></div></div></div></div><div class="List-item" tabindex="0"><div class="ContentItem AnswerItem" data-za-index="4" data-zop="{&quot;authorName&quot;:&quot;Grfxlf&quot;,&quot;itemId&quot;:981422587,&quot;title&quot;:&quot;为什么图形学中把矩阵传入shader前就要完成计算，而不在GPU中完成矩阵计算？&quot;,&quot;type&quot;:&quot;answer&quot;}" name="981422587" itemprop="suggestedAnswer" itemtype="http://schema.org/Answer" itemscope="" data-za-detail-view-path-module="AnswerItem" data-za-detail-view-path-index="4" data-za-extra-module="{&quot;card&quot;:{&quot;has_image&quot;:false,&quot;has_video&quot;:false,&quot;content&quot;:{&quot;type&quot;:&quot;Answer&quot;,&quot;token&quot;:&quot;981422587&quot;,&quot;upvote_num&quot;:6,&quot;comment_num&quot;:0,&quot;publish_timestamp&quot;:null,&quot;parent_token&quot;:&quot;367207731&quot;,&quot;author_member_hash_id&quot;:&quot;7b91cb9b9869a7453e07f0a6da24f0b8&quot;}}}"><div class="ContentItem-meta"><div class="AuthorInfo AnswerItem-authorInfo AnswerItem-authorInfo--related" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="name" content="Grfxlf" /><meta itemprop="image" content="https://pic2.zhimg.com/c650941e3e708bfa0b7242b3b78cec50_l.jpg?source=1940ef5c" /><meta itemprop="url" content="https://www.zhihu.com/people/iGrfx" /><meta itemprop="zhihu:followerCount" content="9369" /><span class="UserLink AuthorInfo-avatarWrapper"><div class="Popover"><div id="Popover40-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover40-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/iGrfx"><img class="Avatar AuthorInfo-avatar" width="38" height="38" src="https://pic2.zhimg.com/c650941e3e708bfa0b7242b3b78cec50_xs.jpg?source=1940ef5c" srcset="https://pic2.zhimg.com/c650941e3e708bfa0b7242b3b78cec50_l.jpg?source=1940ef5c 2x" alt="Grfxlf" /></a></div></div></span><div class="AuthorInfo-content"><div class="AuthorInfo-head"><span class="UserLink AuthorInfo-name"><div class="Popover"><div id="Popover41-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover41-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/iGrfx">Grfxlf</a></div></div><a href="https://www.zhihu.com/topic/20054793" target="_blank" class="css-n99yhz" aria-label="计算机图形学话题下的优秀答主" data-tooltip="计算机图形学话题下的优秀答主"><span class="css-g9eqf4-StrutAlign">​<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="css-svsrxm-Octangle" width="18" height="18"><svg viewBox="0 0 24 24" x="-3" y="-3" fill="#FFFFFF" width="30" height="30"><path d="M3.56231227,13.8535307 C2.40051305,12.768677 2.41398885,11.0669203 3.59484487,9.99979213 L3.59222085,9.99654885 C4.26730143,9.45036719 4.79446755,8.21005186 4.7184197,7.34453784 L4.72305873,7.34412719 C4.66942824,5.75539997 5.8824188,4.56066914 7.47188965,4.64242381 L7.47229112,4.6386236 C8.33515314,4.72977993 9.58467253,4.22534048 10.1426329,3.55925173 L10.1462611,3.56228565 C11.2316055,2.40008701 12.9353108,2.41394456 14.0015072,3.59634088 L14.0047263,3.59374004 C14.5498229,4.26841874 15.7896857,4.79521622 16.6545744,4.71844347 L16.6549836,4.72304294 C18.245027,4.66894057 19.4396947,5.88213996 19.3575031,7.47241135 L19.3623099,7.47292747 C19.2704388,8.3358681 19.7742711,9.58421483 20.4407199,10.1424506 L20.437686,10.1460789 C21.5997217,11.2312209 21.5860695,12.9345218 20.4042441,14.0007396 L20.4072865,14.0045125 C19.7325967,14.5495925 19.2055209,15.7896954 19.2815865,16.6561959 L19.2770449,16.6565978 C19.3315454,18.2453037 18.1173775,19.4393568 16.5274188,19.3571512 L16.5269029,19.3619539 C15.6647098,19.270083 14.415408,19.7741709 13.8573671,20.4403558 L13.8537409,20.4373235 C12.76842,21.5995708 11.0650432,21.5864553 9.99899434,20.4039226 L9.99527367,20.406923 C9.45025436,19.7323399 8.21017638,19.2051872 7.34461983,19.2812352 L7.344304,19.2776405 C5.75448683,19.3312904 4.55977145,18.1170085 4.64254978,16.527117 L4.63769921,16.5265942 C4.72957031,15.6644394 4.22547659,14.4151814 3.55928015,13.8571569 L3.56231227,13.8535307 Z"/></svg><path d="M2.63951518,13.3895441 C3.70763333,14.2842292 4.44777637,16.1226061 4.30075305,17.5023312 L4.32211542,17.3063047 C4.17509209,18.6910561 5.17786655,19.7063729 6.5613937,19.5844846 L6.364106,19.6008202 C7.75140298,19.4789319 9.57474349,20.2554985 10.4468305,21.3349009 L10.3224262,21.1803415 C11.1982831,22.2647703 12.6257916,22.2723098 13.5167278,21.2079863 L13.3898102,21.3600325 C14.2845162,20.2919393 16.1229361,19.5518136 17.5026934,19.6988334 L17.3054057,19.6774716 C18.6914461,19.8244915 19.7067866,18.8217404 19.5836389,17.4395022 L19.6012314,17.6367853 C19.4793403,16.2482641 20.255925,14.4249662 21.3353526,13.5528995 L21.1807897,13.677301 C22.2639871,12.8014646 22.2727834,11.3739894 21.2084351,10.483074 L21.3604848,10.6099886 C20.2923667,9.71530351 19.5522236,7.87818322 19.6992469,6.49720154 L19.6778846,6.69448464 C19.8249079,5.30847665 18.8221335,4.2944164 17.4386063,4.41630468 L17.635894,4.39871256 C16.248597,4.52185742 14.4252565,3.74529084 13.5531695,2.66588842 L13.6775738,2.81919121 C12.8017169,1.73601905 11.3742084,1.72722299 10.4832722,2.79154644 L10.6101898,2.63950024 C9.71548377,3.70759343 7.87706394,4.44771919 6.49730661,4.30195588 L6.69459432,4.32206116 C5.30855394,4.17504128 4.29447,5.17904888 4.41636114,6.56128713 L4.3987686,6.36400404 C4.52065973,7.75126861 3.74407501,9.57456653 2.66464737,10.4478898 L2.81921035,10.3222318 C1.73601288,11.1993248 1.72721662,12.6255433 2.79156494,13.5164587 L2.63951518,13.3895441 Z" fill="#FF9607"/><svg class="Zi Zi--Star" fill="#fff" x="6" y="6" viewBox="0 0 24 24" width="12" height="12"><path d="M5.515 19.64l.918-5.355-3.89-3.792c-.926-.902-.639-1.784.64-1.97L8.56 7.74l2.404-4.871c.572-1.16 1.5-1.16 2.072 0L15.44 7.74l5.377.782c1.28.186 1.566 1.068.64 1.97l-3.89 3.793.918 5.354c.219 1.274-.532 1.82-1.676 1.218L12 18.33l-4.808 2.528c-1.145.602-1.896.056-1.677-1.218z" fill-rule="evenodd"/></svg></svg></span></a></span></div><div class="AuthorInfo-detail"><div class="AuthorInfo-badge"><div class="ztext AuthorInfo-badgeText">计算机图形学话题下的优秀答主</div></div></div></div></div><div class="LabelContainer-wrapper"></div><div class="css-h5al4j"><span><span class="Voters"><button type="button" class="Button Button--plain">6 人赞同了该回答</button></span></span></div></div><meta itemprop="image" /><meta itemprop="upvoteCount" content="6" /><meta itemprop="url" content="https://www.zhihu.com/question/367207731/answer/981422587" /><meta itemprop="dateCreated" content="2020-01-21T07:16:16.000Z" /><meta itemprop="dateModified" content="2020-01-21T07:16:16.000Z" /><meta itemprop="commentCount" content="0" /><div class="RichContent RichContent--unescapable"><div class="RichContent-inner"><span class="RichText ztext CopyrightRichText-richText" itemprop="text"><ol><li>变换矩阵不仅仅影响着渲染，通常还会跟逻辑发生耦合，由于逻辑是在cpu下做，所以在渲染对象状态变化时计算一次即可。</li><li>为什么用矩阵，其实矩阵够紧凑，他把变换所需的参数都“装进”4个4d向量里，如果想要传单个值，其实你也省不了什么，该传的标量总数还是那么多。至于你说的单位矩阵是个特殊情况。在一般情况下，只会作为初始化值，使用起来，除了w轴，其他轴都会被“填满”。</li></ol></span></div><div><div class="ContentItem-time"><a target="_blank" href="//www.zhihu.com/question/367207731/answer/981422587"><span data-tooltip="发布于 2020-01-21 15:16">发布于 2020-01-21</span></a></div><div class="Reward"><div><div class="Reward-tagline">真诚赞赏，手留余香</div><button class="Reward-rewardBtn">赞赏</button></div><div class="Reward-countZero">还没有人赞赏，快来当第一个赞赏的人吧！</div></div></div><div class="ContentItem-actions RichContent-actions"><span><button aria-label="赞同 6 " type="button" class="Button VoteButton VoteButton--up"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--TriangleUp VoteButton-TriangleUp" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M2 18.242c0-.326.088-.532.237-.896l7.98-13.203C10.572 3.57 11.086 3 12 3c.915 0 1.429.571 1.784 1.143l7.98 13.203c.15.364.236.57.236.896 0 1.386-.875 1.9-1.955 1.9H3.955c-1.08 0-1.955-.517-1.955-1.9z" fill-rule="evenodd"/></svg></span>赞同 6</button><button aria-label="反对" type="button" class="Button VoteButton VoteButton--down"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--TriangleDown" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M20.044 3H3.956C2.876 3 2 3.517 2 4.9c0 .326.087.533.236.896L10.216 19c.355.571.87 1.143 1.784 1.143s1.429-.572 1.784-1.143l7.98-13.204c.149-.363.236-.57.236-.896 0-1.386-.876-1.9-1.956-1.9z" fill-rule="evenodd"/></svg></span></button></span><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Comment Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z" fill-rule="evenodd"/></svg></span>添加评论</button><div class="Popover ShareMenu ContentItem-action"><div class="ShareMenu-toggler" id="Popover22-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover22-content"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Share Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z" fill-rule="evenodd"/></svg></span>分享</button></div></div><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Star Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5.515 19.64l.918-5.355-3.89-3.792c-.926-.902-.639-1.784.64-1.97L8.56 7.74l2.404-4.871c.572-1.16 1.5-1.16 2.072 0L15.44 7.74l5.377.782c1.28.186 1.566 1.068.64 1.97l-3.89 3.793.918 5.354c.219 1.274-.532 1.82-1.676 1.218L12 18.33l-4.808 2.528c-1.145.602-1.896.056-1.677-1.218z" fill-rule="evenodd"/></svg></span>收藏</button><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Heart Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2 8.437C2 5.505 4.294 3.094 7.207 3 9.243 3 11.092 4.19 12 6c.823-1.758 2.649-3 4.651-3C19.545 3 22 5.507 22 8.432 22 16.24 13.842 21 12 21 10.158 21 2 16.24 2 8.437z" fill-rule="evenodd"/></svg></span>喜欢</button><div class="Popover ContentItem-action"><button aria-label="更多" id="Popover23-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover23-content" type="button" class="Button OptionsButton Button--plain Button--withIcon Button--iconOnly"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Dots Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z" fill-rule="evenodd"/></svg></span></button></div><button data-zop-retract-question="true" type="button" class="Button ContentItem-action ContentItem-rightButton Button--plain"><span class="RichContent-collapsedText">收起</span><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--ArrowDown ContentItem-arrowIcon is-active" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M12 13L8.285 9.218a.758.758 0 0 0-1.064 0 .738.738 0 0 0 0 1.052l4.249 4.512a.758.758 0 0 0 1.064 0l4.246-4.512a.738.738 0 0 0 0-1.052.757.757 0 0 0-1.063 0L12.002 13z" fill-rule="evenodd"/></svg></span></button></div></div><div class="ModalWrap"><div><div class=""></div><div class="ModalExp-content"><div class="ModalWrap-content"><div class="ModalWrap-title">继续浏览内容</div><div class="ModalWrap-item"><div class="ModalWrap-itemImg"><img src="https://pic4.zhimg.com/80/v2-88158afcff1e7f4b8b00a1ba81171b61_720w.png" /></div><div class="ModalWrap-itemContent"><div class="ModalWrap-itemTitle">知乎</div><div class="ModalWrap-itemDesc">发现更大的世界</div></div><div class="ModalWrap-itemBtn">打开</div></div><div class="ModalWrap-item"><div class="ModalWrap-itemImg"><img src="https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png" /></div><div class="ModalWrap-itemContent"><div class="ModalWrap-itemTitle">Chrome</div></div><div class="ModalWrap-itemBtn">继续</div></div></div></div></div></div><div><div><div class=""></div><div class="ModalLoading-content"><svg width="30" height="30" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg" class="CircleLoadingBar" aria-hidden="true"><g><circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"/></g></svg></div></div></div></div></div><div></div></div></div></div></div></div></div></div></div><div class="Question-sideColumn Question-sideColumn--sticky" data-za-detail-view-path-module="RightSideBar" data-za-extra-module="{}"><div><div class="Sticky"><div class="Card"><div class="Pc-card Card"><a class="Banner-link" href="https://www.ueeshop.com/?f=zhihu&amp;k=2" target="_blank"><div class="Banner-adTag">广告</div><img class="Banner-image" src="https://pic1.zhimg.com/v2-095e4416d6862ef636596807644b2d28_540x450.jpeg" alt="广告" /></a><div class="Pc-card-button-close " data-tooltip="不再显示" data-tooltip-position="bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" class="Icon Icon--close Pc-card-button-close-svg "><path fill-rule="evenodd" d="M3 2L2 3l3 3-3 3 1 1 3-3 3 3 1-1-3-3 3-3-1-1-3 3"/></svg></div></div></div><div class="Card" data-za-detail-view-path-module="RelatedQuestions" data-za-extra-module="{}"><div class="Card-header SimilarQuestions-title"><div class="Card-headerText">相关问题</div></div><div class="Card-section SimilarQuestions-list"><div class="SimilarQuestions-item" itemprop="zhihu:similarQuestion" itemtype="http://schema.org/Question" itemscope="" data-za-detail-view-path-module="QuestionItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Question&quot;,&quot;token&quot;:&quot;272061658&quot;}}}"><meta itemprop="name" content="做unity游戏开发算法数据结构和图形学shader哪个学习的优先级高呢？" /><meta itemprop="url" content="https://www.zhihu.com/question/272061658" /><meta itemprop="answerCount" content="13" /><meta itemprop="zhihu:followerCount" content="96" /><a target="_blank" type="button" class="Button Button--plain" href="/question/272061658">做unity游戏开发算法数据结构和图形学shader哪个学习的优先级高呢？</a> 13 个回答</div><div class="SimilarQuestions-item" itemprop="zhihu:similarQuestion" itemtype="http://schema.org/Question" itemscope="" data-za-detail-view-path-module="QuestionItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Question&quot;,&quot;token&quot;:&quot;329241785&quot;}}}"><meta itemprop="name" content="请问为什么我的OpenGL程序一运行起来就把GPU占满了？" /><meta itemprop="url" content="https://www.zhihu.com/question/329241785" /><meta itemprop="answerCount" content="4" /><meta itemprop="zhihu:followerCount" content="9" /><a target="_blank" type="button" class="Button Button--plain" href="/question/329241785">请问为什么我的OpenGL程序一运行起来就把GPU占满了？</a> 4 个回答</div><div class="SimilarQuestions-item" itemprop="zhihu:similarQuestion" itemtype="http://schema.org/Question" itemscope="" data-za-detail-view-path-module="QuestionItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Question&quot;,&quot;token&quot;:&quot;50257273&quot;}}}"><meta itemprop="name" content="为什么知乎上图形学相关话题大部分是渲染、游戏、GPU？" /><meta itemprop="url" content="https://www.zhihu.com/question/50257273" /><meta itemprop="answerCount" content="7" /><meta itemprop="zhihu:followerCount" content="144" /><a target="_blank" type="button" class="Button Button--plain" href="/question/50257273">为什么知乎上图形学相关话题大部分是渲染、游戏、GPU？</a> 7 个回答</div><div class="SimilarQuestions-item" itemprop="zhihu:similarQuestion" itemtype="http://schema.org/Question" itemscope="" data-za-detail-view-path-module="QuestionItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Question&quot;,&quot;token&quot;:&quot;19738277&quot;}}}"><meta itemprop="name" content="怎样学好 GPU 编程？目前有哪些流行的 shader 语言？有什么书籍推荐吗？" /><meta itemprop="url" content="https://www.zhihu.com/question/19738277" /><meta itemprop="answerCount" content="8" /><meta itemprop="zhihu:followerCount" content="850" /><a target="_blank" type="button" class="Button Button--plain" href="/question/19738277">怎样学好 GPU 编程？目前有哪些流行的 shader 语言？有什么书籍推荐吗？</a> 8 个回答</div></div></div><div class="Card" data-za-detail-view-path-module="ContentList" data-za-detail-view-path-module_name="相关推荐" data-za-extra-module="{}"><div class="Card-header RelatedCommodities-title"><div class="Card-headerText">相关推荐</div></div><div class="Card-section RelatedCommodities-list"><a target="_blank" href="/pub/book/119650207" type="button" class="Button RelatedCommodities-item Button--plain" data-za-detail-view-path-module="EBookItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;EBook&quot;,&quot;token&quot;:&quot;119650207&quot;}}}"><img class="RelatedCommodities-image" src="https://pic2.zhimg.com/90/v2-4244e13abce3aa7bba5d5833a0800021_250x0.jpg?source=31184dd1" alt="live" /><div class="RelatedCommodities-content"><div class="RelatedCommodities-subject RelatedCommodities-subject-two" data-tooltip="Unity 3D 内建着色器源码剖析">Unity 3D 内建着色器源码剖析</div><div class="RelatedCommodities-meta"><div class="RelatedCommodities-bookMeta">241 人读过<span class="RelatedCommodities-bookRead"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Ebook" width="13" height="14" fill="currentColor" viewBox="0 0 24 24"><path d="M16 17.649V2.931a.921.921 0 0 0-.045-.283.943.943 0 0 0-1.182-.604L4.655 5.235A.932.932 0 0 0 4 6.122v14.947c0 .514.421.931.941.931H19.06c.52 0 .941-.417.941-.93V7.292a.936.936 0 0 0-.941-.931h-.773v12.834a.934.934 0 0 1-.83.924L6.464 21.416c-.02.002 2.94-.958 8.883-2.881a.932.932 0 0 0 .653-.886z" fill-rule="evenodd"/></svg></span>阅读</span></div></div></div></a><a target="_blank" href="/pub/book/119589261" type="button" class="Button RelatedCommodities-item Button--plain" data-za-detail-view-path-module="EBookItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;EBook&quot;,&quot;token&quot;:&quot;119589261&quot;}}}"><img class="RelatedCommodities-image" src="https://pic1.zhimg.com/90/v2-0330f7ee33a8df9d6f9012ae92770be0_250x0.jpg?source=31184dd1" alt="live" /><div class="RelatedCommodities-content"><div class="RelatedCommodities-subject RelatedCommodities-subject-two" data-tooltip="OpenGL ES 2.0 游戏开发（上卷）：基础技术和典型案例">OpenGL ES 2.0 游戏开发（上卷）：基础技术和典型案例</div><div class="RelatedCommodities-meta"><div class="RelatedCommodities-bookMeta">79 人读过<span class="RelatedCommodities-bookRead"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Ebook" width="13" height="14" fill="currentColor" viewBox="0 0 24 24"><path d="M16 17.649V2.931a.921.921 0 0 0-.045-.283.943.943 0 0 0-1.182-.604L4.655 5.235A.932.932 0 0 0 4 6.122v14.947c0 .514.421.931.941.931H19.06c.52 0 .941-.417.941-.93V7.292a.936.936 0 0 0-.941-.931h-.773v12.834a.934.934 0 0 1-.83.924L6.464 21.416c-.02.002 2.94-.958 8.883-2.881a.932.932 0 0 0 .653-.886z" fill-rule="evenodd"/></svg></span>阅读</span></div></div></div></a><a target="_blank" href="/pub/book/119589141" type="button" class="Button RelatedCommodities-item Button--plain" data-za-detail-view-path-module="EBookItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;EBook&quot;,&quot;token&quot;:&quot;119589141&quot;}}}"><img class="RelatedCommodities-image" src="https://pic4.zhimg.com/90/v2-f20d5913397412080a2535edd9dd75d7_250x0.jpg?source=31184dd1" alt="live" /><div class="RelatedCommodities-content"><div class="RelatedCommodities-subject RelatedCommodities-subject-two" data-tooltip="OpenGL ES 2.0 游戏开发（下卷）：高级特效和典型案例">OpenGL ES 2.0 游戏开发（下卷）：高级特效和典型案例</div><div class="RelatedCommodities-meta"><div class="RelatedCommodities-bookMeta">63 人读过<span class="RelatedCommodities-bookRead"><span style="display: inline-flex; align-items: center;">​<svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--Ebook" width="13" height="14" fill="currentColor" viewBox="0 0 24 24"><path d="M16 17.649V2.931a.921.921 0 0 0-.045-.283.943.943 0 0 0-1.182-.604L4.655 5.235A.932.932 0 0 0 4 6.122v14.947c0 .514.421.931.941.931H19.06c.52 0 .941-.417.941-.93V7.292a.936.936 0 0 0-.941-.931h-.773v12.834a.934.934 0 0 1-.83.924L6.464 21.416c-.02.002 2.94-.958 8.883-2.881a.932.932 0 0 0 .653-.886z" fill-rule="evenodd"/></svg></span>阅读</span></div></div></div></a></div></div><div class="Card"><div class="Pc-card Card"><a class="Banner-link" href="https://aws.amazon.com/cn/campaigns/mig-credit-contact-us-mac-instance-ext/?trk=ba_a134p0000078TIcAAM&amp;trkCampaign=macos&amp;sc_channel=ba&amp;sc_campaign=zhihu&amp;sc_outcome=Acquisition&amp;sc_geo=CHNA&amp;sc_country=CN&amp;sc_publisher=Others" target="_blank"><div class="Banner-adTag">广告</div><img class="Banner-image" src="https://pic1.zhimg.com/v2-bc73eb800cb9103abf71770936f6539c_540x450.jpeg" alt="广告" /></a><div class="Pc-card-button-close " data-tooltip="不再显示" data-tooltip-position="bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" class="Icon Icon--close Pc-card-button-close-svg "><path fill-rule="evenodd" d="M3 2L2 3l3 3-3 3 1 1 3-3 3 3 1-1-3-3 3-3-1-1-3 3"/></svg></div></div></div><footer class="Footer"><a class="Footer-item" target="_blank" rel="noopener noreferrer" href="//liukanshan.zhihu.com/">刘看山</a><span class="Footer-dot"></span><a class="Footer-item" target="_blank" rel="noopener noreferrer" href="/question/19581624">知乎指南</a><span class="Footer-dot"></span><a class="Footer-item" target="_blank" rel="noopener noreferrer" href="/term/zhihu-terms">知乎协议</a><span class="Footer-dot"></span><a class="Footer-item" target="_blank" rel="noopener noreferrer" href="/term/privacy">知乎隐私保护指引</a><br /><a class="Footer-item" target="_blank" href="/app">应用</a><span class="Footer-dot"></span><a class="Footer-item" target="_blank" rel="noopener noreferrer" href="https://app.mokahr.com/apply/zhihu">工作</a><span class="Footer-dot"></span><button type="button" class="Button OrgCreateButton">申请开通知乎机构号</button><br /><a class="Footer-item" target="_blank" rel="noopener noreferrer" href="https://zhuanlan.zhihu.com/p/28852607">侵权举报</a><span class="Footer-dot"></span><a class="Footer-item" target="_blank" rel="noopener noreferrer" href="http://www.12377.cn">网上有害信息举报专区</a><br /><a class="Footer-item" target="_blank" rel="noopener noreferrer" href="https://tsm.miit.gov.cn/dxxzsp/">京 ICP 证 110745 号</a><br /><a class="Footer-item" target="_blank" rel="noopener noreferrer" href="https://beian.miit.gov.cn/">京 ICP 备 13052560 号 - 1</a><br /><a class="Footer-item" target="_blank" rel="noopener noreferrer" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010802020088"><img src="https://pic3.zhimg.com/80/v2-d0289dc0a46fc5b15b3363ffa78cf6c7.png" />京公网安备 11010802020088 号</a><br /><span class="Footer-item">互联网药品信息服务资格证书<br />（京）- 非经营性 - 2017 - 0067</span><span class="Footer-item">违法和不良信息举报：010-82716601</span><br /><a class="Footer-item" target="_blank" href="/term/child-jubao">儿童色情信息举报专区</a><br /><a class="Footer-item" target="_blank" href="/certificates">证照中心</a><span class="Footer-dot"></span><a class="Footer-item" target="_blank" rel="noopener noreferrer" href="//ir.zhihu.com">Investor Relations</a><br /><a class="Footer-item" target="_blank" href="/contact">联系我们</a><span> © 2021 知乎</span></footer></div></div></div></div></div></main><div data-zop-usertoken="{&quot;urlToken&quot;:&quot;yangquanhai&quot;}"></div><div class="CornerButtons"><div class="CornerAnimayedFlex CornerAnimayedFlex--hidden"><button data-tooltip="回到顶部" data-tooltip-position="left" data-tooltip-will-hide-on-click="true" aria-label="回到顶部" type="button" class="Button CornerButton Button--plain"><svg xmlns="http://www.w3.org/2000/svg" class="Zi Zi--BackToTop" aria-label="回到顶部" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M16.036 19.59a1 1 0 0 1-.997.995H9.032a.996.996 0 0 1-.997-.996v-7.005H5.03c-1.1 0-1.36-.633-.578-1.416L11.33 4.29a1.003 1.003 0 0 1 1.412 0l6.878 6.88c.782.78.523 1.415-.58 1.415h-3.004v7.005z"/></svg></button></div></div></div></div><script id="js-clientConfig" type="text/json">{"host":"zhihu.com","protocol":"https:","wwwHost":"www.zhihu.com","videoHost":"video.zhihu.com","fetchRoot":{"www":"https:\u002F\u002Fwww.zhihu.com","api":"https:\u002F\u002Fapi.zhihu.com","lens":"https:\u002F\u002Flens.zhihu.com","zhuanlan":"https:\u002F\u002Fzhuanlan.zhihu.com","walletpay":"https:\u002F\u002Fwalletpay.zhihu.com","captcha":"https:\u002F\u002Fcaptcha.zhihu.com"}}</script><script id="js-initialData" type="text/json">{"initialState":{"common":{"ask":{}},"loading":{"global":{"count":0},"local":{"question\u002Fget\u002F":false,"question\u002FgetAnswers\u002F367207731":false}},"club":{"tags":{},"admins":{"data":[]},"members":{"data":[]},"explore":{"candidateSyncClubs":{}},"profile":{},"checkin":{},"comments":{"paging":{},"loading":{},"meta":{},"ids":{}},"postList":{"paging":{},"loading":{},"ids":{}},"recommend":{"data":[]},"silences":{"data":[]},"application":{"profile":null}},"entities":{"users":{"5b6cbee5d01bbbae90228c8baf07c3aa":{"uid":615253332370133000,"userType":"people","id":"5b6cbee5d01bbbae90228c8baf07c3aa"}},"questions":{"367207731":{"type":"question","id":367207731,"title":"为什么图形学中把矩阵传入shader前就要完成计算，而不在GPU中完成矩阵计算？","questionType":"normal","created":1579524540,"updatedTime":1579524866,"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fquestions\u002F367207731","isMuted":false,"isVisible":true,"isNormal":true,"isEditable":false,"adminClosedComment":false,"hasPublishingDraft":false,"answerCount":18,"visitCount":33020,"commentCount":0,"followerCount":159,"collapsedAnswerCount":0,"excerpt":"问题1：请问下大佬，我看了很多图形学的书，全部都是在CPU中把矩阵计算完成再传入shader的，比如投影矩阵，为什么不把 fovy near far aspect 这些float的参数传入shader ，在shader里面用传进来的这四个float直接拼装计算这个矩阵？GPU不是更快吗？ 问题2：为什么需要用矩阵？直接线性变换不可以吗？比如平移，我直接在shader里面获取点坐标 pos.x=pos.x+1 这样不就平移了嘛？最后直接拿这个float4的pos再乘上一个投影矩阵不就好…","commentPermission":"all","detail":"\u003Cp\u003E问题1：请问下大佬，我看了很多图形学的书，全部都是在CPU中把矩阵计算完成再传入shader的，比如投影矩阵，为什么不把 fovy    near far  aspect 这些float的参数传入shader ，在shader里面用传进来的这四个float直接拼装计算这个矩阵？GPU不是更快吗？\u003C\u002Fp\u003E\u003Cp\u003E问题2：为什么需要用矩阵？直接线性变换不可以吗？比如平移，我直接在shader里面获取点坐标  pos.x=pos.x+1  这样不就平移了嘛？最后直接拿这个float4的pos再乘上一个投影矩阵不就好了？还省下了如此多0的计算量，要知道矩阵\u003C\u002Fp\u003E\u003Cp\u003E【1，0，0，0\u003C\u002Fp\u003E\u003Cp\u003E0，1，0，0，\u003C\u002Fp\u003E\u003Cp\u003E0，0，1，0，\u003C\u002Fp\u003E\u003Cp\u003E1，0，0，1】\u003C\u002Fp\u003E\u003Cp\u003E需要运算这么多0和1的无意义的相乘？\u003C\u002Fp\u003E\u003Cp\u003E我拿directx试了下，直接写线性公式然后投影的时候再乘投影矩阵也没遇到什么问题\u003C\u002Fp\u003E\u003Cp\u003E困扰多时！求大佬解惑感激不尽！刚学图形学的小萌新真的想不通\u003C\u002Fp\u003E","editableDetail":"\u003Cp\u003E问题1：请问下大佬，我看了很多图形学的书，全部都是在CPU中把矩阵计算完成再传入shader的，比如投影矩阵，为什么不把 fovy    near far  aspect 这些float的参数传入shader ，在shader里面用传进来的这四个float直接拼装计算这个矩阵？GPU不是更快吗？\u003C\u002Fp\u003E\u003Cp\u003E问题2：为什么需要用矩阵？直接线性变换不可以吗？比如平移，我直接在shader里面获取点坐标  pos.x=pos.x+1  这样不就平移了嘛？最后直接拿这个float4的pos再乘上一个投影矩阵不就好了？还省下了如此多0的计算量，要知道矩阵\u003C\u002Fp\u003E\u003Cp\u003E【1，0，0，0\u003C\u002Fp\u003E\u003Cp\u003E0，1，0，0，\u003C\u002Fp\u003E\u003Cp\u003E0，0，1，0，\u003C\u002Fp\u003E\u003Cp\u003E1，0，0，1】\u003C\u002Fp\u003E\u003Cp\u003E需要运算这么多0和1的无意义的相乘？\u003C\u002Fp\u003E\u003Cp\u003E我拿directx试了下，直接写线性公式然后投影的时候再乘投影矩阵也没遇到什么问题\u003C\u002Fp\u003E\u003Cp\u003E困扰多时！求大佬解惑感激不尽！刚学图形学的小萌新真的想不通\u003C\u002Fp\u003E","status":{"isLocked":false,"isClose":false,"isEvaluate":false,"isSuggest":false},"relationship":{"isAuthor":false,"isFollowing":false,"isAnonymous":false,"canLock":false,"canStickAnswers":false,"canCollapseAnswers":false,"voting":0},"topics":[{"id":"19566193","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19566193","name":"OpenGL","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002F50\u002Fv2-d315ea26866b2ea204e06f3f73787dc5_720w.jpg?source=54b3c3a5","topicType":"NORMAL"},{"id":"19570894","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19570894","name":"图形处理器（GPU）","avatarUrl":"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fv2-103b6f24b13efe7c1b3dd192e7f5b534_720w.jpg?source=54b3c3a5","topicType":"NORMAL"},{"id":"19616605","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19616605","name":"DirectX","avatarUrl":"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-5e7715df71c2e0891ae55759252a8035_720w.jpg?source=54b3c3a5","topicType":"NORMAL"},{"id":"19650614","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19650614","name":"矩阵","avatarUrl":"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-2c3efa17b99302ae60f63958d943bc94_720w.jpg?source=54b3c3a5","topicType":"NORMAL"},{"id":"20018494","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F20018494","name":"shader","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002Fb739d55bbaa6bcee38d396776b286fcb_l.jpg?source=1940ef5c","topicType":"NORMAL"}],"author":{"id":"734b56785ce04f84c1f828c26233ec99","urlToken":"TomReferce","name":"贪学先生","avatarUrl":"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-1e7a3825d9abd0de59947ab3ce48492b_l.jpg?source=1940ef5c","avatarUrlTemplate":"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-1e7a3825d9abd0de59947ab3ce48492b.jpg?source=1940ef5c","isOrg":false,"type":"people","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fpeople\u002F734b56785ce04f84c1f828c26233ec99","userType":"people","headline":"图形学爱好者","badge":[],"badgeV2":{"title":"","mergedBadges":[],"detailBadges":[],"icon":"","nightIcon":""},"gender":1,"isAdvertiser":false,"isPrivacy":false},"canComment":{"status":true,"reason":""},"thumbnailInfo":{"count":0,"type":"thumbnail_info","thumbnails":[]},"reviewInfo":{"type":"","tips":"","editTips":"","isReviewing":false,"editIsReviewing":false},"relatedCards":[],"muteInfo":{"type":""},"showAuthor":false,"isLabeled":false,"showEncourageAuthor":false,"voteupCount":13,"canVote":true,"visibleOnlyToAuthor":false}},"answers":{"981202593":{"id":981202593,"type":"answer","answerType":"normal","question":{"type":"question","id":367207731,"title":"为什么图形学中把矩阵传入shader前就要完成计算，而不在GPU中完成矩阵计算？","questionType":"normal","created":1579524540,"updatedTime":1579524866,"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fquestions\u002F367207731","relationship":{}},"author":{"id":"9f25f5ca280a92af834fff4453a8e620","urlToken":"meng-lang-lang","name":"幽玄","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-aad19bb0743777b9f97012a9f092ef99_l.jpg?source=1940ef5c","avatarUrlTemplate":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-aad19bb0743777b9f97012a9f092ef99.jpg?source=1940ef5c","isOrg":false,"type":"people","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fpeople\u002F9f25f5ca280a92af834fff4453a8e620","userType":"people","headline":"","badge":[],"badgeV2":{"title":"","mergedBadges":[],"detailBadges":[],"icon":"","nightIcon":""},"gender":1,"isAdvertiser":false,"followerCount":3037,"isFollowed":false,"isPrivacy":false},"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fanswers\u002F981202593","isCollapsed":false,"createdTime":1579577401,"updatedTime":1579577401,"extras":"","isCopyable":true,"isNormal":true,"voteupCount":22,"commentCount":1,"isSticky":false,"adminClosedComment":false,"commentPermission":"all","canComment":{"reason":"","status":true},"reshipmentSettings":"allowed","content":"\u003Cp\u003E答1：大多数可编程管线，可以参与编程的GPU阶段主要是vertex 阶段和fragment 阶段，而这俩阶段的特点都是GPU在每一帧要处理多个对象：vertex阶段要同时处理一堆顶点对象，fragment阶段要同时处理一堆像素对象。而对于每一帧，每一个将被渲染的物体它的M(odel)V(iew)P(rojection)矩阵一般是不变的，用CPU生成，计算一次即可。如果放到GPU端，反而要逐个顶点或者逐个像素计算生成一次（想象一下一个物体有一百万个顶点），这完全没必要。\u003C\u002Fp\u003E\u003Cp\u003E答2：因为变换不只有平移，还有旋转和缩放等，会占用掉矩阵中的大多数元素。\u003C\u002Fp\u003E\u003Cp\u003E多说两点。1，其实4x4的矩阵（一般只用到其中12个元素）并没浪费什么空间，换成很多人看好的四元数也不能改善多少，单四元数只能表示旋转，对偶四元数能表示旋转和平移但不包含缩放，用四元数最好的结果也需要4+4+3=11个变量，矩阵包含这三种变换也只需要12个变量而已。2，四元数的数值表达并不直观，不亲人，而数据来源一般都是亲人的（平移了多少，旋转了多少，缩放了多少，都是可以一眼看出的），即使我们在GPU用上对偶四元数，我们还是要先把这些“亲人的”数据转换成“不亲人的”四元数数据。\u003C\u002Fp\u003E","editableContent":"","excerpt":"答1：大多数可编程管线，可以参与编程的GPU阶段主要是vertex 阶段和fragment 阶段，而这俩阶段的特点都是GPU在每一帧要处理多个对象：vertex阶段要同时处理一堆顶点对象，fragment阶段要同时处理一堆像素对象。而对于每一帧，每一个将被渲染的物体它的M(odel)V(iew)P(rojection)矩阵一般是不变的，用CPU生成，计算一次即可。如果放到GPU端，反而要逐个顶点或者逐个像素计算生成一次（想象一下一个物体有一百万个顶点），这完全没…","collapsedBy":"nobody","collapseReason":"","annotationAction":null,"markInfos":[],"relevantInfo":{"isRelevant":false,"relevantType":"","relevantText":""},"suggestEdit":{"reason":"","status":false,"tip":"","title":"","unnormalDetails":{"status":"","description":"","reason":"","reasonId":0,"note":""},"url":""},"isLabeled":false,"rewardInfo":{"canOpenReward":false,"isRewardable":false,"rewardMemberCount":0,"rewardTotalMoney":0,"tagline":""},"relationship":{"isAuthor":false,"isAuthorized":false,"isNothelp":false,"isThanked":false,"isRecognized":false,"voting":0,"upvotedFollowees":[]},"adAnswer":null},"981422587":{"id":981422587,"type":"answer","answerType":"normal","question":{"type":"question","id":367207731,"title":"为什么图形学中把矩阵传入shader前就要完成计算，而不在GPU中完成矩阵计算？","questionType":"normal","created":1579524540,"updatedTime":1579524866,"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fquestions\u002F367207731","relationship":{}},"author":{"id":"7b91cb9b9869a7453e07f0a6da24f0b8","urlToken":"iGrfx","name":"Grfxlf","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002Fc650941e3e708bfa0b7242b3b78cec50_l.jpg?source=1940ef5c","avatarUrlTemplate":"https:\u002F\u002Fpic4.zhimg.com\u002Fc650941e3e708bfa0b7242b3b78cec50.jpg?source=1940ef5c","isOrg":false,"type":"people","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fpeople\u002F7b91cb9b9869a7453e07f0a6da24f0b8","userType":"people","headline":"","badge":[{"type":"best_answerer","description":"优秀答主","topics":[{"id":"19613730","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19613730","name":"计算机图形学","avatarUrl":"https:\u002F\u002Fpic1.zhimg.com\u002F95b86ea8b502d9aef1b13f621bba2ef3_l.jpg?source=1940ef5c","topicType":"NORMAL"}]}],"badgeV2":{"title":"计算机图形学话题下的优秀答主","mergedBadges":[{"type":"best","detailType":"best","title":"优秀答主","description":"计算机图形学话题下的优秀答主","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F20054793","sources":[{"id":"19613730","token":"19613730","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19613730","name":"计算机图形学","avatarPath":"95b86ea8b502d9aef1b13f621bba2ef3","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002F95b86ea8b502d9aef1b13f621bba2ef3_hd.jpg","description":"","priority":0}],"icon":"","nightIcon":""}],"detailBadges":[{"type":"best","detailType":"best_answerer","title":"优秀答主","description":"计算机图形学话题下的优秀答主","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F20054793","sources":[{"id":"19613730","token":"19613730","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19613730","name":"计算机图形学","avatarPath":"95b86ea8b502d9aef1b13f621bba2ef3","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002F95b86ea8b502d9aef1b13f621bba2ef3_hd.jpg","description":"","priority":0}],"icon":"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-bf0eec3c31c8e866c468f60eb296696c_l.png","nightIcon":"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-c724649168d8f9d36d7c3d13140a2594_l.png"}],"icon":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-bf0eec3c31c8e866c468f60eb296696c_l.png","nightIcon":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-c724649168d8f9d36d7c3d13140a2594_l.png"},"gender":1,"isAdvertiser":false,"followerCount":9369,"isFollowed":false,"isPrivacy":false},"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fanswers\u002F981422587","isCollapsed":false,"createdTime":1579590976,"updatedTime":1579590976,"extras":"","isCopyable":true,"isNormal":true,"voteupCount":6,"commentCount":0,"isSticky":false,"adminClosedComment":false,"commentPermission":"all","canComment":{"reason":"","status":true},"reshipmentSettings":"allowed","content":"\u003Col\u003E\u003Cli\u003E变换矩阵不仅仅影响着渲染，通常还会跟逻辑发生耦合，由于逻辑是在cpu下做，所以在渲染对象状态变化时计算一次即可。\u003C\u002Fli\u003E\u003Cli\u003E为什么用矩阵，其实矩阵够紧凑，他把变换所需的参数都“装进”4个4d向量里，如果想要传单个值，其实你也省不了什么，该传的标量总数还是那么多。至于你说的单位矩阵是个特殊情况。在一般情况下，只会作为初始化值，使用起来，除了w轴，其他轴都会被“填满”。\u003C\u002Fli\u003E\u003C\u002Fol\u003E","editableContent":"","excerpt":"变换矩阵不仅仅影响着渲染，通常还会跟逻辑发生耦合，由于逻辑是在cpu下做，所以在渲染对象状态变化时计算一次即可。为什么用矩阵，其实矩阵够紧凑，他把变换所需的参数都“装进”4个4d向量里，如果想要传单个值，其实你也省不了什么，该传的标量总数还是那么多。至于你说的单位矩阵是个特殊情况。在一般情况下，只会作为初始化值，使用起来，除了w轴，其他轴都会被“填满”。","collapsedBy":"nobody","collapseReason":"","annotationAction":null,"markInfos":[],"relevantInfo":{"isRelevant":false,"relevantType":"","relevantText":""},"suggestEdit":{"reason":"","status":false,"tip":"","title":"","unnormalDetails":{"status":"","description":"","reason":"","reasonId":0,"note":""},"url":""},"isLabeled":false,"rewardInfo":{"canOpenReward":false,"isRewardable":true,"rewardMemberCount":0,"rewardTotalMoney":0,"tagline":"真诚赞赏，手留余香"},"relationship":{"isAuthor":false,"isAuthorized":false,"isNothelp":false,"isThanked":false,"isRecognized":false,"voting":0,"upvotedFollowees":[]},"adAnswer":null},"981569730":{"id":981569730,"type":"answer","answerType":"normal","question":{"type":"question","id":367207731,"title":"为什么图形学中把矩阵传入shader前就要完成计算，而不在GPU中完成矩阵计算？","questionType":"normal","created":1579524540,"updatedTime":1579524866,"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fquestions\u002F367207731","relationship":{}},"author":{"id":"f34421c66b88d3f703fdefd24f4b1904","urlToken":"netwarm007","name":"文礼","avatarUrl":"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-f3ef123959d86274a1227bcac238c0df_l.jpg?source=1940ef5c","avatarUrlTemplate":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-f3ef123959d86274a1227bcac238c0df.jpg?source=1940ef5c","isOrg":false,"type":"people","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fpeople\u002Ff34421c66b88d3f703fdefd24f4b1904","userType":"people","headline":"超级码农","badge":[],"badgeV2":{"title":"","mergedBadges":[],"detailBadges":[],"icon":"","nightIcon":""},"gender":1,"isAdvertiser":false,"followerCount":109649,"isFollowed":false,"isPrivacy":true},"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fanswers\u002F981569730","isCollapsed":false,"createdTime":1579599508,"updatedTime":1579615930,"extras":"","isCopyable":true,"isNormal":true,"voteupCount":54,"commentCount":8,"isSticky":false,"adminClosedComment":false,"commentPermission":"all","canComment":{"reason":"","status":true},"reshipmentSettings":"allowed","content":"\u003Col\u003E\u003Cli\u003EGPU比CPU快，那是对大量重复计算说的。主要是因为GPU同时能进行几十个上百上千个同样的计算，而CPU只能进行几个。仿射矩阵，一般是绑定在Object，也就是场景物体上的。一个物体只需要一个。而Shader是绑定在顶点或者像素上的，一个Object往往有许多顶点或者对应许多像素。将仿射矩阵的计算放在shader里是可以的，但是如果一个object的所有顶点或者所对应的所有像素都是对应同一个仿射矩阵，那么重复计算是没有意义的，CPU只算一次反而很可能更快；\u003C\u002Fli\u003E\u003Cli\u003EGPU是为向量计算专门设计的，对于向量的加减乘除只需要一个时钟周期就可以完成。现代的GPU甚至对于两个4x4矩阵的计算，也能一个时钟周期完成。因此将矩阵拆开成为标量，分别计算平移旋转缩放，反而是更慢的。何况，矩阵不仅能够表示平移旋转缩放，还能表示切变、镜像等很多变换。\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003Cp\u003E总的来说，你有这样的问题说明你的思考还不够深入，对GPU的工作原理也还认识得比较肤浅，建议加强“学”，暂时少点儿“思”\u003C\u002Fp\u003E","editableContent":"","excerpt":"GPU比CPU快，那是对大量重复计算说的。主要是因为GPU同时能进行几十个上百上千个同样的计算，而CPU只能进行几个。仿射矩阵，一般是绑定在Object，也就是场景物体上的。一个物体只需要一个。而Shader是绑定在顶点或者像素上的，一个Object往往有许多顶点或者对应许多像素。将仿射矩阵的计算放在shader里是可以的，但是如果一个object的所有顶点或者所对应的所有像素都是对应同一个仿射矩阵，那么重复计算是没有意义的，CPU只算一…","collapsedBy":"nobody","collapseReason":"","annotationAction":null,"markInfos":[],"relevantInfo":{"isRelevant":false,"relevantType":"","relevantText":""},"suggestEdit":{"reason":"","status":false,"tip":"","title":"","unnormalDetails":{"status":"","description":"","reason":"","reasonId":0,"note":""},"url":""},"isLabeled":false,"rewardInfo":{"canOpenReward":false,"isRewardable":false,"rewardMemberCount":0,"rewardTotalMoney":0,"tagline":""},"relationship":{"isAuthor":false,"isAuthorized":false,"isNothelp":false,"isThanked":false,"isRecognized":false,"voting":0,"upvotedFollowees":[]},"adAnswer":null},"981607673":{"id":981607673,"type":"answer","answerType":"normal","question":{"type":"question","id":367207731,"title":"为什么图形学中把矩阵传入shader前就要完成计算，而不在GPU中完成矩阵计算？","questionType":"normal","created":1579524540,"updatedTime":1579524866,"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fquestions\u002F367207731","relationship":{}},"author":{"id":"f76cc47c7de7323b10ece9d850514561","urlToken":"xziar","name":"XZiar","avatarUrl":"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-3185693e980c2e65dd4848950d392ddf_l.jpg?source=1940ef5c","avatarUrlTemplate":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-3185693e980c2e65dd4848950d392ddf.jpg?source=1940ef5c","isOrg":false,"type":"people","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fpeople\u002Ff76cc47c7de7323b10ece9d850514561","userType":"people","headline":"这个知乎很烂，我什么也没法留下。","badge":[],"badgeV2":{"title":"","mergedBadges":[],"detailBadges":[],"icon":"","nightIcon":""},"gender":0,"isAdvertiser":false,"followerCount":38834,"isFollowed":false,"isPrivacy":false},"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fanswers\u002F981607673","isCollapsed":false,"createdTime":1579601906,"updatedTime":1579601906,"extras":"","isCopyable":true,"isNormal":true,"voteupCount":11,"commentCount":0,"isSticky":false,"adminClosedComment":false,"commentPermission":"all","canComment":{"reason":"","status":true},"reshipmentSettings":"allowed","content":"\u003Cp\u003E当然可以放在GPU上做，没人拦着你。\u003C\u002Fp\u003E\u003Cp\u003E这里其实是两个问题：\u003C\u002Fp\u003E\u003Cp\u003E1.透视矩阵为什么放CPU上做\u003C\u002Fp\u003E\u003Cp\u003E2.透视矩阵为什么和VS阶段分开做\u003C\u002Fp\u003E\u003Cp\u003E先回答第二个：不考虑合批，一个drawcall里的mesh应该是共享同一个透视矩阵的，所以这个矩阵可以分离出来单独计算一遍，而不是100万个顶点就算100w遍。\u003C\u002Fp\u003E\u003Cp\u003E再回答第一个：现在显卡的编程模型没法引入一个单独的“全局共享”的计算阶段，所以这个分离出来的步骤就干脆放在CPU上了，反正算个矩阵对于CPU也就几到几十ns的事，你缺这个时间嘛……\u003C\u002Fp\u003E\u003Cp class=\"ztext-empty-paragraph\"\u003E\u003Cbr\u002F\u003E\u003C\u002Fp\u003E\u003Cp\u003E对于第二个问题：如果你只要做平移，那传一个向量直接操作当然没问题。但又不是只需要做平移，比如旋转怎么办？\u003C\u002Fp\u003E\u003Cp\u003E这个时候仿射变换通常就要用到矩阵了。当然对于旋转你用四元数也不是不行。\u003C\u002Fp\u003E\u003Cp\u003E更麻烦的是你还要做透视变换，这个时候对于三维点还需要扩展一维进行运算……\u003C\u002Fp\u003E","editableContent":"","excerpt":"当然可以放在GPU上做，没人拦着你。 这里其实是两个问题： 1.透视矩阵为什么放CPU上做 2.透视矩阵为什么和VS阶段分开做 先回答第二个：不考虑合批，一个drawcall里的mesh应该是共享同一个透视矩阵的，所以这个矩阵可以分离出来单独计算一遍，而不是100万个顶点就算100w遍。 再回答第一个：现在显卡的编程模型没法引入一个单独的“全局共享”的计算阶段，所以这个分离出来的步骤就干脆放在CPU上了，反正算个矩阵对于CPU也就几到几…","collapsedBy":"nobody","collapseReason":"","annotationAction":null,"markInfos":[],"relevantInfo":{"isRelevant":false,"relevantType":"","relevantText":""},"suggestEdit":{"reason":"","status":false,"tip":"","title":"","unnormalDetails":{"status":"","description":"","reason":"","reasonId":0,"note":""},"url":""},"isLabeled":false,"rewardInfo":{"canOpenReward":false,"isRewardable":false,"rewardMemberCount":0,"rewardTotalMoney":0,"tagline":""},"relationship":{"isAuthor":false,"isAuthorized":false,"isNothelp":false,"isThanked":false,"isRecognized":false,"voting":0,"upvotedFollowees":[]},"adAnswer":null},"1560208609":{"id":1560208609,"type":"answer","answerType":"normal","question":{"type":"question","id":367207731,"title":"为什么图形学中把矩阵传入shader前就要完成计算，而不在GPU中完成矩阵计算？","questionType":"normal","created":1579524540,"updatedTime":1579524866,"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fquestions\u002F367207731","relationship":{}},"author":{"id":"0347a4fa88cafa12abf39b139b1658c1","urlToken":"quat","name":"马小刀","avatarUrl":"https:\u002F\u002Fpic4.zhimg.com\u002F73cfa33e4_l.jpg?source=1940ef5c","avatarUrlTemplate":"https:\u002F\u002Fpic4.zhimg.com\u002F73cfa33e4.jpg?source=1940ef5c","isOrg":false,"type":"people","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fpeople\u002F0347a4fa88cafa12abf39b139b1658c1","userType":"people","headline":"要不要开挂？","badge":[{"type":"identity","description":"Gameloft C++开发工程师","topics":[]}],"badgeV2":{"title":"Gameloft C++开发工程师","mergedBadges":[{"type":"identity","detailType":"identity","title":"认证","description":"Gameloft C++开发工程师","url":"https:\u002F\u002Fwww.zhihu.com\u002Faccount\u002Fverification\u002Fintro","sources":[],"icon":"","nightIcon":""}],"detailBadges":[{"type":"identity","detailType":"identity_people","title":"已认证的个人","description":"Gameloft C++开发工程师","url":"https:\u002F\u002Fwww.zhihu.com\u002Faccount\u002Fverification\u002Fintro","sources":[],"icon":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-235258cecb8a0f184c4d38483cd6f6b6_l.png","nightIcon":"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-45e870b8f0982bcd7537ea4627afbd00_l.png"}],"icon":"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-235258cecb8a0f184c4d38483cd6f6b6_l.png","nightIcon":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-45e870b8f0982bcd7537ea4627afbd00_l.png"},"gender":1,"isAdvertiser":false,"followerCount":1985,"isFollowed":false,"isPrivacy":false},"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fanswers\u002F1560208609","isCollapsed":false,"createdTime":1604562915,"updatedTime":1619363563,"extras":"","isCopyable":false,"isNormal":true,"voteupCount":248,"commentCount":11,"isSticky":false,"adminClosedComment":false,"commentPermission":"all","canComment":{"reason":"","status":true},"reshipmentSettings":"need_payment","content":"\u003Cp\u003E　　初学者有疑惑很正常，一般的图形学书籍或教程不大会讲这个，好像传递变换矩阵是不言而喻的。那就在这里谈一谈图形学相关的基本数学知识吧～\u003C\u002Fp\u003E\u003Cblockquote\u003E问题1：为什么不把 fovy near far  aspect 这些float的参数传入shader ，在shader里面用传进来的这四个float直接拼装计算这个矩阵？GPU不是更快吗？\u003C\u002Fblockquote\u003E\u003Cp\u003E　　说GPU更快的，我不由得要反问一句：既然GPU比CPU快，那为什么现在的计算机硬件还在用CPU？甭管什么计算，直接都塞给GPU做得了。你可能还会觉得像我这样只传递了4个 float 变量，你们传递mat4变换矩阵却用了16个 float 变量，还没有我来得经济。\u003C\u002Fp\u003E\u003Cp\u003E　　首先，传递 fovy, aspect_ratio, near, far  四个参数给 shader 去计算投影矩阵，是行得通得的，但是没必要。传入vertex shader后，每个流水单元会计算投影矩阵，导致大量重复的计算（有多少个顶点就有多少次重复的计算），虽然不会招致GPU的开销，你只是把CPU该做的活儿分配给GPU做了。CPU主要完成任务调度、逻辑控制、硬件IO。\u003Cb\u003EGPU的根本任务是解放和发展计算生产力的\u003C\u002Fb\u003E，你把本该由一个人干的活儿交给一千多个人去做，每个人输出同样的结果，\u003Cb\u003E生产力没有得到提升！\u003C\u002Fb\u003ECPU 这边也有 SIMD（单指令多数据）指令集SSE，可以同时计算 4 个float，但是这活儿甩给它也是浪费啊，你看看透视投影的代码，需要计算4个值，每个值的途径都不一样，哪里用得上并行？\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-cpp\"\u003E\u003Cspan class=\"n\"\u003Emat4\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003Eperspective\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"kt\"\u003Efloat\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EfieldOfView\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"kt\"\u003Efloat\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EaspectRatio\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"kt\"\u003Efloat\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Enear\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"kt\"\u003Efloat\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Efar\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"kt\"\u003Efloat\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Edepth\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Enear\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Efar\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"kt\"\u003Efloat\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003E_11\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E1\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Estd\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E::\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Etan\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EfieldOfView\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"kt\"\u003Efloat\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003E_00\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003E_11\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Easpect\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"kt\"\u003Efloat\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003E_22\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Efar\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Enear\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Edepth\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"kt\"\u003Efloat\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003E_32\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E2\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Enear\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Efar\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Edepth\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Emat4\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\n\t\t\u003Cspan class=\"n\"\u003E_00\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E   \u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E   \u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E   \u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n\t\t  \u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003E_11\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E   \u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E   \u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n\t\t  \u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E   \u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003E_22\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003E_32\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n\t\t  \u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E   \u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E  \u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E   \u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp\u003E　　再说万一哪一天需求变更，我们的工程不仅用透视投影，还需要切换到正交投影看看效果（比如CAD工程制图），你说“我的shader只支持透视投影，还不支持正交投影，需要再加代码”。别人将 glm::perspective 换成 glm::ortho，三下五除二就弄好了，说“我传递的是投影矩阵，不是 fovy, aspect_ratio, near, far 4个变量，不管正交还是透视都是支持的”。\u003C\u002Fp\u003E\u003Cp\u003E\u003Cb\u003E　　以时间换空间\u003C\u002Fb\u003E，节省传递数据在某些情况下还是可行的。为了渲染逼真的效果，贴图用的越来越大，占用空间以O(n^2)增长。I\u002FO的数据量随之增大。比如在\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fwww.pbrt.org\u002F\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EPBR\u003C\u002Fa\u003E（Physically Based Rendering）里，法向量贴图数据，本来要传递XYZ三个通道的，你可以只传递XY两个通道，在 shader 里计算 z = sqrt(1 - x * x - y *y)。再比如 instanced rendering，你的模型变换矩阵只有平移 (x, y, z) 和均匀缩放s，没有旋转，你可以传递一个 vec4(x, y, z, s) 而不是mat4 model，在shader 里组装模型矩阵。我这里用的vec4，而不是vec3 + float，只占用一个 uniform 槽位。\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-glsl\"\u003E\u003Cspan class=\"k\"\u003Ein\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Evec4\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Einstance\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"k\"\u003Ein\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Evec3\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eposition\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"k\"\u003Eout\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Evec3\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EworldPosition\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"k\"\u003Evoid\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\u003Cspan class=\"cp\"\u003E#if 1\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"n\"\u003Emat4\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Emodel\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Emat4\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\n\t\t\t\u003Cspan class=\"n\"\u003Einstance\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ew\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"mo\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"mo\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"mo\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n\t\t\t\u003Cspan class=\"mo\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Einstance\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ew\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"mo\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"mo\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n\t\t\t\u003Cspan class=\"mo\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"mo\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Einstance\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ew\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"mo\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n\t\t\t\u003Cspan class=\"n\"\u003Einstance\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ex\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Einstance\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ey\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Einstance\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ez\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"n\"\u003EworldPosition\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Emodel\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Evec4\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eposition\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"mf\"\u003E1.0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)).\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Exyz\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"cp\"\u003E#else\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"n\"\u003EworldPosition\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eposition\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Einstance\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ew\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Einstance\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Exyz\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"cp\"\u003E#endif\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp class=\"ztext-empty-paragraph\"\u003E\u003Cbr\u002F\u003E\u003C\u002Fp\u003E\u003Cblockquote\u003E问题2：为什么需要用矩阵？直接线性变换不可以吗？\u003C\u002Fblockquote\u003E\u003Cp\u003E　　题主需要多补充\u003Cb\u003E线性代数\u003C\u002Fb\u003E的知识了。什么是变换？平移、旋转、缩放、斜切、镜像等操作，这些都是，每个都有单独的公式。用上矩阵这个工具表示，就可以\u003Cb\u003E统一描述\u003C\u002Fb\u003E起来。\u003Cb\u003E线性变换 \u003C\u002Fb\u003Ey = A*x 就是空间中的值映射到自身空间中去。这里的 A 就是变换矩阵。在 2D 平面上，用 mat3 表示各种变换。在 3D 空间里，用 mat4 表示各种变换。同理，在 N 维空间里，用 N+1 阶的矩阵表示变换。多出的一维是平移（translation），即加法运算。矩阵无法直接处理加法，加了一个维度解决问题。\u003Cb\u003E仿射变换\u003C\u002Fb\u003E等于线性变换加平移，y = A*x + b 用乘法写变成：\u003Cimg src=\"https:\u002F\u002Fwww.zhihu.com\u002Fequation?tex=%5Cbegin%7Bvmatrix%7Dy+%5C%5C1+%5Cend%7Bvmatrix%7D+%3D+%5Cbegin%7Bvmatrix%7DA+%26+b+%5C%5C+0+%261+%5Cend%7Bvmatrix%7D+%2A+%5Cbegin%7Bvmatrix%7D+X+%5C%5C+1%5Cend%7Bvmatrix%7D\" alt=\"\\begin{vmatrix}y \\\\1 \\end{vmatrix} = \\begin{vmatrix}A &amp;amp; b \\\\ 0 &amp;amp;1 \\end{vmatrix} * \\begin{vmatrix} X \\\\ 1\\end{vmatrix}\" eeimg=\"1\"\u002F\u003E ，也就是大家常听说的\u003Cb\u003E齐次坐标系\u003C\u002Fb\u003E。\u003C\u002Fp\u003E\u003Cp\u003E　　题主发现矩阵中有很多0，参与运算很是浪费，毕竟 0 与其他数加减乘除的结果还是 0。用手机届的术语就是——流量给白白浪费了。其实，你看的都是单一的变换矩阵——单独的平移、单独的旋转、单独的缩放，如果组合在一起，矩阵就没有那么多0 了。什么？你说最后一行是 (0, 0, 0, 1)，没必要参与运算呀～是的，所以除了mat3、mat4类型，也提供了 mat3x4、mat4x3 类型给你用。你用的 Direct3D 图形 API，对应 float3x4、float4x3 类型。但是，碰到透视投影最后一行的 (0, 0, -1, 0)，使得你要添加一些矩阵单独元素的计算来完成矩阵计算，这与内置的可同时计算 4 个float的指令（可以类比SSE指令集）比起来，得不偿失。\u003C\u002Fp\u003E\u003Cp\u003E　　可优化的空间在这里。注意到在 OpenGL 计算变换后的坐标时，\u003Cbr\u002F\u003Egl_Position = projection * (view * (model * vec4(position, 1.0)));。\u003Cbr\u002F\u003E这里加了括号，可以不加括号，因为\u003Cb\u003E矩阵的乘法满足结合律\u003C\u002Fb\u003E（vec4 可以看成 4x1 的矩阵）。加括号的好处是，降低了计算量，每次都是 ma4 乘以 vec4，不加括号会有两次的 mat4 乘以 mat4。你用的 Direct3D，行优先（row_major），矩阵右乘，所以不用考虑加括号的问题。想一想大学算法课程里面的\u003Cb\u003E矩阵连乘\u003C\u002Fb\u003E，用的\u003Cb\u003E动态规划\u003C\u002Fb\u003E求解最优结合顺序。大多时候，你也会看到传递 modelView 或 viewProjection 或 modelViewProjection 乘好了的矩阵，而不是 model, view, projection三个矩阵都传递。假如多个渲染物体的 view 和 projection 矩阵都是一样的，你就可以在 CPU 端完成计算\u003Cbr\u002F\u003EviewProjection = projection * view; 后再送给GPU接着下面的计算，而不是看到 shader 内置了矩阵的运算，就直接扔给GPU了。\u003C\u002Fp\u003E\u003Cp\u003E　　除了变换顶点坐标，涉及光照计算才会变换顶点的法向量。两者的变换代码是不一样的。法向量在世界坐标系的值为 _normal = transpose(inverse(mat3(model))) * normal;，这个在《ＯpenGL编程指南》红宝书的第7版附录上有数学推导，这里不展开讨论。另，该书已经出到第9版了，有兴趣的小伙伴们可以下手。\u003C\u002Fp\u003E\u003Ca data-draft-node=\"block\" data-draft-type=\"mcn-link-card\" data-mcn-id=\"1307772953271201792\"\u003E\u003C\u002Fa\u003E\u003Cp\u003E其实，_normal = mat3(transpose(inverse(model))) * normal; 也是正确的，但是没有使用后者，因为降阶后的计算量小很多（\u003Cb\u003E矩阵求逆\u003C\u002Fb\u003E的开销大，mat3 比 mat4 求逆的运算量少很多）。上面的 transpose 和 inverse 之间可以交换顺序，即先转置后求逆与先求逆后转置的效果是一样的。如果有\u003Cb\u003E先验条件\u003C\u002Fb\u003E矩阵是\u003Cb\u003E单位正交矩阵\u003C\u002Fb\u003E，则有矩阵的逆等于矩阵的转置这一性质，转置操作是沿着主对角线翻转元素，就根本没有计算可言，带入上面的式子，相当于二次转置，得到原矩阵，式子简化为 _normal = mat3(model) * normal; ，对比顶点的变换 _position = model * vec4(position, 1.0)，削去了平移。这也是对的，平移向量本来就不改变向量的值。既然单位正交矩阵可以大大降低运算量，那怎么得到呢？旋转操作不会改变矩阵的正交性质。缩放会改变，尤其是各个轴的缩放系数不一样时。这也是为什么有人说我光照计算的时候，都是对顶点和法线量乘以模型变换矩阵来变换的，好像也是对的。没错，\u003Cb\u003E刚体变换\u003C\u002Fb\u003E满足要求。\u003C\u002Fp\u003E\u003Cp\u003E　　矩阵是表达变换最通用的表达方式，但不一定是表达变换的最佳表达方式，看场合。在动画的关键帧之间经常用到插值（interpolation）。平移和缩放变换可以线性插值（lerp），旋转必须做球面线性插值（slerp）。刚体变换由平移和旋转组成，仿射变换另外加上缩放。\u003Cb\u003E仅提供了仿射变换的矩阵，是可以从中分别提取出平移、缩放和旋转的量。\u003C\u002Fb\u003E复合起来后的变换，在旋转上的信息可能有丢失。比如一个玩偶绕原点三圈，0度和1080度的变换矩阵都是一样的，仅知晓矩阵是无法还原出转动的角度的。帧间动画的插值无法用两个矩阵简单表示，可以改用\u003Cb\u003E欧拉角\u003C\u002Fb\u003E，只要约定好XYZ轴的先后变换顺序。然后用欧拉角又可能出现万向锁（gimbal lock）问题。引入\u003Cb\u003E四元数\u003C\u002Fb\u003E\u003Csup data-text=\"Ken Shoemake - Quaternions\" data-url=\"http:\u002F\u002Fwww-scf.usc.edu\u002F~csci520\u002Fhandouts\u002Fshoemaker_quaternion.pdf\" data-draft-node=\"inline\" data-draft-type=\"reference\" data-numero=\"1\"\u003E[1]\u003C\u002Fsup\u003E就很方便球面线性插值，极端情况下（接近180度）甚至需要对偶四元数（\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Feuclideanspace.com\u002Fmaths\u002Falgebra\u002FrealNormedAlgebra\u002Fother\u002FdualQuaternion\u002Findex.htm\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003Edual quaternion\u003C\u002Fa\u003E）。题主刚开始学，听起来云里雾里，以后学到骨骼的蒙皮动画会遇到的。\u003C\u002Fp\u003E","editableContent":"","excerpt":"初学者有疑惑很正常，一般的图形学书籍或教程不大会讲这个，好像传递变换矩阵是不言而喻的。那就在这里谈一谈图形学相关的基本数学知识吧～ 问题1：为什么不把 fovy near far aspect 这些float的参数传入shader ，在shader里面用传进来的这四个float直接拼装计算这个矩阵？GPU不是更快吗？ 说GPU更快的，我不由得要反问一句：既然GPU比CPU快，那为什么现在的计算机硬件还在用CPU？甭管什么计算，直接都塞给GPU做得了。你可能还会…","collapsedBy":"nobody","collapseReason":"","annotationAction":null,"markInfos":[],"relevantInfo":{"isRelevant":false,"relevantType":"","relevantText":""},"suggestEdit":{"reason":"","status":false,"tip":"","title":"","unnormalDetails":{"status":"","description":"","reason":"","reasonId":0,"note":""},"url":""},"isLabeled":false,"settings":{"tableOfContent":{"enabled":false}},"rewardInfo":{"canOpenReward":false,"isRewardable":true,"rewardMemberCount":0,"rewardTotalMoney":0,"tagline":"真诚赞赏，手留余香"},"relationship":{"isAuthor":false,"isAuthorized":false,"isNothelp":false,"isThanked":false,"isRecognized":false,"voting":0,"upvotedFollowees":[]},"adAnswer":null}},"articles":{},"columns":{},"topics":{},"roundtables":{},"favlists":{},"comments":{},"notifications":{},"ebooks":{},"activities":{},"feeds":{},"pins":{},"promotions":{},"drafts":{},"chats":{},"posts":{},"clubs":{},"clubTags":{},"zvideos":{}},"currentUser":"5b6cbee5d01bbbae90228c8baf07c3aa","account":{"lockLevel":{},"unlockTicketStatus":false,"unlockTicket":null,"challenge":[],"errorStatus":false,"message":"","isFetching":false,"accountInfo":{},"urlToken":{"loading":false}},"settings":{"socialBind":null,"inboxMsg":null,"notification":{},"email":{},"privacyFlag":null,"blockedUsers":{"isFetching":false,"paging":{"pageNo":1,"pageSize":6},"data":[]},"blockedFollowees":{"isFetching":false,"paging":{"pageNo":1,"pageSize":6},"data":[]},"ignoredTopics":{"isFetching":false,"paging":{"pageNo":1,"pageSize":6},"data":[]},"restrictedTopics":null,"laboratory":{}},"notification":{},"people":{"profileStatus":{},"activitiesByUser":{},"answersByUser":{},"answersSortByVotesByUser":{},"answersIncludedByUser":{},"votedAnswersByUser":{},"thankedAnswersByUser":{},"voteAnswersByUser":{},"thankAnswersByUser":{},"topicAnswersByUser":{},"zvideosByUser":{},"articlesByUser":{},"articlesSortByVotesByUser":{},"articlesIncludedByUser":{},"pinsByUser":{},"questionsByUser":{},"commercialQuestionsByUser":{},"favlistsByUser":{},"followingByUser":{},"followersByUser":{},"mutualsByUser":{},"followingColumnsByUser":{},"followingQuestionsByUser":{},"followingFavlistsByUser":{},"followingTopicsByUser":{},"publicationsByUser":{},"columnsByUser":{},"allFavlistsByUser":{},"brands":null,"creationsByUser":{},"creationsSortByVotesByUser":{},"creationsFeed":{},"infinity":{},"batchUsers":{}},"env":{"ab":{"config":{"experiments":[{"expId":"launch-li_video-3","expPrefix":"li_video","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-qa_art2qa_new-3","expPrefix":"qa_art2qa_new","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-qa_cl_guest-2","expPrefix":"qa_cl_guest","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-qa_repost-2","expPrefix":"qa_repost","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-tp_zrec-8","expPrefix":"tp_zrec","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-us_adjust_new-11","expPrefix":"us_adjust_new","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-us_noti_count-8","expPrefix":"us_noti_count","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_andplay_d-2","expPrefix":"vd_andplay_d","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_hookupplay_an-2","expPrefix":"vd_hookupplay_an","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_ios_play-10","expPrefix":"vd_ios_play","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_timeguide-2","expPrefix":"vd_timeguide","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_video_replay-3","expPrefix":"vd_video_replay","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_zvideo_link-10","expPrefix":"vd_zvideo_link","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-zanswer-2","expPrefix":"zanswer","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-recnew_2th-3","expPrefix":"recnew_2th","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"se_infinity6-4","expPrefix":"se_infinity6","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"se_meta_ss-4","expPrefix":"se_meta_ss","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"qa_cdzixun-1","expPrefix":"qa_cdzixun","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"vd_video_tab-9","expPrefix":"vd_video_tab","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"li_tp_paidanswer-9","expPrefix":"li_tp_paidanswer","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"tp_content-1","expPrefix":"tp_content","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"gw_qrlogin-1","expPrefix":"gw_qrlogin","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"rec_expslotpaid-1","expPrefix":"rec_expslotpaid","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"xuanpinceshi-5_v3","expPrefix":"xuanpinceshi","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"office_xp-2_v2","expPrefix":"office_xp","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"xuanpinab-1_v4","expPrefix":"xuanpinab","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"pc_editorplugin-1_v3","expPrefix":"pc_editorplugin","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"Test_Punk-3_v2","expPrefix":"Test_Punk","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"meta_ebook-2_v2","expPrefix":"meta_ebook","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"webpImg-2_v3","expPrefix":"webpImg","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"vdox_cmt-1_v2","expPrefix":"vdox_cmt","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"ffzix_xgdzwz-3_v1","expPrefix":"ffzix_xgdzwz","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"hwtj_bottom_btn-4_v2","expPrefix":"hwtj_bottom_btn","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"rec_new2th-2_v4","expPrefix":"rec_new2th","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"se_zp_five-4_v1","expPrefix":"se_zp_five","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"hw_aa_30-3_v2","expPrefix":"hw_aa_30","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"hw_aa_50-2_v1","expPrefix":"hw_aa_50","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"se_filter-4_v7","expPrefix":"se_filter","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"se_sug_exp-4_v2","expPrefix":"se_sug_exp","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"se_personal_ab-5_v16","expPrefix":"se_personal_ab","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"phrase_recall-3_v4","expPrefix":"phrase_recall","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"test_3-2_v1","expPrefix":"test_3","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"book_kpwz-2_v1","expPrefix":"book_kpwz","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"se_cp_post3-3_v1","expPrefix":"se_cp_post3","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false}],"params":[{"id":"haojiakp","type":"Int","value":"0","layerId":"haojiakp"},{"id":"ge_newbie3","type":"Int","value":"0","chainId":"_gene_","layerId":"ge_newbie3","key":180},{"id":"web_column_auto_invite","type":"String","value":"0","layerId":"webqa_layer_1"},{"id":"zanswer","type":"Int","value":"1","layerId":"l-zanswer"},{"id":"se_cp_post3","type":"Int","value":"1","chainId":"_gene_","layerId":"se_cp_post3","key":706},{"id":"gue_visit_n_artcard","type":"String","value":"1","layerId":"gueqa_layer_579"},{"id":"tp_dingyue_video","type":"String","value":"0","chainId":"_all_","layerId":"tptp_layer_4"},{"id":"gue_vid_tab","type":"String","value":"7","layerId":"guevd_layer_900"},{"id":"pfd_newbie","type":"Int","value":"0","chainId":"_gene_","layerId":"pfd_newbie","key":63},{"id":"gue_video_guide","type":"String","value":"1","layerId":"guevd_layer_625"},{"id":"click_new_tb","type":"Int","value":"0","chainId":"_gene_","layerId":"1vYQ","key":422},{"id":"gue_zvideo_link","type":"String","value":"1","layerId":"guevd_layer_2"},{"id":"test_rec","type":"Int","value":"10","layerId":"test_rec"},{"id":"se_zp_five","type":"Int","value":"1","chainId":"_gene_","layerId":"se_zp_five","key":344},{"id":"tp_contents","type":"String","value":"2","chainId":"_all_","layerId":"tptp_layer_627"},{"id":"se_lr","type":"Int","value":"0","chainId":"_gene_","layerId":"se_lr","key":698},{"id":"se_mixer_roll","type":"Int","value":"0","chainId":"_gene_","layerId":"se_mixer_roll","key":699},{"id":"club_fn","type":"Int","value":"1","layerId":"club_fn"},{"id":"se_dwd_all","type":"Int","value":"0","chainId":"_gene_","layerId":"se_dwd_all","key":621},{"id":"web_collection_guest","type":"String","value":"1","layerId":"webqa_layer_4"},{"id":"ge_sxzx","type":"String","value":"0","chainId":"_gene_","layerId":"gere_layer_990","key":3060},{"id":"se_dssm","type":"Int","value":"0","chainId":"_gene_","layerId":"se_dssm","key":392},{"id":"ge_v_rank_v3","type":"Int","value":"0","chainId":"_gene_","layerId":"FPcB","key":581},{"id":"gue_art_ui","type":"String","value":"2","layerId":"gueqa_layer_647"},{"id":"web_audit_01","type":"String","value":"case1","layerId":"webre_layer_1"},{"id":"xuanpinab","type":"Int","value":"0","layerId":"xuanpinab"},{"id":"edu_cd1","type":"Int","value":"0","layerId":"l18Y"},{"id":"hwtj_bottom_btn","type":"Int","value":"4","layerId":"jrhg"},{"id":"recnew_2th","type":"Int","value":"21","chainId":"_gene_","layerId":"l-recnew_2th","key":67},{"id":"ge_usercard1","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_742","key":2740},{"id":"ge_infinity6","type":"String","value":"2","chainId":"_gene_","layerId":"gese_layer_815","key":2817},{"id":"ge_relation2","type":"String","value":"1","chainId":"_gene_","layerId":"gese_layer_815","key":2796},{"id":"test_3","type":"Int","value":"1","chainId":"_gene_","layerId":"dABe","key":637},{"id":"li_edu_page","type":"String","value":"old","chainId":"_all_","layerId":"lili_layer_580"},{"id":"gue_video_replay","type":"String","value":"2","layerId":"guevd_layer_3"},{"id":"gue_bulletmb","type":"String","value":"0","layerId":"guevd_layer_812"},{"id":"top_test_4_liguangyi","type":"String","value":"1","chainId":"_all_","layerId":"iosus_layer_1"},{"id":"tp_topic_style","type":"String","value":"0","chainId":"_all_","layerId":"tptp_layer_4"},{"id":"ge_upload","type":"String","value":"0","chainId":"_gene_","layerId":"geus_layer_839","key":2892},{"id":"office_xp","type":"Int","value":"6666","layerId":"office_xp"},{"id":"show_ad","type":"Int","value":"0","chainId":"_gene_","layerId":"show_ad","key":27},{"id":"li_paid_answer_exp","type":"String","value":"0","chainId":"_all_","layerId":"lili_layer_3"},{"id":"ge_sug_rep","type":"String","value":"1","chainId":"_gene_","layerId":"gese_layer_1034","key":3158},{"id":"gue_iosplay","type":"String","value":"1","layerId":"guevd_layer_810"},{"id":"gue_q_share","type":"String","value":"0","layerId":"gueqa_layer_647"},{"id":"web_answerlist_ad","type":"String","value":"0","layerId":"webqa_layer_1"},{"id":"ge_entity","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_946","key":3036},{"id":"gue_andplayd","type":"String","value":"1","layerId":"guevd_layer_686"},{"id":"gue_art2qa","type":"String","value":"0","layerId":"gueqa_layer_579"},{"id":"ge_yuzhi_v1","type":"String","value":"1","chainId":"_gene_","layerId":"gese_layer_1029","key":3127},{"id":"ge_meta_ss","type":"String","value":"1","chainId":"_gene_","layerId":"gese_layer_834","key":3079},{"id":"ge_guess","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_938","key":2912},{"id":"ge_dipin_pre","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_1000","key":3124},{"id":"se_4a","type":"Int","value":"0","chainId":"_gene_","layerId":"rtiq","key":335},{"id":"hw_aa_30","type":"Int","value":"2","chainId":"_gene_","layerId":"hw_aa_30","key":361},{"id":"Full_ans_fav","type":"Int","value":"0","chainId":"_gene_","layerId":"Pnd6","key":372},{"id":"se_cp_question","type":"Int","value":"0","chainId":"_gene_","layerId":"se_cp_question","key":704},{"id":"web_login","type":"String","value":"0","layerId":"webgw_layer_759"},{"id":"li_vip_verti_search","type":"String","value":"0","chainId":"_all_","layerId":"lili_layer_2"},{"id":"gue_goods_card","type":"String","value":"0","layerId":"gueqa_layer_1"},{"id":"ge_search_ui","type":"String","value":"1","chainId":"_gene_","layerId":"gese_layer_838","key":2898},{"id":"se_filter","type":"Int","value":"2","chainId":"_gene_","layerId":"2NQZ","key":363},{"id":"book_kpwz","type":"Int","value":"1","chainId":"_gene_","layerId":"Zyox","key":671},{"id":"se_prank_decay","type":"Int","value":"0","chainId":"_gene_","layerId":"se_prank_decay","key":703},{"id":"web_heifetz_grow_ad","type":"String","value":"1","layerId":"webgw_layer_3"},{"id":"ge_emoji","type":"String","value":"0","chainId":"_gene_","layerId":"getp_layer_827","key":3209},{"id":"comment","type":"Int","value":"0","chainId":"_gene_","layerId":"comment","key":644},{"id":"se_prerank_card","type":"Int","value":"0","chainId":"_gene_","layerId":"se_prerank_card","key":656},{"id":"ge_video","type":"String","value":"1","chainId":"_gene_","layerId":"geli_layer_856","key":2831},{"id":"gue_sharp","type":"String","value":"1","layerId":"guevd_layer_686"},{"id":"gue_v_serial","type":"String","value":"1","layerId":"guevd_layer_695"},{"id":"se_personal_ab","type":"Int","value":"2","chainId":"_gene_","layerId":"VzX9","key":554},{"id":"ad_com_zhi","type":"Int","value":"0","chainId":"_gene_","layerId":"ad_com_zhi","key":571},{"id":"gue_card_test","type":"String","value":"1","layerId":"gueqa_layer_2"},{"id":"gue_cdzixun","type":"String","value":"0","layerId":"gueqa_layer_3"},{"id":"xuanpinceshi","type":"Int","value":"3399","layerId":"xuanpinceshi"},{"id":"andserial","type":"Int","value":"0","chainId":"_gene_","layerId":"andserial","key":711},{"id":"ts_cardtitle","type":"Int","value":"0","layerId":"ZED7"},{"id":"li_sp_mqbk","type":"String","value":"0","chainId":"_all_","layerId":"lili_layer_748"},{"id":"zr_expslotpaid","type":"String","value":"1","chainId":"_all_","layerId":"zrrec_layer_11"},{"id":"pf_adjust","type":"String","value":"1","chainId":"_all_","layerId":"pfus_layer_9"},{"id":"li_panswer_topic","type":"String","value":"0","chainId":"_all_","layerId":"lili_layer_602"},{"id":"gue_bullet_second","type":"String","value":"1","layerId":"guevd_layer_1"},{"id":"webpImg","type":"Int","value":"2","layerId":"JnVt"},{"id":"hw_aa_50","type":"Int","value":"1","chainId":"_gene_","layerId":"hw_aa_50","key":362},{"id":"web_scl_rec","type":"String","value":"0","layerId":"webgw_layer_759"},{"id":"gue_fo_recom","type":"String","value":"0","layerId":"gueqa_layer_780"},{"id":"Test_Punk","type":"Int","value":"1","layerId":"Test_Punk"},{"id":"ts_refresh","type":"Int","value":"1","layerId":"EBn6"},{"id":"se_cvr_boost","type":"Int","value":"0","chainId":"_gene_","layerId":"se_cvr_boost","key":183},{"id":"rec_3th","type":"Int","value":"11","chainId":"_gene_","layerId":"rec_3th","key":697},{"id":"se_mixer_km","type":"Int","value":"0","chainId":"_gene_","layerId":"se_mixer_km","key":649},{"id":"qap_question_author","type":"String","value":"0","chainId":"_all_","layerId":"qapqa_layer_2"},{"id":"ge_item","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_945","key":2971},{"id":"pf_noti_entry_num","type":"String","value":"2","chainId":"_all_","layerId":"pfus_layer_718"},{"id":"gue_repost","type":"String","value":"1","layerId":"gueqa_layer_671"},{"id":"qap_question_visitor","type":"String","value":" 0","chainId":"_all_","layerId":"qapqa_layer_2"},{"id":"web_answer_list_ad","type":"String","value":"1","layerId":"webqa_layer_4"},{"id":"ge_prf_rec","type":"String","value":"0","chainId":"_gene_","layerId":"getop_layer_991","key":3040},{"id":"ffzix_xgdzwz","type":"Int","value":"1","layerId":"ffzix_xgdzwz"},{"id":"ts_refresh2","type":"Int","value":"1","layerId":"heWh"},{"id":"km_detail_knn","type":"Int","value":"0","layerId":"TY59"},{"id":"rec_new2th","type":"Int","value":"1","chainId":"_gene_","layerId":"Hump","key":320},{"id":"gue_playh_an","type":"String","value":"1","layerId":"guevd_layer_622"},{"id":"ios_serial","type":"Int","value":"0","chainId":"_gene_","layerId":"ios_serial","key":673},{"id":"se_cp_answer","type":"Int","value":"0","chainId":"_gene_","layerId":"se_cp_answer","key":705},{"id":"web_sem_ab","type":"String","value":"1","layerId":"webgw_layer_3"},{"id":"tp_zrec","type":"String","value":"1","chainId":"_all_","layerId":"tptp_layer_619"},{"id":"meta_ebook","type":"Int","value":"1","layerId":"meta_ebook"},{"id":"vdox_cmt","type":"Int","value":"0","layerId":"vdox_cmt"},{"id":"se_sug_exp","type":"Int","value":"3","chainId":"_gene_","layerId":"9ZDG","key":522},{"id":"phrase_recall","type":"Int","value":"1","chainId":"_gene_","layerId":"phrase_recall","key":603},{"id":"gue_bullet_guide","type":"String","value":"发个弹幕聊聊…","layerId":"guevd_layer_0"},{"id":"correct_cnn","type":"Int","value":"0","chainId":"_gene_","layerId":"correct_cnn","key":397},{"id":"ge_newyanzhi","type":"String","value":"0","chainId":"_gene_","layerId":"geus_layer_1019","key":2788},{"id":"gue_messrec","type":"String","value":"0","layerId":"gueqa_layer_769"},{"id":"gue_recmess","type":"String","value":"0","layerId":"gueqa_layer_795"},{"id":"se_ffzx_jushen1","type":"String","value":"0","chainId":"_all_","layerId":"sese_layer_4"},{"id":"ge_newcard","type":"String","value":"3","chainId":"_gene_","layerId":"geus_layer_839","key":2997},{"id":"se_fix_ebook","type":"Int","value":"0","chainId":"_gene_","layerId":"se_fix_ebook","key":103},{"id":"se_images","type":"Int","value":"0","chainId":"_gene_","layerId":"se_images","key":652},{"id":"ge_hard_s_ma","type":"String","value":"0","chainId":"_gene_","layerId":"geli_layer_856","key":3031},{"id":"ge_rec_2th","type":"String","value":"11","chainId":"_gene_","layerId":"geli_layer_965","key":3023},{"id":"gue_profile_video","type":"String","value":"1","layerId":"guevd_layer_5"},{"id":"pc_editorplugin","type":"Int","value":"0","layerId":"pc_editorplugin"},{"id":"pfd_newbie2","type":"Int","value":"0","chainId":"_gene_","layerId":"pfd_newbie2","key":71},{"id":"zr_slotpaidexp","type":"String","value":"1","chainId":"_all_","layerId":"zrrec_layer_5"}],"chains":[{"chainId":"_all_"}],"encodedParams":"CnS0AMICPwCmAVgBugK7Am0C9AuIAUUCQwC0CgEL7Ap9AkwLGwBWDNwLNwwHDGALNAxPAWkBdAHAAlILawGfAr8CiQyEApACDwsqAjsCxwJqAbcAuQKJApsL4AtAAaECwQIKAlsCjQHkCrULZwCMAtcLzwtHABI6AAEAAAEAAAAAAAAVAAIBAQAAAQABAQAAAAIAAAECAQAAAAABAgAAAQALAAAAAQAAAwEAAAMAAAALAA=="},"triggers":{}},"userAgent":{"Edge":false,"IE":false,"Wechat":false,"Weibo":false,"QQ":false,"MQQBrowser":false,"Qzone":false,"Mobile":false,"Android":false,"iOS":false,"isAppleDevice":false,"Zhihu":false,"ZhihuHybrid":false,"isBot":false,"Tablet":false,"UC":false,"Sogou":false,"Qihoo":false,"Baidu":false,"BaiduApp":false,"Safari":false,"GoogleBot":false,"AndroidDaily":false,"iOSDaily":false,"WxMiniProgram":false,"BaiduMiniProgram":false,"QQMiniProgram":false,"JDMiniProgram":false,"isWebView":false,"isMiniProgram":false,"origin":"Mozilla\u002F5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\u002F537.36 (KHTML, like Gecko) Chrome\u002F90.0.4430.85 Safari\u002F537.36"},"appViewConfig":{},"ctx":{"path":"\u002Fquestion\u002F367207731","query":{},"href":"http:\u002F\u002Fwww.zhihu.com\u002Fquestion\u002F367207731","host":"www.zhihu.com"},"trafficSource":"production","edition":{"beijing":false,"baidu":false,"sogou":false,"baiduBeijing":false,"sogouBeijing":false,"sogouInput":false,"baiduSearch":false,"googleSearch":false,"miniProgram":false,"xiaomi":false},"theme":"light","enableShortcut":true,"referer":"","xUDId":"AFDb8Tc0yRKPTjhlczFeFEN9vmUruaPySuc=","mode":"ssr","conf":{},"xTrafficFreeOrigin":"","ipInfo":{},"logged":true,"vars":{"passThroughHeaders":{}}},"me":{"columnContributions":[]},"label":{"recognizerLists":{}},"ecommerce":{},"comments":{"pagination":{},"collapsed":{},"reverse":{},"reviewing":{},"conversation":{},"parent":{}},"commentsV2":{"stickers":[],"commentWithPicPermission":{},"notificationsComments":{},"pagination":{},"collapsed":{},"reverse":{},"reviewing":{},"conversation":{},"conversationMore":{},"parent":{}},"pushNotifications":{"default":{"isFetching":false,"isDrained":false,"ids":[]},"follow":{"isFetching":false,"isDrained":false,"ids":[]},"vote_thank":{"isFetching":false,"isDrained":false,"ids":[]},"currentTab":"default","notificationsCount":{"default":0,"follow":0,"vote_thank":0}},"messages":{"data":{},"currentTab":"common","messageCount":0},"register":{"registerValidateSucceeded":null,"registerValidateErrors":{},"registerConfirmError":null,"sendDigitsError":null,"registerConfirmSucceeded":null},"login":{"loginUnregisteredError":false,"loginBindWechatError":false,"loginConfirmError":null,"sendDigitsError":null,"needSMSIdentify":false,"validateDigitsError":false,"loginConfirmSucceeded":null,"qrcodeLoginToken":"","qrcodeLoginScanStatus":0,"qrcodeLoginError":null,"qrcodeLoginReturnNewToken":false},"switches":{},"captcha":{"captchaNeeded":false,"captchaValidated":false,"captchaBase64String":null,"captchaValidationMessage":null,"loginCaptchaExpires":false},"sms":{"supportedCountries":[]},"chat":{"chats":{},"inbox":{"recents":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"strangers":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"friends":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"search":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"config":{"newCount":0,"strangerMessageSwitch":false,"strangerMessageUnread":false,"friendCount":0}},"global":{"isChatMqttExisted":false}},"emoticons":{"emoticonGroupList":[],"emoticonGroupDetail":{}},"creator":{"currentCreatorUrlToken":null,"homeData":{"recommendQuestions":[]},"tools":{"question":{"invitationCount":{"questionFolloweeCount":0,"questionTotalCount":0},"goodatTopics":[]},"customPromotion":{"itemLists":{}},"recommend":{"recommendTimes":{}}},"explore":{"academy":{"tabs":[],"article":{}}},"rights":[],"rightsStatus":{},"levelUpperLimit":10,"account":{"growthLevel":{}},"mcn":{},"applyStatus":{},"videoSupport":{},"mcnManage":{},"tasks":{},"recentlyCreated":[],"analysis":{"all":{},"answer":{},"zvideo":{},"article":{},"pin":{},"singleContent":{}},"announcement":{},"school":{"tabs":[],"contents":[],"banner":null,"entities":{}}},"question":{"followers":{},"concernedFollowers":{},"answers":{"367207731":{"isFetching":false,"isDrained":false,"ids":[981569730,981202593,981607673,1560208609,981422587],"newIds":[981569730,981202593,981607673,1560208609,981422587],"totals":18,"error":false,"isPrevDrained":true,"previous":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fquestions\u002F367207731\u002Fanswers?include=data%5B%2A%5D.is_normal%2Cadmin_closed_comment%2Creward_info%2Cis_collapsed%2Cannotation_action%2Cannotation_detail%2Ccollapse_reason%2Cis_sticky%2Ccollapsed_by%2Csuggest_edit%2Ccomment_count%2Ccan_comment%2Ccontent%2Ceditable_content%2Cattachment%2Cvoteup_count%2Creshipment_settings%2Ccomment_permission%2Ccreated_time%2Cupdated_time%2Creview_info%2Crelevant_info%2Cquestion%2Cexcerpt%2Cis_labeled%2Cpaid_info%2Cpaid_info_content%2Crelationship.is_authorized%2Cis_author%2Cvoting%2Cis_thanked%2Cis_nothelp%2Cis_recognized%3Bdata%5B%2A%5D.mark_infos%5B%2A%5D.url%3Bdata%5B%2A%5D.author.follower_count%2Cbadge%5B%2A%5D.topics%3Bdata%5B%2A%5D.settings.table_of_content.enabled&amp;limit=5&amp;offset=0&amp;platform=desktop&amp;sort_by=default","next":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fquestions\u002F367207731\u002Fanswers?include=data%5B%2A%5D.is_normal%2Cadmin_closed_comment%2Creward_info%2Cis_collapsed%2Cannotation_action%2Cannotation_detail%2Ccollapse_reason%2Cis_sticky%2Ccollapsed_by%2Csuggest_edit%2Ccomment_count%2Ccan_comment%2Ccontent%2Ceditable_content%2Cattachment%2Cvoteup_count%2Creshipment_settings%2Ccomment_permission%2Ccreated_time%2Cupdated_time%2Creview_info%2Crelevant_info%2Cquestion%2Cexcerpt%2Cis_labeled%2Cpaid_info%2Cpaid_info_content%2Crelationship.is_authorized%2Cis_author%2Cvoting%2Cis_thanked%2Cis_nothelp%2Cis_recognized%3Bdata%5B%2A%5D.mark_infos%5B%2A%5D.url%3Bdata%5B%2A%5D.author.follower_count%2Cbadge%5B%2A%5D.topics%3Bdata%5B%2A%5D.settings.table_of_content.enabled&amp;limit=5&amp;offset=5&amp;platform=desktop&amp;sort_by=default"}},"hiddenAnswers":{},"updatedAnswers":{},"collapsedAnswers":{},"notificationAnswers":{},"invitedQuestions":{"total":{"count":null,"isEnd":false,"isLoading":false,"questions":[]},"followees":{"count":null,"isEnd":false,"isLoading":false,"questions":[]}},"laterQuestions":{"count":null,"globalWriteAnimate":false,"isEnd":false,"isLoading":false,"questions":[]},"waitingQuestions":{"recommend":{"isEnd":false,"isLoading":false,"questions":[]},"hot":{"isEnd":false,"isLoading":false,"questions":[]},"newest":{"isEnd":false,"isLoading":false,"questions":[]},"invite":{"isEnd":false,"isLoading":false,"questions":[]}},"invitationCandidates":{},"inviters":{},"invitees":{},"similarQuestions":{},"relatedCommodities":{},"bio":{},"brand":{},"permission":{},"adverts":{},"advancedStyle":{},"commonAnswerCount":0,"hiddenAnswerCount":0,"meta":{},"bluestarRanklist":{},"relatedSearch":{},"autoInvitation":{},"simpleConcernedFollowers":{},"draftStatus":{},"disclaimers":{}},"shareTexts":{},"answers":{"voters":{},"copyrightApplicants":{},"favlists":{},"newAnswer":{},"concernedUpvoters":{},"simpleConcernedUpvoters":{},"paidContent":{},"settings":{}},"banner":{},"topic":{"bios":{},"hot":{},"newest":{},"top":{},"unanswered":{},"questions":{},"followers":{},"contributors":{},"parent":{},"children":{},"bestAnswerers":{},"wikiMeta":{},"index":{},"intro":{},"meta":{},"schema":{},"creatorWall":{},"wikiEditInfo":{},"committedWiki":{},"landingBasicData":{},"landingExcellentItems":[],"landingExcellentEditors":[],"landingCatalog":[],"landingEntries":{}},"explore":{"recommendations":{},"specials":{"entities":{},"order":[]},"roundtables":{"entities":{},"order":[]},"collections":{},"columns":{}},"articles":{"voters":{},"concernedUpvoters":{}},"favlists":{"relations":{}},"pins":{"reviewing":{}},"topstory":{"recommend":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"follow":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"room":{"meta":{},"isFetching":false,"afterId":0,"items":[],"next":null},"followWonderful":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"sidebar":null,"announcement":{},"hotListCategories":[],"hotList":[],"guestFeeds":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"followExtra":{"isNewUser":null,"isFetched":false,"followCount":0,"followers":[]},"hotDaily":{"data":[],"paging":{}},"hotHighlight":{"isFetching":false,"isDrained":false,"data":[],"paging":{}},"banner":{}},"upload":{},"video":{"data":{},"shareVideoDetail":{},"last":{}},"zvideos":{"campaigns":{},"tagoreCategory":[],"recommendations":{},"insertable":{},"recruit":{"form":{"platform":"","nickname":"","followerCount":"","domain":"","contact":""},"submited":false,"ranking":[]},"club":{},"qyActivityData":{},"batchVideos":{},"contribution":{"configs":{},"contributionLists":{},"recommendQuestions":{"isLoading":true,"paging":{"isEnd":false,"isStart":true,"totals":0},"data":[]},"questionSearchResults":{"isLoading":true,"paging":{"isEnd":false,"isStart":true,"totals":0},"data":[]}}},"guide":{"guide":{"isFetching":false,"isShowGuide":false}},"reward":{"answer":{},"article":{},"question":{}},"search":{"recommendSearch":[],"topSearch":{},"searchValue":{},"suggestSearch":{},"attachedInfo":{},"nextOffset":{},"topicReview":{},"generalByQuery":{},"generalByQueryInADay":{},"generalByQueryInAWeek":{},"generalByQueryInThreeMonths":{},"peopleByQuery":{},"clubentityByQuery":{},"clubPostByQuery":{},"topicByQuery":{},"zvideoByQuery":{},"columnByQuery":{},"liveByQuery":{},"albumByQuery":{},"eBookByQuery":{},"kmGeneralByQuery":{}},"publicEditPermission":{},"vessay":{"common":{"draftId":null,"source":{"type":null,"id":null},"autoSave":true,"blockUnload":true,"isCalibratingEditing":false,"editingTrackData":{"editingOutlines":[],"editingVideos":[]},"newAddMaterialData":{},"audioCache":{}},"loading":{"isLoading":false,"text":"正在加载中"},"player":{"currentTime":0,"totalTime":0,"playing":false},"library":{"material":{},"materialSearchResult":{},"music":{},"musicLibraryCategories":[],"musicUrls":{}},"track":{"trackData":{"dataVersion":1,"videoTrack":[],"audioTrack":[],"musicTrack":[],"voiceOverData":{}},"previewEditingTrackData":{"editingSubtitleItem":{},"editingVideoItem":{}},"selectedTrackItems":[],"outlineRemoveMaterial":{},"outlineAppliedStyle":{}}},"readStatus":{},"draftHistory":{"history":{},"drafts":{}},"notifications":{"recent":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"history":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"notificationActors":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"recentNotificationEntry":"all"},"specials":{"entities":{},"all":{"data":[],"paging":{},"isLoading":false}},"collections":{"hot":{"data":[],"paging":{},"isLoading":false},"collectionFeeds":{}},"userProfit":{"permission":{"permissionStatus":{"zhiZixuan":0,"recommend":-1,"task":0,"plugin":0,"infinity":0},"visible":false}},"mcn":{"bindInfo":{},"memberCategoryList":[],"producerList":[],"categoryList":[],"lists":{},"banners":{},"protocolStatus":{"isAgreedNew":true,"isAgreedOld":true},"probationCountdownDays":0},"mcnActivity":{"household":{"products":{},"rankList":{"total":{},"yesterday":{}}}},"brand":{"contentPlugin":{}},"host":{"roundtable":{"subjects":{},"applications":{"total":0},"online":{"total":0},"applies":{},"details":{},"includedResource":{},"hotQuestions":{},"warmupContents":{},"batchInclude":{}},"special":{"applications":{"total":0,"pages":{},"entities":{}},"censorHistory":{},"drafts":{}}},"campaign":{"single":{},"list":{},"videoMakerAcq":{},"vote":{},"cardCollecting":{"message":null,"profile":{"balance":"0","chance":0,"coinNum":0,"gatherClose":false,"isGotMagicCard":false,"isPay":false,"partitionStart":false,"totalDone":0,"withdrawStart":false},"sharePoster":{"share":"","sendCard":"","invite":""},"shareLink":null,"shareIntention":"share","shareKey":null,"shareCardId":null,"inviterInfo":null,"giverInfo":null,"prize":null,"receivedCard":null,"newCoinCount":null,"newCardList":[],"newUserCardCount":1,"taskList":[],"prizeList":null,"cardList":null,"panel":{"showTaskPanel":false,"showRewardPanel":false},"modal":{"showWelcomeModal":false,"showFusionModal":false,"showFusionPromptModal":false,"showShareModal":false,"showBackModal":false}},"zhiboPandian2020":null,"boarding":{}},"knowledgePlan":{"lists":{},"allCreationRankList":{},"featuredQuestions":{}},"wallE":{"protectHistory":{"total":0,"pages":{},"entities":{}}},"roundtables":{"hotQuestions":{},"warmupContents":{},"hotDiscussions":{},"selectedContents":{},"roundtables":{}},"helpCenter":{"entities":{"question":{},"category":{}},"categories":[],"commonQuestions":[],"relatedQuestions":{}},"republish":{},"commercialReport":{"commercialTypes":[]},"creatorMCN":{"mcn":{},"mcnStatistics":{},"isNoAuth":false,"creatorManageData":[],"creatorManageDataTotal":1,"mcnDomains":[]},"commentManage":{"commentList":{"ids":[],"entities":{},"nextOffset":0,"urlToken":""},"subCommentList":{"ids":[],"entities":{},"paging":{"next":"","isEnd":false}}},"zhiPlus":{"permissionStatus":9999}},"subAppName":"main"}</script><script crossorigin="" src="https://static.zhihu.com/heifetz/vendor.bfefaa5cfee5584ea98c.js"></script><script crossorigin="" src="https://static.zhihu.com/heifetz/main.app.076f0e9d09e20c2770f8.js"></script><script crossorigin="" src="https://static.zhihu.com/heifetz/main.question-routes.50ae18bd508b4392b49d.js"></script><script src="https://hm.baidu.com/hm.js?98beee57fd2ef70ccdd5ca52b9740c49" async=""></script><script crossorigin="" src="https://unpkg.zhimg.com/za-js-sdk@2.31.0/dist/zap.js"></script><script crossorigin="" src="https://zz.bdstatic.com/linksubmit/push.js"></script><div><div style="display: none;">想来知乎工作？请发送邮件到 jobs@zhihu.com</div></div><div><div><div class="css-8pdeid"></div></div></div><script crossorigin="" src="https://pay.zhihu.com/api/js"></script></body></html>