---
title : 自动快照存档
---

* TIME: 2021-02-05 22:59:55
* URL: <https://github.com/rbenv/ruby-build.git>

-----

Skip to content

[ ](https://github.com/)

[ Sign up
](/join?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-
name%3E%2F%3Crepo-name%3E&source=header-repo)

  * Why GitHub? 

[Features →](/features)

    * [Code review](/features/code-review/)
    * [Project management](/features/project-management/)
    * [Integrations](/features/integrations)
    * [Actions](/features/actions)
    * [Packages](/features/packages)
    * [Security](/features/security)
    * [Team management](/features#team-management)
    * [Hosting](/features#hosting)
    * [Mobile](/mobile)
    * [Customer stories →](/customer-stories)
    * [Security →](/security)

  * [Team](/team)
  * [Enterprise](/enterprise)
  * Explore 

    * [Explore GitHub →](/explore)

#### Learn & contribute

    * [Topics](/topics)
    * [Collections](/collections)
    * [Trending](/trending)
    * [Learning Lab](https://lab.github.com/)
    * [Open source guides](https://opensource.guide)

#### Connect with others

    * [Events](https://github.com/events)
    * [Community forum](https://github.community)
    * [GitHub Education](https://education.github.com)
    * [GitHub Stars program](https://stars.github.com)

  * [Marketplace](/marketplace)
  * Pricing 

[Plans →](/pricing)

    * [Compare plans](/pricing#feature-comparison)
    * [Contact Sales](https://enterprise.github.com/contact)
    * [Nonprofit →](/nonprofit)
    * [Education →](https://education.github.com)

![](https://github.githubassets.com/images/search-key-slash.svg)

  * [ ![]() In this repository  All GitHub  ↵ Jump to ↵ ]()

  * No suggested jump to results

  * [ ![]() In this repository  All GitHub  ↵ Jump to ↵ ]()
  * [ ![]() In this repository  All GitHub  ↵ Jump to ↵ ]()

[ Sign in ](/login?return_to=%2Frbenv%2Fruby-build) [ Sign up
](/join?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-
name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=rbenv%2Fruby-build)

{{ message }}

#  [rbenv](/rbenv) / **[ruby-build](/rbenv/ruby-build) **

  * [ Watch ](/login?return_to=%2Frbenv%2Fruby-build) [ 103 ](/rbenv/ruby-build/watchers)
  * [ Star ](/login?return_to=%2Frbenv%2Fruby-build) [ 3.4k ](/rbenv/ruby-build/stargazers)
  * [ Fork ](/login?return_to=%2Frbenv%2Fruby-build) [ 709 ](/rbenv/ruby-build/network/members)

Compile and install Ruby

[ MIT License ](/rbenv/ruby-build/blob/master/LICENSE)

[ 3.4k stars ](/rbenv/ruby-build/stargazers) [ 709 forks ](/rbenv/ruby-
build/network/members)

[ Star ](/login?return_to=%2Frbenv%2Fruby-build)

[ Watch ](/login?return_to=%2Frbenv%2Fruby-build)

  * [ Code ](/rbenv/ruby-build)
  * [ Issues 36 ](/rbenv/ruby-build/issues)
  * [ Pull requests 8 ](/rbenv/ruby-build/pulls)
  * [ Actions ](/rbenv/ruby-build/actions)
  * [ Wiki ](/rbenv/ruby-build/wiki)
  * [ Security ](/rbenv/ruby-build/security)
  * [ Insights ](/rbenv/ruby-build/pulse)

More

  * [ Code ](/rbenv/ruby-build)
  * [ Issues ](/rbenv/ruby-build/issues)
  * [ Pull requests ](/rbenv/ruby-build/pulls)
  * [ Actions ](/rbenv/ruby-build/actions)
  * [ Wiki ](/rbenv/ruby-build/wiki)
  * [ Security ](/rbenv/ruby-build/security)
  * [ Insights ](/rbenv/ruby-build/pulse)

master

[ **2** branches ](/rbenv/ruby-build/branches) [ **168** tags ](/rbenv/ruby-
build/tags)

[ Go to file ](/rbenv/ruby-build/find/master) Code

[ ](https://docs.github.com/articles/which-remote-url-should-i-use)

Clone

HTTPS  GitHub CLI

Use Git or checkout with SVN using the web URL.

Work fast with our official CLI. [Learn more](https://cli.github.com).

  * [ Open with GitHub Desktop ](https://desktop.github.com)
  * [ Download ZIP ](/rbenv/ruby-build/archive/master.zip)

#### Launching GitHub Desktop

If nothing happens, [download GitHub Desktop](https://desktop.github.com/) and
try again.

Go back

#### Launching GitHub Desktop

If nothing happens, [download GitHub Desktop](https://desktop.github.com/) and
try again.

Go back

#### Launching Xcode

If nothing happens, [download Xcode](https://developer.apple.com/xcode/) and
try again.

Go back

#### Launching Visual Studio

If nothing happens, [download the GitHub extension for Visual
Studio](https://visualstudio.github.com/) and try again.

Go back

## Latest commit

[
![@hsbt](https://avatars1.githubusercontent.com/u/12301?s=60&u=ff463d5b4856759aeb902725ad89b4392442077d&v=4)
](/hsbt)

[hsbt](/rbenv/ruby-build/commits?author=hsbt "View all commits by hsbt")
[Merge pull request](/rbenv/ruby-
build/commit/763b14af70523064c9a81469c471b21423a47f8b "Merge pull request
#1504 from koic/add_definition_for_jruby_9_2_14_0

Add definition for JRuby 9.2.14.0") [#1504](https://github.com/rbenv/ruby-
build/pull/1504) [from koic/add_definition_for_jruby_9_2_14_0](/rbenv/ruby-
build/commit/763b14af70523064c9a81469c471b21423a47f8b "Merge pull request
#1504 from koic/add_definition_for_jruby_9_2_14_0

Add definition for JRuby 9.2.14.0")

…

Loading status checks…

[763b14a](/rbenv/ruby-build/commit/763b14af70523064c9a81469c471b21423a47f8b) [
7 days ago ](/rbenv/ruby-
build/commit/763b14af70523064c9a81469c471b21423a47f8b)

[Merge pull request](/rbenv/ruby-
build/commit/763b14af70523064c9a81469c471b21423a47f8b)
[#1504](https://github.com/rbenv/ruby-build/pull/1504) [from
koic/add_definition_for_jruby_9_2_14_0](/rbenv/ruby-
build/commit/763b14af70523064c9a81469c471b21423a47f8b)

    
    
    Add definition for JRuby 9.2.14.0

763b14a

## Git stats

  * [ **1,833** commits  ](/rbenv/ruby-build/commits/master)

## Files

[Permalink](/rbenv/ruby-build/tree/763b14af70523064c9a81469c471b21423a47f8b)

Failed to load latest commit information.

Type

Name

Latest commit message

Commit time

[.github/workflows](/rbenv/ruby-build/tree/master/.github/workflows "This path
skips through empty directories")

[Split macOS test to GitHub Actions. Because Travis CI add a rate-
limi…](/rbenv/ruby-build/commit/cbc0ddc7db280585af4ccf14a74774cdf8d48ff6
"Split macOS test to GitHub Actions. Because Travis CI add a rate-limit for
OSS project")

9 days ago

[bin](/rbenv/ruby-build/tree/master/bin "bin")

[Bump version to 20201210](/rbenv/ruby-
build/commit/61a3330a4b27cfbddc174e19e404cc4b374a5661 "Bump version to
20201210")

8 days ago

[script](/rbenv/ruby-build/tree/master/script "script")

[Rename definition to truffleruby+graalvm](/rbenv/ruby-
build/commit/30895f03c460b725d53a3c5b58bc68b2f834c409 "Rename definition to
truffleruby+graalvm

* '+' needs to be considered part of the name for --definitions and -l
  to see truffleruby and truffleruby+graalvm as separate.")

5 months ago

[share/ruby-build](/rbenv/ruby-build/tree/master/share/ruby-build "This path
skips through empty directories")

[Merge pull request](/rbenv/ruby-
build/commit/763b14af70523064c9a81469c471b21423a47f8b "Merge pull request
#1504 from koic/add_definition_for_jruby_9_2_14_0

Add definition for JRuby 9.2.14.0") [#1504](https://github.com/rbenv/ruby-
build/pull/1504) [from koic/add_definition_for_jruby_9_2_14_0](/rbenv/ruby-
build/commit/763b14af70523064c9a81469c471b21423a47f8b "Merge pull request
#1504 from koic/add_definition_for_jruby_9_2_14_0

Add definition for JRuby 9.2.14.0")

7 days ago

[test](/rbenv/ruby-build/tree/master/test "test")

[Merge pull request](/rbenv/ruby-
build/commit/99f6bcbe49f1de632083d98930ad6497f4b76f2b "Merge pull request
#1457 from uzxmx/feature/specify-complete-mirror-url

Support specifying the complete mirror URL")
[#1457](https://github.com/rbenv/ruby-build/pull/1457) [from
uzxmx/feature/specify-complete-mirror-url](/rbenv/ruby-
build/commit/99f6bcbe49f1de632083d98930ad6497f4b76f2b "Merge pull request
#1457 from uzxmx/feature/specify-complete-mirror-url

Support specifying the complete mirror URL")

15 days ago

[.gitignore](/rbenv/ruby-build/blob/master/.gitignore ".gitignore")

[Added gitignore for bats repository](/rbenv/ruby-
build/commit/a96273d07a53830450f364accf4ea6b366831bd5 "Added gitignore for
bats repository")

4 years ago

[.travis.yml](/rbenv/ruby-build/blob/master/.travis.yml ".travis.yml")

[Split macOS test to GitHub Actions. Because Travis CI add a rate-
limi…](/rbenv/ruby-build/commit/cbc0ddc7db280585af4ccf14a74774cdf8d48ff6
"Split macOS test to GitHub Actions. Because Travis CI add a rate-limit for
OSS project")

9 days ago

[CODE_OF_CONDUCT.md](/rbenv/ruby-build/blob/master/CODE_OF_CONDUCT.md
"CODE_OF_CONDUCT.md")

[Rename CONDUCT.md to CODE_OF_CONDUCT.md](/rbenv/ruby-
build/commit/bbbb4e30e94c34869be43295af8c8e704a22632a "Rename CONDUCT.md to
CODE_OF_CONDUCT.md

Conforms to github's conventional filename")

5 months ago

[LICENSE](/rbenv/ruby-build/blob/master/LICENSE "LICENSE")

[Reformat LICENSE and REAMDE](/rbenv/ruby-
build/commit/419f16e35c666ab19e11438a3ea8e280eae9689e "Reformat LICENSE and
REAMDE

Wrap at 80 characters.")

7 years ago

[README.md](/rbenv/ruby-build/blob/master/README.md "README.md")

[Add RUBY_BUILD_MIRROR_PACKAGE_URL to specify the complete mirror
URL](/rbenv/ruby-build/commit/b034b8cd370fb0638c65c27ddf0c1f03b171dc6c "Add
RUBY_BUILD_MIRROR_PACKAGE_URL to specify the complete mirror URL

Signed-off-by: Mingxiang Xue <mingxiangxue@gmail.com>")

5 months ago

[install.sh](/rbenv/ruby-build/blob/master/install.sh "install.sh")

[Fix install file mode for files in share/](/rbenv/ruby-
build/commit/861f7d73de5faa8e96c903d13989c646d9ce0474 "Fix install file mode
for files in share/

install\(1\) defaults to file mode 0755 which is inappropriate for Ruby

definitions")

7 years ago

View code

##  README.md

# ruby-build

ruby-build is a command-line utility that makes it easy to install virtually
any version of Ruby, from source.

It is available as a plugin for [rbenv](https://github.com/rbenv/rbenv) that
provides the `rbenv install` command, or as a standalone program.

## Installation

    
    
    # Using Homebrew on macOS
    $ brew install ruby-build
    
    # As an rbenv plugin
    $ mkdir -p "$(rbenv root)"/plugins
    $ git clone https://github.com/rbenv/ruby-build.git "$(rbenv root)"/plugins/ruby-build
    
    # As a standalone program
    $ git clone https://github.com/rbenv/ruby-build.git
    $ PREFIX=/usr/local ./ruby-build/install.sh

### Upgrading

    
    
    # Via Homebrew
    $ brew update && brew upgrade ruby-build
    
    # As an rbenv plugin
    $ git -C "$(rbenv root)"/plugins/ruby-build pull

## Usage

### Basic Usage

    
    
    # As an rbenv plugin
    $ rbenv install --list                 # lists all available versions of Ruby
    $ rbenv install 2.2.0                  # installs Ruby 2.2.0 to ~/.rbenv/versions
    
    # As a standalone program
    $ ruby-build --definitions             # lists all available versions of Ruby
    $ ruby-build 2.2.0 ~/local/ruby-2.2.0  # installs Ruby 2.2.0 to ~/local/ruby-2.2.0

ruby-build does not check for system dependencies before downloading and
attempting to compile the Ruby source. Please ensure that [all requisite
libraries](https://github.com/rbenv/ruby-build/wiki#suggested-build-
environment) are available on your system.

### Advanced Usage

#### Custom Build Definitions

If you wish to develop and install a version of Ruby that is not yet supported
by ruby-build, you may specify the path to a custom “build definition file” in
place of a Ruby version number.

Use the [default build definitions](https://github.com/rbenv/ruby-
build/tree/master/share/ruby-build) as a template for your custom definitions.

#### Custom Build Configuration

The build process may be configured through the following environment
variables:

Variable | Function  
---|---  
`TMPDIR` | Where temporary files are stored.  
`RUBY_BUILD_BUILD_PATH` | Where sources are downloaded and built. (Default: a
timestamped subdirectory of `TMPDIR`)  
`RUBY_BUILD_CACHE_PATH` | Where to cache downloaded package files. (Default:
`~/.rbenv/cache` if invoked as rbenv plugin)  
`RUBY_BUILD_HTTP_CLIENT` | One of `aria2c`, `curl`, or `wget` to use for
downloading. (Default: first one found in PATH)  
`RUBY_BUILD_ARIA2_OPTS` | Additional options to pass to `aria2c` for
downloading.  
`RUBY_BUILD_CURL_OPTS` | Additional options to pass to `curl` for downloading.  
`RUBY_BUILD_WGET_OPTS` | Additional options to pass to `wget` for downloading.  
`RUBY_BUILD_MIRROR_URL` | Custom mirror URL root.  
`RUBY_BUILD_MIRROR_PACKAGE_URL` | Custom complete mirror URL (e.g.
<http://mirror.example.com/package-1.0.0.tar.gz>).  
`RUBY_BUILD_SKIP_MIRROR` | Bypass the download mirror and fetch all package
files from their original URLs.  
`RUBY_BUILD_ROOT` | Custom build definition directory. (Default: `share/ruby-
build`)  
`RUBY_BUILD_DEFINITIONS` | Additional paths to search for build definitions.
(Colon-separated list)  
`CC` | Path to the C compiler.  
`RUBY_CFLAGS` | Additional `CFLAGS` options ( _e.g.,_ to override `-O3`).  
`CONFIGURE_OPTS` | Additional `./configure` options.  
`MAKE` | Custom `make` command ( _e.g.,_ `gmake`).  
`MAKE_OPTS` / `MAKEOPTS` | Additional `make` options.  
`MAKE_INSTALL_OPTS` | Additional `make install` options.  
`RUBY_CONFIGURE_OPTS` | Additional `./configure` options (applies only to Ruby
source).  
`RUBY_MAKE_OPTS` | Additional `make` options (applies only to Ruby source).  
`RUBY_MAKE_INSTALL_OPTS` | Additional `make install` options (applies only to
Ruby source).  
  
#### Applying Patches

Both `rbenv install` and `ruby-build` support the `--patch` (`-p`) flag to
apply a patch to the Ruby (/JRuby/Rubinius/TruffleRuby) source code before
building. Patches are read from `STDIN`:

    
    
    # applying a single patch
    $ rbenv install --patch 1.9.3-p429 < /path/to/ruby.patch
    
    # applying a patch from HTTP
    $ rbenv install --patch 1.9.3-p429 < <(curl -sSL http://git.io/ruby.patch)
    
    # applying multiple patches
    $ cat fix1.patch fix2.patch | rbenv install --patch 1.9.3-p429

#### Checksum Verification

If you have the `shasum`, `openssl`, or `sha256sum` tool installed, ruby-build
will automatically verify the SHA2 checksum of each downloaded package before
installing it.

Checksums are optional and specified as anchors on the package URL in each
definition. All definitions bundled with ruby-build include checksums.

#### Package Mirrors

To speed up downloads, ruby-build fetches package files from a mirror hosted
on Amazon CloudFront. To benefit from this, the packages must specify their
checksum:

    
    
    # example:
    install_package "ruby-2.6.5" "https://ruby-lang.org/ruby-2.6.5.tgz#<SHA2>"

ruby-build will first try to fetch this package from
`$RUBY_BUILD_MIRROR_URL/<SHA2>` (note: this is the complete URL), where
`<SHA2>` is the checksum for the file. It will fall back to downloading the
package from the original location if:

  * the package was not found on the mirror;
  * the mirror is down;
  * the download is corrupt, i.e. the file's checksum doesn't match;
  * no tool is available to calculate the checksum; or
  * `RUBY_BUILD_SKIP_MIRROR` is enabled.

You may specify a custom mirror by setting `RUBY_BUILD_MIRROR_URL`.

If a mirror site doesn't conform to the above URL format, you can specify the
complete URL by setting `RUBY_BUILD_MIRROR_PACKAGE_URL`. It behaves the same
as `RUBY_BUILD_MIRROR_URL` except being a complete URL.

The default ruby-build download mirror is sponsored by
[Basecamp](https://basecamp.com/).

#### Keeping the build directory after installation

Both `ruby-build` and `rbenv install` accept the `-k` or `--keep` flag, which
tells ruby-build to keep the downloaded source after installation. This can be
useful if you need to use `gdb` and `memprof` with Ruby.

Source code will be kept in a parallel directory tree `~/.rbenv/sources` when
using `--keep` with the `rbenv install` command. You should specify the
location of the source code with the `RUBY_BUILD_BUILD_PATH` environment
variable when using `--keep` with `ruby-build`.

## Getting Help

Please see the [ruby-build wiki](https://github.com/rbenv/ruby-build/wiki) for
solutions to common problems.

If you can't find an answer on the wiki, open an issue on the [issue
tracker](https://github.com/rbenv/ruby-build/issues). Be sure to include the
full build log for build failures.

## About

Compile and install Ruby

### Topics

[ hacktoberfest ](/topics/hacktoberfest "Topic: hacktoberfest") [ ruby
](/topics/ruby "Topic: ruby")

### Resources

Readme

### License

[ MIT License ](/rbenv/ruby-build/blob/master/LICENSE)

##  [ Releases 168 ](/rbenv/ruby-build/releases)

[ ruby-build 20201210 Latest  8 days ago ](/rbenv/ruby-
build/releases/tag/v20201210)

[ \+ 167 releases ](/rbenv/ruby-build/releases)

##  [ Packages 0 ](/orgs/rbenv/packages?repo_name=ruby-build)

No packages published  

##  [ Contributors 230 ](/rbenv/ruby-build/graphs/contributors)

  * [ ![@hsbt](https://avatars1.githubusercontent.com/u/12301?s=64&v=4) ](/hsbt)
  * [ ![@mislav](https://avatars1.githubusercontent.com/u/887?s=64&v=4) ](/mislav)
  * [ ![@sferik](https://avatars0.githubusercontent.com/u/10308?s=64&v=4) ](/sferik)
  * [ ![@sstephenson](https://avatars3.githubusercontent.com/u/2603?s=64&v=4) ](/sstephenson)
  * [ ![@deepj](https://avatars2.githubusercontent.com/u/33736?s=64&v=4) ](/deepj)
  * [ ![@jeremy](https://avatars3.githubusercontent.com/u/199?s=64&v=4) ](/jeremy)
  * [ ![@eregon](https://avatars1.githubusercontent.com/u/168854?s=64&v=4) ](/eregon)
  * [ ![@jasonkarns](https://avatars1.githubusercontent.com/u/119972?s=64&v=4) ](/jasonkarns)
  * [ ![@koic](https://avatars2.githubusercontent.com/u/13203?s=64&v=4) ](/koic)
  * [ ![@metalefty](https://avatars3.githubusercontent.com/u/941609?s=64&v=4) ](/metalefty)
  * [ ![@josh](https://avatars0.githubusercontent.com/u/137?s=64&v=4) ](/josh)

[ \+ 219 contributors ](/rbenv/ruby-build/graphs/contributors)

## Languages

  * [ Shell 71.7% ](/rbenv/ruby-build/search?l=shell)
  * [ Roff 27.6% ](/rbenv/ruby-build/search?l=roff)
  * [ Ruby 0.7% ](/rbenv/ruby-build/search?l=ruby)

  * © 2020 GitHub, Inc.
  * [Terms](https://github.com/site/terms)
  * [Privacy](https://github.com/site/privacy)
  * [Security](https://github.com/security)
  * [Status](https://githubstatus.com/)
  * [Help](https://docs.github.com)

[ ](https://github.com "GitHub")

  * [Contact GitHub](https://github.com/contact)
  * [Pricing](https://github.com/pricing)
  * [API](https://docs.github.com)
  * [Training](https://services.github.com)
  * [Blog](https://github.blog)
  * [About](https://github.com/about)

You can’t perform that action at this time.

You signed in with another tab or window. [Reload]() to refresh your session.
You signed out in another tab or window. [Reload]() to refresh your session.

