<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN"><head><script type="text/javascript" async="" src="https://www.google-analytics.com/analytics.js"></script>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <title>第7章 构建项目 - 7.4 用指定参数定义函数或宏 - 《CMake菜谱（CMake Cookbook中文版）》 - 书栈网 · BookStack</title>
    <meta name="keywords" content="书栈网,BookStack,cmake,Clang,C语言" />
    <meta name="description" content="7.4 用指定参数定义函数或宏准备工作具体实施工作原理更多信息 使用CMake软件对项目模块，进行构建、测试和打包。" />
    <link href="https://static.sitestack.cn/static/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://static.sitestack.cn/static/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
    <link href="https://static.sitestack.cn/static/nprogress/nprogress.css" rel="stylesheet" />
    <link href="https://static.sitestack.cn/static/editor.md/css/editormd.preview.css" rel="stylesheet" />
    <link href="https://static.sitestack.cn/static/css/toast.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://static.sitestack.cn/static/katex/katex.min.css" />
	<link rel="stylesheet" href="https://static.sitestack.cn/static/mind-map/mindmap.css" />
    <script src="https://hm.baidu.com/hm.js?227e05b01b8f7eefb29a75df28f53840"></script><script src="https://static.sitestack.cn/static/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://static.sitestack.cn/static/respond.js/1.4.2/respond.min.js"></script>
    <link href="https://static.sitestack.cn/static/css/bookstack.css?version=v2.10" rel="stylesheet" />

    <style>
        .editormd-preview-container ol.linenums li code, .editormd-html-preview ol.linenums li code{
            display: block;
            white-space: pre;
        }
        li.L1, li.L3, li.L5, li.L7, li.L9{background-color: transparent;}
        .editormd-preview-container pre.prettyprint, .editormd-html-preview pre.prettyprint{border-color: transparent;}
        body{-webkit-overflow-scrolling:touch;}
        .alink,.alink a{color: #888 !important;}
        .alink:hover,.alink a:hover{color: red !important;}
    </style>
<script src="https://static.sitestack.cn/static/api/js/share.js"></script><link rel="stylesheet" href="/static/api/css/share_style1_32.css" /></head>
<body>



<div class="modal fade" id="ModalNote" tabindex="-1" role="dialog" aria-labelledby="ModalReplaceLabel">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">×</span></button>
				<h1 class="modal-title" id="ModalReplaceLabel" style="align:center;">思维导图备注</h1></div>
			<div class="modal-body" style="overflow-y:auto; height:400px;"></div>
			<div class="modal-footer">
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button></div>
			</div>
		</div>
	</div>
</div>


<div class="m-manual manual-mode-view manual-reader">
    <header class="navbar navbar-static-top manual-head" role="banner">
        <div class="container-fluid">
            <div class="navbar-header pull-left manual-title">
                <span class="slidebar" id="slidebar"><i class="fa fa-align-justify"></i></span>
                <a href="/books/CMake-Cookbook" title="CMake菜谱（CMake Cookbook中文版）" class="book-title">CMake菜谱（CMake Cookbook中文版）</a>
                <span style="font-size: 12px;font-weight: 100;"></span>
            </div>
            <div class="navbar-header pull-right manual-menu">
                <div class="bookstack-item">
                    
                    <a title="首页" href="/" class="btn btn-link"><i class="fa fa-home"></i> 首页</a>
                    
                    <a title="BookChat 小程序" href="javascript:" data-toggle="modal" data-target="#ModalBookChat" class="btn btn-light">
                        <img src="https://static.sitestack.cn/static/images/wxacode.png" style="position: relative;top:-2px;" alt="BookChat 小程序" /> <span>小程序</span></a>
                    
                    <a title="下载" href="javascript:" data-toggle="modal" data-target="#ModalDownload" class="btn btn-light"><i class="fa fa-cloud-download"></i> 下载</a>

                    
                        <a title="猜你喜欢" href="javascript:" data-toggle="modal" data-target="#ModalMayLike" class="btn btn-light"><i class="fa fa-heart"></i> 猜你喜欢</a>
                    

                    <a href="/record/3071" rel="nofollow" class="btn btn-link showModalHistory"><i class="fa fa-clock-o"></i> 阅读记录</a>
                    <span class="dropdown">
                        <button class="btn btn-link dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            书签管理 <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                            <li>
                                <a rel="nofollow" href="/bookmark/list/3071" title="查看书签" data-bookid="3071" class="showModalBookmark">
                                    <img src="https://static.sitestack.cn/static/images/icon-bookmark-list.png" alt="书签" /> 我的书签
                                </a>
                            </li>
                            <li>
                                <a href="/bookmark/" data-docid="202384" rel="nofollow" class="bookmark-action">
                                    <span class="bookmark-add "> <img src="https://static.sitestack.cn/static/images/icon-bookmark-add.png" alt="添加书签" /> 添加书签</span>
                                    <span class="bookmark-remove hide"> <img src="https://static.sitestack.cn/static/images/icon-bookmark-remove.png" alt="移除书签" /> 移除书签</span>
                                </a>
                            </li>
                        </ul>
                    </span>

                    
                </div>
            </div>
        </div>
    </header>
    <div class="container-fluid manual-body">

        <div class="manual-right">
            <div class="manual-article">
                <div class="article-head">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-md-10 col-md-offset-1 col-xs-12 text-center">
                                <h1 id="article-title">7.4 用指定参数定义函数或宏</h1>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="article-content">
                    <div class="help-block article-info" style="padding-bottom: 20px;">
                        

                        
                            <span><i class="fa fa-user-o"></i> <a target="_blank" title="来源" href="https://github.com/xiaoweiChen/CMake-Cookbook">来源 陈晓伟 译</a></span>
                        
                        <span><i class="fa fa-eye"></i> 浏览 <i class="read-count">499</i></span>
                        <span class="hidden-xs"><a href="#" data-target="#ModalQRcode" data-toggle="modal"><i class="fa fa-qrcode"></i> 扫码</a></span>
                        <span><a href="#" data-target="#ModalShare" data-toggle="modal"><i class="fa fa-share-alt"></i> 分享</a></span>
                        <span class="pull-right hidden-xs tooltips" title="" data-original-title="更新时间"><i class="fa fa-clock-o"></i> <i class="updated-at">2020-02-13 16:27:54</i></span>
                    </div>
                    
                    <article class="article-body  markdown-body editormd-preview-container" id="page-content">
                    <div class="markdown-toc editormd-markdown-toc"><ul class="markdown-toc-list"><li><a class="toc-level-1" href="#7.4 用指定参数定义函数或宏" level="1">7.4 用指定参数定义函数或宏</a><ul><li><a class="toc-level-2" href="#准备工作" level="2">准备工作</a></li><li><a class="toc-level-2" href="#具体实施" level="2">具体实施</a></li><li><a class="toc-level-2" href="#工作原理" level="2">工作原理</a></li><li><a class="toc-level-2" href="#更多信息" level="2">更多信息</a><ul></ul></li></ul></li></ul></div><h1 id="h1-7-4-"><a name="7.4 用指定参数定义函数或宏" class="reference-link"></a><span class="header-link octicon octicon-link"></span>7.4 用指定参数定义函数或宏</h1><p><strong>NOTE</strong>:<em>此示例代码可以在 <a href="https://github.com/dev-cafe/cmake-cookbook/tree/v1.0/chapter-7/recipe-04">https://github.com/dev-cafe/cmake-cookbook/tree/v1.0/chapter-7/recipe-04</a> 中找到，其中包含一个C++示例。该示例在CMake 3.5版(或更高版本)中是有效的，并且已经在GNU/Linux、macOS和Windows上进行过测试。</em></p>
<p>前面的示例中，我们研究了函数和宏，并使用了位置参数。这个示例中，我们将定义一个带有命名参数的函数。我们将复用第1节中的示例，使用函数和宏重用代码，而不是使用以下代码定义测试：<code>add_catch_test(short 1.5)</code>。</p>
<p>我们将这样调用函数:</p>
<pre class="prettyprint linenums prettyprinted" style=""><button class="btn btn-danger btn-sm btn-copy"><i class="fa fa-copy"></i> 复制代码</button><ol class="linenums"><li class="L0"><code class="lang-cmake"><span class="pln">add_catch_test</span><span class="pun">(</span></code></li><li class="L1"><code class="lang-cmake"><span class="pln">    NAME</span></code></li><li class="L2"><code class="lang-cmake"><span class="pln">      </span><span class="kwd">short</span></code></li><li class="L3"><code class="lang-cmake"><span class="pln">  LABELS</span></code></li><li class="L4"><code class="lang-cmake"><span class="pln">      </span><span class="kwd">short</span></code></li><li class="L5"><code class="lang-cmake"><span class="pln">      cpp_test</span></code></li><li class="L6"><code class="lang-cmake"><span class="pln">  COST</span></code></li><li class="L7"><code class="lang-cmake"><span class="pln">      </span><span class="lit">1.5</span></code></li><li class="L8"><code class="lang-cmake"><span class="pln">  </span><span class="pun">)</span></code></li></ol></pre>
<h2 id="h2-u51C6u5907u5DE5u4F5C"><a name="准备工作" class="reference-link"></a><span class="header-link octicon octicon-link"></span>准备工作</h2><p>我们使用第1节中的示例，使用函数和宏重用代码，并保持C++源代码不变，文件树保持不变：</p>
<pre class="prettyprint linenums prettyprinted" style=""><button class="btn btn-danger btn-sm btn-copy"><i class="fa fa-copy"></i> 复制代码</button><ol class="linenums"><li class="L0"><code class="lang-shell"><span class="pun">.</span></code></li><li class="L1"><code class="lang-shell"><span class="pun">├──</span><span class="pln"> cmake</span></code></li><li class="L2"><code class="lang-shell"><span class="pun">│</span><span class="pln">     </span><span class="pun">└──</span><span class="pln"> testing</span><span class="pun">.</span><span class="pln">cmake</span></code></li><li class="L3"><code class="lang-shell"><span class="pun">├──</span><span class="pln"> </span><span class="typ">CMakeLists</span><span class="pun">.</span><span class="pln">txt</span></code></li><li class="L4"><code class="lang-shell"><span class="pun">├──</span><span class="pln"> src</span></code></li><li class="L5"><code class="lang-shell"><span class="pun">│</span><span class="pln">     </span><span class="pun">├──</span><span class="pln"> </span><span class="typ">CMakeLists</span><span class="pun">.</span><span class="pln">txt</span></code></li><li class="L6"><code class="lang-shell"><span class="pun">│</span><span class="pln">     </span><span class="pun">├──</span><span class="pln"> main</span><span class="pun">.</span><span class="pln">cpp</span></code></li><li class="L7"><code class="lang-shell"><span class="pun">│</span><span class="pln">     </span><span class="pun">├──</span><span class="pln"> sum_integers</span><span class="pun">.</span><span class="pln">cpp</span></code></li><li class="L8"><code class="lang-shell"><span class="pun">│</span><span class="pln">     </span><span class="pun">└──</span><span class="pln"> sum_integers</span><span class="pun">.</span><span class="pln">hpp</span></code></li><li class="L9"><code class="lang-shell"><span class="pun">└──</span><span class="pln"> tests</span></code></li><li class="L0"><code class="lang-shell"><span class="pln">    </span><span class="pun">├──</span><span class="pln"> </span><span class="kwd">catch</span><span class="pun">.</span><span class="pln">hpp</span></code></li><li class="L1"><code class="lang-shell"><span class="pln">    </span><span class="pun">├──</span><span class="pln"> </span><span class="typ">CMakeLists</span><span class="pun">.</span><span class="pln">txt</span></code></li><li class="L2"><code class="lang-shell"><span class="pln">    </span><span class="pun">└──</span><span class="pln"> test</span><span class="pun">.</span><span class="pln">cpp</span></code></li></ol></pre>
<h2 id="h2-u5177u4F53u5B9Eu65BD"><a name="具体实施" class="reference-link"></a><span class="header-link octicon octicon-link"></span>具体实施</h2><p>我们对CMake代码进行一些修改，如下所示:</p>
<ol>
<li><p><code>CMakeLists.txt</code>顶部中只增加了一行，因为我们将包括位于<code>cmake</code>下面的模块:</p>
<pre class="prettyprint linenums prettyprinted" style=""><button class="btn btn-danger btn-sm btn-copy"><i class="fa fa-copy"></i> 复制代码</button><ol class="linenums"><li class="L0"><code class="lang-cmake"><span class="pln">list</span><span class="pun">(</span><span class="pln">APPEND CMAKE_MODULE_PATH </span><span class="str">"${CMAKE_CURRENT_SOURCE_DIR}/cmake"</span><span class="pun">)</span></code></li></ol></pre>
</li><li><p>保持<code>src/CMakeLists.txt</code>。</p>
</li><li><p><code>tests/CMakeLists.txt</code>中，将<code>add_catch_test</code>函数定义移动到<code>cmake/testing.cmake</code>，并且定义两个测试:</p>
<pre class="prettyprint linenums prettyprinted" style=""><button class="btn btn-danger btn-sm btn-copy"><i class="fa fa-copy"></i> 复制代码</button><ol class="linenums"><li class="L0"><code class="lang-cmake"><span class="pln">add_executable</span><span class="pun">(</span><span class="pln">cpp_test test</span><span class="pun">.</span><span class="pln">cpp</span><span class="pun">)</span></code></li><li class="L1"><code class="lang-cmake"><span class="pln">target_link_libraries</span><span class="pun">(</span><span class="pln">cpp_test sum_integers</span><span class="pun">)</span></code></li><li class="L2"><code class="lang-cmake"></code></li><li class="L3"><code class="lang-cmake"><span class="pln">include</span><span class="pun">(</span><span class="pln">testing</span><span class="pun">)</span></code></li><li class="L4"><code class="lang-cmake"></code></li><li class="L5"><code class="lang-cmake"><span class="pln">add_catch_test</span><span class="pun">(</span></code></li><li class="L6"><code class="lang-cmake"><span class="pln">  NAME</span></code></li><li class="L7"><code class="lang-cmake"><span class="pln">      </span><span class="kwd">short</span></code></li><li class="L8"><code class="lang-cmake"><span class="pln">  LABELS</span></code></li><li class="L9"><code class="lang-cmake"><span class="pln">      </span><span class="kwd">short</span></code></li><li class="L0"><code class="lang-cmake"><span class="pln">      cpp_test</span></code></li><li class="L1"><code class="lang-cmake"><span class="pln">  COST</span></code></li><li class="L2"><code class="lang-cmake"><span class="pln">      </span><span class="lit">1.5</span></code></li><li class="L3"><code class="lang-cmake"><span class="pln">  </span><span class="pun">)</span></code></li><li class="L4"><code class="lang-cmake"></code></li><li class="L5"><code class="lang-cmake"><span class="pln">add_catch_test</span><span class="pun">(</span></code></li><li class="L6"><code class="lang-cmake"><span class="pln">  NAME</span></code></li><li class="L7"><code class="lang-cmake"><span class="pln">      </span><span class="kwd">long</span></code></li><li class="L8"><code class="lang-cmake"><span class="pln">  LABELS</span></code></li><li class="L9"><code class="lang-cmake"><span class="pln">      </span><span class="kwd">long</span></code></li><li class="L0"><code class="lang-cmake"><span class="pln">      cpp_test</span></code></li><li class="L1"><code class="lang-cmake"><span class="pln">  COST</span></code></li><li class="L2"><code class="lang-cmake"><span class="pln">      </span><span class="lit">2.5</span></code></li><li class="L3"><code class="lang-cmake"><span class="pln">  </span><span class="pun">)</span></code></li></ol></pre>
</li><li><p><code>add_catch_test</code>在<code>cmake/testing.cmake</code>中定义:</p>
<pre class="prettyprint linenums prettyprinted" style=""><button class="btn btn-danger btn-sm btn-copy"><i class="fa fa-copy"></i> 复制代码</button><ol class="linenums"><li class="L0"><code class="lang-cmake"><span class="kwd">function</span><span class="pun">(</span><span class="pln">add_catch_test</span><span class="pun">)</span></code></li><li class="L1"><code class="lang-cmake"><span class="pln">  </span><span class="kwd">set</span><span class="pun">(</span><span class="pln">options</span><span class="pun">)</span></code></li><li class="L2"><code class="lang-cmake"><span class="pln">  </span><span class="kwd">set</span><span class="pun">(</span><span class="pln">oneValueArgs NAME COST</span><span class="pun">)</span></code></li><li class="L3"><code class="lang-cmake"><span class="pln">  </span><span class="kwd">set</span><span class="pun">(</span><span class="pln">multiValueArgs LABELS DEPENDS REFERENCE_FILES</span><span class="pun">)</span></code></li><li class="L4"><code class="lang-cmake"><span class="pln">  cmake_parse_arguments</span><span class="pun">(</span><span class="pln">add_catch_test</span></code></li><li class="L5"><code class="lang-cmake"><span class="pln">    </span><span class="str">"${options}"</span></code></li><li class="L6"><code class="lang-cmake"><span class="pln">    </span><span class="str">"${oneValueArgs}"</span></code></li><li class="L7"><code class="lang-cmake"><span class="pln">    </span><span class="str">"${multiValueArgs}"</span></code></li><li class="L8"><code class="lang-cmake"><span class="pln">    $</span><span class="pun">{</span><span class="pln">ARGN</span><span class="pun">}</span></code></li><li class="L9"><code class="lang-cmake"><span class="pln">    </span><span class="pun">)</span></code></li><li class="L0"><code class="lang-cmake"><span class="pln">  message</span><span class="pun">(</span><span class="pln">STATUS </span><span class="str">"defining a test ..."</span><span class="pun">)</span></code></li><li class="L1"><code class="lang-cmake"><span class="pln">  message</span><span class="pun">(</span><span class="pln">STATUS </span><span class="str">" NAME: ${add_catch_test_NAME}"</span><span class="pun">)</span></code></li><li class="L2"><code class="lang-cmake"><span class="pln">  message</span><span class="pun">(</span><span class="pln">STATUS </span><span class="str">" LABELS: ${add_catch_test_LABELS}"</span><span class="pun">)</span></code></li><li class="L3"><code class="lang-cmake"><span class="pln">  message</span><span class="pun">(</span><span class="pln">STATUS </span><span class="str">" COST: ${add_catch_test_COST}"</span><span class="pun">)</span></code></li><li class="L4"><code class="lang-cmake"><span class="pln">  message</span><span class="pun">(</span><span class="pln">STATUS </span><span class="str">" REFERENCE_FILES: ${add_catch_test_REFERENCE_FILES}"</span><span class="pun">)</span></code></li><li class="L5"><code class="lang-cmake"></code></li><li class="L6"><code class="lang-cmake"><span class="pln">  add_test</span><span class="pun">(</span></code></li><li class="L7"><code class="lang-cmake"><span class="pln">    NAME</span></code></li><li class="L8"><code class="lang-cmake"><span class="pln">        $</span><span class="pun">{</span><span class="pln">add_catch_test_NAME</span><span class="pun">}</span></code></li><li class="L9"><code class="lang-cmake"><span class="pln">    COMMAND</span></code></li><li class="L0"><code class="lang-cmake"><span class="pln">        $</span><span class="pun">&lt;</span><span class="pln">TARGET_FILE</span><span class="pun">:</span><span class="pln">cpp_test</span><span class="pun">&gt;</span></code></li><li class="L1"><code class="lang-cmake"><span class="pln">    </span><span class="pun">[</span><span class="pln">$</span><span class="pun">{</span><span class="pln">add_catch_test_NAME</span><span class="pun">}]</span><span class="pln"> </span><span class="pun">--</span><span class="pln">success </span><span class="pun">--</span><span class="kwd">out</span></code></li><li class="L2"><code class="lang-cmake"><span class="pln">        $</span><span class="pun">{</span><span class="pln">PROJECT_BINARY_DIR</span><span class="pun">}/</span><span class="pln">tests</span><span class="pun">/</span><span class="pln">$</span><span class="pun">{</span><span class="pln">add_catch_test_NAME</span><span class="pun">}.</span><span class="pln">log </span><span class="pun">--</span><span class="pln">durations yes</span></code></li><li class="L3"><code class="lang-cmake"><span class="pln">    WORKING_DIRECTORY</span></code></li><li class="L4"><code class="lang-cmake"><span class="pln">        $</span><span class="pun">{</span><span class="pln">CMAKE_CURRENT_BINARY_DIR</span><span class="pun">}</span></code></li><li class="L5"><code class="lang-cmake"><span class="pln">    </span><span class="pun">)</span></code></li><li class="L6"><code class="lang-cmake"></code></li><li class="L7"><code class="lang-cmake"><span class="pln">  set_tests_properties</span><span class="pun">(</span><span class="pln">$</span><span class="pun">{</span><span class="pln">add_catch_test_NAME</span><span class="pun">}</span></code></li><li class="L8"><code class="lang-cmake"><span class="pln">    PROPERTIES</span></code></li><li class="L9"><code class="lang-cmake"><span class="pln">        LABELS </span><span class="str">"${add_catch_test_LABELS}"</span></code></li><li class="L0"><code class="lang-cmake"><span class="pln">    </span><span class="pun">)</span></code></li><li class="L1"><code class="lang-cmake"></code></li><li class="L2"><code class="lang-cmake"><span class="pln">  </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">add_catch_test_COST</span><span class="pun">)</span></code></li><li class="L3"><code class="lang-cmake"><span class="pln">    set_tests_properties</span><span class="pun">(</span><span class="pln">$</span><span class="pun">{</span><span class="pln">add_catch_test_NAME</span><span class="pun">}</span></code></li><li class="L4"><code class="lang-cmake"><span class="pln">    PROPERTIES</span></code></li><li class="L5"><code class="lang-cmake"><span class="pln">        COST $</span><span class="pun">{</span><span class="pln">add_catch_test_COST</span><span class="pun">}</span></code></li><li class="L6"><code class="lang-cmake"><span class="pln">    </span><span class="pun">)</span></code></li><li class="L7"><code class="lang-cmake"><span class="pln">  endif</span><span class="pun">()</span></code></li><li class="L8"><code class="lang-cmake"></code></li><li class="L9"><code class="lang-cmake"><span class="pln">  </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">add_catch_test_DEPENDS</span><span class="pun">)</span></code></li><li class="L0"><code class="lang-cmake"><span class="pln">    set_tests_properties</span><span class="pun">(</span><span class="pln">$</span><span class="pun">{</span><span class="pln">add_catch_test_NAME</span><span class="pun">}</span></code></li><li class="L1"><code class="lang-cmake"><span class="pln">      PROPERTIES</span></code></li><li class="L2"><code class="lang-cmake"><span class="pln">          DEPENDS $</span><span class="pun">{</span><span class="pln">add_catch_test_DEPENDS</span><span class="pun">}</span></code></li><li class="L3"><code class="lang-cmake"><span class="pln">      </span><span class="pun">)</span></code></li><li class="L4"><code class="lang-cmake"><span class="pln">  endif</span><span class="pun">()</span></code></li><li class="L5"><code class="lang-cmake"></code></li><li class="L6"><code class="lang-cmake"><span class="pln">  </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">add_catch_test_REFERENCE_FILES</span><span class="pun">)</span></code></li><li class="L7"><code class="lang-cmake"><span class="pln">    file</span><span class="pun">(</span></code></li><li class="L8"><code class="lang-cmake"><span class="pln">      COPY</span></code></li><li class="L9"><code class="lang-cmake"><span class="pln">          $</span><span class="pun">{</span><span class="pln">add_catch_test_REFERENCE_FILES</span><span class="pun">}</span></code></li><li class="L0"><code class="lang-cmake"><span class="pln">      DESTINATION</span></code></li><li class="L1"><code class="lang-cmake"><span class="pln">          $</span><span class="pun">{</span><span class="pln">CMAKE_CURRENT_BINARY_DIR</span><span class="pun">}</span></code></li><li class="L2"><code class="lang-cmake"><span class="pln">      </span><span class="pun">)</span></code></li><li class="L3"><code class="lang-cmake"><span class="pln">  endif</span><span class="pun">()</span></code></li><li class="L4"><code class="lang-cmake"><span class="pln">endfunction</span><span class="pun">()</span></code></li></ol></pre>
</li><li><p>测试输出:</p>
<pre class="prettyprint linenums prettyprinted" style=""><button class="btn btn-danger btn-sm btn-copy"><i class="fa fa-copy"></i> 复制代码</button><ol class="linenums"><li class="L0"><code class="lang-cmake"><span class="pln">$ mkdir </span><span class="pun">-</span><span class="pln">p build</span></code></li><li class="L1"><code class="lang-cmake"><span class="pln">$ cd build</span></code></li><li class="L2"><code class="lang-cmake"><span class="pln">$ cmake </span><span class="pun">..</span></code></li><li class="L3"><code class="lang-cmake"></code></li><li class="L4"><code class="lang-cmake"><span class="pun">--</span><span class="pln"> </span><span class="pun">...</span></code></li><li class="L5"><code class="lang-cmake"><span class="pun">--</span><span class="pln"> defining a test </span><span class="pun">...</span></code></li><li class="L6"><code class="lang-cmake"><span class="pun">--</span><span class="pln"> NAME</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">short</span></code></li><li class="L7"><code class="lang-cmake"><span class="pun">--</span><span class="pln"> LABELS</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">short</span><span class="pun">;</span><span class="pln">cpp_test</span></code></li><li class="L8"><code class="lang-cmake"><span class="pun">--</span><span class="pln"> COST</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1.5</span></code></li><li class="L9"><code class="lang-cmake"><span class="pun">--</span><span class="pln"> REFERENCE_FILES</span><span class="pun">:</span></code></li><li class="L0"><code class="lang-cmake"><span class="pun">--</span><span class="pln"> defining a test </span><span class="pun">...</span></code></li><li class="L1"><code class="lang-cmake"><span class="pun">--</span><span class="pln"> NAME</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">long</span></code></li><li class="L2"><code class="lang-cmake"><span class="pun">--</span><span class="pln"> LABELS</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">;</span><span class="pln">cpp_test</span></code></li><li class="L3"><code class="lang-cmake"><span class="pun">--</span><span class="pln"> COST</span><span class="pun">:</span><span class="pln"> </span><span class="lit">2.5</span></code></li><li class="L4"><code class="lang-cmake"><span class="pun">--</span><span class="pln"> REFERENCE_FILES</span><span class="pun">:</span></code></li><li class="L5"><code class="lang-cmake"><span class="pun">--</span><span class="pln"> </span><span class="pun">...</span></code></li></ol></pre>
</li><li><p>最后，编译并测试：</p>
<pre class="prettyprint linenums prettyprinted" style=""><button class="btn btn-danger btn-sm btn-copy"><i class="fa fa-copy"></i> 复制代码</button><ol class="linenums"><li class="L0"><code class="lang-shell"><span class="pln">$ cmake </span><span class="pun">--</span><span class="pln">build </span><span class="pun">.</span></code></li><li class="L1"><code class="lang-shell"><span class="pln">$ ctest</span></code></li></ol></pre>
</li></ol>
<h2 id="h2-u5DE5u4F5Cu539Fu7406"><a name="工作原理" class="reference-link"></a><span class="header-link octicon octicon-link"></span>工作原理</h2><p>示例的特点是其命名参数，因此我们可以将重点放在<code>cmake/testing.cmake</code>模块上。CMake提供<code>cmake_parse_arguments</code>命令，我们使用函数名(<code>add_catch_test</code>)选项(我们的例子中是<code>none</code>)、单值参数(<code>NAME</code>和<code>COST</code>)和多值参数(<code>LABELS</code>、<code>DEPENDS</code>和<code>REFERENCE_FILES</code>)调用该命令:</p>
<pre class="prettyprint linenums prettyprinted" style=""><button class="btn btn-danger btn-sm btn-copy"><i class="fa fa-copy"></i> 复制代码</button><ol class="linenums"><li class="L0"><code class="lang-cmake"><span class="kwd">function</span><span class="pun">(</span><span class="pln">add_catch_test</span><span class="pun">)</span></code></li><li class="L1"><code class="lang-cmake"><span class="pln">  </span><span class="kwd">set</span><span class="pun">(</span><span class="pln">options</span><span class="pun">)</span></code></li><li class="L2"><code class="lang-cmake"><span class="pln">  </span><span class="kwd">set</span><span class="pun">(</span><span class="pln">oneValueArgs NAME COST</span><span class="pun">)</span></code></li><li class="L3"><code class="lang-cmake"><span class="pln">  </span><span class="kwd">set</span><span class="pun">(</span><span class="pln">multiValueArgs LABELS DEPENDS REFERENCE_FILES</span><span class="pun">)</span></code></li><li class="L4"><code class="lang-cmake"><span class="pln">  cmake_parse_arguments</span><span class="pun">(</span><span class="pln">add_catch_test</span></code></li><li class="L5"><code class="lang-cmake"><span class="pln">    </span><span class="str">"${options}"</span></code></li><li class="L6"><code class="lang-cmake"><span class="pln">    </span><span class="str">"${oneValueArgs}"</span></code></li><li class="L7"><code class="lang-cmake"><span class="pln">    </span><span class="str">"${multiValueArgs}"</span></code></li><li class="L8"><code class="lang-cmake"><span class="pln">    $</span><span class="pun">{</span><span class="pln">ARGN</span><span class="pun">}</span></code></li><li class="L9"><code class="lang-cmake"><span class="pln">    </span><span class="pun">)</span></code></li><li class="L0"><code class="lang-cmake"><span class="pun">...</span></code></li><li class="L1"><code class="lang-cmake"><span class="pln">endfunction</span><span class="pun">()</span></code></li></ol></pre>
<p><code>cmake_parse_arguments</code>命令解析选项和参数，并在例子中定义如下:</p>
<ul>
<li>add_catch_test_NAME</li><li>add_catch_test_COST</li><li>add_catch_test_LABELS</li><li>add_catch_test_DEPENDS</li><li>add_catch_test_REFERENCE_FILES</li></ul>
<p>可以查询，并在函数中使用这些变量。这种方法使我们有机会用更健壮的接口和更具有可读的函数/宏调用，来实现函数和宏。</p>
<h2 id="h2-u66F4u591Au4FE1u606F"><a name="更多信息" class="reference-link"></a><span class="header-link octicon octicon-link"></span>更多信息</h2><p>选项关键字(本例中我们没有使用)由<code>cmake_parse_arguments</code>定义为<code>TRUE</code>或<code>FALSE</code>。<code>add_catch_test</code>函数，还提供<code>test</code>命令作为一个命名参数，为了更简洁的演示，我们省略了这个参数。</p>
<p><strong>TIPS</strong>:<em><code>cmake_parse_arguments</code>命令在cmake 3.5的版本前中的<code>CMakeParseArguments.cmake</code>定义。因此，可以在<code>CMake/test.cmake</code>顶部的使用<code>include(CMakeParseArguments)</code>命令使此示例能与CMake早期版本一起工作。</em></p>

                    </article>
                    
                    <div class="row hung-read-link">
                        <div class="col-xs-12 hung-pre" style="">
                            <span class="text-muted">上一篇:</span><a href="/read/CMake-Cookbook/content-chapter7-7.3-chinese.md">7.3 编写函数来测试和设置编译器标志</a>
                        </div>
                        <div class="col-xs-12 hung-next" style="">
                            <span class="text-muted">下一篇:</span><a href="/read/CMake-Cookbook/content-chapter7-7.5-chinese.md">7.5 重新定义函数和宏</a>
                        </div>
                    </div>

                    
                        
                    
                    <div class="bookstack-bars">
                        <ul>

                            <li class="visible-xs visible-sm bars-menu bars-menu-hide"><a href="/" title="首页"><i class="fa fa-home"></i></a></li>
                            <li class="visible-xs visible-sm bars-menu bars-menu-hide">
                                <a title="下载" href="javascript:" data-toggle="modal" data-target="#ModalDownload"><i class="fa fa-cloud-download"></i></a>
                            </li>
                            <li class="visible-xs visible-sm bars-menu bars-menu-hide">
                                <a title="分享" href="javascript:" data-toggle="modal" data-target="#ModalShare"><i class="fa fa-share-alt"></i></a>
                            </li>
                            <li class="visible-xs visible-sm bars-menu bars-menu-hide">
                                <a title="阅读记录" class="showModalHistory" href="/record/3071" rel="nofollow"><i class="fa fa-clock-o"></i></a>
                            </li>
                            <li class="visible-xs visible-sm bars-menu bars-menu-hide">
                                <a rel="nofollow" href="/bookmark/list/3071" data-bookid="3071" class="showModalBookmark" title="书签">
                                    <img src="https://static.sitestack.cn/static/images/icon-bookmark-list.png" alt="书签" />
                                </a>
                            </li>
                            <li class="visible-xs visible-sm bars-menu bars-menu-hide">
                                <a href="/bookmark/" data-docid="202384" rel="nofollow" class="bookmark-action">
                                <span class="bookmark-add "> <img src="https://static.sitestack.cn/static/images/icon-bookmark-add.png" alt="添加书签" /></span>
                                <span class="bookmark-remove hide"> <img src="https://static.sitestack.cn/static/images/icon-bookmark-remove.png" alt="移除书签" /></span>
                                </a>
                            </li>
                            <li class="book-menu visible-xs visible-sm">
                                <a href="javascript:void(0);" title="菜单"><i class="fa fa-align-justify"></i></a>
                            </li>
                            <li class="visible-xs visible-sm bars-menu-toggle">
                                <a href="#" title="更多功能"><i class="fa fa-plus-circle"></i><i class="fa fa-minus-circle hide"></i></a>
                            </li>
                            <li>
                                <a href="javascript:;" class="view-backtop"><i class="fa fa-arrow-up" aria-hidden="true"></i></a>
                            </li>

                        </ul>
                    </div>
                </div>

            </div>
        </div>

        <div class="manual-left">
                <div class="article-search" data-bookid="3071">
                    <form id="searchForm" action="/read/CMake-Cookbook/search" method="post">
                        <div class="input-group">
                            <input type="text" name="keyword" placeholder="Search..." autocomplete="off" class="form-control" />
                            <span class="input-group-addon input-group-addon-clear"><i class="fa fa-remove"></i></span>
                            <span class="input-group-addon">
                                <button type="submit"><i class="fa fa-search"></i></button>
                            </span>
                        </div>
                    </form>
                    <div class="pull-right hidden-xs">
                        <i class="fa fa-align-justify"></i>
                    </div>
                </div>
                <div class="article-menu">
                    

                    <div class="article-menu-detail collapse-menu">
                        <ul><li id="202279"><a href="/read/CMake-Cookbook/README.md" title="" data-original-title="Introduction">Introduction</a></li><li id="202403"><a href="/read/CMake-Cookbook/content-preface-preface-chinese.md" title="" data-original-title="前言">前言</a></li><li id="202281" class="collapse-node  collapse-hide"><span></span><a href="/read/CMake-Cookbook/content-chapter0-0.0-chinese.md" title="" data-original-title="第0章 配置环境">第0章 配置环境</a><ul><li id="202282"><a href="/read/CMake-Cookbook/content-chapter0-0.1-chinese.md" title="" data-original-title="0.1 获取代码">0.1 获取代码</a></li><li id="202283"><a href="/read/CMake-Cookbook/content-chapter0-0.2-chinese.md" title="" data-original-title="0.2 Docker镜像">0.2 Docker镜像</a></li><li id="202284"><a href="/read/CMake-Cookbook/content-chapter0-0.3-chinese.md" title="" data-original-title="0.3 安装必要的软件">0.3 安装必要的软件</a></li><li id="202285"><a href="/read/CMake-Cookbook/content-chapter0-0.4-chinese.md" title="" data-original-title="0.4 测试环境">0.4 测试环境</a></li><li id="202286"><a href="/read/CMake-Cookbook/content-chapter0-0.5-chinese.md" title="" data-original-title="0.5 上报问题并提出改进建议">0.5 上报问题并提出改进建议</a></li></ul></li><li id="202287" class="collapse-node  collapse-hide"><span></span><a href="/read/CMake-Cookbook/content-chapter1-1.0-chinese.md" title="" data-original-title="第1章 从可执行文件到库">第1章 从可执行文件到库</a><ul><li id="202288"><a href="/read/CMake-Cookbook/content-chapter1-1.1-chinese.md" title="" data-original-title="1.1 将单个源文件编译为可执行文件">1.1 将单个源文件编译为可执行文件</a></li><li id="202290"><a href="/read/CMake-Cookbook/content-chapter1-1.2-chinese.md" title="" data-original-title="1.2 切换生成器">1.2 切换生成器</a></li><li id="202291"><a href="/read/CMake-Cookbook/content-chapter1-1.3-chinese.md" title="" data-original-title="1.3 构建和链接静态库和动态库">1.3 构建和链接静态库和动态库</a></li><li id="202292"><a href="/read/CMake-Cookbook/content-chapter1-1.4-chinese.md" title="" data-original-title="1.4 用条件句控制编译">1.4 用条件句控制编译</a></li><li id="202293"><a href="/read/CMake-Cookbook/content-chapter1-1.5-chinese.md" title="" data-original-title="1.5 向用户显示选项">1.5 向用户显示选项</a></li><li id="202294"><a href="/read/CMake-Cookbook/content-chapter1-1.6-chinese.md" title="" data-original-title="1.6 指定编译器">1.6 指定编译器</a></li><li id="202295"><a href="/read/CMake-Cookbook/content-chapter1-1.7-chinese.md" title="" data-original-title="1.7 切换构建类型">1.7 切换构建类型</a></li><li id="202296"><a href="/read/CMake-Cookbook/content-chapter1-1.8-chinese.md" title="" data-original-title="1.8 设置编译器选项">1.8 设置编译器选项</a></li><li id="202297"><a href="/read/CMake-Cookbook/content-chapter1-1.9-chinese.md" title="" data-original-title="1.9 为语言设定标准">1.9 为语言设定标准</a></li><li id="202289"><a href="/read/CMake-Cookbook/content-chapter1-1.10-chinese.md" title="" data-original-title="1.10 使用控制流">1.10 使用控制流</a></li></ul></li><li id="202333" class="collapse-node  collapse-hide"><span></span><a href="/read/CMake-Cookbook/content-chapter2-2.0-chinese.md" title="" data-original-title="第2章 检测环境">第2章 检测环境</a><ul><li id="202334"><a href="/read/CMake-Cookbook/content-chapter2-2.1-chinese.md" title="" data-original-title="2.1 检测操作系统">2.1 检测操作系统</a></li><li id="202335"><a href="/read/CMake-Cookbook/content-chapter2-2.2-chinese.md" title="" data-original-title="2.2 处理与平台相关的源代码">2.2 处理与平台相关的源代码</a></li><li id="202336"><a href="/read/CMake-Cookbook/content-chapter2-2.3-chinese.md" title="" data-original-title="2.3 处理与编译器相关的源代码">2.3 处理与编译器相关的源代码</a></li><li id="202337"><a href="/read/CMake-Cookbook/content-chapter2-2.4-chinese.md" title="" data-original-title="2.4 检测处理器体系结构">2.4 检测处理器体系结构</a></li><li id="202338"><a href="/read/CMake-Cookbook/content-chapter2-2.5-chinese.md" title="" data-original-title="2.5 检测处理器指令集">2.5 检测处理器指令集</a></li><li id="202339"><a href="/read/CMake-Cookbook/content-chapter2-2.6-chinese.md" title="" data-original-title="2.6 为Eigen库使能向量化">2.6 为Eigen库使能向量化</a></li></ul></li><li id="202340" class="collapse-node  collapse-hide"><span></span><a href="/read/CMake-Cookbook/content-chapter3-3.0-chinese.md" title="" data-original-title="第3章 检测外部库和程序">第3章 检测外部库和程序</a><ul><li id="202341"><a href="/read/CMake-Cookbook/content-chapter3-3.1-chinese.md" title="" data-original-title="3.1 检测Python解释器">3.1 检测Python解释器</a></li><li id="202343"><a href="/read/CMake-Cookbook/content-chapter3-3.2-chinese.md" title="" data-original-title="3.2 检测Python库">3.2 检测Python库</a></li><li id="202344"><a href="/read/CMake-Cookbook/content-chapter3-3.3-chinese.md" title="" data-original-title="3.3 检测Python模块和包">3.3 检测Python模块和包</a></li><li id="202345"><a href="/read/CMake-Cookbook/content-chapter3-3.4-chinese.md" title="" data-original-title="3.4 检测BLAS和LAPACK数学库">3.4 检测BLAS和LAPACK数学库</a></li><li id="202346"><a href="/read/CMake-Cookbook/content-chapter3-3.5-chinese.md" title="" data-original-title="3.5 检测OpenMP的并行环境">3.5 检测OpenMP的并行环境</a></li><li id="202347"><a href="/read/CMake-Cookbook/content-chapter3-3.6-chinese.md" title="" data-original-title="3.6 检测MPI的并行环境">3.6 检测MPI的并行环境</a></li><li id="202348"><a href="/read/CMake-Cookbook/content-chapter3-3.7-chinese.md" title="" data-original-title="3.7 检测Eigen库">3.7 检测Eigen库</a></li><li id="202349"><a href="/read/CMake-Cookbook/content-chapter3-3.8-chinese.md" title="" data-original-title="3.8 检测Boost库">3.8 检测Boost库</a></li><li id="202350"><a href="/read/CMake-Cookbook/content-chapter3-3.9-chinese.md" title="" data-original-title="3.9 检测外部库:Ⅰ. 使用pkg-config">3.9 检测外部库:Ⅰ. 使用pkg-config</a></li><li id="202342"><a href="/read/CMake-Cookbook/content-chapter3-3.10-chinese.md" title="" data-original-title="3.10 检测外部库:Ⅱ. 自定义find模块">3.10 检测外部库:Ⅱ. 自定义find模块</a></li></ul></li><li id="202351" class="collapse-node  collapse-hide"><span></span><a href="/read/CMake-Cookbook/content-chapter4-4.0-chinese.md" title="" data-original-title="第4章 创建和运行测试">第4章 创建和运行测试</a><ul><li id="202352"><a href="/read/CMake-Cookbook/content-chapter4-4.1-chinese.md" title="" data-original-title="4.1 创建一个简单的单元测试">4.1 创建一个简单的单元测试</a></li><li id="202354"><a href="/read/CMake-Cookbook/content-chapter4-4.2-chinese.md" title="" data-original-title="4.2 使用Catch2库进行单元测试">4.2 使用Catch2库进行单元测试</a></li><li id="202355"><a href="/read/CMake-Cookbook/content-chapter4-4.3-chinese.md" title="" data-original-title="4.3 使用Google Test库进行单元测试">4.3 使用Google Test库进行单元测试</a></li><li id="202356"><a href="/read/CMake-Cookbook/content-chapter4-4.4-chinese.md" title="" data-original-title="4.4 使用Boost Test进行单元测试">4.4 使用Boost Test进行单元测试</a></li><li id="202357"><a href="/read/CMake-Cookbook/content-chapter4-4.5-chinese.md" title="" data-original-title="4.5 使用动态分析来检测内存缺陷">4.5 使用动态分析来检测内存缺陷</a></li><li id="202358"><a href="/read/CMake-Cookbook/content-chapter4-4.6-chinese.md" title="" data-original-title="4.6 预期测试失败">4.6 预期测试失败</a></li><li id="202359"><a href="/read/CMake-Cookbook/content-chapter4-4.7-chinese.md" title="" data-original-title="4.7 使用超时测试运行时间过长的测试">4.7 使用超时测试运行时间过长的测试</a></li><li id="202360"><a href="/read/CMake-Cookbook/content-chapter4-4.8-chinese.md" title="" data-original-title="4.8 并行测试">4.8 并行测试</a></li><li id="202361"><a href="/read/CMake-Cookbook/content-chapter4-4.9-chinese.md" title="" data-original-title="4.9 运行测试子集">4.9 运行测试子集</a></li><li id="202353"><a href="/read/CMake-Cookbook/content-chapter4-4.10-chinese.md" title="" data-original-title="4.10 使用测试固件">4.10 使用测试固件</a></li></ul></li><li id="202362" class="collapse-node  collapse-hide"><span></span><a href="/read/CMake-Cookbook/content-chapter5-5.0-chinese.md" title="" data-original-title="第5章 配置时和构建时的操作">第5章 配置时和构建时的操作</a><ul><li id="202363"><a href="/read/CMake-Cookbook/content-chapter5-5.1-chinese.md" title="" data-original-title="5.1 使用平台无关的文件操作">5.1 使用平台无关的文件操作</a></li><li id="202364"><a href="/read/CMake-Cookbook/content-chapter5-5.2-chinese.md" title="" data-original-title="5.2 配置时运行自定义命令">5.2 配置时运行自定义命令</a></li><li id="202365"><a href="/read/CMake-Cookbook/content-chapter5-5.3-chinese.md" title="" data-original-title="5.3 构建时运行自定义命令:Ⅰ. 使用add_custom_command">5.3 构建时运行自定义命令:Ⅰ. 使用add_custom_command</a></li><li id="202366"><a href="/read/CMake-Cookbook/content-chapter5-5.4-chinese.md" title="" data-original-title="5.4 构建时运行自定义命令:Ⅱ. 使用add_custom_target">5.4 构建时运行自定义命令:Ⅱ. 使用add_custom_target</a></li><li id="202367"><a href="/read/CMake-Cookbook/content-chapter5-5.5-chinese.md" title="" data-original-title="5.5 构建时为特定目标运行自定义命令">5.5 构建时为特定目标运行自定义命令</a></li><li id="202368"><a href="/read/CMake-Cookbook/content-chapter5-5.6-chinese.md" title="" data-original-title="5.6 探究编译和链接命令">5.6 探究编译和链接命令</a></li><li id="202369"><a href="/read/CMake-Cookbook/content-chapter5-5.7-chinese.md" title="" data-original-title="5.7 探究编译器标志命令">5.7 探究编译器标志命令</a></li><li id="202370"><a href="/read/CMake-Cookbook/content-chapter5-5.8-chinese.md" title="" data-original-title="5.8 探究可执行命令">5.8 探究可执行命令</a></li><li id="202371"><a href="/read/CMake-Cookbook/content-chapter5-5.9-chinese.md" title="" data-original-title="5.9 使用生成器表达式微调配置和编译">5.9 使用生成器表达式微调配置和编译</a></li></ul></li><li id="202372" class="collapse-node  collapse-hide"><span></span><a href="/read/CMake-Cookbook/content-chapter6-6.0-chinese.md" title="" data-original-title="第6章 生成源码">第6章 生成源码</a><ul><li id="202373"><a href="/read/CMake-Cookbook/content-chapter6-6.1-chinese.md" title="" data-original-title="6.1 配置时生成源码">6.1 配置时生成源码</a></li><li id="202374"><a href="/read/CMake-Cookbook/content-chapter6-6.2-chinese.md" title="" data-original-title="6.2 使用Python在配置时生成源码">6.2 使用Python在配置时生成源码</a></li><li id="202375"><a href="/read/CMake-Cookbook/content-chapter6-6.3-chinese.md" title="" data-original-title="6.3 构建时使用Python生成源码">6.3 构建时使用Python生成源码</a></li><li id="202376"><a href="/read/CMake-Cookbook/content-chapter6-6.4-chinese.md" title="" data-original-title="6.4 记录项目版本信息以便报告">6.4 记录项目版本信息以便报告</a></li><li id="202377"><a href="/read/CMake-Cookbook/content-chapter6-6.5-chinese.md" title="" data-original-title="6.5 从文件中记录项目版本">6.5 从文件中记录项目版本</a></li><li id="202378"><a href="/read/CMake-Cookbook/content-chapter6-6.6-chinese.md" title="" data-original-title="6.6 配置时记录Git Hash值">6.6 配置时记录Git Hash值</a></li><li id="202379"><a href="/read/CMake-Cookbook/content-chapter6-6.7-chinese.md" title="" data-original-title="6.7 构建时记录Git Hash值">6.7 构建时记录Git Hash值</a></li></ul></li><li id="202380" class="jstree-open collapse-node"><span></span><a href="/read/CMake-Cookbook/content-chapter7-7.0-chinese.md" title="" data-original-title="第7章 构建项目">第7章 构建项目</a><ul><li id="202381"><a href="/read/CMake-Cookbook/content-chapter7-7.1-chinese.md" title="" data-original-title="7.1 使用函数和宏重用代码">7.1 使用函数和宏重用代码</a></li><li id="202382"><a href="/read/CMake-Cookbook/content-chapter7-7.2-chinese.md" title="" data-original-title="7.2 将CMake源代码分成模块">7.2 将CMake源代码分成模块</a></li><li id="202383"><a href="/read/CMake-Cookbook/content-chapter7-7.3-chinese.md" title="" data-original-title="7.3 编写函数来测试和设置编译器标志">7.3 编写函数来测试和设置编译器标志</a></li><li id="202384"><a href="/read/CMake-Cookbook/content-chapter7-7.4-chinese.md" title="" class="jstree-clicked" data-original-title="7.4 用指定参数定义函数或宏">7.4 用指定参数定义函数或宏</a></li><li id="202385"><a href="/read/CMake-Cookbook/content-chapter7-7.5-chinese.md" title="" data-original-title="7.5 重新定义函数和宏">7.5 重新定义函数和宏</a></li><li id="202386"><a href="/read/CMake-Cookbook/content-chapter7-7.6-chinese.md" title="" data-original-title="7.6 使用废弃函数、宏和变量">7.6 使用废弃函数、宏和变量</a></li><li id="202387"><a href="/read/CMake-Cookbook/content-chapter7-7.7-chinese.md" title="" data-original-title="7.7 add_subdirectory的限定范围">7.7 add_subdirectory的限定范围</a></li><li id="202388"><a href="/read/CMake-Cookbook/content-chapter7-7.8-chinese.md" title="" data-original-title="7.8 使用target_sources避免全局变量">7.8 使用target_sources避免全局变量</a></li><li id="202389"><a href="/read/CMake-Cookbook/content-chapter7-7.9-chinese.md" title="" data-original-title="7.9 组织Fortran项目">7.9 组织Fortran项目</a></li></ul></li><li id="202390" class="collapse-node  collapse-hide"><span></span><a href="/read/CMake-Cookbook/content-chapter8-8.0-chinese.md" title="" data-original-title="第8章 超级构建模式">第8章 超级构建模式</a><ul><li id="202391"><a href="/read/CMake-Cookbook/content-chapter8-8.1-chinese.md" title="" data-original-title="8.1 使用超级构建模式">8.1 使用超级构建模式</a></li><li id="202392"><a href="/read/CMake-Cookbook/content-chapter8-8.2-chinese.md" title="" data-original-title="8.2 使用超级构建管理依赖项:Ⅰ.Boost库">8.2 使用超级构建管理依赖项:Ⅰ.Boost库</a></li><li id="202393"><a href="/read/CMake-Cookbook/content-chapter8-8.3-chinese.md" title="" data-original-title="8.3 使用超级构建管理依赖项:Ⅱ.FFTW库">8.3 使用超级构建管理依赖项:Ⅱ.FFTW库</a></li><li id="202394"><a href="/read/CMake-Cookbook/content-chapter8-8.4-chinese.md" title="" data-original-title="8.4 使用超级构建管理依赖项:Ⅲ.Google Test框架">8.4 使用超级构建管理依赖项:Ⅲ.Google Test框架</a></li><li id="202395"><a href="/read/CMake-Cookbook/content-chapter8-8.5-chinese.md" title="" data-original-title="8.5 使用超级构建支持项目">8.5 使用超级构建支持项目</a></li></ul></li><li id="202396" class="collapse-node  collapse-hide"><span></span><a href="/read/CMake-Cookbook/content-chapter9-9.0-chinese.md" title="" data-original-title="第9章 语言混合项目">第9章 语言混合项目</a><ul><li id="202397"><a href="/read/CMake-Cookbook/content-chapter9-9.1-chinese.md" title="" data-original-title="9.1 使用C/C++库构建Fortran项目">9.1 使用C/C++库构建Fortran项目</a></li><li id="202398"><a href="/read/CMake-Cookbook/content-chapter9-9.2-chinese.md" title="" data-original-title="9.2 使用Fortran库构建C/C++项目">9.2 使用Fortran库构建C/C++项目</a></li><li id="202399"><a href="/read/CMake-Cookbook/content-chapter9-9.3-chinese.md" title="" data-original-title="9.3 使用Cython构建C++和Python项目">9.3 使用Cython构建C++和Python项目</a></li><li id="202400"><a href="/read/CMake-Cookbook/content-chapter9-9.4-chinese.md" title="" data-original-title="9.4 使用Boost.Python构建C++和Python项目">9.4 使用Boost.Python构建C++和Python项目</a></li><li id="202401"><a href="/read/CMake-Cookbook/content-chapter9-9.5-chinese.md" title="" data-original-title="9.5 使用pybind11构建C++和Python项目">9.5 使用pybind11构建C++和Python项目</a></li><li id="202402"><a href="/read/CMake-Cookbook/content-chapter9-9.6-chinese.md" title="" data-original-title="9.6 使用Python CFFI混合C，C++，Fortran和Python">9.6 使用Python CFFI混合C，C++，Fortran和Python</a></li></ul></li><li id="202298" class="collapse-node  collapse-hide"><span></span><a href="/read/CMake-Cookbook/content-chapter10-10.0-chinese.md" title="" data-original-title="第10章 编写安装程序">第10章 编写安装程序</a><ul><li id="202299"><a href="/read/CMake-Cookbook/content-chapter10-10.1-chinese.md" title="" data-original-title="10.1 安装项目">10.1 安装项目</a></li><li id="202300"><a href="/read/CMake-Cookbook/content-chapter10-10.2-chinese.md" title="" data-original-title="10.2 生成输出头文件">10.2 生成输出头文件</a></li><li id="202301"><a href="/read/CMake-Cookbook/content-chapter10-10.3-chinese.md" title="" data-original-title="10.3 输出目标">10.3 输出目标</a></li><li id="202302"><a href="/read/CMake-Cookbook/content-chapter10-10.4-chinese.md" title="" data-original-title="10.4 安装超级构建">10.4 安装超级构建</a></li></ul></li><li id="202303" class="collapse-node  collapse-hide"><span></span><a href="/read/CMake-Cookbook/content-chapter11-11.0-chinese.md" title="" data-original-title="第11章 打包项目">第11章 打包项目</a><ul><li id="202304"><a href="/read/CMake-Cookbook/content-chapter11-11.1-chinese.md" title="" data-original-title="11.1 生成源代码和二进制包">11.1 生成源代码和二进制包</a></li><li id="202305"><a href="/read/CMake-Cookbook/content-chapter11-11.2-chinese.md" title="" data-original-title="11.2 通过PyPI发布使用CMake/pybind11构建的C++/Python项目">11.2 通过PyPI发布使用CMake/pybind11构建的C++/Python项目</a></li><li id="202306"><a href="/read/CMake-Cookbook/content-chapter11-11.3-chinese.md" title="" data-original-title="11.3 通过PyPI发布使用CMake/CFFI构建C/Fortran/Python项目">11.3 通过PyPI发布使用CMake/CFFI构建C/Fortran/Python项目</a></li><li id="202307"><a href="/read/CMake-Cookbook/content-chapter11-11.4-chinese.md" title="" data-original-title="11.4 以Conda包的形式发布一个简单的项目">11.4 以Conda包的形式发布一个简单的项目</a></li><li id="202308"><a href="/read/CMake-Cookbook/content-chapter11-11.5-chinese.md" title="" data-original-title="11.5 将Conda包作为依赖项发布给项目">11.5 将Conda包作为依赖项发布给项目</a></li></ul></li><li id="202309" class="collapse-node  collapse-hide"><span></span><a href="/read/CMake-Cookbook/content-chapter12-12.0-chinese.md" title="" data-original-title="第12章 构建文档">第12章 构建文档</a><ul><li id="202310"><a href="/read/CMake-Cookbook/content-chapter12-12.1-chinese.md" title="" data-original-title="12.1 使用Doxygen构建文档">12.1 使用Doxygen构建文档</a></li><li id="202311"><a href="/read/CMake-Cookbook/content-chapter12-12.2-chinese.md" title="" data-original-title="12.2 使用Sphinx构建文档">12.2 使用Sphinx构建文档</a></li><li id="202312"><a href="/read/CMake-Cookbook/content-chapter12-12.3-chinese.md" title="" data-original-title="12.3 结合Doxygen和Sphinx">12.3 结合Doxygen和Sphinx</a></li></ul></li><li id="202313" class="collapse-node  collapse-hide"><span></span><a href="/read/CMake-Cookbook/content-chapter13-13.0-chinese.md" title="" data-original-title="第13章 选择生成器和交叉编译">第13章 选择生成器和交叉编译</a><ul><li id="202314"><a href="/read/CMake-Cookbook/content-chapter13-13.1-chinese.md" title="" data-original-title="13.1 使用CMake构建Visual Studio 2017项目">13.1 使用CMake构建Visual Studio 2017项目</a></li><li id="202315"><a href="/read/CMake-Cookbook/content-chapter13-13.2-chinese.md" title="" data-original-title="13.2 交叉编译hello world示例">13.2 交叉编译hello world示例</a></li><li id="202316"><a href="/read/CMake-Cookbook/content-chapter13-13.3-chinese.md" title="" data-original-title="13.3 使用OpenMP并行化交叉编译Windows二进制文件">13.3 使用OpenMP并行化交叉编译Windows二进制文件</a></li></ul></li><li id="202317" class="collapse-node  collapse-hide"><span></span><a href="/read/CMake-Cookbook/content-chapter14-14.0-chinese.md" title="" data-original-title="第14章 测试面板">第14章 测试面板</a><ul><li id="202318"><a href="/read/CMake-Cookbook/content-chapter14-14.1-chinese.md" title="" data-original-title="14.1 将测试部署到CDash">14.1 将测试部署到CDash</a></li><li id="202319"><a href="/read/CMake-Cookbook/content-chapter14-14.2-chinese.md" title="" data-original-title="14.2 CDash显示测试覆盖率">14.2 CDash显示测试覆盖率</a></li><li id="202320"><a href="/read/CMake-Cookbook/content-chapter14-14.3-chinese.md" title="" data-original-title="14.3 使用AddressSanifier向CDash报告内存缺陷">14.3 使用AddressSanifier向CDash报告内存缺陷</a></li><li id="202321"><a href="/read/CMake-Cookbook/content-chapter14-14.4-chinese.md" title="" data-original-title="14.4 使用ThreadSaniiser向CDash报告数据争用">14.4 使用ThreadSaniiser向CDash报告数据争用</a></li></ul></li><li id="202322" class="collapse-node  collapse-hide"><span></span><a href="/read/CMake-Cookbook/content-chapter15-15.0-chinese.md" title="" data-original-title="第15章 使用CMake构建已有项目">第15章 使用CMake构建已有项目</a><ul><li id="202323"><a href="/read/CMake-Cookbook/content-chapter15-15.1-chinese.md" title="" data-original-title="15.1 如何开始迁移项目">15.1 如何开始迁移项目</a></li><li id="202324"><a href="/read/CMake-Cookbook/content-chapter15-15.2-chinese.md" title="" data-original-title="15.2 生成文件并编写平台检查">15.2 生成文件并编写平台检查</a></li><li id="202325"><a href="/read/CMake-Cookbook/content-chapter15-15.3-chinese.md" title="" data-original-title="15.3 检测所需的链接和依赖关系">15.3 检测所需的链接和依赖关系</a></li><li id="202326"><a href="/read/CMake-Cookbook/content-chapter15-15.4-chinese.md" title="" data-original-title="15.4 复制编译标志">15.4 复制编译标志</a></li><li id="202327"><a href="/read/CMake-Cookbook/content-chapter15-15.5-chinese.md" title="" data-original-title="15.5 移植测试">15.5 移植测试</a></li><li id="202328"><a href="/read/CMake-Cookbook/content-chapter15-15.6-chinese.md" title="" data-original-title="15.6 移植安装目标">15.6 移植安装目标</a></li><li id="202329"><a href="/read/CMake-Cookbook/content-chapter15-15.7-chinese.md" title="" data-original-title="15.7 进一步迁移的措施">15.7 进一步迁移的措施</a></li><li id="202330"><a href="/read/CMake-Cookbook/content-chapter15-15.8-chinese.md" title="" data-original-title="15.8 项目转换为CMake的常见问题">15.8 项目转换为CMake的常见问题</a></li></ul></li><li id="202331" class="collapse-node  collapse-hide"><span></span><a href="/read/CMake-Cookbook/content-chapter16-16.0-chinese.md" title="" data-original-title="第16章 可能感兴趣的书">第16章 可能感兴趣的书</a><ul><li id="202332"><a href="/read/CMake-Cookbook/content-chapter16-16.1-chinese.md" title="" data-original-title="16.1 留下评论——让其他读者知道你的想法">16.1 留下评论——让其他读者知道你的想法</a></li></ul></li></ul>
                    </div>
                    <div class="search-result">
                        <div class="search-empty" style="display: block;">
                            <i class="fa fa-search-plus" aria-hidden="true"></i>
                            <b class="text">暂无相关搜索结果！</b>
                        </div>
                        <ul class="search-list" id="searchList"></ul>
                    </div>
                </div>

                <div class="m-copyright">
                    <p>
                        本文档使用 <a href="//www.bookstack.cn" style="color: #0e8c8c;font-weight: bold" target="_blank">BookStack</a> 构建
                    </p>
                </div>
        </div>

        <div class="manual-progress"><b class="progress-bar"></b></div>
    </div>
    <div class="manual-mask"></div>
</div>
<span class="article-toggle tooltips" title="" data-original-title="展开/收起文章目录"><img alt="展开/收起文章目录" src="https://static.sitestack.cn/static/images/toggle.png" /></span>
<div id="menu-hidden" style="display: none;">
    
    <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?227e05b01b8f7eefb29a75df28f53840";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1277690469'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s23.cnzz.com/stat.php%3Fid%3D1277690469' type='text/javascript'%3E%3C/script%3E"));</script><span id="cnzz_stat_icon_1277690469"><a href="https://www.cnzz.com/stat/website.php?web_id=1277690469" target="_blank" title="站长统计">站长统计</a></span><script src="https://s23.cnzz.com/stat.php?id=1277690469" type="text/javascript"></script><script src="https://c.cnzz.com/core.php?web_id=1277690469&amp;t=z" charset="utf-8" type="text/javascript"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-166942584-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-166942584-1');
</script>
</div>


<div class="modal fade" id="ModalShare" tabindex="-1" role="dialog" aria-labelledby="ModalShareLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="ModalShareLabel">分享，让知识传承更久远</h4>
            </div>
            <div class="modal-body">
                <div class="bdsharebuttonbox bdshare-button-style1-32" data-bd-bind="1614324981855"><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a><a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博"></a><a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网"></a><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a><a href="#" class="bds_sqq" data-cmd="sqq" title="分享到QQ好友"></a><a href="#" class="bds_bdysc" data-cmd="bdysc" title="分享到百度云收藏"></a><a href="#" class="bds_kaixin001" data-cmd="kaixin001" title="分享到开心网"></a><a href="#" class="bds_bdxc" data-cmd="bdxc" title="分享到百度相册"></a><a href="#" class="bds_tieba" data-cmd="tieba" title="分享到百度贴吧"></a><a href="#" class="bds_douban" data-cmd="douban" title="分享到豆瓣网"></a><a href="#" class="bds_tqf" data-cmd="tqf" title="分享到腾讯朋友"></a><a href="#" class="bds_thx" data-cmd="thx" title="分享到和讯微博"></a><a href="#" class="bds_bdhome" data-cmd="bdhome" title="分享到百度新首页"></a><a href="#" class="bds_meilishuo" data-cmd="meilishuo" title="分享到美丽说"></a><a href="#" class="bds_ibaidu" data-cmd="ibaidu" title="分享到百度中心"></a><a href="#" class="bds_mogujie" data-cmd="mogujie" title="分享到蘑菇街"></a><a href="#" class="bds_diandian" data-cmd="diandian" title="分享到点点网"></a><a href="#" class="bds_huaban" data-cmd="huaban" title="分享到花瓣"></a><a href="#" class="bds_hx" data-cmd="hx" title="分享到和讯"></a><a href="#" class="bds_duitang" data-cmd="duitang" title="分享到堆糖"></a><a href="#" class="bds_fx" data-cmd="fx" title="分享到飞信"></a><a href="#" class="bds_youdao" data-cmd="youdao" title="分享到有道云笔记"></a><a href="#" class="bds_sdo" data-cmd="sdo" title="分享到麦库记事"></a><a href="#" class="bds_qingbiji" data-cmd="qingbiji" title="分享到轻笔记"></a><a href="#" class="bds_people" data-cmd="people" title="分享到人民微博"></a><a href="#" class="bds_xinhua" data-cmd="xinhua" title="分享到新华微博"></a><a href="#" class="bds_mail" data-cmd="mail" title="分享到邮件分享"></a><a href="#" class="bds_isohu" data-cmd="isohu" title="分享到我的搜狐"></a><a href="#" class="bds_yaolan" data-cmd="yaolan" title="分享到摇篮空间"></a><a href="#" class="bds_wealink" data-cmd="wealink" title="分享到若邻网"></a><a href="#" class="bds_iguba" data-cmd="iguba" title="分享到股吧"></a><a href="#" class="bds_ty" data-cmd="ty" title="分享到天涯社区"></a><a href="#" class="bds_fbook" data-cmd="fbook" title="分享到Facebook"></a><a href="#" class="bds_linkedin" data-cmd="linkedin" title="分享到linkedin"></a><a href="#" class="bds_h163" data-cmd="h163" title="分享到网易热"></a><a href="#" class="bds_twi" data-cmd="twi" title="分享到Twitter"></a><a href="#" class="bds_evernotecn" data-cmd="evernotecn" title="分享到印象笔记"></a><a href="#" class="bds_copy" data-cmd="copy" title="分享到复制网址"></a></div>
                <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"1","bdSize":"32"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='https:\/\/static.sitestack.cn/static/api/js/share.js'];</script>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">取消分享</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="ModalQRcode" tabindex="-1" role="dialog" aria-labelledby="ModalShareLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="ModalShareLabel">文章二维码</h4>
            </div>
            <div class="modal-body">
                <div id="qrcode" style="width: 256px;height: 256px;margin: 0px auto;margin-bottom: 15px;"><canvas width="256" height="256"></canvas></div>
                <div class="help-block text-center">手机扫一扫，轻松掌上读</div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">关闭</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="ModalDownload" tabindex="-1" role="dialog" aria-labelledby="ModalDownloadLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="ModalDownloadLabel">文档下载</h4>
            </div>
            <div class="modal-body clearfix">
                <div class="help-block">
                    
                        <div class="row">
                            <div class="col-sm-6 col-xs-6 text-center">
                                <div class="help-block">
                                    你与大神的距离，只差一个APP
                                </div>
                                <img src="https://static.bookstack.cn/projects/help/15d7e8169208fad1.png" style="width:100%;max-width: 133px;" alt="APP下载" />
                            </div>
                            <div class="col-sm-6 col-xs-6">
                                <div class="help-block">请下载您需要的格式的文档，随时随地，享受汲取知识的乐趣！</div>
                                <a href="/export/CMake-Cookbook?output=pdf" class="btn btn-default btn-filedown btn-block"> <i class="fa fa-cloud-download"></i> PDF<span class="hidden-xs">文档</span></a>
                                <a href="/export/CMake-Cookbook?output=epub" class="btn btn-default btn-filedown btn-block"> <i class="fa fa-cloud-download"></i> EPUB<span class="hidden-xs">文档</span></a>
                                <a href="/export/CMake-Cookbook?output=mobi" class="btn btn-default btn-filedown btn-block"> <i class="fa fa-cloud-download"></i> MOBI<span class="hidden-xs">文档</span></a>
                            </div>
                        </div>
                    
                </div>
                <div class="help-block">
                    <strong>温馨提示</strong> <span class="text-danger">每天每在网站阅读学习一分钟时长可下载一本电子书，每天连续签到可增加阅读时长</span>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">关闭窗口</button>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="ModalMayLike" tabindex="-1" role="dialog" aria-labelledby="ModalMayLikeLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="ModalMayLikeLabel">猜你喜欢</h4>
            </div>
            <div class="modal-body clearfix">
                <div class="help-block">
                    <ul>
                        
                        <li><a href="javascript:void(0);" class="click-link tooltips" data-href="/redirect/maylike?id=6808" target="_blank" rel="nofollow" title="" data-original-title="[京东图书] 大话C语言">[京东图书] 大话C语言</a></li>
                        
                        <li><a href="javascript:void(0);" class="click-link tooltips" data-href="/redirect/maylike?id=8869" target="_blank" rel="nofollow" title="" data-original-title="[京东图书] 编程语言基础：C语言">[京东图书] 编程语言基础：C语言</a></li>
                        
                        <li><a href="javascript:void(0);" class="click-link tooltips" data-href="/redirect/maylike?id=7575" target="_blank" rel="nofollow" title="" data-original-title="[京东图书] C++语言（小学版）">[京东图书] C++语言（小学版）</a></li>
                        
                        <li><a href="javascript:void(0);" class="click-link tooltips" data-href="/redirect/maylike?id=7805" target="_blank" rel="nofollow" title="" data-original-title="[京东图书] C语言非常道">[京东图书] C语言非常道</a></li>
                        
                        <li><a href="javascript:void(0);" class="click-link tooltips" data-href="/redirect/maylike?id=10013" target="_blank" rel="nofollow" title="" data-original-title="[京东图书] C语言程序设计">[京东图书] C语言程序设计</a></li>
                        
                        <li><a href="javascript:void(0);" class="click-link tooltips" data-href="/redirect/maylike?id=10025" target="_blank" rel="nofollow" title="" data-original-title="[京东图书] C语言程序设计">[京东图书] C语言程序设计</a></li>
                        
                        <li><a href="javascript:void(0);" class="click-link tooltips" data-href="/redirect/maylike?id=10083" target="_blank" rel="nofollow" title="" data-original-title="[京东图书] C++语言程序设计">[京东图书] C++语言程序设计</a></li>
                        
                        <li><a href="javascript:void(0);" class="click-link tooltips" data-href="/redirect/maylike?id=10087" target="_blank" rel="nofollow" title="" data-original-title="[京东图书] C语言程序设计">[京东图书] C语言程序设计</a></li>
                        
                        <li><a href="javascript:void(0);" class="click-link tooltips" data-href="/redirect/maylike?id=10088" target="_blank" rel="nofollow" title="" data-original-title="[京东图书] C语言实训教程">[京东图书] C语言实训教程</a></li>
                        
                        <li><a href="javascript:void(0);" class="click-link tooltips" data-href="/redirect/maylike?id=8412" target="_blank" rel="nofollow" title="" data-original-title="[京东图书] C语言程序设计">[京东图书] C语言程序设计</a></li>
                        
                        <li><a href="javascript:void(0);" class="click-link tooltips" data-href="/redirect/maylike?id=8485" target="_blank" rel="nofollow" title="" data-original-title="[京东图书] C语言程序设计">[京东图书] C语言程序设计</a></li>
                        
                        <li><a href="javascript:void(0);" class="click-link tooltips" data-href="/redirect/maylike?id=8557" target="_blank" rel="nofollow" title="" data-original-title="[京东图书] C语言程序设计">[京东图书] C语言程序设计</a></li>
                        
                        <li><a href="javascript:void(0);" class="click-link tooltips" data-href="/redirect/maylike?id=8765" target="_blank" rel="nofollow" title="" data-original-title="[京东图书] C++语言程序设计">[京东图书] C++语言程序设计</a></li>
                        
                        <li><a href="javascript:void(0);" class="click-link tooltips" data-href="/redirect/maylike?id=9175" target="_blank" rel="nofollow" title="" data-original-title="[京东图书] C语言程序设计">[京东图书] C语言程序设计</a></li>
                        
                        <li><a href="javascript:void(0);" class="click-link tooltips" data-href="/redirect/maylike?id=9276" target="_blank" rel="nofollow" title="" data-original-title="[京东图书] C语言实验实训">[京东图书] C语言实验实训</a></li>
                        
                        <li><a href="javascript:void(0);" class="click-link tooltips" data-href="/redirect/maylike?id=9323" target="_blank" rel="nofollow" title="" data-original-title="[京东图书] C语言程序设计">[京东图书] C语言程序设计</a></li>
                        
                        <li><a href="javascript:void(0);" class="click-link tooltips" data-href="/redirect/maylike?id=9373" target="_blank" rel="nofollow" title="" data-original-title="[京东图书] C语言程序设计">[京东图书] C语言程序设计</a></li>
                        
                        <li><a href="javascript:void(0);" class="click-link tooltips" data-href="/redirect/maylike?id=9414" target="_blank" rel="nofollow" title="" data-original-title="[京东图书] C语言程序设计">[京东图书] C语言程序设计</a></li>
                        
                        <li><a href="javascript:void(0);" class="click-link tooltips" data-href="/redirect/maylike?id=9499" target="_blank" rel="nofollow" title="" data-original-title="[京东图书] C语言程序设计">[京东图书] C语言程序设计</a></li>
                        
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">关闭窗口</button>
            </div>
        </div>
    </div>
</div>



<div class="modal fade" id="ModalBookChat" tabindex="-1" role="dialog" aria-labelledby="ModalBookChatLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="ModalBookChatLabel">微信小程序阅读</h4>
            </div>
            <div class="modal-body text-center">
                <img src="https://static.sitestack.cn/projects/CMake-Cookbook/wxacode.jpeg" style="margin: 15px auto;" class="img-responsive" alt="BookChat 微信小程序阅读" />
                <div class="help-block">微信扫一扫，知识掌上学</div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">关闭窗口</button>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="ModalBookmark" tabindex="-1" role="dialog" aria-labelledby="ModalBookmarkLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="ModalBookmarkLabel">书签列表</h4>
            </div>
            <div class="modal-body">
                <ul></ul>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">关闭</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="ModalHistory" tabindex="-1" role="dialog" aria-labelledby="ModalBookmarkLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="ModalBookmarkLabel">阅读记录</h4>
            </div>
            <div class="modal-body">
                <div class="help-block progress-block">
                    阅读进度:  <span class="text-success">0.00%</span> ( <span class="text-muted">0/0</span> )
                    <a href="#" class="reset-history pull-right"> <i class="fa fa-refresh"></i> 重置阅读进度</a>
                </div>
                <div class="progress progress-striped active">
                    <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
                        <span class="sr-only"></span>
                    </div>
                </div>
                <hr />
                <ul></ul>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">关闭</button>
            </div>
        </div>
    </div>
</div>

<div class="bookstack-viewer"></div>


<script src="https://static.sitestack.cn/static/jquery/1.12.4/jquery.min.js" type="text/javascript"></script>

<script src="https://static.sitestack.cn/static/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>


<script type="text/javascript" src="https://static.sitestack.cn/static/nprogress/nprogress.js"></script>
<script type="text/javascript" src="https://static.sitestack.cn/static/highlight/highlight.js"></script>
<script type="text/javascript" src="https://static.sitestack.cn/static/highlight/highlightjs-line-numbers.min.js"></script>
<script type="text/javascript" src="https://static.sitestack.cn/static/js/jquery.highlight.js"></script>
<script type="text/javascript" src="https://static.sitestack.cn/static/js/toast.script.js"></script>
<script type="text/javascript" src="https://static.sitestack.cn/static/js/jquery.qrcode.min.js"></script>
<script type="text/javascript" src="https://static.sitestack.cn/static/js/clipboard.min.js"></script>
<script type="text/javascript" src="https://static.sitestack.cn/static/katex/katex.min.js"></script>
<script src="https://static.sitestack.cn/static/editor.md/lib/marked.min.js" type="text/javascript"></script>
<script src="https://static.sitestack.cn/static/mind-map/kity.min.js" type="text/javascript"></script>
<script src="https://static.sitestack.cn/static/mind-map/kityminder.core.min.js" type="text/javascript"></script>
<script src="https://static.sitestack.cn/static/mind-map/mindmap.min.js" type="text/javascript"></script>
<script type="text/javascript" src="https://static.sitestack.cn/static/js/bookstack.js?version=v2.10"></script>
<script type="text/javascript" src="https://static.sitestack.cn/static/js/main.js?version=v2.10"></script>
<script type="text/javascript">
    'use strict';
$(function () {

    var keywords="";
    if (keywords){
        var wds =keywords.split(","),l=wds.length;
        for (var i = 0; i &lt; l; i++) {
            $(".markdown-body").highlight(wds[i].trim());
        }
    }

    $("#searchList").on("click","a",function () {
        var id = $(this).attr("data-id");
        var url = "\/read\/CMake-Cookbook\/" + id;
        var _this=$(this);
        _this.parent("li").siblings().find("a").removeClass("active");
        _this.addClass("active");
        load_doc(url,_this.attr("data-wd"));
    });
    
    $(".markdown-body").on("click",".btn-ilink",function (e) {
        redirect($(this).parents("a").attr("href"));
    })
    $(".markdown-body").on("click","a",function (e) {
        e.preventDefault();
        var _this = $(this);
        if(_this.find("img").length == 0){
            redirect(_this.attr("href"))
        }
    });

    function redirect(href){
        var hrefLower=href.toLowerCase();
        if(hrefLower.indexOf("http://")==0 || hrefLower.indexOf("https://")==0 ){
            window.open(href);
        }else{
            location.href=href;
        }
    }

    show_copy_btn();
    initLinkWithImage();

    $(".tooltips").tooltip();
    $("#qrcode").qrcode(location.href);

    var clipboard = new ClipboardJS('.btn-copy',{
        
        target: function(trigger) {
            return trigger.nextElementSibling;
        }
    });

    clipboard.on('success', function(e) {
        console.info('Copy Content：', e.text);
        alertTips("success","代码复制成功",3000,"");
    });

    clipboard.on('error', function(e) {
        console.log("Copy Error：",e);
    });

    $(".book-menu").click(function () {
        $(".slidebar").trigger("click");
    });

    $(".article-toggle").click(function () {
        if($("body").hasClass("article-menu-hide")){
            $("body").removeClass("article-menu-hide");
        }else{
            $("body").addClass("article-menu-hide");
        }
    });
    $(".collapse-menu .collapse-node span").click(function (e) {
        if($(this).parent().hasClass("collapse-hide")){
            $(this).parent().removeClass("collapse-hide")
        }else {
            $(this).parent().addClass("collapse-hide")
        }
    })
});
</script>

</body></html>