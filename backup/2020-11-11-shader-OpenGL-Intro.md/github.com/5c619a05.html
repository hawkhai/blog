---
title : 自动快照存档
---

* TIME: 2021-02-05 22:57:39
* URL: <https://github.com/JoeyDeVries/LearnOpenGL/blob/master/src/1.getting_started/7.4.camera_class/camera_class.cpp>

-----

Skip to content

[ ](https://github.com/)

[ Sign up
](/join?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-
name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo)

  * Why GitHub? 

[Features →](/features)

    * [Code review](/features/code-review/)
    * [Project management](/features/project-management/)
    * [Integrations](/features/integrations)
    * [Actions](/features/actions)
    * [Packages](/features/packages)
    * [Security](/features/security)
    * [Team management](/features#team-management)
    * [Hosting](/features#hosting)
    * [Mobile](/mobile)
    * [Customer stories →](/customer-stories)
    * [Security →](/security)

  * [Team](/team)
  * [Enterprise](/enterprise)
  * Explore 

    * [Explore GitHub →](/explore)

#### Learn & contribute

    * [Topics](/topics)
    * [Collections](/collections)
    * [Trending](/trending)
    * [Learning Lab](https://lab.github.com/)
    * [Open source guides](https://opensource.guide)

#### Connect with others

    * [Events](https://github.com/events)
    * [Community forum](https://github.community)
    * [GitHub Education](https://education.github.com)
    * [GitHub Stars program](https://stars.github.com)

  * [Marketplace](/marketplace)
  * Pricing 

[Plans →](/pricing)

    * [Compare plans](/pricing#feature-comparison)
    * [Contact Sales](https://enterprise.github.com/contact)
    * [Nonprofit →](/nonprofit)
    * [Education →](https://education.github.com)

![](https://github.githubassets.com/images/search-key-slash.svg)

  * [ ![]() In this repository  All GitHub  ↵ Jump to ↵ ]()

  * No suggested jump to results

  * [ ![]() In this repository  All GitHub  ↵ Jump to ↵ ]()
  * [ ![]() In this repository  All GitHub  ↵ Jump to ↵ ]()

[ Sign in
](/login?return_to=%2FJoeyDeVries%2FLearnOpenGL%2Fblob%2Fmaster%2Fsrc%2F1.getting_started%2F7.4.camera_class%2Fcamera_class.cpp)
[ Sign up
](/join?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-
name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-
repo&source_repo=JoeyDeVries%2FLearnOpenGL)

{{ message }}

#  [JoeyDeVries](/JoeyDeVries) / **[LearnOpenGL](/JoeyDeVries/LearnOpenGL) **

  * Sponsor 

###  Sponsor JoeyDeVries/LearnOpenGL

  * [ Watch ](/login?return_to=%2FJoeyDeVries%2FLearnOpenGL) [ 249 ](/JoeyDeVries/LearnOpenGL/watchers)
  * [ Star ](/login?return_to=%2FJoeyDeVries%2FLearnOpenGL) [ 5k ](/JoeyDeVries/LearnOpenGL/stargazers)
  * [ Fork ](/login?return_to=%2FJoeyDeVries%2FLearnOpenGL) [ 1.5k ](/JoeyDeVries/LearnOpenGL/network/members)

  * [ Code ](/JoeyDeVries/LearnOpenGL)
  * [ Issues 59 ](/JoeyDeVries/LearnOpenGL/issues)
  * [ Pull requests 8 ](/JoeyDeVries/LearnOpenGL/pulls)
  * [ Actions ](/JoeyDeVries/LearnOpenGL/actions)
  * [ Projects 0 ](/JoeyDeVries/LearnOpenGL/projects)
  * [ Security ](/JoeyDeVries/LearnOpenGL/security)
  * [ Insights ](/JoeyDeVries/LearnOpenGL/pulse)

More

  * [ Code ](/JoeyDeVries/LearnOpenGL)
  * [ Issues ](/JoeyDeVries/LearnOpenGL/issues)
  * [ Pull requests ](/JoeyDeVries/LearnOpenGL/pulls)
  * [ Actions ](/JoeyDeVries/LearnOpenGL/actions)
  * [ Projects ](/JoeyDeVries/LearnOpenGL/projects)
  * [ Security ](/JoeyDeVries/LearnOpenGL/security)
  * [ Insights ](/JoeyDeVries/LearnOpenGL/pulse)

[Permalink](/JoeyDeVries/LearnOpenGL/blob/9a46ecf52661081f6785dc0eea4d82bc5342fd7f/src/1.getting_started/7.4.camera_class/camera_class.cpp)

master

##
[LearnOpenGL](/JoeyDeVries/LearnOpenGL)/[src](/JoeyDeVries/LearnOpenGL/tree/master/src)/[1.getting_started](/JoeyDeVries/LearnOpenGL/tree/master/src/1.getting_started)/[7.4.camera_class](/JoeyDeVries/LearnOpenGL/tree/master/src/1.getting_started/7.4.camera_class)/
**camera_class.cpp**

[ Go to file ](/JoeyDeVries/LearnOpenGL/find/master)

  * [ Go to file T ](/JoeyDeVries/LearnOpenGL/find/master)
  * Go to line L
  *   * Copy path 

[![@JoeyDeVries](https://avatars0.githubusercontent.com/u/11600403?s=48&v=4)](/JoeyDeVries)

[JoeyDeVries](/JoeyDeVries) [Missed a few code files for removing the
unnecesasry OS X compile
com…](/JoeyDeVries/LearnOpenGL/commit/37892e5370652146df3030cf654e601182a33d19
"Missed a few code files for removing the unnecesasry OS X compile comment.")

…

Latest commit
[37892e5](/JoeyDeVries/LearnOpenGL/commit/37892e5370652146df3030cf654e601182a33d19)
on 23 Apr [ **History**
](/JoeyDeVries/LearnOpenGL/commits/master/src/1.getting_started/7.4.camera_class/camera_class.cpp)

    
    
    …ment.

**2** contributors

###  Users who have contributed to this file

[ ![@JoeyDeVries](https://avatars0.githubusercontent.com/u/11600403?s=48&v=4)
](/JoeyDeVries/LearnOpenGL/commits/master/src/1.getting_started/7.4.camera_class/camera_class.cpp?author=JoeyDeVries)
[ ![@shivmsit](https://avatars3.githubusercontent.com/u/25608507?s=48&v=4)
](/JoeyDeVries/LearnOpenGL/commits/master/src/1.getting_started/7.4.camera_class/camera_class.cpp?author=shivmsit)

332 lines (284 sloc)  11.8 KB

[Raw](/JoeyDeVries/LearnOpenGL/raw/master/src/1.getting_started/7.4.camera_class/camera_class.cpp)
[Blame](https://github.com/JoeyDeVries/LearnOpenGL/blame/master/src/1.getting_started/7.4.camera_class/camera_class.cpp)

[ ](https://desktop.github.com) [
](/login?return_to=%2FJoeyDeVries%2FLearnOpenGL%2Fblob%2Fmaster%2Fsrc%2F1.getting_started%2F7.4.camera_class%2Fcamera_class.cpp)
[
](/login?return_to=%2FJoeyDeVries%2FLearnOpenGL%2Fblob%2Fmaster%2Fsrc%2F1.getting_started%2F7.4.camera_class%2Fcamera_class.cpp)

| #include <glad/glad.h>  
---|---  
| #include <GLFW/glfw3.h>  
| #include <stb_image.h>  
|  
| #include <glm/glm.hpp>  
| #include <glm/gtc/matrix_transform.hpp>  
| #include <glm/gtc/type_ptr.hpp>  
|  
| #include <learnopengl/filesystem.h>  
| #include <learnopengl/shader_m.h>  
| #include <learnopengl/camera.h>  
|  
| #include <iostream>  
|  
| void framebuffer_size_callback(GLFWwindow* window, int width, int height);  
| void mouse_callback(GLFWwindow* window, double xpos, double ypos);  
| void scroll_callback(GLFWwindow* window, double xoffset, double yoffset);  
| void processInput(GLFWwindow *window);  
|  
| // settings  
| const unsigned int SCR_WIDTH = 800;  
| const unsigned int SCR_HEIGHT = 600;  
|  
| // camera  
| Camera camera(glm::vec3(0.0f, 0.0f, 3.0f));  
| float lastX = SCR_WIDTH / 2.0f;  
| float lastY = SCR_HEIGHT / 2.0f;  
| bool firstMouse = true;  
|  
| // timing  
| float deltaTime = 0.0f; // time between current frame and last frame  
| float lastFrame = 0.0f;  
|  
| int main()  
| {  
|  // glfw: initialize and configure  
|  // \------------------------------  
|  glfwInit();  
|  glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 3);  
|  glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 3);  
|  glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);  
|  
| #ifdef __APPLE__  
|  glfwWindowHint(GLFW_OPENGL_FORWARD_COMPAT, GL_TRUE);  
| #endif  
|  
|  // glfw window creation  
|  // \--------------------  
|  GLFWwindow* window = glfwCreateWindow(SCR_WIDTH, SCR_HEIGHT, "LearnOpenGL",
NULL, NULL);  
|  if (window == NULL)  
|  {  
|  std::cout << "Failed to create GLFW window" << std::endl;  
|  glfwTerminate();  
|  return -1;  
|  }  
|  glfwMakeContextCurrent(window);  
|  glfwSetFramebufferSizeCallback(window, framebuffer_size_callback);  
|  glfwSetCursorPosCallback(window, mouse_callback);  
|  glfwSetScrollCallback(window, scroll_callback);  
|  
|  // tell GLFW to capture our mouse  
|  glfwSetInputMode(window, GLFW_CURSOR, GLFW_CURSOR_DISABLED);  
|  
|  // glad: load all OpenGL function pointers  
|  // \---------------------------------------  
|  if (!gladLoadGLLoader((GLADloadproc)glfwGetProcAddress))  
|  {  
|  std::cout << "Failed to initialize GLAD" << std::endl;  
|  return -1;  
|  }  
|  
|  // configure global opengl state  
|  // \-----------------------------  
|  glEnable(GL_DEPTH_TEST);  
|  
|  // build and compile our shader zprogram  
|  // \------------------------------------  
|  Shader ourShader("7.4.camera.vs", "7.4.camera.fs");  
|  
|  // set up vertex data (and buffer(s)) and configure vertex attributes  
|  // \------------------------------------------------------------------  
|  float vertices[] = {  
|  -0.5f, -0.5f, -0.5f, 0.0f, 0.0f,  
|  0.5f, -0.5f, -0.5f, 1.0f, 0.0f,  
|  0.5f, 0.5f, -0.5f, 1.0f, 1.0f,  
|  0.5f, 0.5f, -0.5f, 1.0f, 1.0f,  
|  -0.5f, 0.5f, -0.5f, 0.0f, 1.0f,  
|  -0.5f, -0.5f, -0.5f, 0.0f, 0.0f,  
|  
|  -0.5f, -0.5f, 0.5f, 0.0f, 0.0f,  
|  0.5f, -0.5f, 0.5f, 1.0f, 0.0f,  
|  0.5f, 0.5f, 0.5f, 1.0f, 1.0f,  
|  0.5f, 0.5f, 0.5f, 1.0f, 1.0f,  
|  -0.5f, 0.5f, 0.5f, 0.0f, 1.0f,  
|  -0.5f, -0.5f, 0.5f, 0.0f, 0.0f,  
|  
|  -0.5f, 0.5f, 0.5f, 1.0f, 0.0f,  
|  -0.5f, 0.5f, -0.5f, 1.0f, 1.0f,  
|  -0.5f, -0.5f, -0.5f, 0.0f, 1.0f,  
|  -0.5f, -0.5f, -0.5f, 0.0f, 1.0f,  
|  -0.5f, -0.5f, 0.5f, 0.0f, 0.0f,  
|  -0.5f, 0.5f, 0.5f, 1.0f, 0.0f,  
|  
|  0.5f, 0.5f, 0.5f, 1.0f, 0.0f,  
|  0.5f, 0.5f, -0.5f, 1.0f, 1.0f,  
|  0.5f, -0.5f, -0.5f, 0.0f, 1.0f,  
|  0.5f, -0.5f, -0.5f, 0.0f, 1.0f,  
|  0.5f, -0.5f, 0.5f, 0.0f, 0.0f,  
|  0.5f, 0.5f, 0.5f, 1.0f, 0.0f,  
|  
|  -0.5f, -0.5f, -0.5f, 0.0f, 1.0f,  
|  0.5f, -0.5f, -0.5f, 1.0f, 1.0f,  
|  0.5f, -0.5f, 0.5f, 1.0f, 0.0f,  
|  0.5f, -0.5f, 0.5f, 1.0f, 0.0f,  
|  -0.5f, -0.5f, 0.5f, 0.0f, 0.0f,  
|  -0.5f, -0.5f, -0.5f, 0.0f, 1.0f,  
|  
|  -0.5f, 0.5f, -0.5f, 0.0f, 1.0f,  
|  0.5f, 0.5f, -0.5f, 1.0f, 1.0f,  
|  0.5f, 0.5f, 0.5f, 1.0f, 0.0f,  
|  0.5f, 0.5f, 0.5f, 1.0f, 0.0f,  
|  -0.5f, 0.5f, 0.5f, 0.0f, 0.0f,  
|  -0.5f, 0.5f, -0.5f, 0.0f, 1.0f  
|  };  
|  // world space positions of our cubes  
|  glm::vec3 cubePositions[] = {  
|  glm::vec3( 0.0f, 0.0f, 0.0f),  
|  glm::vec3( 2.0f, 5.0f, -15.0f),  
|  glm::vec3(-1.5f, -2.2f, -2.5f),  
|  glm::vec3(-3.8f, -2.0f, -12.3f),  
|  glm::vec3( 2.4f, -0.4f, -3.5f),  
|  glm::vec3(-1.7f, 3.0f, -7.5f),  
|  glm::vec3( 1.3f, -2.0f, -2.5f),  
|  glm::vec3( 1.5f, 2.0f, -2.5f),  
|  glm::vec3( 1.5f, 0.2f, -1.5f),  
|  glm::vec3(-1.3f, 1.0f, -1.5f)  
|  };  
|  unsigned int VBO, VAO;  
|  glGenVertexArrays(1, &VAO);  
|  glGenBuffers(1, &VBO);  
|  
|  glBindVertexArray(VAO);  
|  
|  glBindBuffer(GL_ARRAY_BUFFER, VBO);  
|  glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);  
|  
|  // position attribute  
|  glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 5 * sizeof(float),
(void*)0);  
|  glEnableVertexAttribArray(0);  
|  // texture coord attribute  
|  glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, 5 * sizeof(float),
(void*)(3 * sizeof(float)));  
|  glEnableVertexAttribArray(1);  
|  
|  
|  // load and create a texture  
|  // \-------------------------  
|  unsigned int texture1, texture2;  
|  // texture 1  
|  // \---------  
|  glGenTextures(1, &texture1);  
|  glBindTexture(GL_TEXTURE_2D, texture1);  
|  // set the texture wrapping parameters  
|  glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);  
|  glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);  
|  // set texture filtering parameters  
|  glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);  
|  glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);  
|  // load image, create texture and generate mipmaps  
|  int width, height, nrChannels;  
|  stbi_set_flip_vertically_on_load(true); // tell stb_image.h to flip loaded
texture's on the y-axis.  
|  unsigned char *data =
stbi_load(FileSystem::getPath("resources/textures/container.jpg").c_str(),
&width, &height, &nrChannels, 0);  
|  if (data)  
|  {  
|  glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, width, height, 0, GL_RGB,
GL_UNSIGNED_BYTE, data);  
|  glGenerateMipmap(GL_TEXTURE_2D);  
|  }  
|  else  
|  {  
|  std::cout << "Failed to load texture" << std::endl;  
|  }  
|  stbi_image_free(data);  
|  // texture 2  
|  // \---------  
|  glGenTextures(1, &texture2);  
|  glBindTexture(GL_TEXTURE_2D, texture2);  
|  // set the texture wrapping parameters  
|  glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);  
|  glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);  
|  // set texture filtering parameters  
|  glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);  
|  glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);  
|  // load image, create texture and generate mipmaps  
|  data =
stbi_load(FileSystem::getPath("resources/textures/awesomeface.png").c_str(),
&width, &height, &nrChannels, 0);  
|  if (data)  
|  {  
|  // note that the awesomeface.png has transparency and thus an alpha
channel, so make sure to tell OpenGL the data type is of GL_RGBA  
|  glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, width, height, 0, GL_RGBA,
GL_UNSIGNED_BYTE, data);  
|  glGenerateMipmap(GL_TEXTURE_2D);  
|  }  
|  else  
|  {  
|  std::cout << "Failed to load texture" << std::endl;  
|  }  
|  stbi_image_free(data);  
|  
|  // tell opengl for each sampler to which texture unit it belongs to (only
has to be done once)  
|  //
\-------------------------------------------------------------------------------------------  
|  ourShader.use();  
|  ourShader.setInt("texture1", 0);  
|  ourShader.setInt("texture2", 1);  
|  
|  
|  // render loop  
|  // \-----------  
|  while (!glfwWindowShouldClose(window))  
|  {  
|  // per-frame time logic  
|  // \--------------------  
|  float currentFrame = glfwGetTime();  
|  deltaTime = currentFrame - lastFrame;  
|  lastFrame = currentFrame;  
|  
|  // input  
|  // \-----  
|  processInput(window);  
|  
|  // render  
|  // \------  
|  glClearColor(0.2f, 0.3f, 0.3f, 1.0f);  
|  glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);  
|  
|  // bind textures on corresponding texture units  
|  glActiveTexture(GL_TEXTURE0);  
|  glBindTexture(GL_TEXTURE_2D, texture1);  
|  glActiveTexture(GL_TEXTURE1);  
|  glBindTexture(GL_TEXTURE_2D, texture2);  
|  
|  // activate shader  
|  ourShader.use();  
|  
|  // pass projection matrix to shader (note that in this case it could change
every frame)  
|  glm::mat4 projection = glm::perspective(glm::radians(camera.Zoom),
(float)SCR_WIDTH / (float)SCR_HEIGHT, 0.1f, 100.0f);  
|  ourShader.setMat4("projection", projection);  
|  
|  // camera/view transformation  
|  glm::mat4 view = camera.GetViewMatrix();  
|  ourShader.setMat4("view", view);  
|  
|  // render boxes  
|  glBindVertexArray(VAO);  
|  for (unsigned int i = 0; i < 10; i++)  
|  {  
|  // calculate the model matrix for each object and pass it to shader before
drawing  
|  glm::mat4 model = glm::mat4(1.0f); // make sure to initialize matrix to
identity matrix first  
|  model = glm::translate(model, cubePositions[i]);  
|  float angle = 20.0f * i;  
|  model = glm::rotate(model, glm::radians(angle), glm::vec3(1.0f, 0.3f,
0.5f));  
|  ourShader.setMat4("model", model);  
|  
|  glDrawArrays(GL_TRIANGLES, 0, 36);  
|  }  
|  
|  // glfw: swap buffers and poll IO events (keys pressed/released, mouse
moved etc.)  
|  //
\-------------------------------------------------------------------------------  
|  glfwSwapBuffers(window);  
|  glfwPollEvents();  
|  }  
|  
|  // optional: de-allocate all resources once they've outlived their purpose:  
|  //
\------------------------------------------------------------------------  
|  glDeleteVertexArrays(1, &VAO);  
|  glDeleteBuffers(1, &VBO);  
|  
|  // glfw: terminate, clearing all previously allocated GLFW resources.  
|  // \------------------------------------------------------------------  
|  glfwTerminate();  
|  return 0;  
| }  
|  
| // process all input: query GLFW whether relevant keys are pressed/released
this frame and react accordingly  
| //
\---------------------------------------------------------------------------------------------------------  
| void processInput(GLFWwindow *window)  
| {  
|  if (glfwGetKey(window, GLFW_KEY_ESCAPE) == GLFW_PRESS)  
|  glfwSetWindowShouldClose(window, true);  
|  
|  if (glfwGetKey(window, GLFW_KEY_W) == GLFW_PRESS)  
|  camera.ProcessKeyboard(FORWARD, deltaTime);  
|  if (glfwGetKey(window, GLFW_KEY_S) == GLFW_PRESS)  
|  camera.ProcessKeyboard(BACKWARD, deltaTime);  
|  if (glfwGetKey(window, GLFW_KEY_A) == GLFW_PRESS)  
|  camera.ProcessKeyboard(LEFT, deltaTime);  
|  if (glfwGetKey(window, GLFW_KEY_D) == GLFW_PRESS)  
|  camera.ProcessKeyboard(RIGHT, deltaTime);  
| }  
|  
| // glfw: whenever the window size changed (by OS or user resize) this
callback function executes  
| //
\---------------------------------------------------------------------------------------------  
| void framebuffer_size_callback(GLFWwindow* window, int width, int height)  
| {  
|  // make sure the viewport matches the new window dimensions; note that
width and  
|  // height will be significantly larger than specified on retina displays.  
|  glViewport(0, 0, width, height);  
| }  
|  
|  
| // glfw: whenever the mouse moves, this callback is called  
| // \-------------------------------------------------------  
| void mouse_callback(GLFWwindow* window, double xpos, double ypos)  
| {  
|  if (firstMouse)  
|  {  
|  lastX = xpos;  
|  lastY = ypos;  
|  firstMouse = false;  
|  }  
|  
|  float xoffset = xpos - lastX;  
|  float yoffset = lastY - ypos; // reversed since y-coordinates go from
bottom to top  
|  
|  lastX = xpos;  
|  lastY = ypos;  
|  
|  camera.ProcessMouseMovement(xoffset, yoffset);  
| }  
|  
| // glfw: whenever the mouse scroll wheel scrolls, this callback is called  
| // \----------------------------------------------------------------------  
| void scroll_callback(GLFWwindow* window, double xoffset, double yoffset)  
| {  
|  camera.ProcessMouseScroll(yoffset);  
| }  
  
  * Copy lines 
  * Copy permalink 
  * [View git blame](https://github.com/JoeyDeVries/LearnOpenGL/blame/9a46ecf52661081f6785dc0eea4d82bc5342fd7f/src/1.getting_started/7.4.camera_class/camera_class.cpp)
  * [Reference in new issue](/JoeyDeVries/LearnOpenGL/issues/new)

Go

  * © 2020 GitHub, Inc.
  * [Terms](https://github.com/site/terms)
  * [Privacy](https://github.com/site/privacy)
  * [Security](https://github.com/security)
  * [Status](https://githubstatus.com/)
  * [Help](https://docs.github.com)

[ ](https://github.com "GitHub")

  * [Contact GitHub](https://github.com/contact)
  * [Pricing](https://github.com/pricing)
  * [API](https://docs.github.com)
  * [Training](https://services.github.com)
  * [Blog](https://github.blog)
  * [About](https://github.com/about)

You can’t perform that action at this time.

You signed in with another tab or window. [Reload]() to refresh your session.
You signed out in another tab or window. [Reload]() to refresh your session.

