<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head>
<!-- Slide (web, intern, english) -->
<title>GLSL - Graphics Programming - Part 9 - Chapter 1</title>

<!-- Slide (web, intern, english, german) -->
<meta charset="utf-8" />
<link href="./jquery-ui/css/ui-lightness/jquery-ui-1.9.1.custom.css" rel="stylesheet" />
<script src="./jquery-ui/js/jquery-1.8.2.js"></script>
<script src="./jquery-ui/js/jquery-ui-1.9.1.custom.js"></script>
<script src="../pccanvas.js"></script>
<script src="../slides.js"></script>

<!-- Slide (web, intern, english, german) -->
<script type="text/x-mathjax-config;executed=true">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});</script>
<script type="text/javascript" src="./MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<!-- Slide (web, intern, english, german) -->
<!--[if lt IE 9]>
<script>
document.createElement('article');
document.createElement('aside');
alert("WARNING: Your browser does not support basic HTML5 features.");
</script>
<![endif]-->
<meta name="viewport" content="width=1100,height=750" /><meta name="apple-mobile-web-app-capable" content="yes" /><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Hover_Arrow {position: absolute; width: 15px; height: 11px; cursor: pointer}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuTitle {background-color: #CCCCCC; margin: -1px -1px 1px -1px; text-align: center; font-style: italic; font-size: 80%; color: #444444; padding: 2px 0; overflow: hidden}
.MathJax_MenuArrow {position: absolute; right: .5em; color: #666666}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_Menu_Close {position: absolute; width: 31px; height: 31px; top: -15px; left: -15px}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MathJax_Display {text-align: center; margin: 1em 0em; position: relative; display: block; width: 100%}
.MathJax .merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
#MathJax_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true'); padding: 3px 4px; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.MathJax {display: inline; font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; border: 0; padding: 0; margin: 0}
.MathJax img, .MathJax nobr, .MathJax a {border: 0; padding: 0; margin: 0; max-width: none; max-height: none; vertical-align: 0; line-height: normal; text-decoration: none}
img.MathJax_strut {border: 0 !important; padding: 0 !important; margin: 0 !important; vertical-align: 0 !important}
.MathJax span {display: inline; position: static; border: 0; padding: 0; margin: 0; vertical-align: 0; line-height: normal; text-decoration: none}
.MathJax nobr {white-space: nowrap ! important}
.MathJax img {display: inline ! important; float: none ! important}
.MathJax_Processing {visibility: hidden; position: fixed; width: 0; height: 0; overflow: hidden}
.MathJax_Processed {display: none!important}
.MathJax_ExBox {display: block; overflow: hidden; width: 1px; height: 60ex}
.MathJax .MathJax_EmBox {display: block; overflow: hidden; width: 1px; height: 60em}
.MathJax .MathJax_HitBox {cursor: text; background: white; opacity: 0; filter: alpha(opacity=0)}
.MathJax .MathJax_HitBox * {filter: none; opacity: 1; background: transparent}
#MathJax_Tooltip * {filter: none; opacity: 1; background: transparent}
@font-face {font-family: MathJax_Main; src: url('https://www.mathematik.uni-marburg.de/~thormae/lectures/graphics1/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Main-Regular.woff') format('woff'), url('https://www.mathematik.uni-marburg.de/~thormae/lectures/graphics1/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Main-Regular.otf') format('opentype')}
@font-face {font-family: MathJax_Main; src: url('https://www.mathematik.uni-marburg.de/~thormae/lectures/graphics1/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Main-Bold.woff') format('woff'), url('https://www.mathematik.uni-marburg.de/~thormae/lectures/graphics1/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Main-Bold.otf') format('opentype'); font-weight: bold}
@font-face {font-family: MathJax_Main; src: url('https://www.mathematik.uni-marburg.de/~thormae/lectures/graphics1/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Main-Italic.woff') format('woff'), url('https://www.mathematik.uni-marburg.de/~thormae/lectures/graphics1/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Main-Italic.otf') format('opentype'); font-style: italic}
@font-face {font-family: MathJax_Math; src: url('https://www.mathematik.uni-marburg.de/~thormae/lectures/graphics1/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Math-Italic.woff') format('woff'), url('https://www.mathematik.uni-marburg.de/~thormae/lectures/graphics1/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Math-Italic.otf') format('opentype'); font-style: italic}
@font-face {font-family: MathJax_Caligraphic; src: url('https://www.mathematik.uni-marburg.de/~thormae/lectures/graphics1/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Caligraphic-Regular.woff') format('woff'), url('https://www.mathematik.uni-marburg.de/~thormae/lectures/graphics1/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Regular.otf') format('opentype')}
@font-face {font-family: MathJax_Size1; src: url('https://www.mathematik.uni-marburg.de/~thormae/lectures/graphics1/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Size1-Regular.woff') format('woff'), url('https://www.mathematik.uni-marburg.de/~thormae/lectures/graphics1/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Size1-Regular.otf') format('opentype')}
@font-face {font-family: MathJax_Size2; src: url('https://www.mathematik.uni-marburg.de/~thormae/lectures/graphics1/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Size2-Regular.woff') format('woff'), url('https://www.mathematik.uni-marburg.de/~thormae/lectures/graphics1/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Size2-Regular.otf') format('opentype')}
@font-face {font-family: MathJax_Size3; src: url('https://www.mathematik.uni-marburg.de/~thormae/lectures/graphics1/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Size3-Regular.woff') format('woff'), url('https://www.mathematik.uni-marburg.de/~thormae/lectures/graphics1/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Size3-Regular.otf') format('opentype')}
@font-face {font-family: MathJax_Size4; src: url('https://www.mathematik.uni-marburg.de/~thormae/lectures/graphics1/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Size4-Regular.woff') format('woff'), url('https://www.mathematik.uni-marburg.de/~thormae/lectures/graphics1/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Size4-Regular.otf') format('opentype')}
.MathJax .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><style type="text/css">@font-face {font-family: MathJax_Typewriter; src: url('https://www.mathematik.uni-marburg.de/~thormae/lectures/graphics1/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Typewriter-Regular.woff') format('woff'), url('https://www.mathematik.uni-marburg.de/~thormae/lectures/graphics1/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Typewriter-Regular.otf') format('opentype')}
</style><style type="text/css">@font-face {font-family: MathJax_AMS; src: url('https://www.mathematik.uni-marburg.de/~thormae/lectures/graphics1/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_AMS-Regular.woff') format('woff'), url('https://www.mathematik.uni-marburg.de/~thormae/lectures/graphics1/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_AMS-Regular.otf') format('opentype')}
</style></head>

<body style="display: none" class="loaded"><div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_Hidden"></div></div><div id="MathJax_Message" style="">Loading Web-Font TeX/AMS/Regular</div>

  <div class="slides layout-regular template-mpii">

    <!--
    <audio class="slides-media-playonclick media mediacommentaudio mediacommentinvisble" controls>
      <source src="http://playground.html5rocks.com/samples/html5_misc/rushus-modal_blues.mp3" type="audio/mpeg" />
      <source src="http://playground.html5rocks.com/samples/html5_misc/rushus-modal_blues.ogg" type="audio/ogg" />
      Audio tag not supported
    </audio>
  
    <video class="slides-media-playonclick media mediacommentvideo mediacommentinvisble" controls>
      <source src="http://www.html5rocks.com/en/tutorials/video/basics/Chrome_ImF.ogv" type='video/ogg; codecs="theora, vorbis"' />
      <source src="http://www.808.dk/pics/video/gizmo.mp4" type="video/mp4" />
    </video>
    -->

    <!-- to do: 
     -->

    <!-- Slide (web, intern, english) -->
    <article class="biglogo current" data-slide-num="1" data-total-slides="47" id="1">
      <h1>
        Graphics Programming<br />OpenGL Shading Language (GLSL)
      </h1>
      <p>
        Thorsten Thormählen <br />Dezember 13, 2019 <br /> Part 9, Chapter 1
      </p>
      <div class="footerarea">
        <div class="onlyInPrint"> 
          <p class="smaller">
            This is the print version of the slides. <br />
            <!--For an interactive slide presentation press the <span class="key">&nbsp;p&nbsp;</span> key <br> -->
            <button onmousedown="changeStyleSheet();" class="smallTopMargin">Activate presentation view</button> 
          </p>
        </div>
        <div class="onlyInWeb">
          <p class="smaller">
            Advance slides with the <span class="key">→</span> key or <br /> 
            by clicking on the right border of the slide<br /> 
            <button onmousedown="changeStyleSheet();" class="smallTopMargin">Activate print view</button> 
          </p>
        </div> 
      </div>
      <aside></aside>
    </article>
    
    <!-- Slide (web, intern, english) -->
    <article data-slide-num="2" data-total-slides="47" id="2" class="next">
      <div class="slidetitle">
        <h3>Control Keys</h3>
      </div>
      <div class="slidebody">
        <span class="key">→</span> move to next slide (also <span class="key">Enter</span> or <span class="key">Spacebar</span>).<br /> 
        <span class="key">←</span> move to previous slide.<br /> 
        <!--<span class="key">&nbsp;a&nbsp;</span> open additional window with aside information.<br /> 
        <span class="key">&nbsp;c&nbsp;</span> disable/enable audio commentary.<br /> -->
        <span class="key"> d </span> enable/disable drawing on slides<br /> 
        <span class="key"> p </span> toggles between print and presentation view<br />
        <span class="key">CTRL</span> <span class="key"> + </span> zoom in<br /> 
        <span class="key">CTRL</span> <span class="key"> - </span> zoom out<br /> 
        <span class="key">CTRL</span> <span class="key"> 0 </span> reset zoom<br />

        <p class="largeTopMargin">Slides can also be advanced by clicking on the left or right border of the slide.</p>
      </div>
      <aside>
        <p>
          <b>Welcome!</b> (This field is for speaker notes and commentary.)
        </p><p>
      </p></aside>
    </article>
    
    <!-- Slide (web, intern, english) -->
    <article class="smaller far-next" data-slide-num="3" data-total-slides="47" id="3">
      <div class="slidetitle">
        <h3>Notation</h3>
      </div>
      <div class="slidebody">
        <table>
          <tbody><tr>
            <th>Type</th>
            <th>Font</th>
            <th>Examples</th>
          </tr>
          <tr>
            <td>Variables (scalars) </td>
            <td>italics</td>
            <td><span class="MathJax_Preview">a, b, x, y</span><span class="MathJax MathJax_Processed" id="MathJax-Element-1-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-1"><span style="display: inline-block; position: relative; width: 83px; height: 0px; font-size: 124%;"><span style="position: absolute; clip: rect(47.8px, 24800px, 76.1px, -8.2px); top: -68px; left: 0px;"><span class="mrow" id="MathJax-Span-2"><span class="mi" id="MathJax-Span-3" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mo" id="MathJax-Span-4" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-5" style="font-family: MathJax_Math; font-style: italic; padding-left: 4.1px;">b</span><span class="mo" id="MathJax-Span-6" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-7" style="font-family: MathJax_Math; font-style: italic; padding-left: 4.1px;">x</span><span class="mo" id="MathJax-Span-8" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-9" style="font-family: MathJax_Math; font-style: italic; padding-left: 4.1px;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.1px;"></span></span></span><span style="display: inline-block; width: 0px; height: 68px;"></span></span></span><span style="border-left: 0px solid; display: inline-block; overflow: hidden; width: 0px; height: 24.3px; vertical-align: -6.1px;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-1">a, b, x, y</script></td>
          </tr>
          <tr>
            <td>Functions</td>
            <td>upright</td>
            <td><span class="MathJax_Preview">\mathrm{f}, \mathrm{g}(x), \mathrm{max}(x)</span><span class="MathJax MathJax_Processed" id="MathJax-Element-2-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-10"><span style="display: inline-block; position: relative; width: 157px; height: 0px; font-size: 124%;"><span style="position: absolute; clip: rect(46.4px, 24800px, 77.2px, -8.4px); top: -68px; left: 0px;"><span class="mrow" id="MathJax-Span-11"><span class="texatom" id="MathJax-Span-12"><span class="mrow" id="MathJax-Span-13"><span class="mi" id="MathJax-Span-14" style="font-family: MathJax_Main;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 1.6px;"></span></span></span></span><span class="mo" id="MathJax-Span-15" style="font-family: MathJax_Main;">,</span><span class="texatom" id="MathJax-Span-16" style="padding-left: 4.1px;"><span class="mrow" id="MathJax-Span-17"><span class="mi" id="MathJax-Span-18" style="font-family: MathJax_Main;">g</span></span></span><span class="mo" id="MathJax-Span-19" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-20" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-21" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-22" style="font-family: MathJax_Main;">,</span><span class="texatom" id="MathJax-Span-23" style="padding-left: 4.1px;"><span class="mrow" id="MathJax-Span-24"><span class="mi" id="MathJax-Span-25" style="font-family: MathJax_Main;">m</span><span class="mi" id="MathJax-Span-26" style="font-family: MathJax_Main;">a</span><span class="mi" id="MathJax-Span-27" style="font-family: MathJax_Main;">x</span></span></span><span class="mo" id="MathJax-Span-28" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-29" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-30" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 68px;"></span></span></span><span style="border-left: 0px solid; display: inline-block; overflow: hidden; width: 0px; height: 26.8px; vertical-align: -7.2px;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-2">\mathrm{f}, \mathrm{g}(x), \mathrm{max}(x)</script></td>
          </tr>
          <tr>
            <td>Vectors</td>
            <td>bold, elements row-wise</td>
            <td><span class="MathJax_Preview">\mathbf{a}, \mathbf{b}= \begin{pmatrix}x\\y\end{pmatrix} = (x, y)^\top,</span><span class="MathJax MathJax_Processed" id="MathJax-Element-3-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-31"><span style="display: inline-block; position: relative; width: 246px; height: 0px; font-size: 124%;"><span style="position: absolute; clip: rect(60.1px, 24800px, 125.5px, -8.2px); top: -99px; left: 0px;"><span class="mrow" id="MathJax-Span-32"><span class="texatom" id="MathJax-Span-33"><span class="mrow" id="MathJax-Span-34"><span class="mi" id="MathJax-Span-35" style="font-family: MathJax_Main; font-weight: bold;">a</span></span></span><span class="mo" id="MathJax-Span-36" style="font-family: MathJax_Main;">,</span><span class="texatom" id="MathJax-Span-37" style="padding-left: 4.1px;"><span class="mrow" id="MathJax-Span-38"><span class="mi" id="MathJax-Span-39" style="font-family: MathJax_Main; font-weight: bold;">b</span></span></span><span class="mo" id="MathJax-Span-40" style="font-family: MathJax_Main; padding-left: 6.9px;">=</span><span class="mfenced" id="MathJax-Span-41" style="padding-left: 6.9px;"><span class="mo" id="MathJax-Span-52" style="vertical-align: 0px;"><span style="font-family: MathJax_Size3;">(</span></span><span class="mtable" id="MathJax-Span-44" style="padding-right: 4.1px; padding-left: 4.1px;"><span style="display: inline-block; position: relative; width: 14px; height: 0px;"><span style="position: absolute; clip: rect(71.3px, 24800px, 123.1px, -8.5px); top: -99px; left: 0px;"><span style="display: inline-block; position: relative; width: 14px; height: 0px;"><span style="position: absolute; clip: rect(50px, 24800px, 67.3px, -8.1px); top: -77.7px; left: 50%; margin-left: -7px;"><span class="mtd" id="MathJax-Span-45"><span class="mrow" id="MathJax-Span-46"><span class="mi" id="MathJax-Span-47" style="font-family: MathJax_Math; font-style: italic;">x</span></span></span><span style="display: inline-block; width: 0px; height: 64px;"></span></span><span style="position: absolute; clip: rect(50px, 24800px, 72.1px, -8.5px); top: -47.9px; left: 50%; margin-left: -6px;"><span class="mtd" id="MathJax-Span-48"><span class="mrow" id="MathJax-Span-49"><span class="mi" id="MathJax-Span-50" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.1px;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 64px;"></span></span></span><span style="display: inline-block; width: 0px; height: 99px;"></span></span></span></span><span class="mo" id="MathJax-Span-53" style="vertical-align: 0px;"><span style="font-family: MathJax_Size3;">)</span></span></span><span class="mo" id="MathJax-Span-54" style="font-family: MathJax_Main; padding-left: 6.9px;">=</span><span class="mo" id="MathJax-Span-55" style="font-family: MathJax_Main; padding-left: 6.9px;">(</span><span class="mi" id="MathJax-Span-56" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-57" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-58" style="font-family: MathJax_Math; font-style: italic; padding-left: 4.1px;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.1px;"></span></span><span class="msubsup" id="MathJax-Span-59"><span style="display: inline-block; position: relative; width: 25.9px; height: 0px;"><span style="position: absolute; clip: rect(46.4px, 24800px, 77.2px, -7.6px); top: -68px; left: 0px;"><span class="mo" id="MathJax-Span-60" style="font-family: MathJax_Main;">)</span><span style="display: inline-block; width: 0px; height: 68px;"></span></span><span style="position: absolute; top: -73.8px; left: 10px;"><span class="mi" id="MathJax-Span-61" style="font-size: 70.7%; font-family: MathJax_Main;">⊤</span><span style="display: inline-block; width: 0px; height: 62px;"></span></span></span></span><span class="mo" id="MathJax-Span-62" style="font-family: MathJax_Main;">,</span></span><span style="display: inline-block; width: 0px; height: 99px;"></span></span></span><span style="border-left: 0px solid; display: inline-block; overflow: hidden; width: 0px; height: 61.5px; vertical-align: -24.5px;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-3">\mathbf{a}, \mathbf{b}= \begin{pmatrix}x\\y\end{pmatrix} = (x, y)^\top,</script> <span class="MathJax_Preview">\mathbf{B}=(x, y, z)^\top</span><span class="MathJax MathJax_Processed" id="MathJax-Element-4-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-63"><span style="display: inline-block; position: relative; width: 149px; height: 0px; font-size: 124%;"><span style="position: absolute; clip: rect(43.5px, 24800px, 79.2px, -8px); top: -70px; left: 0px;"><span class="mrow" id="MathJax-Span-64"><span class="texatom" id="MathJax-Span-65"><span class="mrow" id="MathJax-Span-66"><span class="mi" id="MathJax-Span-67" style="font-family: MathJax_Main; font-weight: bold;">B</span></span></span><span class="mo" id="MathJax-Span-68" style="font-family: MathJax_Main; padding-left: 6.9px;">=</span><span class="mo" id="MathJax-Span-69" style="font-family: MathJax_Main; padding-left: 6.9px;">(</span><span class="mi" id="MathJax-Span-70" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-71" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-72" style="font-family: MathJax_Math; font-style: italic; padding-left: 4.1px;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.1px;"></span></span><span class="mo" id="MathJax-Span-73" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-74" style="font-family: MathJax_Math; font-style: italic; padding-left: 4.1px;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.1px;"></span></span><span class="msubsup" id="MathJax-Span-75"><span style="display: inline-block; position: relative; width: 25.9px; height: 0px;"><span style="position: absolute; clip: rect(46.4px, 24800px, 77.2px, -7.6px); top: -68px; left: 0px;"><span class="mo" id="MathJax-Span-76" style="font-family: MathJax_Main;">)</span><span style="display: inline-block; width: 0px; height: 68px;"></span></span><span style="position: absolute; top: -73.8px; left: 10px;"><span class="mi" id="MathJax-Span-77" style="font-size: 70.7%; font-family: MathJax_Main;">⊤</span><span style="display: inline-block; width: 0px; height: 62px;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 70px;"></span></span></span><span style="border-left: 0px solid; display: inline-block; overflow: hidden; width: 0px; height: 31.7px; vertical-align: -7.2px;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-4">\mathbf{B}=(x, y, z)^\top</script></td>
          </tr>
          <tr>
            <td>Matrices</td>
            <td>Typewriter</td>
            <td><span class="MathJax_Preview">\mathtt{A}, \mathtt{B}= \begin{bmatrix}a &amp; b\\c &amp; d\end{bmatrix}</span><span class="MathJax MathJax_Processed" id="MathJax-Element-5-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-78"><span style="display: inline-block; position: relative; width: 155px; height: 0px; font-size: 124%;"><span style="position: absolute; clip: rect(60.1px, 24800px, 125.5px, -8.3px); top: -99px; left: 0px;"><span class="mrow" id="MathJax-Span-79"><span class="texatom" id="MathJax-Span-80"><span class="mrow" id="MathJax-Span-81"><span class="mi" id="MathJax-Span-82" style="font-family: MathJax_Typewriter;">A</span></span></span><span class="mo" id="MathJax-Span-83" style="font-family: MathJax_Main;">,</span><span class="texatom" id="MathJax-Span-84" style="padding-left: 4.1px;"><span class="mrow" id="MathJax-Span-85"><span class="mi" id="MathJax-Span-86" style="font-family: MathJax_Typewriter;">B</span></span></span><span class="mo" id="MathJax-Span-87" style="font-family: MathJax_Main; padding-left: 6.9px;">=</span><span class="mfenced" id="MathJax-Span-88" style="padding-left: 6.9px;"><span class="mo" id="MathJax-Span-89" style="vertical-align: 0px;"><span style="font-family: MathJax_Size3;">[</span></span><span class="mtable" id="MathJax-Span-90" style="padding-right: 4.1px; padding-left: 4.1px;"><span style="display: inline-block; position: relative; width: 50.8px; height: 0px;"><span style="position: absolute; clip: rect(71.4px, 24800px, 118.4px, -8.2px); top: -99px; left: 0px;"><span style="display: inline-block; position: relative; width: 13px; height: 0px;"><span style="position: absolute; clip: rect(50.1px, 24800px, 67.2px, -8.2px); top: -77.6px; left: 50%; margin-left: -6.5px;"><span class="mtd" id="MathJax-Span-91"><span class="mrow" id="MathJax-Span-92"><span class="mi" id="MathJax-Span-93" style="font-family: MathJax_Math; font-style: italic;">a</span></span></span><span style="display: inline-block; width: 0px; height: 64px;"></span></span><span style="position: absolute; clip: rect(50px, 24800px, 67.3px, -8.2px); top: -47.9px; left: 50%; margin-left: -5.5px;"><span class="mtd" id="MathJax-Span-97"><span class="mrow" id="MathJax-Span-98"><span class="mi" id="MathJax-Span-99" style="font-family: MathJax_Math; font-style: italic;">c</span></span></span><span style="display: inline-block; width: 0px; height: 64px;"></span></span></span><span style="display: inline-block; width: 0px; height: 99px;"></span></span><span style="position: absolute; clip: rect(65.1px, 24800px, 118.4px, -8.2px); top: -99px; left: 37.8px;"><span style="display: inline-block; position: relative; width: 13px; height: 0px;"><span style="position: absolute; clip: rect(43.8px, 24800px, 67.3px, -8px); top: -77.6px; left: 50%; margin-left: -5.5px;"><span class="mtd" id="MathJax-Span-94"><span class="mrow" id="MathJax-Span-95"><span class="mi" id="MathJax-Span-96" style="font-family: MathJax_Math; font-style: italic;">b</span></span></span><span style="display: inline-block; width: 0px; height: 64px;"></span></span><span style="position: absolute; clip: rect(43.8px, 24800px, 67.2px, -8.2px); top: -47.9px; left: 50%; margin-left: -6.5px;"><span class="mtd" id="MathJax-Span-100"><span class="mrow" id="MathJax-Span-101"><span class="mi" id="MathJax-Span-102" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.1px;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 64px;"></span></span></span><span style="display: inline-block; width: 0px; height: 99px;"></span></span></span></span><span class="mo" id="MathJax-Span-103" style="vertical-align: 0px;"><span style="font-family: MathJax_Size3;">]</span></span></span></span><span style="display: inline-block; width: 0px; height: 99px;"></span></span></span><span style="border-left: 0px solid; display: inline-block; overflow: hidden; width: 0px; height: 61.5px; vertical-align: -24.5px;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-5">\mathtt{A}, \mathtt{B}= \begin{bmatrix}a &amp; b\\c &amp; d\end{bmatrix}</script></td>
          </tr>
          <tr>
            <td>Sets</td>
            <td>calligraphic</td>
            <td><span class="MathJax_Preview">\mathcal{A}, B=\{a, b\}, b \in \mathcal{B}</span><span class="MathJax MathJax_Processed" id="MathJax-Element-6-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-104"><span style="display: inline-block; position: relative; width: 211px; height: 0px; font-size: 124%;"><span style="position: absolute; clip: rect(46.4px, 24800px, 77.2px, -8.3px); top: -68px; left: 0px;"><span class="mrow" id="MathJax-Span-105"><span class="texatom" id="MathJax-Span-106"><span class="mrow" id="MathJax-Span-107"><span class="mi" id="MathJax-Span-108" style="font-family: MathJax_Caligraphic;">A<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.5px;"></span></span></span></span><span class="mo" id="MathJax-Span-109" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-110" style="font-family: MathJax_Math; font-style: italic; padding-left: 4.1px;">B</span><span class="mo" id="MathJax-Span-111" style="font-family: MathJax_Main; padding-left: 6.9px;">=</span><span class="mo" id="MathJax-Span-112" style="font-family: MathJax_Main; padding-left: 6.9px;">{</span><span class="mi" id="MathJax-Span-113" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mo" id="MathJax-Span-114" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-115" style="font-family: MathJax_Math; font-style: italic; padding-left: 4.1px;">b</span><span class="mo" id="MathJax-Span-116" style="font-family: MathJax_Main;">}</span><span class="mo" id="MathJax-Span-117" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-118" style="font-family: MathJax_Math; font-style: italic; padding-left: 4.1px;">b</span><span class="mo" id="MathJax-Span-119" style="font-family: MathJax_Main; padding-left: 6.9px;">∈</span><span class="texatom" id="MathJax-Span-120" style="padding-left: 6.9px;"><span class="mrow" id="MathJax-Span-121"><span class="mi" id="MathJax-Span-122" style="font-family: MathJax_Caligraphic;">B<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.2px;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 68px;"></span></span></span><span style="border-left: 0px solid; display: inline-block; overflow: hidden; width: 0px; height: 26.8px; vertical-align: -7.2px;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-6">\mathcal{A}, B=\{a, b\}, b \in \mathcal{B}</script></td>
          </tr>
          <tr>
            <td>Number systems, Coordinate spaces</td>
            <td>double-struck</td>
            <td><span class="MathJax_Preview">\mathbb{N}, \mathbb{Z}, \mathbb{R}^2, \mathbb{R}^3</span><span class="MathJax MathJax_Processing" id="MathJax-Element-7-Frame" role="textbox" aria-readonly="true" style=""></span><script type="math/tex" id="MathJax-Element-7">\mathbb{N}, \mathbb{Z}, \mathbb{R}^2, \mathbb{R}^3</script></td>
          </tr>

        </tbody></table>
      </div>
    </article>
    
  
    <!-- Slide (web, intern, english) -->
    <article data-slide-num="4" data-total-slides="47" id="4" class="far-next">
      <div class="slidetitle">
        <h3>OpenGL Shading Language</h3>
      </div>
      <div class="slidebody">
        <ul>
          <li>The OpenGL Shading Language (GLSL) allows writing custom programs for vertex and fragment processors</li>
          <li>The custom GLSL programs thereby replace parts of the OpenGL pipeline that were previously performed by the fixed-function pipeline</li>
          <li>The per-vertex-operations are partially replaced by a <b>vertex shader</b> and the per-pixel-operations by a <b>fragment shader</b>
          </li>
        </ul>
      </div>
    </article>

    <!-- Slide (web, intern, german, english) -->
    <article data-slide-num="5" data-total-slides="47" id="5" class="far-next">
      <div class="slidetitle">
        <!-- Slide (web, intern, english) -->
        <h3>Reiteration: OpenGL-Pipeline</h3>
        <!-- Slide (web, intern, german, english) -->
      </div>
      <div class="slidebody">
        <div style="position: relative;">
          <div class="textOverImageLeft" style="position: absolute; top: 0px; left: 0px;">
            <img src="media/vectorart/openglpipeline_animate0.png" alt="openglpipeline" />
          </div>
          <div class="build">
            <div class="textOverImageLeft to-animate to-build" style="position: absolute; top: 0px; left: 50px;">
              <img src="media/vectorart/openglpipeline_animate1.png" alt="openglpipeline" />
            </div>
            <div class="textOverImageLeft to-animate to-build" style="position: absolute; top: 160px; left: 0px;">
              <img src="media/vectorart/openglpipeline_animate2.png" alt="openglpipeline" />
            </div>
            <div class="textOverImageLeft to-animate to-build" style="position: absolute; top: 250px; left: 50px;">
              <img src="media/vectorart/openglpipeline_animate3.png" alt="openglpipeline" />
            </div>
            <div class="textOverImageLeft to-animate to-build" style="position: absolute; top: 300px; left: 140px;">
              <img src="media/vectorart/openglpipeline_animate4.png" alt="openglpipeline" />
            </div>
            <div class="textOverImageLeft to-animate to-build" style="position: absolute; top: 365px; left: 140px;">
              <img src="media/vectorart/openglpipeline_animate5.png" alt="openglpipeline" />
            </div>
            <div class="textOverImageLeft to-animate to-build" style="position: absolute; top: 430px; left: 140px;">
              <img src="media/vectorart/openglpipeline_animate6.png" alt="openglpipeline" />
            </div>
          </div>
        </div>
        <!-- Slide (web, intern, english -->
        <div class="mediaQuote">
          <b>Source:</b> based on Mark Segal, Kurt Akeley, <i>The OpenGL Graphics System: A Specification</i> Version 2.0, 2004, Figure 2.1. Block diagram of the GL (modified)
        </div>
        
         <!-- Slide (web, intern, german, english) -->
      </div>
    </article>

    <!-- Slide (web, intern, german, english) -->
    <article data-slide-num="6" data-total-slides="47" id="6" class="far-next">
      <div class="slidetitle">
        <!-- Slide (web, intern, english) -->
         <h3>Vertex Shader</h3>
        <!-- Slide (web, intern, german, english) -->
      </div>
      <div class="slidebody">
        <div class="centered">
          <img src="media/vectorart/pervertex_fixedfunction_vs_shader.png" alt="pervertex_fixedfunction_vs_shader" />
        </div>
      </div>
    </article>

    <!-- Slide (web, intern, english) -->
    <article data-slide-num="7" data-total-slides="47" id="7" class="far-next">
      <div class="slidetitle">
        <h3>Fragment Shader</h3>
      </div>
      <div class="slidebody">
        <div class="centered">
          <img src="media/vectorart/perfragment_fixedfunction_vs_shader.png" alt="perfragment_fixedfunction_vs_shader" />
        </div>
        <div class="mediaQuote">
          <b>Source:</b> based on Mark Segal, Kurt Akeley, <i>The OpenGL Graphics System: A Specification</i> Version 2.0, 2004, Abb. 3.1 und 4.1.
          (modified)
        </div>
      </div>
    </article>
    
    <!-- Slide (web, intern, english) -->
    <article data-slide-num="8" data-total-slides="47" id="8" class="far-next">
      <div class="slidetitle">
        <h3>Parallel Processing</h3>
      </div>
      <div class="slidebody">
        <ul>
          <li>In the vertex and fragment shaders the data is processed in parallel</li>
          <li>Today's GPUs have up to 2600 processing units that can perform parallel calculations on the data</li>
          <li>For all data exactly the same shader code is executed in parallel ("Stream Processing")</li>
          <li>The parallel processing is possible because the operations have a defined goal (either a transformed vertex or fragment),
            which can be written without conflicts</li>
        </ul>
      </div>
    </article>


    
    <!-- Slide (web, intern, english) -->
    <article class="smaller far-next" data-slide-num="9" data-total-slides="47" id="9">
      <div class="slidetitle">
        <h3>Creation of Shader Programs in OpenGL</h3>
      </div>
      <div class="slidebody">
        <ul>
          <li>The shader programs are compiled at runtime and passed to the graphics card</li>
          <li>To create a shader program that may contain vertex and fragment shaders, the following command is used
            <pre class="prettyprint prettyprinted" style=""><span class="pln">progID </span><span class="pun">=</span><span class="pln"> glCreateProgram</span><span class="pun">();</span></pre>
          </li><li>Creating, assigning, and compiling of shader code for a vertex and fragment Shader is done with: <pre class="prettyprint prettyprinted" style=""><span class="pln">vertID </span><span class="pun">=</span><span class="pln"> glCreateShader</span><span class="pun">(</span><span class="pln">GL_VERTEX_SHADER</span><span class="pun">);</span><span class="pln">
fragID </span><span class="pun">=</span><span class="pln"> glCreateShader</span><span class="pun">(</span><span class="pln">GL_FRAGMENT_SHADER</span><span class="pun">);</span><span class="pln">
glShaderSource</span><span class="pun">(</span><span class="pln">vertID</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">vertShaderSrcCodeString</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">vStrLength</span><span class="pun">);</span><span class="pln">
glShaderSource</span><span class="pun">(</span><span class="pln">fragID</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">fragShaderSrcCodeString</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">fStrLength</span><span class="pun">);</span><span class="pln">
glCompileShader</span><span class="pun">(</span><span class="pln">vertID</span><span class="pun">);</span><span class="pln">
glCompileShader</span><span class="pun">(</span><span class="pln">fragID</span><span class="pun">);</span></pre>
          </li>
          <li>Then the shaders are assigned to the program and an executable is generated: <pre class="prettyprint prettyprinted" style=""><span class="pln">glAttachShader</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="pln"> vertID</span><span class="pun">);</span><span class="pln">
glAttachShader</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="pln"> fragID</span><span class="pun">);</span><span class="pln">
glLinkProgram</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">);</span></pre>
        </li></ul>
      </div>
    </article>
    
    <!-- Slide (web, intern, english) -->
    <article data-slide-num="10" data-total-slides="47" id="10" class="far-next">
      <div class="slidetitle">
        <h3>Using Shader Programs in OpenGL</h3>
      </div>
      <div class="slidebody">
        <ul>
          <li>To activate a shader program the following command is used 
            <pre class="prettyprint prettyprinted" style=""><span class="pln">glUseProgram</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">);</span></pre>
          </li>
          <li>In this case, OpenGL behaves again as a state-machine,i.e., all subsequent rendering function are using the currently active shader program</li>
          <li>This also means that swapping between different shader programs at runtime is possible (and often occurs in practice).
            For example, different shaders are used to simulate different materials.</li>
        </ul>
      </div>
    </article>
    
    <!-- Slide (web, intern, english) -->
    <article data-slide-num="11" data-total-slides="47" id="11" class="far-next">
      <div class="slidetitle">
        <h3>Deleting Shader Objects</h3>
      </div>
      <div class="slidebody">
        <ul>
          <li>For deletion the following functions are used: <pre class="prettyprint prettyprinted" style=""><span class="pln">glDeleteProgram</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">);</span><span class="pln">
glDeleteShader</span><span class="pun">(</span><span class="pln">vertID</span><span class="pun">);</span><span class="pln">
glDeleteShader</span><span class="pun">(</span><span class="pln">fragID</span><span class="pun">);</span></pre>
          </li>
        </ul>
      </div>
    </article>

    <!-- Slide (web, intern, english) -->
    <article data-slide-num="12" data-total-slides="47" id="12" class="far-next">
      <div class="slidetitle">
        <h3>Input and Output of a Vertex Shader</h3>
      </div>
      <div class="slidebody">
        <div class="centered">
          <img src="media/vectorart/vertexshader_inout.png" alt="vertexshader_inout" />
        </div>
        <div class="mediaQuote">
          <b>Source:</b> based on Randi J. Rost, Bill Licea-Kane. <i>OpenGL Shading Language</i>, Third Edition, 2010 sowie <br /> John Kessenich (Dave
          Baldwin, Randi Rost). <i><a href="http://www.opengl.org/registry/doc/GLSLangSpec.Full.1.40.05.pdf">The OpenGL Shading Language</a></i> <br />Language
          Version: 1.40, Chapter 7, 2009 (modified)
        </div>
      </div>
    </article>
    
    <!-- Slide (web, intern, english) -->
    <article data-slide-num="13" data-total-slides="47" id="13" class="far-next">
      <div class="slidetitle">
        <h3>Input and Output of a Fragment Shader</h3>
      </div>
      <div class="slidebody">
        <div class="centered">
          <img src="media/vectorart/fragmentshader_inout.png" alt="fragmentshader_inout" />
        </div>
        <div class="mediaQuote">
          <b>Source:</b> based on Randi J. Rost, Bill Licea-Kane. <i>OpenGL Shading Language</i>, Third Edition, 2010 sowie <br /> John Kessenich (Dave
          Baldwin, Randi Rost). <i><a href="http://www.opengl.org/registry/doc/GLSLangSpec.Full.1.40.05.pdf">The OpenGL Shading Language</a></i> <br />Language
          Version: 1.40, Chapter 7, 2009 (modified)
        </div>
      </div>
    </article>

   <!-- Slide (web, intern, english) -->
    <article data-slide-num="14" data-total-slides="47" id="14" class="far-next">
      <div class="slidetitle">
        <h3>GLSL Syntax</h3>
      </div>
      <div class="slidebody">
        <ul>
          <li>The syntax of GLSL is very similar to C (with some elements of C++)</li>
          <li>Data types for floating point numbers: <br /> <code>float, vec2, vec3, vec4, mat2, mat3, mat4</code></li>
          <li>Integer data types: <br /> <code>int, ivec2, ivec3, ivec4</code></li>
          <li>Boolean data types: <br /> <code>bool, bvec2, bvec3, bvec4</code></li>
          <li>Sampler data types for accessing textures: <br /> <code>sampler2D, sampler3D, samplerCube, ...</code>
          </li>
        </ul>
      </div>
    </article>
    
    <!-- Slide (web, intern, english) -->
    <article data-slide-num="15" data-total-slides="47" id="15" class="far-next">
      <div class="slidetitle">
        <h3>GLSL Syntax</h3>
      </div>
      <div class="slidebody">
        <ul>
          <li>Struct statements (as known from C) are permitted: <pre class="prettyprint prettyprinted" style=""><span class="kwd">struct</span><span class="pln"> </span><span class="typ">Vertex</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> 
  </span><span class="kwd">float</span><span class="pln"> val1</span><span class="pun">;</span><span class="pln"> 
  </span><span class="kwd">int</span><span class="pln"> val2</span><span class="pun">;</span><span class="pln"> 
  </span><span class="kwd">bool</span><span class="pln"> val3</span><span class="pun">;</span><span class="pln">
</span><span class="pun">};</span></pre></li>
          <li>Arrays (as known from C) are also possible: <pre class="prettyprint prettyprinted" style=""><span class="kwd">float</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">16</span><span class="pun">];</span></pre></li>
          <li>Data types must be explicitly converted<pre class="prettyprint prettyprinted" style=""><span class="kwd">float</span><span class="pln"> a </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">float</span><span class="pun">(</span><span class="lit">1</span><span class="pun">);</span></pre></li>
        </ul>
      </div>
    </article>
    
    <!-- Slide (web, intern, english) -->
    <article data-slide-num="16" data-total-slides="47" id="16" class="far-next">
      <div class="slidetitle">
        <h3>GLSL Syntax</h3>
      </div>
      <div class="slidebody">
        <ul>
          <li>Much as in C:
            <ul>
              <li>Conditions: <code>if, if()else</code></li>
              <li>Loops: <code>for, while, do{}while()</code></li>
              <li>Termination: <code>return, break, continue</code></li>
            </ul>
          </li>
          <li>But not everything is allowed:
            <ul>
              <li>No pointers</li>
              <li>No strings</li>
              <li>No <code>unsigned, byte, short, long</code> types, no <code>union</code></li>
              <li>No <code>switch()case</code></li>
            </ul>
          </li>
        </ul>
      </div>
    </article>

    <!-- Slide (web, intern, german, english) -->
    <article data-slide-num="17" data-total-slides="47" id="17" class="far-next">
      <div class="slidetitle">
        <!-- Slide (web, intern, english) -->
        <h3>Construction and Usage of Vectors</h3>
        <!-- Slide (web, intern, german, english) -->
      </div>
      <div class="slidebody">
        <pre class="prettyprint prettyprinted" style=""><span class="com">// construction</span><span class="pln">
vec2 a </span><span class="pun">=</span><span class="pln"> vec2</span><span class="pun">(</span><span class="lit">1.0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2.0</span><span class="pun">);</span><span class="pln">
vec3 b </span><span class="pun">=</span><span class="pln"> vec3</span><span class="pun">(</span><span class="lit">1.0</span><span class="pun">,-</span><span class="lit">1.0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0</span><span class="pun">);</span><span class="pln">
vec4 c </span><span class="pun">=</span><span class="pln"> vec4</span><span class="pun">(</span><span class="lit">1.0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2.0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3.0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4.0</span><span class="pun">);</span><span class="pln">
vec4 allOne </span><span class="pun">=</span><span class="pln"> vec4</span><span class="pun">(</span><span class="lit">1.0</span><span class="pun">);</span><span class="pln"> 
vec4 d </span><span class="pun">=</span><span class="pln"> vec4</span><span class="pun">(</span><span class="pln">a</span><span class="pun">,</span><span class="pln"> a</span><span class="pun">);</span><span class="pln">
vec4 e </span><span class="pun">=</span><span class="pln"> vec4</span><span class="pun">(</span><span class="pln">b</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0</span><span class="pun">);</span><span class="pln">
</span><span class="com">// accessing elements</span><span class="pln">
</span><span class="kwd">float</span><span class="pln"> f </span><span class="pun">=</span><span class="pln"> b</span><span class="pun">[</span><span class="lit">1</span><span class="pun">];</span><span class="pln"> </span><span class="com">// is -1.0</span><span class="pln">
</span><span class="kwd">float</span><span class="pln"> g </span><span class="pun">=</span><span class="pln"> b</span><span class="pun">.</span><span class="pln">y</span><span class="pun">;</span><span class="pln">  </span><span class="com">// is -1.0 as well</span><span class="pln">
</span><span class="com">//conversion </span><span class="pln">
d </span><span class="pun">=</span><span class="pln"> c</span><span class="pun">.</span><span class="pln">rgba</span><span class="pun">;</span><span class="pln">  </span><span class="com">// stays a 4-vector</span><span class="pln">
b </span><span class="pun">=</span><span class="pln"> c</span><span class="pun">.</span><span class="pln">xyz</span><span class="pun">;</span><span class="pln">   </span><span class="com">// convert to 3-vector</span><span class="pln">
a </span><span class="pun">=</span><span class="pln"> c</span><span class="pun">.</span><span class="pln">xy</span><span class="pun">;</span><span class="pln">    </span><span class="com">// convert to 2-vector</span><span class="pln">
e </span><span class="pun">=</span><span class="pln"> c</span><span class="pun">.</span><span class="pln">xxyy</span><span class="pun">;</span><span class="pln">  </span><span class="com">// e = (1.0, 1.0, 2.0, 2.0)  "swizzling"</span><span class="pln">
e</span><span class="pun">.</span><span class="pln">xz </span><span class="pun">=</span><span class="pln"> vec2</span><span class="pun">(</span><span class="lit">0.5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.6</span><span class="pun">);</span><span class="pln"> </span><span class="com">// e = (0.5, 1.0, 0.6, 2.0)</span></pre>
      </div>
    </article>

    <!-- Slide (web, intern, german, english) -->
    <article data-slide-num="18" data-total-slides="47" id="18" class="far-next">
      <div class="slidetitle">
        <!-- Slide (web, intern, english) -->
        <h3>Construction and Usage of Matrices</h3>
        <!-- Slide (web, intern, german, english) -->
      </div>
      <div class="slidebody">
        <pre class="prettyprint prettyprinted" style=""><span class="com">// construction</span><span class="pln">
mat4 a </span><span class="pun">=</span><span class="pln"> mat4</span><span class="pun">(</span><span class="lit">0.0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.3</span><span class="pun">,</span><span class="pln">   </span><span class="com">// column major order:</span><span class="pln">
              </span><span class="lit">0.4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.6</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.7</span><span class="pun">,</span><span class="pln">   </span><span class="com">// transposed of the</span><span class="pln">
              </span><span class="lit">0.8</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.9</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.1</span><span class="pun">,</span><span class="pln">   </span><span class="com">// usual interpretation</span><span class="pln">
              </span><span class="lit">1.2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.5</span><span class="pun">);</span><span class="pln"> 
mat3 b </span><span class="pun">=</span><span class="pln"> mat3</span><span class="pun">(</span><span class="lit">1.0</span><span class="pun">);</span><span class="pln"> </span><span class="com">// identity matrix</span><span class="pln">
</span><span class="com">// conversion</span><span class="pln">
mat3 c </span><span class="pun">=</span><span class="pln"> mat3</span><span class="pun">(</span><span class="pln">a</span><span class="pun">);</span><span class="pln">   </span><span class="com">// upper 3x3 matrix</span><span class="pln">
vec4 d </span><span class="pun">=</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">1</span><span class="pun">];</span><span class="pln">      </span><span class="com">// d = (0.4, 0.5, 0.6, 0.7)</span><span class="pln">
</span><span class="com">// operations</span><span class="pln">
vec4 e </span><span class="pun">=</span><span class="pln"> a </span><span class="pun">*</span><span class="pln"> vec4</span><span class="pun">(</span><span class="lit">1.0</span><span class="pun">);</span><span class="pln">
mat4 f </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2.0</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> a </span><span class="pun">-</span><span class="pln"> mat4</span><span class="pun">(</span><span class="lit">1.0</span><span class="pun">);</span></pre>
      </div>
    </article>

    <!-- Slide (web, intern, english) -->
    <article class="smaller far-next" data-slide-num="19" data-total-slides="47" id="19">
      <div class="slidetitle">
        <h3>Example: A First Triangle with GLSL</h3>
      </div>
      <div class="slidebody">
        <div class="captionBoxRight">
          <img src="media/opengl_firstshader.png" alt="opengl_firstshader" />
        </div>
        <ul class="mediumTopMargin">
          <li>The syntax learned so far is sufficient to create a first example
          <ul>
            <li>Source code with GLUT: <a href="./code_v2/FirstShader/glut/FirstShader.cpp" target="_blank">FirstShader.cpp</a></li>
            <li>Source code with Qt: <a href="./code_v2/FirstShader/qt/FirstShader.cpp" target="_blank">FirstShader.cpp</a></li>
            <li>Source code with Java: <a href="./code_v2/FirstShader/java/FirstShader.java" target="_blank">FirstShader.java</a></li>
            <li>Source code with Android: <a href="./code_v2/FirstShader/android/FirstShader.zip" target="_blank">FirstShader.zip</a></li>
            <li>Shader sources: <a href="./code_v2/FirstShader/java/first.vert" target="_blank">first.vert</a>, <a href="./code_v2/FirstShader/java/first.frag" target="_blank">first.frag</a></li>
          </ul>
          </li>
        </ul>
        <br />
        <ul>
          <li>Implementation with WebGL: <br /><a href="./code/WebGLFirstShader/FirstShader.html" target="_blank">FirstShader.html</a></li>
        </ul>
        <ul>
          <li>GSN Composer: <br /><a href="https://www.gsn-lib.org/index.html#projectName=public3dshader&amp;graphName=FirstShader" target="_blank">FirstShader</a></li>
        </ul>
      </div>
    </article>

    <!-- Slide (web, intern, german, english) -->
    <article data-slide-num="20" data-total-slides="47" id="20" class="far-next">
      <div class="slidetitle">
        <!-- Slide (web, intern, english) -->
        <h3>Example: A First Triangle with GLSL</h3>
        <!-- Slide (web, intern, german, english) -->
      </div>
      <div class="slidebody">
        <div style="overflow: scroll; height: 500px; width: 750px;">
          <pre style="margin: 0px;" class="prettyprint prettyprinted"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Renderer</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

</span><span class="kwd">private</span><span class="pun">:</span><span class="pln">
  </span><span class="kwd">struct</span><span class="pln"> </span><span class="typ">Vertex</span><span class="pln">
  </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">float</span><span class="pln"> position</span><span class="pun">[</span><span class="lit">3</span><span class="pun">];</span><span class="pln">
    </span><span class="kwd">float</span><span class="pln"> color</span><span class="pun">[</span><span class="lit">4</span><span class="pun">];</span><span class="pln">
  </span><span class="pun">};</span><span class="pln">

</span><span class="kwd">private</span><span class="pun">:</span><span class="pln">
  </span><span class="kwd">enum</span><span class="pln"> </span><span class="pun">{</span><span class="typ">Triangle</span><span class="pun">,</span><span class="pln"> numVAOs</span><span class="pun">};</span><span class="pln">
  </span><span class="kwd">enum</span><span class="pln"> </span><span class="pun">{</span><span class="typ">TriangleAll</span><span class="pun">,</span><span class="pln"> numVBOs</span><span class="pun">};</span><span class="pln">
  </span><span class="typ">GLuint</span><span class="pln"> vaoID</span><span class="pun">[</span><span class="pln">numVAOs</span><span class="pun">];</span><span class="pln">
  </span><span class="typ">GLuint</span><span class="pln"> bufID</span><span class="pun">[</span><span class="pln">numVBOs</span><span class="pun">];</span><span class="pln">
  </span><span class="kwd">int</span><span class="pln"> triangleVertNo</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLuint</span><span class="pln"> progID</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLuint</span><span class="pln"> vertID</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLuint</span><span class="pln"> fragID</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLint</span><span class="pln"> vertexLoc</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLint</span><span class="pln"> colorLoc</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pun">:</span><span class="pln">
  </span><span class="com">// constructor</span><span class="pln">
  </span><span class="typ">Renderer</span><span class="pun">()</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> triangleVertNo</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span><span class="pln"> progID</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span><span class="pln"> vertID</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span><span class="pln">
               fragID</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span><span class="pln"> vertexLoc</span><span class="pun">(-</span><span class="lit">1</span><span class="pun">),</span><span class="pln"> colorLoc</span><span class="pun">(-</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">
  </span><span class="com">//destructor</span><span class="pln">
  </span><span class="pun">~</span><span class="typ">Renderer</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    glDeleteVertexArrays</span><span class="pun">(</span><span class="pln">numVAOs</span><span class="pun">,</span><span class="pln"> vaoID</span><span class="pun">);</span><span class="pln">
    glDeleteBuffers</span><span class="pun">(</span><span class="pln">numVBOs</span><span class="pun">,</span><span class="pln"> bufID</span><span class="pun">);</span><span class="pln">
    glDeleteProgram</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">);</span><span class="pln">
    glDeleteShader</span><span class="pun">(</span><span class="pln">vertID</span><span class="pun">);</span><span class="pln">
    glDeleteShader</span><span class="pun">(</span><span class="pln">fragID</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

</span><span class="kwd">public</span><span class="pun">:</span><span class="pln">
  </span><span class="kwd">void</span><span class="pln"> init</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    initExtensions</span><span class="pun">();</span><span class="pln">
    glEnable</span><span class="pun">(</span><span class="pln">GL_DEPTH_TEST</span><span class="pun">);</span><span class="pln">
    glEnable</span><span class="pun">(</span><span class="pln">GL_DEPTH</span><span class="pun">);</span><span class="pln">

    setupShaders</span><span class="pun">();</span><span class="pln">

    </span><span class="com">// create a Vertex Array Objects (VAO)</span><span class="pln">
    glGenVertexArrays</span><span class="pun">(</span><span class="pln">numVAOs</span><span class="pun">,</span><span class="pln"> vaoID</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// generate a Vertex Buffer Object (VBO)</span><span class="pln">
    glGenBuffers</span><span class="pun">(</span><span class="pln">numVBOs</span><span class="pun">,</span><span class="pln"> bufID</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// binding the Triangle VAO</span><span class="pln">
    glBindVertexArray</span><span class="pun">(</span><span class="pln">vaoID</span><span class="pun">[</span><span class="typ">Triangle</span><span class="pun">]);</span><span class="pln">

    </span><span class="kwd">float</span><span class="pln"> triangleVertexData</span><span class="pun">[]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
       </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.5f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln">
      </span><span class="pun">-</span><span class="lit">0.5f</span><span class="pun">,-</span><span class="lit">0.5f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln">
       </span><span class="lit">0.5f</span><span class="pun">,-</span><span class="lit">0.5f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln">
    </span><span class="pun">};</span><span class="pln">
    triangleVertNo </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pun">;</span><span class="pln">

    glBindBuffer</span><span class="pun">(</span><span class="pln">GL_ARRAY_BUFFER</span><span class="pun">,</span><span class="pln"> bufID</span><span class="pun">[</span><span class="typ">TriangleAll</span><span class="pun">]);</span><span class="pln">
    glBufferData</span><span class="pun">(</span><span class="pln">GL_ARRAY_BUFFER</span><span class="pun">,</span><span class="pln"> triangleVertNo</span><span class="pun">*</span><span class="kwd">sizeof</span><span class="pun">(</span><span class="typ">Vertex</span><span class="pun">),</span><span class="pln">
                 triangleVertexData</span><span class="pun">,</span><span class="pln"> GL_STATIC_DRAW</span><span class="pun">);</span><span class="pln">

    </span><span class="kwd">int</span><span class="pln"> stride </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">sizeof</span><span class="pun">(</span><span class="typ">Vertex</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">char</span><span class="pln"> </span><span class="pun">*</span><span class="pln">offset </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="pln">NULL</span><span class="pun">;</span><span class="pln">

    </span><span class="com">// position</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">vertexLoc </span><span class="pun">!=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      glVertexAttribPointer</span><span class="pun">(</span><span class="pln">vertexLoc</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> GL_FLOAT</span><span class="pun">,</span><span class="pln"> 
                            GL_FALSE</span><span class="pun">,</span><span class="pln"> stride</span><span class="pun">,</span><span class="pln"> offset</span><span class="pun">);</span><span class="pln">
      glEnableVertexAttribArray</span><span class="pun">(</span><span class="pln">vertexLoc</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">// color</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">colorLoc </span><span class="pun">!=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      offset </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="pln">NULL </span><span class="pun">+</span><span class="pln"> </span><span class="lit">3</span><span class="pun">*</span><span class="kwd">sizeof</span><span class="pun">(</span><span class="kwd">float</span><span class="pun">);</span><span class="pln">
      glVertexAttribPointer</span><span class="pun">(</span><span class="pln">colorLoc</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> GL_FLOAT</span><span class="pun">,</span><span class="pln"> 
                            GL_FALSE</span><span class="pun">,</span><span class="pln"> stride</span><span class="pun">,</span><span class="pln"> offset</span><span class="pun">);</span><span class="pln">
      glEnableVertexAttribArray</span><span class="pun">(</span><span class="pln">colorLoc</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> setupShaders</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="com">// create shader</span><span class="pln">
    vertID </span><span class="pun">=</span><span class="pln"> glCreateShader</span><span class="pun">(</span><span class="pln">GL_VERTEX_SHADER</span><span class="pun">);</span><span class="pln">
    fragID </span><span class="pun">=</span><span class="pln"> glCreateShader</span><span class="pun">(</span><span class="pln">GL_FRAGMENT_SHADER</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// load shader source from file</span><span class="pln">
    std</span><span class="pun">::</span><span class="kwd">string</span><span class="pln"> vs </span><span class="pun">=</span><span class="pln"> loadShaderSrc</span><span class="pun">(</span><span class="str">"./first.vert"</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> vss </span><span class="pun">=</span><span class="pln"> vs</span><span class="pun">.</span><span class="pln">c_str</span><span class="pun">();</span><span class="pln">

    std</span><span class="pun">::</span><span class="kwd">string</span><span class="pln"> fs </span><span class="pun">=</span><span class="pln"> loadShaderSrc</span><span class="pun">(</span><span class="str">"./first.frag"</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> fss </span><span class="pun">=</span><span class="pln"> fs</span><span class="pun">.</span><span class="pln">c_str</span><span class="pun">();</span><span class="pln">

    </span><span class="com">// specify shader source</span><span class="pln">
    glShaderSource</span><span class="pun">(</span><span class="pln">vertID</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;(</span><span class="pln">vss</span><span class="pun">),</span><span class="pln"> NULL</span><span class="pun">);</span><span class="pln">
    glShaderSource</span><span class="pun">(</span><span class="pln">fragID</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;(</span><span class="pln">fss</span><span class="pun">),</span><span class="pln"> NULL</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// compile the shader</span><span class="pln">
    glCompileShader</span><span class="pun">(</span><span class="pln">vertID</span><span class="pun">);</span><span class="pln">
    glCompileShader</span><span class="pun">(</span><span class="pln">fragID</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// check for errors</span><span class="pln">
    printShaderInfoLog</span><span class="pun">(</span><span class="pln">vertID</span><span class="pun">);</span><span class="pln">
    printShaderInfoLog</span><span class="pun">(</span><span class="pln">fragID</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// create program and attach shaders</span><span class="pln">
    progID </span><span class="pun">=</span><span class="pln"> glCreateProgram</span><span class="pun">();</span><span class="pln">
    glAttachShader</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="pln"> vertID</span><span class="pun">);</span><span class="pln">
    glAttachShader</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="pln"> fragID</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// "outColor" is a user-provided OUT variable</span><span class="pln">
    </span><span class="com">// of the fragment shader.</span><span class="pln">
    </span><span class="com">// Its output is bound to the first color buffer</span><span class="pln">
    </span><span class="com">// in the framebuffer</span><span class="pln">
    glBindFragDataLocation</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="str">"outputColor"</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// link the program</span><span class="pln">
    glLinkProgram</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">);</span><span class="pln">
    </span><span class="com">// output error messages</span><span class="pln">
    printProgramInfoLog</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// "inputPosition" and "inputColor" are user-provided</span><span class="pln">
    </span><span class="com">// IN variables of the vertex shader.</span><span class="pln">
    </span><span class="com">// Their locations are stored to be used later with</span><span class="pln">
    </span><span class="com">// glEnableVertexAttribArray()</span><span class="pln">
    vertexLoc </span><span class="pun">=</span><span class="pln"> glGetAttribLocation</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="str">"inputPosition"</span><span class="pun">);</span><span class="pln">
    colorLoc </span><span class="pun">=</span><span class="pln"> glGetAttribLocation</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="pln"> </span><span class="str">"inputColor"</span><span class="pun">);</span><span class="pln">

  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> resize</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> w</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> h</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    glViewport</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> w</span><span class="pun">,</span><span class="pln"> h</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> display</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    glClearColor</span><span class="pun">(</span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">);</span><span class="pln">
    glClear</span><span class="pun">(</span><span class="pln">GL_COLOR_BUFFER_BIT </span><span class="pun">|</span><span class="pln"> GL_DEPTH_BUFFER_BIT</span><span class="pun">);</span><span class="pln">

    glUseProgram</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// bind Triangle VAO</span><span class="pln">
    glBindVertexArray</span><span class="pun">(</span><span class="pln">vaoID</span><span class="pun">[</span><span class="typ">Triangle</span><span class="pun">]);</span><span class="pln">
    </span><span class="com">// render data</span><span class="pln">
    glDrawArrays</span><span class="pun">(</span><span class="pln">GL_TRIANGLES</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> triangleVertNo</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
  
</span><span class="kwd">private</span><span class="pun">:</span><span class="pln">
  </span><span class="kwd">void</span><span class="pln"> printShaderInfoLog</span><span class="pun">(</span><span class="typ">GLuint</span><span class="pln"> obj</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> infoLogLength </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> returnLength  </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">char</span><span class="pln"> </span><span class="pun">*</span><span class="pln">infoLog</span><span class="pun">;</span><span class="pln">
    glGetShaderiv</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">,</span><span class="pln"> GL_INFO_LOG_LENGTH</span><span class="pun">,&amp;</span><span class="pln">infoLogLength</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">infoLogLength </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      infoLog </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">malloc</span><span class="pun">(</span><span class="pln">infoLogLength</span><span class="pun">);</span><span class="pln">
      glGetShaderInfoLog</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">,</span><span class="pln"> infoLogLength</span><span class="pun">,</span><span class="pln"> 
                         </span><span class="pun">&amp;</span><span class="pln">returnLength</span><span class="pun">,</span><span class="pln"> infoLog</span><span class="pun">);</span><span class="pln">
      printf</span><span class="pun">(</span><span class="str">"%s\n"</span><span class="pun">,</span><span class="pln">infoLog</span><span class="pun">);</span><span class="pln">
      free</span><span class="pun">(</span><span class="pln">infoLog</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> printProgramInfoLog</span><span class="pun">(</span><span class="typ">GLuint</span><span class="pln"> obj</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> infoLogLength </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> returnLength  </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">char</span><span class="pln"> </span><span class="pun">*</span><span class="pln">infoLog</span><span class="pun">;</span><span class="pln">
    glGetProgramiv</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">,</span><span class="pln"> GL_INFO_LOG_LENGTH</span><span class="pun">,&amp;</span><span class="pln">infoLogLength</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">infoLogLength </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      infoLog </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">malloc</span><span class="pun">(</span><span class="pln">infoLogLength</span><span class="pun">);</span><span class="pln">
      glGetProgramInfoLog</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">,</span><span class="pln"> infoLogLength</span><span class="pun">,</span><span class="pln"> 
                          </span><span class="pun">&amp;</span><span class="pln">returnLength</span><span class="pun">,</span><span class="pln"> infoLog</span><span class="pun">);</span><span class="pln">
      printf</span><span class="pun">(</span><span class="str">"%s\n"</span><span class="pun">,</span><span class="pln">infoLog</span><span class="pun">);</span><span class="pln">
      free</span><span class="pun">(</span><span class="pln">infoLog</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  std</span><span class="pun">::</span><span class="kwd">string</span><span class="pln"> loadShaderSrc</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> std</span><span class="pun">::</span><span class="kwd">string</span><span class="pun">&amp;</span><span class="pln"> filename</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    std</span><span class="pun">::</span><span class="pln">ifstream </span><span class="kwd">is</span><span class="pun">(</span><span class="pln">filename</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">is</span><span class="pun">.</span><span class="pln">is_open</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      std</span><span class="pun">::</span><span class="pln">stringstream buffer</span><span class="pun">;</span><span class="pln">
      buffer </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="kwd">is</span><span class="pun">.</span><span class="pln">rdbuf</span><span class="pun">();</span><span class="pln">
      </span><span class="kwd">return</span><span class="pln"> buffer</span><span class="pun">.</span><span class="pln">str</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    cerr </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">"Unable to open file "</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> filename </span><span class="pun">&lt;&lt;</span><span class="pln"> endl</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">exit</span><span class="pun">(</span><span class="lit">1</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">};</span></pre>
        </div>
      </div>
    </article>

    <!-- Slide (web, intern, german, english) -->
    <article data-slide-num="21" data-total-slides="47" id="21" class="far-next">
      <div class="slidetitle">
        <!-- Slide (web, intern, english) -->
        <h3>Example: A First Triangle with GLSL (Shader Code)</h3>
        <!-- Slide (web, intern, german, english) -->
      </div>
      <div class="slidebody">
        <ul>
          <li>Vertex Shader: <pre style="margin: 0px;" class="prettyprint prettyprinted"><span class="com">#version 140</span><span class="pln">
</span><span class="kwd">in</span><span class="pln"> vec3 inputPosition</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">in</span><span class="pln"> vec4 inputColor</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">out</span><span class="pln"> vec3 forFragColor</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">(){</span><span class="pln">
    forFragColor </span><span class="pun">=</span><span class="pln"> inputColor</span><span class="pun">.</span><span class="pln">rgb</span><span class="pun">;</span><span class="pln">
    gl_Position </span><span class="pun">=</span><span class="pln">  vec4</span><span class="pun">(</span><span class="pln">inputPosition</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span></pre></li>
        </ul>
        <ul>
          <li>Fragment Shader: <pre style="margin: 0px;" class="prettyprint prettyprinted"><span class="com">#version 140</span><span class="pln">
</span><span class="kwd">in</span><span class="pln"> vec3 forFragColor</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">out</span><span class="pln"> vec4 outputColor</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    outputColor </span><span class="pun">=</span><span class="pln"> vec4</span><span class="pun">(</span><span class="pln">forFragColor</span><span class="pun">,</span><span class="lit">1.0</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span></pre></li>
        </ul>
      </div>
    </article>

    <!-- Slide (web, intern, english) -->
    <article data-slide-num="22" data-total-slides="47" id="22" class="far-next">
      <div class="slidetitle">
        <h3>Passing of Vertex Attributes</h3>
      </div>
      <div class="slidebody">
        <ul>
          <li>Per-Vertex attributes can be passed to a vertex shader using <code>in</code> variables
          </li>
          <li>Distinctions can be made regarding special <code>in</code> variables, which are automatically generated, and user-defined 
            <code>in</code> variables,
            which must be passed by the application
          </li>
          <li>The vertex data is transferred to the graphics card via Vertex Buffer Objects (VBOs)</li>
        </ul>
      </div>
    </article>
    
    <!-- Slide (web, intern, english) -->
    <article class="smaller far-next" data-slide-num="23" data-total-slides="47" id="23">
      <div class="slidetitle">
        <h3>Passing of Vertex Attributes</h3>
      </div>
      <div class="slidebody">
        <p>
          To use the data of VBOs for the used-defined
          <code>in</code>
          variables, the usual procedure will be as follows:
        </p>
        <ul class="mediumTopMargin">
          <li>With <code>glGetAttribLocation</code> a location identifier for an <code>in</code> variable is queried. 
            For example, when the variable in the shader code is called "inputColor" <pre class="prettyprint prettyprinted" style=""><span class="kwd">int</span><span class="pln"> colorLoc </span><span class="pun">=</span><span class="pln"> glGetAttribLocation</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="pln"> </span><span class="str">"inputColor"</span><span class="pun">);</span></pre>
          </li>
          <li>The function <code>glVertexAttribPointer(colorLoc, size, type, normalized, stride, offset)</code> then defines the mapping between an <code>in</code> variable
            and VBO attribute
          </li>
          <li>Finally, the attribute needs to be activated by <pre class="prettyprint prettyprinted" style=""><span class="pln">glEnableVertexAttribArray</span><span class="pun">(</span><span class="pln">colorLoc</span><span class="pun">);</span></pre>
          </li>
          <li>In a subsequent call to <code>glDrawArray</code> or <code>glDrawElements</code> with activated VBO the <code>in</code> variable
            of the vertex shader is then filled with the attribute data for each drawn vertex
          </li>
        </ul>
      </div>
    </article>
    
    <!-- Slide (web, intern, english) -->
    <article data-slide-num="24" data-total-slides="47" id="24" class="far-next">
      <div class="slidetitle">
        <h3>Data Input and Output in the Fragment Shader</h3>
      </div>
      <div class="slidebody">
        <ul>
          <li>User-defined <code>out</code> variables of the vertex shader are interpolated in the rasterizer and the interpolated values are supplied as <code>in</code> variables
            to the fragment shader 
        </li></ul>
        <ul>
          <li>The <code>out</code> variables of the fragment shader will be sent to the framebuffer
          </li>
          <li>For example, if the <code>out</code> variable "outputColor" should be written into the first color buffer
            of the framebuffer, this can be achieved by <pre class="prettyprint prettyprinted" style=""><span class="pln">glBindFragDataLocation</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="str">"outputColor"</span><span class="pun">);</span></pre></li>
        </ul>
      </div>
    </article>

    
    <!-- Slide (web, intern, english) -->
    <article data-slide-num="25" data-total-slides="47" id="25" class="far-next">
      <div class="slidetitle">
        <h3>Uniform Variables</h3>
      </div>
      <div class="slidebody">
        <ul>
          <li>In addition to <code>in</code> variables, <code>uniform</code> variables are another way to pass data to a shader</li>
          <li>In contrast to the <code>in</code> variables that contain the vertex attributes, the <code>uniform</code> variables 
            include data that remains constant for all vertices during a call to <code>glDrawArray</code> or <code>glDrawElements</code>
          </li>
        </ul>
      </div>
    </article>

    <!-- Slide (web, intern, english) -->
    <article data-slide-num="26" data-total-slides="47" id="26" class="far-next">
      <div class="slidetitle">
       <h3>Uniform Variables</h3>
      </div>
      <div class="slidebody">
        <ul>
          <li>The location identifier of a <code>uniform</code> variable can be queried by <pre class="prettyprint prettyprinted" style=""><span class="pln">paraLoc </span><span class="pun">=</span><span class="pln"> glGetUniformLocation</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="pln"> </span><span class="str">"parameter"</span><span class="pun">);</span></pre>
          </li>
          <li>Afterwards, the <code>uniform</code> variable can be set with
          
          <pre class="prettyprint prettyprinted" style=""><span class="pln">glUniform1i</span><span class="pun">(</span><span class="pln">paraLoc</span><span class="pun">,</span><span class="pln"> </span><span class="lit">123</span><span class="pun">);</span></pre></li>
          <li>or, if the variable is a float-vector
          <pre class="prettyprint prettyprinted" style=""><span class="pln">glUniform3fv</span><span class="pun">(</span><span class="pln">threeVectorLoc</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> threeVector</span><span class="pun">);</span></pre></li>
          <li>and in case of a matrix
          <pre class="prettyprint prettyprinted" style=""><span class="pln">glUniformMatrix4fv</span><span class="pun">(</span><span class="pln">modelviewLoc</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> transpose</span><span class="pun">,</span><span class="pln"> modelview</span><span class="pun">);</span></pre>
          </li>
        </ul>
      </div>
    </article>
    
    <!-- Slide (web, intern, english) -->
    <article class="smaller far-next" data-slide-num="27" data-total-slides="47" id="27">
      <div class="slidetitle">
        <h3>Example: Passing the Transformation Matrices As Uniforms</h3>
      </div>

      <div class="slidebody">
         <div class="captionBoxRight">
          <img src="media/opengl_shaderuniform.png" alt="opengl_shaderuniform" />
        </div>
        <ul>
          <li>In this example, the modelview matrix and the projection matrix are passed as <code>uniform</code> variables.
            The functionality of the <code>GL_MODELVIEW</code> and <code>GL_PROJECTION</code> matrices (which are known from the fixed-function pipeline) are simulated.
          </li>
            <li>Source with GLUT: <a href="./code_v2/ShaderUniform/glut/ShaderUniform.cpp" target="_blank">ShaderUniform.cpp</a></li>
            <li>Source code with Qt: <a href="./code_v2/ShaderUniform/qt/ShaderUniform.cpp" target="_blank">ShaderUniform.cpp</a></li>
            <li>Source code with Java: <a href="./code_v2/ShaderUniform/java/ShaderUniform.java" target="_blank">ShaderUniform.java</a></li>
            <li>Source code with Android: <a href="./code_v2/ShaderUniform/android/ShaderUniform.zip" target="_blank">ShaderUniform.zip</a></li>
            <li>Shader sources: <a href="./code_v2/ShaderUniform/java/uniform.vert" target="_blank">uniform.vert</a>, <a href="./code_v2/ShaderUniform/java/uniform.frag" target="_blank">uniform.frag</a></li>
            <li>Implementation with WebGL: <a href="./code/WebGLShaderUniform/ShaderUniform.html" target="_blank">ShaderUniform.html</a></li>
            <li>GSN Composer: <a href="https://www.gsn-lib.org/index.html#projectName=public3dshader&amp;graphName=ShaderUniform" target="_blank">ShaderUniform</a></li>
        </ul>
      </div>
    </article>

    <!-- Slide (web, intern, german, english) -->
    <article class="smaller far-next" data-slide-num="28" data-total-slides="47" id="28">
      <div class="slidetitle">
        <!-- Slide (web, intern, english) -->
        <h3>Example: Passing the Transformation Matrices As Uniforms</h3>
        <!-- Slide (web, intern, german, english) -->
      </div>
      <div class="slidebody">
        <div style="overflow: scroll; height: 500px; width: 750px;">
          <pre style="margin: 0px;" class="prettyprint prettyprinted"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Renderer</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

</span><span class="kwd">private</span><span class="pun">:</span><span class="pln">
  </span><span class="kwd">struct</span><span class="pln"> </span><span class="typ">Vertex</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">float</span><span class="pln"> position</span><span class="pun">[</span><span class="lit">3</span><span class="pun">];</span><span class="pln">
    </span><span class="kwd">float</span><span class="pln"> color</span><span class="pun">[</span><span class="lit">4</span><span class="pun">];</span><span class="pln">
  </span><span class="pun">};</span><span class="pln">

</span><span class="kwd">public</span><span class="pun">:</span><span class="pln">
  </span><span class="kwd">float</span><span class="pln"> t</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">private</span><span class="pun">:</span><span class="pln">
  </span><span class="kwd">enum</span><span class="pln"> </span><span class="pun">{</span><span class="typ">Triangle</span><span class="pun">,</span><span class="pln"> numVAOs</span><span class="pun">};</span><span class="pln">
  </span><span class="kwd">enum</span><span class="pln"> </span><span class="pun">{</span><span class="typ">TriangleAll</span><span class="pun">,</span><span class="pln"> numVBOs</span><span class="pun">};</span><span class="pln">
  </span><span class="typ">GLuint</span><span class="pln"> vaoID</span><span class="pun">[</span><span class="pln">numVAOs</span><span class="pun">];</span><span class="pln">
  </span><span class="typ">GLuint</span><span class="pln"> bufID</span><span class="pun">[</span><span class="pln">numVBOs</span><span class="pun">];</span><span class="pln">
  </span><span class="kwd">int</span><span class="pln"> triangleVertNo</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLuint</span><span class="pln"> progID</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLuint</span><span class="pln"> vertID</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLuint</span><span class="pln"> fragID</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLuint</span><span class="pln"> vertexLoc</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLuint</span><span class="pln"> colorLoc</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLuint</span><span class="pln"> projectionLoc</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLuint</span><span class="pln"> modelviewLoc</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">float</span><span class="pln"> projection</span><span class="pun">[</span><span class="lit">16</span><span class="pun">];</span><span class="pln">  </span><span class="com">// projection matrix</span><span class="pln">
  </span><span class="kwd">float</span><span class="pln"> modelview</span><span class="pun">[</span><span class="lit">16</span><span class="pun">];</span><span class="pln">  </span><span class="com">// modelview matrix</span><span class="pln">

</span><span class="kwd">public</span><span class="pun">:</span><span class="pln">
  </span><span class="com">// constructor</span><span class="pln">
  </span><span class="typ">Renderer</span><span class="pun">()</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> t</span><span class="pun">(</span><span class="lit">0.0f</span><span class="pun">),</span><span class="pln"> triangleVertNo</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span><span class="pln"> progID</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span><span class="pln"> vertID</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span><span class="pln"> fragID</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span><span class="pln">
               vertexLoc</span><span class="pun">(-</span><span class="lit">1</span><span class="pun">),</span><span class="pln"> colorLoc</span><span class="pun">(-</span><span class="lit">1</span><span class="pun">),</span><span class="pln"> projectionLoc</span><span class="pun">(-</span><span class="lit">1</span><span class="pun">),</span><span class="pln"> modelviewLoc</span><span class="pun">(-</span><span class="lit">1</span><span class="pun">)</span><span class="pln">
               </span><span class="pun">{}</span><span class="pln">
  </span><span class="com">//destructor</span><span class="pln">
  </span><span class="pun">~</span><span class="typ">Renderer</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    glDeleteVertexArrays</span><span class="pun">(</span><span class="pln">numVAOs</span><span class="pun">,</span><span class="pln"> vaoID</span><span class="pun">);</span><span class="pln">
    glDeleteBuffers</span><span class="pun">(</span><span class="pln">numVBOs</span><span class="pun">,</span><span class="pln"> bufID</span><span class="pun">);</span><span class="pln">
    glDeleteProgram</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">);</span><span class="pln">
    glDeleteShader</span><span class="pun">(</span><span class="pln">vertID</span><span class="pun">);</span><span class="pln">
    glDeleteShader</span><span class="pun">(</span><span class="pln">fragID</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

</span><span class="kwd">public</span><span class="pun">:</span><span class="pln">
  </span><span class="kwd">void</span><span class="pln"> init</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    initExtensions</span><span class="pun">();</span><span class="pln">
    glEnable</span><span class="pun">(</span><span class="pln">GL_DEPTH_TEST</span><span class="pun">);</span><span class="pln">
    glEnable</span><span class="pun">(</span><span class="pln">GL_DEPTH</span><span class="pun">);</span><span class="pln">

    setupShaders</span><span class="pun">();</span><span class="pln">

    </span><span class="com">// create a Vertex Array Objects (VAO)</span><span class="pln">
    glGenVertexArrays</span><span class="pun">(</span><span class="pln">numVAOs</span><span class="pun">,</span><span class="pln"> vaoID</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// generate a Vertex Buffer Object (VBO)</span><span class="pln">
    glGenBuffers</span><span class="pun">(</span><span class="pln">numVBOs</span><span class="pun">,</span><span class="pln"> bufID</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// binding the Triangle VAO</span><span class="pln">
    glBindVertexArray</span><span class="pun">(</span><span class="pln">vaoID</span><span class="pun">[</span><span class="typ">Triangle</span><span class="pun">]);</span><span class="pln">

    </span><span class="kwd">float</span><span class="pln"> triangleVertexData</span><span class="pun">[]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
       </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.5f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln">
      </span><span class="pun">-</span><span class="lit">0.5f</span><span class="pun">,-</span><span class="lit">0.5f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln">
       </span><span class="lit">0.5f</span><span class="pun">,-</span><span class="lit">0.5f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln">
    </span><span class="pun">};</span><span class="pln">
    triangleVertNo </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pun">;</span><span class="pln">

    glBindBuffer</span><span class="pun">(</span><span class="pln">GL_ARRAY_BUFFER</span><span class="pun">,</span><span class="pln"> bufID</span><span class="pun">[</span><span class="typ">TriangleAll</span><span class="pun">]);</span><span class="pln">
    glBufferData</span><span class="pun">(</span><span class="pln">GL_ARRAY_BUFFER</span><span class="pun">,</span><span class="pln"> triangleVertNo</span><span class="pun">*</span><span class="kwd">sizeof</span><span class="pun">(</span><span class="typ">Vertex</span><span class="pun">),</span><span class="pln">
                 triangleVertexData</span><span class="pun">,</span><span class="pln"> GL_STATIC_DRAW</span><span class="pun">);</span><span class="pln">

    </span><span class="kwd">int</span><span class="pln"> stride </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">sizeof</span><span class="pun">(</span><span class="typ">Vertex</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">char</span><span class="pln"> </span><span class="pun">*</span><span class="pln">offset </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="pln">NULL</span><span class="pun">;</span><span class="pln">

    </span><span class="com">// position</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">vertexLoc </span><span class="pun">!=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      glVertexAttribPointer</span><span class="pun">(</span><span class="pln">vertexLoc</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> GL_FLOAT</span><span class="pun">,</span><span class="pln"> 
      GL_FALSE</span><span class="pun">,</span><span class="pln"> stride</span><span class="pun">,</span><span class="pln"> offset</span><span class="pun">);</span><span class="pln">
      glEnableVertexAttribArray</span><span class="pun">(</span><span class="pln">vertexLoc</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">// color</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">colorLoc </span><span class="pun">!=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      offset </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="pln">NULL </span><span class="pun">+</span><span class="pln"> </span><span class="lit">3</span><span class="pun">*</span><span class="kwd">sizeof</span><span class="pun">(</span><span class="kwd">float</span><span class="pun">);</span><span class="pln">
      glVertexAttribPointer</span><span class="pun">(</span><span class="pln">colorLoc</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> GL_FLOAT</span><span class="pun">,</span><span class="pln"> 
      GL_FALSE</span><span class="pun">,</span><span class="pln"> stride</span><span class="pun">,</span><span class="pln"> offset</span><span class="pun">);</span><span class="pln">
      glEnableVertexAttribArray</span><span class="pun">(</span><span class="pln">colorLoc</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> setupShaders</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="com">// create shader</span><span class="pln">
    vertID </span><span class="pun">=</span><span class="pln"> glCreateShader</span><span class="pun">(</span><span class="pln">GL_VERTEX_SHADER</span><span class="pun">);</span><span class="pln">
    fragID </span><span class="pun">=</span><span class="pln"> glCreateShader</span><span class="pun">(</span><span class="pln">GL_FRAGMENT_SHADER</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// load shader source from file</span><span class="pln">
    std</span><span class="pun">::</span><span class="kwd">string</span><span class="pln"> vs </span><span class="pun">=</span><span class="pln"> loadShaderSrc</span><span class="pun">(</span><span class="str">"./uniform.vert"</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> vss </span><span class="pun">=</span><span class="pln"> vs</span><span class="pun">.</span><span class="pln">c_str</span><span class="pun">();</span><span class="pln">

    std</span><span class="pun">::</span><span class="kwd">string</span><span class="pln"> fs </span><span class="pun">=</span><span class="pln"> loadShaderSrc</span><span class="pun">(</span><span class="str">"./uniform.frag"</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> fss </span><span class="pun">=</span><span class="pln"> fs</span><span class="pun">.</span><span class="pln">c_str</span><span class="pun">();</span><span class="pln">

    </span><span class="com">// specify shader source</span><span class="pln">
    glShaderSource</span><span class="pun">(</span><span class="pln">vertID</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;(</span><span class="pln">vss</span><span class="pun">),</span><span class="pln"> NULL</span><span class="pun">);</span><span class="pln">
    glShaderSource</span><span class="pun">(</span><span class="pln">fragID</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;(</span><span class="pln">fss</span><span class="pun">),</span><span class="pln"> NULL</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// compile the shader</span><span class="pln">
    glCompileShader</span><span class="pun">(</span><span class="pln">vertID</span><span class="pun">);</span><span class="pln">
    glCompileShader</span><span class="pun">(</span><span class="pln">fragID</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// check for errors</span><span class="pln">
    printShaderInfoLog</span><span class="pun">(</span><span class="pln">vertID</span><span class="pun">);</span><span class="pln">
    printShaderInfoLog</span><span class="pun">(</span><span class="pln">fragID</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// create program and attach shaders</span><span class="pln">
    progID </span><span class="pun">=</span><span class="pln"> glCreateProgram</span><span class="pun">();</span><span class="pln">
    glAttachShader</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="pln"> vertID</span><span class="pun">);</span><span class="pln">
    glAttachShader</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="pln"> fragID</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// "outColor" is a user-provided OUT variable</span><span class="pln">
    </span><span class="com">// of the fragment shader.</span><span class="pln">
    </span><span class="com">// Its output is bound to the first color buffer</span><span class="pln">
    </span><span class="com">// in the framebuffer</span><span class="pln">
    glBindFragDataLocation</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="str">"outputColor"</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// link the program</span><span class="pln">
    glLinkProgram</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">);</span><span class="pln">
    </span><span class="com">// output error messages</span><span class="pln">
    printProgramInfoLog</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// "inputPosition" and "inputColor" are user-provided</span><span class="pln">
    </span><span class="com">// IN variables of the vertex shader.</span><span class="pln">
    </span><span class="com">// Their locations are stored to be used later with</span><span class="pln">
    </span><span class="com">// glEnableVertexAttribArray()</span><span class="pln">
    vertexLoc </span><span class="pun">=</span><span class="pln"> glGetAttribLocation</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="str">"inputPosition"</span><span class="pun">);</span><span class="pln">
    colorLoc </span><span class="pun">=</span><span class="pln"> glGetAttribLocation</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="pln"> </span><span class="str">"inputColor"</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// "projection" and "modelview" are user-provided</span><span class="pln">
    </span><span class="com">// UNIFORM variables of the vertex shader.</span><span class="pln">
    </span><span class="com">// Their locations are stored to be used later</span><span class="pln">
    projectionLoc </span><span class="pun">=</span><span class="pln"> glGetUniformLocation</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="pln"> </span><span class="str">"projection"</span><span class="pun">);</span><span class="pln">
    modelviewLoc </span><span class="pun">=</span><span class="pln"> glGetUniformLocation</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="pln"> </span><span class="str">"modelview"</span><span class="pun">);</span><span class="pln">

  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> resize</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> w</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> h</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    glViewport</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> w</span><span class="pun">,</span><span class="pln"> h</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// this function replaces gluPerspective</span><span class="pln">
    mat4Perspective</span><span class="pun">(</span><span class="pln">projection</span><span class="pun">,</span><span class="pln"> </span><span class="lit">45.0f</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">float</span><span class="pun">)</span><span class="pln">w</span><span class="pun">/(</span><span class="kwd">float</span><span class="pun">)</span><span class="pln">h</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.5f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4.0f</span><span class="pun">);</span><span class="pln">
    </span><span class="com">//mat4Print(projection);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> display</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    glClearColor</span><span class="pun">(</span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">);</span><span class="pln">
    glClear</span><span class="pun">(</span><span class="pln">GL_COLOR_BUFFER_BIT </span><span class="pun">|</span><span class="pln"> GL_DEPTH_BUFFER_BIT</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// camera orbits in the y=2 plane</span><span class="pln">
    </span><span class="com">// and looks at the origin</span><span class="pln">
    </span><span class="com">// mat4LookAt replaces gluLookAt</span><span class="pln">
    </span><span class="kwd">double</span><span class="pln"> rad </span><span class="pun">=</span><span class="pln"> M_PI </span><span class="pun">/</span><span class="pln"> </span><span class="lit">180.0f</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> t</span><span class="pun">;</span><span class="pln">
    mat4LookAt</span><span class="pun">(</span><span class="pln">modelview</span><span class="pun">,</span><span class="pln">
               </span><span class="lit">2.0f</span><span class="pun">*</span><span class="pln">cos</span><span class="pun">(</span><span class="pln">rad</span><span class="pun">),</span><span class="pln"> </span><span class="lit">2.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2.0f</span><span class="pun">*</span><span class="pln">sin</span><span class="pun">(</span><span class="pln">rad</span><span class="pun">),</span><span class="pln"> </span><span class="com">// eye</span><span class="pln">
               </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="com">// look at</span><span class="pln">
               </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">);</span><span class="pln"> </span><span class="com">// up</span><span class="pln">
  
    glUseProgram</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">);</span><span class="pln">
    </span><span class="com">// load the current projection and modelview matrix into the</span><span class="pln">
    </span><span class="com">// corresponding UNIFORM variables of the shader</span><span class="pln">
    glUniformMatrix4fv</span><span class="pun">(</span><span class="pln">projectionLoc</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">,</span><span class="pln"> projection</span><span class="pun">);</span><span class="pln">
    glUniformMatrix4fv</span><span class="pun">(</span><span class="pln">modelviewLoc</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">,</span><span class="pln"> modelview</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// bind Triangle VAO</span><span class="pln">
    glBindVertexArray</span><span class="pun">(</span><span class="pln">vaoID</span><span class="pun">[</span><span class="typ">Triangle</span><span class="pun">]);</span><span class="pln">
    </span><span class="com">// render data</span><span class="pln">
    glDrawArrays</span><span class="pun">(</span><span class="pln">GL_TRIANGLES</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> triangleVertNo</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">private</span><span class="pun">:</span><span class="pln">
  </span><span class="kwd">void</span><span class="pln"> printShaderInfoLog</span><span class="pun">(</span><span class="typ">GLuint</span><span class="pln"> obj</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> infoLogLength </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> returnLength  </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">char</span><span class="pln"> </span><span class="pun">*</span><span class="pln">infoLog</span><span class="pun">;</span><span class="pln">
    glGetShaderiv</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">,</span><span class="pln"> GL_INFO_LOG_LENGTH</span><span class="pun">,&amp;</span><span class="pln">infoLogLength</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">infoLogLength </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      infoLog </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">malloc</span><span class="pun">(</span><span class="pln">infoLogLength</span><span class="pun">);</span><span class="pln">
      glGetShaderInfoLog</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">,</span><span class="pln"> infoLogLength</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">returnLength</span><span class="pun">,</span><span class="pln"> infoLog</span><span class="pun">);</span><span class="pln">
      printf</span><span class="pun">(</span><span class="str">"%s\n"</span><span class="pun">,</span><span class="pln">infoLog</span><span class="pun">);</span><span class="pln">
      free</span><span class="pun">(</span><span class="pln">infoLog</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> printProgramInfoLog</span><span class="pun">(</span><span class="typ">GLuint</span><span class="pln"> obj</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> infoLogLength </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> returnLength  </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">char</span><span class="pln"> </span><span class="pun">*</span><span class="pln">infoLog</span><span class="pun">;</span><span class="pln">
    glGetProgramiv</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">,</span><span class="pln"> GL_INFO_LOG_LENGTH</span><span class="pun">,&amp;</span><span class="pln">infoLogLength</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">infoLogLength </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      infoLog </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">malloc</span><span class="pun">(</span><span class="pln">infoLogLength</span><span class="pun">);</span><span class="pln">
      glGetProgramInfoLog</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">,</span><span class="pln"> infoLogLength</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">returnLength</span><span class="pun">,</span><span class="pln"> infoLog</span><span class="pun">);</span><span class="pln">
      printf</span><span class="pun">(</span><span class="str">"%s\n"</span><span class="pun">,</span><span class="pln">infoLog</span><span class="pun">);</span><span class="pln">
      free</span><span class="pun">(</span><span class="pln">infoLog</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  std</span><span class="pun">::</span><span class="kwd">string</span><span class="pln"> loadShaderSrc</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> std</span><span class="pun">::</span><span class="kwd">string</span><span class="pun">&amp;</span><span class="pln"> filename</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    std</span><span class="pun">::</span><span class="pln">ifstream </span><span class="kwd">is</span><span class="pun">(</span><span class="pln">filename</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">is</span><span class="pun">.</span><span class="pln">is_open</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      std</span><span class="pun">::</span><span class="pln">stringstream buffer</span><span class="pun">;</span><span class="pln">
      buffer </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="kwd">is</span><span class="pun">.</span><span class="pln">rdbuf</span><span class="pun">();</span><span class="pln">
      </span><span class="kwd">return</span><span class="pln"> buffer</span><span class="pun">.</span><span class="pln">str</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    cerr </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">"Unable to open file "</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> filename </span><span class="pun">&lt;&lt;</span><span class="pln"> endl</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">exit</span><span class="pun">(</span><span class="lit">1</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="com">// the following functions are some matrix and vector helpers</span><span class="pln">
  </span><span class="com">// they work for this demo but in general it is recommended</span><span class="pln">
  </span><span class="com">// to use more advanced matrix libraries,</span><span class="pln">
  </span><span class="com">// e.g. OpenGL Mathematics (GLM)</span><span class="pln">
  </span><span class="kwd">float</span><span class="pln"> vec3Dot</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">a</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">b</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]*</span><span class="pln">b</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]*</span><span class="pln">b</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]*</span><span class="pln">b</span><span class="pun">[</span><span class="lit">2</span><span class="pun">];</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> vec3Cross</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">a</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">b</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">res</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    res</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> b</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln">  </span><span class="pun">-</span><span class="pln">  b</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">2</span><span class="pun">];</span><span class="pln">
    res</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> b</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln">  </span><span class="pun">-</span><span class="pln">  b</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">0</span><span class="pun">];</span><span class="pln">
    res</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> b</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln">  </span><span class="pun">-</span><span class="pln">  b</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">1</span><span class="pun">];</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> vec3Normalize</span><span class="pun">(</span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">a</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">float</span><span class="pln"> mag </span><span class="pun">=</span><span class="pln"> sqrt</span><span class="pun">(</span><span class="pln">a</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln">  </span><span class="pun">+</span><span class="pln">  a</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln">  </span><span class="pun">+</span><span class="pln">  a</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]);</span><span class="pln">
    a</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">/=</span><span class="pln"> mag</span><span class="pun">;</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">/=</span><span class="pln"> mag</span><span class="pun">;</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">/=</span><span class="pln"> mag</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> mat4Identity</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">a</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">16</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class="pln"> a</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">4</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class="pln"> a</span><span class="pun">[</span><span class="pln">i </span><span class="pun">+</span><span class="pln"> i </span><span class="pun">*</span><span class="pln"> </span><span class="lit">4</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> mat4Multiply</span><span class="pun">(</span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">a</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">b</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">res</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">4</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> j </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">4</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">j</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        res</span><span class="pun">[</span><span class="pln">j</span><span class="pun">*</span><span class="lit">4</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> k </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> k </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">4</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">k</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
          res</span><span class="pun">[</span><span class="pln">j</span><span class="pun">*</span><span class="lit">4</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+=</span><span class="pln"> a</span><span class="pun">[</span><span class="pln">k</span><span class="pun">*</span><span class="lit">4</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> b</span><span class="pun">[</span><span class="pln">j</span><span class="pun">*</span><span class="lit">4</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> k</span><span class="pun">];</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
      </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> mat4Perspective</span><span class="pun">(</span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">a</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> fov</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> aspect</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> zNear</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> zFar</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">float</span><span class="pln"> f </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="kwd">float</span><span class="pun">(</span><span class="pln">tan </span><span class="pun">(</span><span class="pln">fov</span><span class="pun">/</span><span class="lit">2.0f</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="pun">(</span><span class="pln">M_PI </span><span class="pun">/</span><span class="pln"> </span><span class="lit">180.0f</span><span class="pun">)));</span><span class="pln">
    mat4Identity</span><span class="pun">(</span><span class="pln">a</span><span class="pun">);</span><span class="pln">
    a</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> f </span><span class="pun">/</span><span class="pln"> aspect</span><span class="pun">;</span><span class="pln">
    a</span><span class="pun">[</span><span class="lit">1</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> f</span><span class="pun">;</span><span class="pln">
    a</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">zFar </span><span class="pun">+</span><span class="pln"> zNear</span><span class="pun">)</span><span class="pln">  </span><span class="pun">/</span><span class="pln"> </span><span class="pun">(</span><span class="pln">zNear </span><span class="pun">-</span><span class="pln"> zFar</span><span class="pun">);</span><span class="pln">
    a</span><span class="pun">[</span><span class="lit">3</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">2.0f</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> zFar </span><span class="pun">*</span><span class="pln"> zNear</span><span class="pun">)</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="pun">(</span><span class="pln">zNear </span><span class="pun">-</span><span class="pln"> zFar</span><span class="pun">);</span><span class="pln">
    a</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1.0f</span><span class="pun">;</span><span class="pln">
    a</span><span class="pun">[</span><span class="lit">3</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> mat4LookAt</span><span class="pun">(</span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">viewMatrix</span><span class="pun">,</span><span class="pln">
                  </span><span class="kwd">float</span><span class="pln"> eyeX</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> eyeY</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> eyeZ</span><span class="pun">,</span><span class="pln">
                  </span><span class="kwd">float</span><span class="pln"> centerX</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> centerY</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> centerZ</span><span class="pun">,</span><span class="pln">
                  </span><span class="kwd">float</span><span class="pln"> upX</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> upY</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> upZ</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">float</span><span class="pln"> dir</span><span class="pun">[</span><span class="lit">3</span><span class="pun">],</span><span class="pln"> right</span><span class="pun">[</span><span class="lit">3</span><span class="pun">],</span><span class="pln"> up</span><span class="pun">[</span><span class="lit">3</span><span class="pun">],</span><span class="pln"> eye</span><span class="pun">[</span><span class="lit">3</span><span class="pun">];</span><span class="pln">
    up</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]=</span><span class="pln">upX</span><span class="pun">;</span><span class="pln"> up</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]=</span><span class="pln">upY</span><span class="pun">;</span><span class="pln"> up</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]=</span><span class="pln">upZ</span><span class="pun">;</span><span class="pln">
    eye</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]=</span><span class="pln">eyeX</span><span class="pun">;</span><span class="pln"> eye</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]=</span><span class="pln">eyeY</span><span class="pun">;</span><span class="pln"> eye</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]=</span><span class="pln">eyeZ</span><span class="pun">;</span><span class="pln">

    dir</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]=</span><span class="pln">centerX</span><span class="pun">-</span><span class="pln">eyeX</span><span class="pun">;</span><span class="pln"> dir</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]=</span><span class="pln">centerY</span><span class="pun">-</span><span class="pln">eyeY</span><span class="pun">;</span><span class="pln"> dir</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]=</span><span class="pln">centerZ</span><span class="pun">-</span><span class="pln">eyeZ</span><span class="pun">;</span><span class="pln">
    vec3Normalize</span><span class="pun">(</span><span class="pln">dir</span><span class="pun">);</span><span class="pln">
    vec3Cross</span><span class="pun">(</span><span class="pln">dir</span><span class="pun">,</span><span class="pln">up</span><span class="pun">,</span><span class="pln">right</span><span class="pun">);</span><span class="pln">
    vec3Normalize</span><span class="pun">(</span><span class="pln">right</span><span class="pun">);</span><span class="pln">
    vec3Cross</span><span class="pun">(</span><span class="pln">right</span><span class="pun">,</span><span class="pln">dir</span><span class="pun">,</span><span class="pln">up</span><span class="pun">);</span><span class="pln">
    vec3Normalize</span><span class="pun">(</span><span class="pln">up</span><span class="pun">);</span><span class="pln">
    </span><span class="com">// first row</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> right</span><span class="pun">[</span><span class="lit">0</span><span class="pun">];</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">4</span><span class="pun">]</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> right</span><span class="pun">[</span><span class="lit">1</span><span class="pun">];</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">8</span><span class="pun">]</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> right</span><span class="pun">[</span><span class="lit">2</span><span class="pun">];</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">12</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">vec3Dot</span><span class="pun">(</span><span class="pln">right</span><span class="pun">,</span><span class="pln"> eye</span><span class="pun">);</span><span class="pln">
    </span><span class="com">// second row</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> up</span><span class="pun">[</span><span class="lit">0</span><span class="pun">];</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">5</span><span class="pun">]</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> up</span><span class="pun">[</span><span class="lit">1</span><span class="pun">];</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">9</span><span class="pun">]</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> up</span><span class="pun">[</span><span class="lit">2</span><span class="pun">];</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">13</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">vec3Dot</span><span class="pun">(</span><span class="pln">up</span><span class="pun">,</span><span class="pln"> eye</span><span class="pun">);</span><span class="pln">
    </span><span class="com">// third row</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">dir</span><span class="pun">[</span><span class="lit">0</span><span class="pun">];</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">6</span><span class="pun">]</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">dir</span><span class="pun">[</span><span class="lit">1</span><span class="pun">];</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">10</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">dir</span><span class="pun">[</span><span class="lit">2</span><span class="pun">];</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">14</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln">  vec3Dot</span><span class="pun">(</span><span class="pln">dir</span><span class="pun">,</span><span class="pln"> eye</span><span class="pun">);</span><span class="pln">
    </span><span class="com">// forth row</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">;</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">7</span><span class="pun">]</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">;</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">11</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">;</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">15</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
  </span><span class="kwd">void</span><span class="pln"> mat4Print</span><span class="pun">(</span><span class="kwd">float</span><span class="pun">*</span><span class="pln"> a</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// opengl uses column major order</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">4</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> j </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">4</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">j</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        cout </span><span class="pun">&lt;&lt;</span><span class="pln"> a</span><span class="pun">[</span><span class="pln">j </span><span class="pun">*</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">" "</span><span class="pun">;</span><span class="pln">
      </span><span class="pun">}</span><span class="pln">
      cout </span><span class="pun">&lt;&lt;</span><span class="pln"> endl</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">};</span></pre>
        </div>
      </div>
    </article>

    <!-- Slide (web, intern, german, english) -->
    <article data-slide-num="29" data-total-slides="47" id="29" class="far-next">
      <div class="slidetitle">
        <!-- Slide (web, intern, english) -->
        <h3>Example: Passing the Transformation Matrices As Uniforms</h3>
        <!-- Slide (web, intern, german, english) -->
      </div>
      <div class="slidebody">
        <ul>
          <li>Vertex Shader: <pre class="prettyprint prettyprinted" style=""><span class="com">#version 140</span><span class="pln">
</span><span class="kwd">in</span><span class="pln"> vec3 inputPosition</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">in</span><span class="pln"> vec4 inputColor</span><span class="pun">;</span><span class="pln">
uniform mat4 projection</span><span class="pun">;</span><span class="pln">
uniform mat4 modelview</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">out</span><span class="pln"> vec3 forFragColor</span><span class="pun">;</span><span class="pln">
 
</span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">(){</span><span class="pln">
    forFragColor </span><span class="pun">=</span><span class="pln"> inputColor</span><span class="pun">.</span><span class="pln">rgb</span><span class="pun">;</span><span class="pln">
    gl_Position </span><span class="pun">=</span><span class="pln">  projection </span><span class="pun">*</span><span class="pln"> modelview </span><span class="pun">*</span><span class="pln"> vec4</span><span class="pun">(</span><span class="pln">inputPosition</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span></pre></li>
        </ul>
      </div>
    </article>

    <!-- Slide (web, intern, german, english) -->
    <article data-slide-num="30" data-total-slides="47" id="30" class="far-next">
      <div class="slidetitle">
        <!-- Slide (web, intern, english) -->
        <h3>Example: Passing the Transformation Matrices As Uniforms</h3>
        <!-- Slide (web, intern, german, english) -->
      </div>
      <div class="slidebody">
        <ul>
          <li>Fragment Shader: <pre class="prettyprint prettyprinted" style=""><span class="com">#version 140</span><span class="pln">
</span><span class="kwd">in</span><span class="pln"> vec3 forFragColor</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">out</span><span class="pln"> vec4 outputColor</span><span class="pun">;</span><span class="pln">
 
</span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    outputColor </span><span class="pun">=</span><span class="pln"> vec4</span><span class="pun">(</span><span class="pln">forFragColor</span><span class="pun">,</span><span class="lit">1.0</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span></pre></li>
        </ul>
      </div>
    </article>

    <!-- Slide (web, intern, english) -->
    <article data-slide-num="31" data-total-slides="47" id="31" class="far-next">
      <div class="slidetitle">
        <h3>Transformation of Surface Normals</h3>
      </div>
      <div class="slidebody">
        <ul>
          <li>The modelview matrix transforms vertices from the local coordinate system to the camera coordinate system</li>
          <li>A later application of illumination models requires that the surface normal of each vertex is also transformed from the local coordinate system to the camera coordinate system</li>
          <li>So far, the fixed-function pipeline has taken care of the transformation of normals. With shaders, this is now also a task of the programmer.</li>
        </ul>
      </div>
    </article>
    
    <!-- Slide (web, intern, english) -->
    <article class="smaller far-next" data-slide-num="32" data-total-slides="47" id="32">
      <div class="slidetitle">
        <h3>Transformation of Surface Normals</h3>
      </div>
      <div class="slidebody">
        <ul>
          <li>When transforming surface normals, it should be considered that a normal is a unit vector that is neither translated nor scaled 
            during a transformation with the modelview matrix <span class="MathJax_Preview">\mathtt{T}_{\mathrm{\small modelview}}</span><span class="MathJax MathJax_Processing" id="MathJax-Element-8-Frame" role="textbox" aria-readonly="true"></span><script type="math/tex" id="MathJax-Element-8">\mathtt{T}_{\mathrm{\small modelview}}</script>. It is only rotated.</li>
          <li>Problem: How can the transformation matrix <span class="MathJax_Preview">\mathtt{T}_{\mathrm{\small normal}}</span><span class="MathJax MathJax_Processing" id="MathJax-Element-9-Frame" role="textbox" aria-readonly="true"></span><script type="math/tex" id="MathJax-Element-9">\mathtt{T}_{\mathrm{\small normal}}</script> of the normal be calculated from the 
            modelview matrix <span class="MathJax_Preview">\mathtt{T}_{\mathrm{\small modelview}}</span><span class="MathJax MathJax_Processing" id="MathJax-Element-10-Frame" role="textbox" aria-readonly="true"></span><script type="math/tex" id="MathJax-Element-10">\mathtt{T}_{\mathrm{\small modelview}}</script> ?</li>
        </ul>
        <div class="textOverImageLeft">
          <img src="./media/vectorart/normaltrans.png" alt="local2cam2" />
          <div class="textOver" style="position: absolute; top: 70%; left: 2%; font-size: 18px;"><span class="MathJax_Preview">\mathbf{V}_1</span><span class="MathJax MathJax_Processing" id="MathJax-Element-11-Frame" role="textbox" aria-readonly="true"></span><script type="math/tex" id="MathJax-Element-11">\mathbf{V}_1</script></div>
          <div class="textOver" style="position: absolute; top: 25%; left: 1%; font-size: 18px;"><span class="MathJax_Preview">\mathbf{V}_2</span><span class="MathJax MathJax_Processing" id="MathJax-Element-12-Frame" role="textbox" aria-readonly="true"></span><script type="math/tex" id="MathJax-Element-12">\mathbf{V}_2</script></div>
          <div class="textOver" style="position: absolute; top: 41%; left: 70%; font-size: 18px;"><span class="MathJax_Preview">\tilde{\mathbf{V}}_2</span><span class="MathJax MathJax_Processing" id="MathJax-Element-13-Frame" role="textbox" aria-readonly="true"></span><script type="math/tex" id="MathJax-Element-13">\tilde{\mathbf{V}}_2</script></div>
          <div class="textOver" style="position: absolute; top: 37%; left: 42%; font-size: 18px;"><span class="MathJax_Preview">\tilde{\mathbf{V}}_1</span><span class="MathJax MathJax_Processing" id="MathJax-Element-14-Frame" role="textbox" aria-readonly="true"></span><script type="math/tex" id="MathJax-Element-14">\tilde{\mathbf{V}}_1</script></div>
          <div class="textOver" style="position: absolute; top: 60%; left: 32%; font-size: 18px;"><span class="MathJax_Preview">\mathtt{T}_{\mathrm{\small modelview}}</span><span class="MathJax MathJax_Processing" id="MathJax-Element-15-Frame" role="textbox" aria-readonly="true"></span><script type="math/tex" id="MathJax-Element-15">\mathtt{T}_{\mathrm{\small modelview}}</script></div>
          <div class="textOver" style="position: absolute; top: 59%; left: 1%; font-size: 18px;"><span class="MathJax_Preview">\mathbf{N}</span><span class="MathJax MathJax_Processing" id="MathJax-Element-16-Frame" role="textbox" aria-readonly="true"></span><script type="math/tex" id="MathJax-Element-16">\mathbf{N}</script></div>
          <div class="textOver" style="position: absolute; top: 21%; left: 42%; font-size: 18px;"><span class="MathJax_Preview">\tilde{\mathbf{N}}</span><span class="MathJax MathJax_Processing" id="MathJax-Element-17-Frame" role="textbox" aria-readonly="true"></span><script type="math/tex" id="MathJax-Element-17">\tilde{\mathbf{N}}</script></div>
          <div class="textOver" style="position: absolute; top: 23%; left: 59%; font-size: 18px;"><span class="MathJax_Preview">\tilde{\mathbf{N}}'= \mathtt{T}_{\mathrm{\small
            normal}} \mathbf{N}</span><span class="MathJax MathJax_Processing" id="MathJax-Element-18-Frame" role="textbox" aria-readonly="true"></span><script type="math/tex" id="MathJax-Element-18">\tilde{\mathbf{N}}'= \mathtt{T}_{\mathrm{\small
            normal}} \mathbf{N}</script></div>
          <div class="textOver" style="position: absolute; top: 43%; left: 0%; font-size: 18px;"><span class="MathJax_Preview">\mathbf{M}</span><span class="MathJax MathJax_Processing" id="MathJax-Element-19-Frame" role="textbox" aria-readonly="true"></span><script type="math/tex" id="MathJax-Element-19">\mathbf{M}</script></div>
          <div class="textOver" style="position: absolute; top: 34%; left: 61%; font-size: 18px;"><span class="MathJax_Preview">\tilde{\mathbf{M}}</span><span class="MathJax MathJax_Processing" id="MathJax-Element-20-Frame" role="textbox" aria-readonly="true"></span><script type="math/tex" id="MathJax-Element-20">\tilde{\mathbf{M}}</script></div>
          <div class="textOver" style="position: absolute; top: 83%; left: 57%; font-size: 18px;">Camera coordinate system</div>
          <div class="textOver" style="position: absolute; top: 83%; left: 4%; font-size: 18px;">Local coordinate system</div>
        </div>
      </div>
    </article>

    <!-- Slide (web, intern, english) -->
    <article class="smaller far-next" data-slide-num="33" data-total-slides="47" id="33">
      <div class="slidetitle">
        <h3>Transformation of Surface Normals</h3>
      </div>
      <div class="slidebody">
        <ul>
          <li>Observation: In the local coordinate system the normal <span class="MathJax_Preview">\mathbf{N}=(n_x,n_y,n_z,0)^{\top}</span><span class="MathJax MathJax_Processing" id="MathJax-Element-21-Frame" role="textbox" aria-readonly="true"></span><script type="math/tex" id="MathJax-Element-21">\mathbf{N}=(n_x,n_y,n_z,0)^{\top}</script> is orthogonal to the tangent <span class="MathJax_Preview">\mathbf{M}=(m_x,m_y,m_z,0)^{\top}</span><span class="MathJax MathJax_Processing" id="MathJax-Element-22-Frame" role="textbox" aria-readonly="true"></span><script type="math/tex" id="MathJax-Element-22">\mathbf{M}=(m_x,m_y,m_z,0)^{\top}</script>. 
            Because of the transformation with <span class="MathJax_Preview">\mathtt{T}_{\mathrm{\small modelview}}</span><span class="MathJax MathJax_Processing" id="MathJax-Element-23-Frame" role="textbox" aria-readonly="true"></span><script type="math/tex" id="MathJax-Element-23">\mathtt{T}_{\mathrm{\small modelview}}</script> the normal is mapped wrongly, but the tangent is still pointing in the right direction</li>
          <li>Approach: Before the transformation, it holds that <span class="MathJax_Preview">\mathbf{N}^{\top}\mathbf{M} = 0</span><span class="MathJax MathJax_Processing" id="MathJax-Element-24-Frame" role="textbox" aria-readonly="true"></span><script type="math/tex" id="MathJax-Element-24">\mathbf{N}^{\top}\mathbf{M} = 0</script> and this relationship should be maintained after the transformation, therefore:
            <div class="smallTopMargin">
            <span class="MathJax_Preview">\begin{align} \tilde{\mathbf{N}}'^{\top} \tilde{\mathbf{M}} &amp;\stackrel{!}{=} 0 \\ (\mathtt{T}_{\mathrm{\small normal}}
            \mathbf{N})^{\top} ( \mathtt{T}_{\mathrm{\small modelview}} \mathbf{M} ) &amp;= 0\\ \mathbf{N}^{\top} (\mathtt{T}_{\mathrm{\small normal}})^{\top}
            \mathtt{T}_{\mathrm{\small modelview}} \mathbf{M} &amp;= 0 \end{align}</span><span class="MathJax MathJax_Processing" id="MathJax-Element-25-Frame" role="textbox" aria-readonly="true"></span><script type="math/tex" id="MathJax-Element-25">\begin{align} \tilde{\mathbf{N}}'^{\top} \tilde{\mathbf{M}} &amp;\stackrel{!}{=} 0 \\ (\mathtt{T}_{\mathrm{\small normal}}
            \mathbf{N})^{\top} ( \mathtt{T}_{\mathrm{\small modelview}} \mathbf{M} ) &amp;= 0\\ \mathbf{N}^{\top} (\mathtt{T}_{\mathrm{\small normal}})^{\top}
            \mathtt{T}_{\mathrm{\small modelview}} \mathbf{M} &amp;= 0 \end{align}</script>
            </div>
            <br />
          </li>
          <li>Thus, for <span class="MathJax_Preview">(\mathtt{T}_{\mathrm{\small normal}})^{\top} \mathtt{T}_{\mathrm{\small modelview}}=\mathtt{I}_{4 \times 4}</span><span class="MathJax MathJax_Processing" id="MathJax-Element-26-Frame" role="textbox" aria-readonly="true"></span><script type="math/tex" id="MathJax-Element-26">(\mathtt{T}_{\mathrm{\small normal}})^{\top} \mathtt{T}_{\mathrm{\small modelview}}=\mathtt{I}_{4 \times 4}</script> the condition 
            is satisfied and it follows that 
            <div class="smallTopMargin">
            <span class="MathJax_Preview">\begin{align} (\mathtt{T}_{\mathrm{\small normal}})^{\top} \mathtt{T}_{\mathrm{\small modelview}}
            &amp;=\mathtt{I}_{4 \times 4}\\ (\mathtt{T}_{\mathrm{\small normal}})^{\top} &amp;= (\mathtt{T}_{\mathrm{\small modelview}})^{-1}\\
            \mathtt{T}_{\mathrm{\small normal}} &amp;= (\mathtt{T}_{\mathrm{\small modelview}})^{-\top}\\ \end{align}</span><span class="MathJax MathJax_Processing" id="MathJax-Element-27-Frame" role="textbox" aria-readonly="true"></span><script type="math/tex" id="MathJax-Element-27">\begin{align} (\mathtt{T}_{\mathrm{\small normal}})^{\top} \mathtt{T}_{\mathrm{\small modelview}}
            &amp;=\mathtt{I}_{4 \times 4}\\ (\mathtt{T}_{\mathrm{\small normal}})^{\top} &amp;= (\mathtt{T}_{\mathrm{\small modelview}})^{-1}\\
            \mathtt{T}_{\mathrm{\small normal}} &amp;= (\mathtt{T}_{\mathrm{\small modelview}})^{-\top}\\ \end{align}</script>
            </div>
          </li>
        </ul>
      </div>
    </article>
    
    <!-- Slide (web, intern, english) -->
    <article class="smaller far-next" data-slide-num="34" data-total-slides="47" id="34">
      <div class="slidetitle">
        <h3>Example: Transformation of Surface Normals</h3>
      </div>

      <div class="slidebody">
        <div class="centered">
          <img src="media/opengl_shadernormaltrans.png" width="400" alt="opengl_shadernormaltrans" />
        </div>
        <ul class="smallTopMargin">
            <li>Source code with GLUT: <a href="./code_v2/ShaderNormalTrans/glut/ShaderNormalTrans.cpp" target="_blank">ShaderNormalTrans.cpp</a>, <a href="./code_v2/ShaderNormalTrans/glut/ShaderNormalTrans.zip" target="_blank">ShaderNormalTrans.zip</a></li>
            <li>Source code with Qt: <a href="./code_v2/ShaderNormalTrans/qt/ShaderNormalTrans.cpp" target="_blank">ShaderNormalTrans.cpp</a>, <a href="./code_v2/ShaderNormalTrans/qt/ShaderNormalTrans.zip" target="_blank">ShaderNormalTrans.zip</a></li>
            <li>Source code with Java: <a href="./code_v2/ShaderNormalTrans/java/ShaderNormalTrans.java" target="_blank">ShaderNormalTrans.java</a>, <a href="./code_v2/ShaderNormalTrans/java/ShaderNormalTrans.zip" target="_blank">ShaderNormalTrans.zip</a></li>
            <li>Source code with Android: <a href="./code_v2/ShaderNormalTrans/android/ShaderNormalTrans.zip" target="_blank">ShaderNormalTrans.zip</a></li>
            <li>Shader source: <a href="./code_v2/ShaderNormalTrans/java/pass.vert" target="_blank">pass.vert</a>, <a href="./code_v2/ShaderNormalTrans/java/pass.frag" target="_blank">pass.frag</a></li>
            <li>Vertex data: <a href="./code_v2/ShaderNormalTrans/java/teapot.vbo" target="_blank">teapot.vbo</a></li>
            <li>Implementation with WebGL: <a href="./code/WebGLShaderNormalTrans/ShaderNormalTrans.html" target="_blank">ShaderNormalTrans.html</a></li>
            <li>GSN Composer: <a href="https://www.gsn-lib.org/index.html#projectName=public3dshader&amp;graphName=NormalTrans" target="_blank">ShaderNormalTrans</a></li>
        </ul>
      </div>
    </article>

    
    <!-- Slide (web, intern, german, english) -->
    <article class="smaller far-next" data-slide-num="35" data-total-slides="47" id="35">
      <div class="slidetitle">
        <!-- Slide (web, intern, english) -->
        <h3>Example: Transformation of Surface Normals</h3>
        <!-- Slide (web, intern, german, english) -->
      </div>
      <div class="slidebody">
        <div style="overflow: scroll; height: 500px; width: 750px;">
          <pre style="margin: 0px;" class="prettyprint prettyprinted"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Renderer</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

</span><span class="kwd">private</span><span class="pun">:</span><span class="pln">
  </span><span class="kwd">struct</span><span class="pln"> </span><span class="typ">Vertex</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">float</span><span class="pln"> position</span><span class="pun">[</span><span class="lit">3</span><span class="pun">];</span><span class="pln">
    </span><span class="kwd">float</span><span class="pln"> texCoord</span><span class="pun">[</span><span class="lit">2</span><span class="pun">];</span><span class="pln">
    </span><span class="kwd">float</span><span class="pln"> normal</span><span class="pun">[</span><span class="lit">3</span><span class="pun">];</span><span class="pln">
  </span><span class="pun">};</span><span class="pln">

</span><span class="kwd">public</span><span class="pun">:</span><span class="pln">
  </span><span class="kwd">float</span><span class="pln"> t</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">int</span><span class="pln"> modeVal</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">private</span><span class="pun">:</span><span class="pln">
  </span><span class="kwd">enum</span><span class="pln"> </span><span class="pun">{</span><span class="typ">Scene</span><span class="pun">,</span><span class="pln"> numVAOs</span><span class="pun">};</span><span class="pln">
  </span><span class="kwd">enum</span><span class="pln"> </span><span class="pun">{</span><span class="typ">SceneAll</span><span class="pun">,</span><span class="pln"> numVBOs</span><span class="pun">};</span><span class="pln">
  </span><span class="typ">GLuint</span><span class="pln"> vaoID</span><span class="pun">[</span><span class="pln">numVAOs</span><span class="pun">];</span><span class="pln">
  </span><span class="typ">GLuint</span><span class="pln"> bufID</span><span class="pun">[</span><span class="pln">numVBOs</span><span class="pun">];</span><span class="pln">
  </span><span class="kwd">int</span><span class="pln"> sceneVertNo</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLuint</span><span class="pln"> progID</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLuint</span><span class="pln"> vertID</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLuint</span><span class="pln"> fragID</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLint</span><span class="pln"> vertexLoc</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLint</span><span class="pln"> texCoordLoc</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLint</span><span class="pln"> normalLoc</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLint</span><span class="pln"> projectionLoc</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLint</span><span class="pln"> modelviewLoc</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLint</span><span class="pln"> normalMatrixLoc</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLint</span><span class="pln"> modeLoc</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">float</span><span class="pln"> projection</span><span class="pun">[</span><span class="lit">16</span><span class="pun">];</span><span class="pln">  </span><span class="com">// projection matrix</span><span class="pln">
  </span><span class="kwd">float</span><span class="pln"> modelview</span><span class="pun">[</span><span class="lit">16</span><span class="pun">];</span><span class="pln">  </span><span class="com">// modelview matrix</span><span class="pln">

</span><span class="kwd">public</span><span class="pun">:</span><span class="pln">
  </span><span class="com">// constructor</span><span class="pln">
  </span><span class="typ">Renderer</span><span class="pun">()</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> t</span><span class="pun">(</span><span class="lit">0.0</span><span class="pun">),</span><span class="pln"> modeVal</span><span class="pun">(</span><span class="lit">1</span><span class="pun">),</span><span class="pln"> sceneVertNo</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span><span class="pln"> progID</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span><span class="pln"> 
               vertID</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span><span class="pln"> fragID</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span><span class="pln">
               vertexLoc</span><span class="pun">(-</span><span class="lit">1</span><span class="pun">),</span><span class="pln"> texCoordLoc</span><span class="pun">(-</span><span class="lit">1</span><span class="pun">),</span><span class="pln"> normalLoc</span><span class="pun">(-</span><span class="lit">1</span><span class="pun">),</span><span class="pln">
               projectionLoc</span><span class="pun">(-</span><span class="lit">1</span><span class="pun">),</span><span class="pln"> modelviewLoc</span><span class="pun">(-</span><span class="lit">1</span><span class="pun">),</span><span class="pln"> 
               normalMatrixLoc</span><span class="pun">(-</span><span class="lit">1</span><span class="pun">),</span><span class="pln"> modeLoc</span><span class="pun">(-</span><span class="lit">1</span><span class="pun">)</span><span class="pln">
               </span><span class="pun">{}</span><span class="pln">
  </span><span class="com">//destructor</span><span class="pln">
  </span><span class="pun">~</span><span class="typ">Renderer</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    glDeleteVertexArrays</span><span class="pun">(</span><span class="pln">numVAOs</span><span class="pun">,</span><span class="pln"> vaoID</span><span class="pun">);</span><span class="pln">
    glDeleteBuffers</span><span class="pun">(</span><span class="pln">numVBOs</span><span class="pun">,</span><span class="pln"> bufID</span><span class="pun">);</span><span class="pln">
    glDeleteProgram</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">);</span><span class="pln">
    glDeleteShader</span><span class="pun">(</span><span class="pln">vertID</span><span class="pun">);</span><span class="pln">
    glDeleteShader</span><span class="pun">(</span><span class="pln">fragID</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

</span><span class="kwd">public</span><span class="pun">:</span><span class="pln">
  </span><span class="kwd">void</span><span class="pln"> init</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    initExtensions</span><span class="pun">();</span><span class="pln">
    glEnable</span><span class="pun">(</span><span class="pln">GL_DEPTH_TEST</span><span class="pun">);</span><span class="pln">
    glEnable</span><span class="pun">(</span><span class="pln">GL_DEPTH</span><span class="pun">);</span><span class="pln">

    setupShaders</span><span class="pun">();</span><span class="pln">

    </span><span class="com">// create a Vertex Array Objects (VAO)</span><span class="pln">
    glGenVertexArrays</span><span class="pun">(</span><span class="pln">numVAOs</span><span class="pun">,</span><span class="pln"> vaoID</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// generate a Vertex Buffer Object (VBO)</span><span class="pln">
    glGenBuffers</span><span class="pun">(</span><span class="pln">numVBOs</span><span class="pun">,</span><span class="pln"> bufID</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// binding the pyramid VAO</span><span class="pln">
    glBindVertexArray</span><span class="pun">(</span><span class="pln">vaoID</span><span class="pun">[</span><span class="typ">Scene</span><span class="pun">]);</span><span class="pln">

    std</span><span class="pun">::</span><span class="pln">vector </span><span class="str">&lt;float&gt;</span><span class="pln"> data</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> perVertexFloats </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">3</span><span class="pun">+</span><span class="lit">2</span><span class="pun">+</span><span class="lit">3</span><span class="pun">);</span><span class="pln">
    loadVertexData</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">(</span><span class="str">"teapot.vbo"</span><span class="pun">),</span><span class="pln"> data</span><span class="pun">,</span><span class="pln"> perVertexFloats</span><span class="pun">);</span><span class="pln">

    sceneVertNo </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">(</span><span class="pln">data</span><span class="pun">.</span><span class="pln">size</span><span class="pun">())</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> perVertexFloats</span><span class="pun">;</span><span class="pln">

    glBindBuffer</span><span class="pun">(</span><span class="pln">GL_ARRAY_BUFFER</span><span class="pun">,</span><span class="pln"> bufID</span><span class="pun">[</span><span class="typ">SceneAll</span><span class="pun">]);</span><span class="pln">
    glBufferData</span><span class="pun">(</span><span class="pln">GL_ARRAY_BUFFER</span><span class="pun">,</span><span class="pln"> sceneVertNo</span><span class="pun">*</span><span class="kwd">sizeof</span><span class="pun">(</span><span class="typ">Vertex</span><span class="pun">),</span><span class="pln">
                 </span><span class="pun">&amp;</span><span class="pln">data</span><span class="pun">[</span><span class="lit">0</span><span class="pun">],</span><span class="pln"> GL_STATIC_DRAW</span><span class="pun">);</span><span class="pln">

    </span><span class="kwd">int</span><span class="pln"> stride </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">sizeof</span><span class="pun">(</span><span class="typ">Vertex</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">char</span><span class="pln"> </span><span class="pun">*</span><span class="pln">offset </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="pln">NULL</span><span class="pun">;</span><span class="pln">

    </span><span class="com">// position</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">vertexLoc </span><span class="pun">!=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      glVertexAttribPointer</span><span class="pun">(</span><span class="pln">vertexLoc</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> GL_FLOAT</span><span class="pun">,</span><span class="pln"> GL_FALSE</span><span class="pun">,</span><span class="pln"> 
                            stride</span><span class="pun">,</span><span class="pln"> offset</span><span class="pun">);</span><span class="pln">
      glEnableVertexAttribArray</span><span class="pun">(</span><span class="pln">vertexLoc</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">// texCoord</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">texCoordLoc </span><span class="pun">!=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      offset </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="pln">NULL </span><span class="pun">+</span><span class="pln"> </span><span class="lit">3</span><span class="pun">*</span><span class="kwd">sizeof</span><span class="pun">(</span><span class="kwd">float</span><span class="pun">);</span><span class="pln">
      glVertexAttribPointer</span><span class="pun">(</span><span class="pln">texCoordLoc</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> GL_FLOAT</span><span class="pun">,</span><span class="pln"> GL_FALSE</span><span class="pun">,</span><span class="pln"> 
                            stride</span><span class="pun">,</span><span class="pln"> offset</span><span class="pun">);</span><span class="pln">
      glEnableVertexAttribArray</span><span class="pun">(</span><span class="pln">texCoordLoc</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">// normal</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">normalLoc </span><span class="pun">!=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      offset </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="pln">NULL </span><span class="pun">+</span><span class="pln"> </span><span class="pun">(</span><span class="lit">3</span><span class="pun">+</span><span class="lit">2</span><span class="pun">)*</span><span class="kwd">sizeof</span><span class="pun">(</span><span class="kwd">float</span><span class="pun">);</span><span class="pln">
      glVertexAttribPointer</span><span class="pun">(</span><span class="pln">normalLoc</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> GL_FLOAT</span><span class="pun">,</span><span class="pln"> GL_FALSE</span><span class="pun">,</span><span class="pln"> 
                            stride</span><span class="pun">,</span><span class="pln"> offset</span><span class="pun">);</span><span class="pln">
      glEnableVertexAttribArray</span><span class="pun">(</span><span class="pln">normalLoc</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> setupShaders</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="com">// create shader</span><span class="pln">
    vertID </span><span class="pun">=</span><span class="pln"> glCreateShader</span><span class="pun">(</span><span class="pln">GL_VERTEX_SHADER</span><span class="pun">);</span><span class="pln">
    fragID </span><span class="pun">=</span><span class="pln"> glCreateShader</span><span class="pun">(</span><span class="pln">GL_FRAGMENT_SHADER</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// load shader source from file</span><span class="pln">
    std</span><span class="pun">::</span><span class="kwd">string</span><span class="pln"> vs </span><span class="pun">=</span><span class="pln"> loadShaderSrc</span><span class="pun">(</span><span class="str">"./pass.vert"</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> vss </span><span class="pun">=</span><span class="pln"> vs</span><span class="pun">.</span><span class="pln">c_str</span><span class="pun">();</span><span class="pln">
    std</span><span class="pun">::</span><span class="kwd">string</span><span class="pln"> fs </span><span class="pun">=</span><span class="pln"> loadShaderSrc</span><span class="pun">(</span><span class="str">"./pass.frag"</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> fss </span><span class="pun">=</span><span class="pln"> fs</span><span class="pun">.</span><span class="pln">c_str</span><span class="pun">();</span><span class="pln">

    </span><span class="com">// specify shader source</span><span class="pln">
    glShaderSource</span><span class="pun">(</span><span class="pln">vertID</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;(</span><span class="pln">vss</span><span class="pun">),</span><span class="pln"> NULL</span><span class="pun">);</span><span class="pln">
    glShaderSource</span><span class="pun">(</span><span class="pln">fragID</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;(</span><span class="pln">fss</span><span class="pun">),</span><span class="pln"> NULL</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// compile the shader</span><span class="pln">
    glCompileShader</span><span class="pun">(</span><span class="pln">vertID</span><span class="pun">);</span><span class="pln">
    glCompileShader</span><span class="pun">(</span><span class="pln">fragID</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// check for errors</span><span class="pln">
    printShaderInfoLog</span><span class="pun">(</span><span class="pln">vertID</span><span class="pun">);</span><span class="pln">
    printShaderInfoLog</span><span class="pun">(</span><span class="pln">fragID</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// create program and attach shaders</span><span class="pln">
    progID </span><span class="pun">=</span><span class="pln"> glCreateProgram</span><span class="pun">();</span><span class="pln">
    glAttachShader</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="pln"> vertID</span><span class="pun">);</span><span class="pln">
    glAttachShader</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="pln"> fragID</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// "outColor" is a user-provided OUT variable</span><span class="pln">
    </span><span class="com">// of the fragment shader.</span><span class="pln">
    </span><span class="com">// Its output is bound to the first color buffer</span><span class="pln">
    </span><span class="com">// in the framebuffer</span><span class="pln">
    glBindFragDataLocation</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="str">"outputColor"</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// link the program</span><span class="pln">
    glLinkProgram</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">);</span><span class="pln">
    </span><span class="com">// output error messages</span><span class="pln">
    printProgramInfoLog</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// retrieve the location of the IN variables of the vertex shader.</span><span class="pln">
    vertexLoc </span><span class="pun">=</span><span class="pln"> glGetAttribLocation</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="str">"inputPosition"</span><span class="pun">);</span><span class="pln">
    texCoordLoc </span><span class="pun">=</span><span class="pln"> glGetAttribLocation</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="str">"inputTexCoord"</span><span class="pun">);</span><span class="pln">
    normalLoc </span><span class="pun">=</span><span class="pln"> glGetAttribLocation</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="pln"> </span><span class="str">"inputNormal"</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// retrieve the location of the UNIFORM variables of the vertex shader.</span><span class="pln">
    projectionLoc </span><span class="pun">=</span><span class="pln"> glGetUniformLocation</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="pln"> </span><span class="str">"projection"</span><span class="pun">);</span><span class="pln">
    modelviewLoc </span><span class="pun">=</span><span class="pln"> glGetUniformLocation</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="pln"> </span><span class="str">"modelview"</span><span class="pun">);</span><span class="pln">
    normalMatrixLoc </span><span class="pun">=</span><span class="pln"> glGetUniformLocation</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="pln"> </span><span class="str">"normalMat"</span><span class="pun">);</span><span class="pln">
    modeLoc </span><span class="pun">=</span><span class="pln"> glGetUniformLocation</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="pln"> </span><span class="str">"mode"</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> resize</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> w</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> h</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    glViewport</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> w</span><span class="pun">,</span><span class="pln"> h</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// this function replaces gluPerspective</span><span class="pln">
    mat4Perspective</span><span class="pun">(</span><span class="pln">projection</span><span class="pun">,</span><span class="pln"> </span><span class="lit">30.0f</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">float</span><span class="pun">)</span><span class="pln">w</span><span class="pun">/(</span><span class="kwd">float</span><span class="pun">)</span><span class="pln">h</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.5f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4.0f</span><span class="pun">);</span><span class="pln">
    </span><span class="com">// mat4Print(projection);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> display</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    glClearColor</span><span class="pun">(</span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">);</span><span class="pln">
    glClear</span><span class="pun">(</span><span class="pln">GL_COLOR_BUFFER_BIT </span><span class="pun">|</span><span class="pln"> GL_DEPTH_BUFFER_BIT</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// camera orbits in the z=2 plane</span><span class="pln">
    </span><span class="com">// and looks at the origin</span><span class="pln">
    </span><span class="com">// mat4LookAt replaces gluLookAt</span><span class="pln">
    </span><span class="kwd">double</span><span class="pln"> rad </span><span class="pun">=</span><span class="pln"> M_PI </span><span class="pun">/</span><span class="pln"> </span><span class="lit">180.0f</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> t</span><span class="pun">;</span><span class="pln">
    mat4LookAt</span><span class="pun">(</span><span class="pln">modelview</span><span class="pun">,</span><span class="pln">
               </span><span class="lit">1.5f</span><span class="pun">*</span><span class="pln">cos</span><span class="pun">(</span><span class="pln">rad</span><span class="pun">),</span><span class="pln"> </span><span class="lit">1.5f</span><span class="pun">*</span><span class="pln">sin</span><span class="pun">(</span><span class="pln">rad</span><span class="pun">),</span><span class="pln"> </span><span class="lit">1.5f</span><span class="pun">,</span><span class="pln"> </span><span class="com">// eye</span><span class="pln">
               </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="com">// look at</span><span class="pln">
               </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">);</span><span class="pln"> </span><span class="com">// up</span><span class="pln">


    </span><span class="kwd">float</span><span class="pln"> modelviewInv</span><span class="pun">[</span><span class="lit">16</span><span class="pun">],</span><span class="pln"> normalmatrix</span><span class="pun">[</span><span class="lit">16</span><span class="pun">];</span><span class="pln">
    mat4Invert</span><span class="pun">(</span><span class="pln">modelview</span><span class="pun">,</span><span class="pln"> modelviewInv</span><span class="pun">);</span><span class="pln">
    mat4Transpose</span><span class="pun">(</span><span class="pln">modelviewInv</span><span class="pun">,</span><span class="pln"> normalmatrix</span><span class="pun">);</span><span class="pln">

    glUseProgram</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">);</span><span class="pln">
    </span><span class="com">// load the current projection and modelview matrix into the</span><span class="pln">
    </span><span class="com">// corresponding UNIFORM variables of the shader</span><span class="pln">
    glUniformMatrix4fv</span><span class="pun">(</span><span class="pln">projectionLoc</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">,</span><span class="pln"> projection</span><span class="pun">);</span><span class="pln">
    glUniformMatrix4fv</span><span class="pun">(</span><span class="pln">modelviewLoc</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">,</span><span class="pln"> modelview</span><span class="pun">);</span><span class="pln">
    glUniformMatrix4fv</span><span class="pun">(</span><span class="pln">normalMatrixLoc</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">,</span><span class="pln"> normalmatrix</span><span class="pun">);</span><span class="pln">
    glUniform1i</span><span class="pun">(</span><span class="pln">modeLoc</span><span class="pun">,</span><span class="pln"> modeVal</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// bind Triangle VAO</span><span class="pln">
    glBindVertexArray</span><span class="pun">(</span><span class="pln">vaoID</span><span class="pun">[</span><span class="typ">Scene</span><span class="pun">]);</span><span class="pln">
    </span><span class="com">// render data</span><span class="pln">
    glDrawArrays</span><span class="pun">(</span><span class="pln">GL_TRIANGLES</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> sceneVertNo</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">private</span><span class="pun">:</span><span class="pln">
  </span><span class="kwd">void</span><span class="pln"> printShaderInfoLog</span><span class="pun">(</span><span class="typ">GLuint</span><span class="pln"> obj</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> infoLogLength </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> returnLength  </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">char</span><span class="pln"> </span><span class="pun">*</span><span class="pln">infoLog</span><span class="pun">;</span><span class="pln">
    glGetShaderiv</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">,</span><span class="pln"> GL_INFO_LOG_LENGTH</span><span class="pun">,&amp;</span><span class="pln">infoLogLength</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">infoLogLength </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      infoLog </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">malloc</span><span class="pun">(</span><span class="pln">infoLogLength</span><span class="pun">);</span><span class="pln">
      glGetShaderInfoLog</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">,</span><span class="pln"> infoLogLength</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">returnLength</span><span class="pun">,</span><span class="pln"> infoLog</span><span class="pun">);</span><span class="pln">
      printf</span><span class="pun">(</span><span class="str">"%s\n"</span><span class="pun">,</span><span class="pln">infoLog</span><span class="pun">);</span><span class="pln">
      free</span><span class="pun">(</span><span class="pln">infoLog</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> printProgramInfoLog</span><span class="pun">(</span><span class="typ">GLuint</span><span class="pln"> obj</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> infoLogLength </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> returnLength  </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">char</span><span class="pln"> </span><span class="pun">*</span><span class="pln">infoLog</span><span class="pun">;</span><span class="pln">
    glGetProgramiv</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">,</span><span class="pln"> GL_INFO_LOG_LENGTH</span><span class="pun">,&amp;</span><span class="pln">infoLogLength</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">infoLogLength </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      infoLog </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">malloc</span><span class="pun">(</span><span class="pln">infoLogLength</span><span class="pun">);</span><span class="pln">
      glGetProgramInfoLog</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">,</span><span class="pln"> infoLogLength</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">returnLength</span><span class="pun">,</span><span class="pln"> infoLog</span><span class="pun">);</span><span class="pln">
      printf</span><span class="pun">(</span><span class="str">"%s\n"</span><span class="pun">,</span><span class="pln">infoLog</span><span class="pun">);</span><span class="pln">
      free</span><span class="pun">(</span><span class="pln">infoLog</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  std</span><span class="pun">::</span><span class="kwd">string</span><span class="pln"> loadShaderSrc</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> std</span><span class="pun">::</span><span class="kwd">string</span><span class="pun">&amp;</span><span class="pln"> filename</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    std</span><span class="pun">::</span><span class="pln">ifstream </span><span class="kwd">is</span><span class="pun">(</span><span class="pln">filename</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">is</span><span class="pun">.</span><span class="pln">is_open</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      std</span><span class="pun">::</span><span class="pln">stringstream buffer</span><span class="pun">;</span><span class="pln">
      buffer </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="kwd">is</span><span class="pun">.</span><span class="pln">rdbuf</span><span class="pun">();</span><span class="pln">
      </span><span class="kwd">return</span><span class="pln"> buffer</span><span class="pun">.</span><span class="pln">str</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    cerr </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">"Unable to open file "</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> filename </span><span class="pun">&lt;&lt;</span><span class="pln"> endl</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">exit</span><span class="pun">(</span><span class="lit">1</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">bool</span><span class="pln"> loadVertexData</span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="kwd">string</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">filename</span><span class="pun">,</span><span class="pln"> std</span><span class="pun">::</span><span class="pln">vector</span><span class="str">&lt;float&gt;</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">data</span><span class="pun">,</span><span class="pln"> 
                      </span><span class="kwd">unsigned</span><span class="pln"> perVertexFloats</span><span class="pun">)</span><span class="pln"> 
  </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// read vertex data from file</span><span class="pln">
    ifstream input</span><span class="pun">(</span><span class="pln">filename</span><span class="pun">.</span><span class="pln">c_str</span><span class="pun">());</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(!</span><span class="pln">input</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="typ">QMessageBox</span><span class="pln"> msgBox</span><span class="pun">;</span><span class="pln">
      msgBox</span><span class="pun">.</span><span class="pln">setText</span><span class="pun">(</span><span class="str">"Can not find vertex data file"</span><span class="pun">);</span><span class="pln">
      msgBox</span><span class="pun">.</span><span class="kwd">exec</span><span class="pun">();</span><span class="pln">
      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">int</span><span class="pln"> numFloats</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">double</span><span class="pln"> vertData</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">input </span><span class="pun">&gt;&gt;</span><span class="pln"> numFloats</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">numFloats </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        data</span><span class="pun">.</span><span class="pln">resize</span><span class="pun">(</span><span class="pln">numFloats</span><span class="pun">);</span><span class="pln">
        </span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">while</span><span class="pun">(</span><span class="pln">input </span><span class="pun">&gt;&gt;</span><span class="pln"> vertData </span><span class="pun">&amp;&amp;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> numFloats</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
          </span><span class="com">// store it in the vector</span><span class="pln">
          data</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">float</span><span class="pun">(</span><span class="pln">vertData</span><span class="pun">);</span><span class="pln">
          i</span><span class="pun">++;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
        </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">i </span><span class="pun">!=</span><span class="pln"> numFloats </span><span class="pun">||</span><span class="pln"> numFloats </span><span class="pun">%</span><span class="pln"> perVertexFloats</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
      </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="kwd">else</span><span class="pun">{</span><span class="pln">
      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="com">// the following functions are some matrix and vector helpers,</span><span class="pln">
  </span><span class="com">// which work for this demo but in general it is recommended</span><span class="pln">
  </span><span class="com">// to use more advanced matrix libraries,</span><span class="pln">
  </span><span class="com">// e.g. OpenGL Mathematics (GLM)</span><span class="pln">
  </span><span class="kwd">float</span><span class="pln"> vec3Dot</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">a</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">b</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]*</span><span class="pln">b</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]*</span><span class="pln">b</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]*</span><span class="pln">b</span><span class="pun">[</span><span class="lit">2</span><span class="pun">];</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> vec3Cross</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">a</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">b</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">res</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    res</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> b</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln">  </span><span class="pun">-</span><span class="pln">  b</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">2</span><span class="pun">];</span><span class="pln">
    res</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> b</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln">  </span><span class="pun">-</span><span class="pln">  b</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">0</span><span class="pun">];</span><span class="pln">
    res</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> b</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln">  </span><span class="pun">-</span><span class="pln">  b</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">1</span><span class="pun">];</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> vec3Normalize</span><span class="pun">(</span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">a</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">float</span><span class="pln"> mag </span><span class="pun">=</span><span class="pln"> sqrt</span><span class="pun">(</span><span class="pln">a</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln">  </span><span class="pun">+</span><span class="pln">  a</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln">  </span><span class="pun">+</span><span class="pln">  a</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]);</span><span class="pln">
    a</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">/=</span><span class="pln"> mag</span><span class="pun">;</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">/=</span><span class="pln"> mag</span><span class="pun">;</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">/=</span><span class="pln"> mag</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> mat4Identity</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">a</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">16</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class="pln"> a</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">4</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class="pln"> a</span><span class="pun">[</span><span class="pln">i </span><span class="pun">+</span><span class="pln"> i </span><span class="pun">*</span><span class="pln"> </span><span class="lit">4</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> mat4Multiply</span><span class="pun">(</span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">a</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">b</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">res</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">4</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> j </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">4</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">j</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        res</span><span class="pun">[</span><span class="pln">j</span><span class="pun">*</span><span class="lit">4</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> k </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> k </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">4</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">k</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
          res</span><span class="pun">[</span><span class="pln">j</span><span class="pun">*</span><span class="lit">4</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+=</span><span class="pln"> a</span><span class="pun">[</span><span class="pln">k</span><span class="pun">*</span><span class="lit">4</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> b</span><span class="pun">[</span><span class="pln">j</span><span class="pun">*</span><span class="lit">4</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> k</span><span class="pun">];</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
      </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> mat4Perspective</span><span class="pun">(</span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">a</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> fov</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> aspect</span><span class="pun">,</span><span class="pln"> 
                       </span><span class="kwd">float</span><span class="pln"> zNear</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> zFar</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">float</span><span class="pln"> f </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="kwd">float</span><span class="pun">(</span><span class="pln">tan </span><span class="pun">(</span><span class="pln">fov</span><span class="pun">/</span><span class="lit">2.0f</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="pun">(</span><span class="pln">M_PI </span><span class="pun">/</span><span class="pln"> </span><span class="lit">180.0f</span><span class="pun">)));</span><span class="pln">
    mat4Identity</span><span class="pun">(</span><span class="pln">a</span><span class="pun">);</span><span class="pln">
    a</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> f </span><span class="pun">/</span><span class="pln"> aspect</span><span class="pun">;</span><span class="pln">
    a</span><span class="pun">[</span><span class="lit">1</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> f</span><span class="pun">;</span><span class="pln">
    a</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">zFar </span><span class="pun">+</span><span class="pln"> zNear</span><span class="pun">)</span><span class="pln">  </span><span class="pun">/</span><span class="pln"> </span><span class="pun">(</span><span class="pln">zNear </span><span class="pun">-</span><span class="pln"> zFar</span><span class="pun">);</span><span class="pln">
    a</span><span class="pun">[</span><span class="lit">3</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">2.0f</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> zFar </span><span class="pun">*</span><span class="pln"> zNear</span><span class="pun">)</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="pun">(</span><span class="pln">zNear </span><span class="pun">-</span><span class="pln"> zFar</span><span class="pun">);</span><span class="pln">
    a</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1.0f</span><span class="pun">;</span><span class="pln">
    a</span><span class="pun">[</span><span class="lit">3</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> mat4LookAt</span><span class="pun">(</span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">viewMatrix</span><span class="pun">,</span><span class="pln">
                  </span><span class="kwd">float</span><span class="pln"> eyeX</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> eyeY</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> eyeZ</span><span class="pun">,</span><span class="pln">
                  </span><span class="kwd">float</span><span class="pln"> centerX</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> centerY</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> centerZ</span><span class="pun">,</span><span class="pln">
                  </span><span class="kwd">float</span><span class="pln"> upX</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> upY</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> upZ</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">float</span><span class="pln"> dir</span><span class="pun">[</span><span class="lit">3</span><span class="pun">],</span><span class="pln"> right</span><span class="pun">[</span><span class="lit">3</span><span class="pun">],</span><span class="pln"> up</span><span class="pun">[</span><span class="lit">3</span><span class="pun">],</span><span class="pln"> eye</span><span class="pun">[</span><span class="lit">3</span><span class="pun">];</span><span class="pln">
    up</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]=</span><span class="pln">upX</span><span class="pun">;</span><span class="pln"> up</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]=</span><span class="pln">upY</span><span class="pun">;</span><span class="pln"> up</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]=</span><span class="pln">upZ</span><span class="pun">;</span><span class="pln">
    eye</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]=</span><span class="pln">eyeX</span><span class="pun">;</span><span class="pln"> eye</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]=</span><span class="pln">eyeY</span><span class="pun">;</span><span class="pln"> eye</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]=</span><span class="pln">eyeZ</span><span class="pun">;</span><span class="pln">

    dir</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]=</span><span class="pln">centerX</span><span class="pun">-</span><span class="pln">eyeX</span><span class="pun">;</span><span class="pln"> dir</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]=</span><span class="pln">centerY</span><span class="pun">-</span><span class="pln">eyeY</span><span class="pun">;</span><span class="pln"> dir</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]=</span><span class="pln">centerZ</span><span class="pun">-</span><span class="pln">eyeZ</span><span class="pun">;</span><span class="pln">
    vec3Normalize</span><span class="pun">(</span><span class="pln">dir</span><span class="pun">);</span><span class="pln">
    vec3Cross</span><span class="pun">(</span><span class="pln">dir</span><span class="pun">,</span><span class="pln">up</span><span class="pun">,</span><span class="pln">right</span><span class="pun">);</span><span class="pln">
    vec3Normalize</span><span class="pun">(</span><span class="pln">right</span><span class="pun">);</span><span class="pln">
    vec3Cross</span><span class="pun">(</span><span class="pln">right</span><span class="pun">,</span><span class="pln">dir</span><span class="pun">,</span><span class="pln">up</span><span class="pun">);</span><span class="pln">
    vec3Normalize</span><span class="pun">(</span><span class="pln">up</span><span class="pun">);</span><span class="pln">
    </span><span class="com">// first row</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> right</span><span class="pun">[</span><span class="lit">0</span><span class="pun">];</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">4</span><span class="pun">]</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> right</span><span class="pun">[</span><span class="lit">1</span><span class="pun">];</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">8</span><span class="pun">]</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> right</span><span class="pun">[</span><span class="lit">2</span><span class="pun">];</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">12</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">vec3Dot</span><span class="pun">(</span><span class="pln">right</span><span class="pun">,</span><span class="pln"> eye</span><span class="pun">);</span><span class="pln">
    </span><span class="com">// second row</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> up</span><span class="pun">[</span><span class="lit">0</span><span class="pun">];</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">5</span><span class="pun">]</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> up</span><span class="pun">[</span><span class="lit">1</span><span class="pun">];</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">9</span><span class="pun">]</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> up</span><span class="pun">[</span><span class="lit">2</span><span class="pun">];</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">13</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">vec3Dot</span><span class="pun">(</span><span class="pln">up</span><span class="pun">,</span><span class="pln"> eye</span><span class="pun">);</span><span class="pln">
    </span><span class="com">// third row</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">dir</span><span class="pun">[</span><span class="lit">0</span><span class="pun">];</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">6</span><span class="pun">]</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">dir</span><span class="pun">[</span><span class="lit">1</span><span class="pun">];</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">10</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">dir</span><span class="pun">[</span><span class="lit">2</span><span class="pun">];</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">14</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln">  vec3Dot</span><span class="pun">(</span><span class="pln">dir</span><span class="pun">,</span><span class="pln"> eye</span><span class="pun">);</span><span class="pln">
    </span><span class="com">// forth row</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">;</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">7</span><span class="pun">]</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">;</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">11</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">;</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">15</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> mat4Print</span><span class="pun">(</span><span class="kwd">float</span><span class="pun">*</span><span class="pln"> a</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// opengl uses column major order</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">4</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> j </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">4</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">j</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        cout </span><span class="pun">&lt;&lt;</span><span class="pln"> a</span><span class="pun">[</span><span class="pln">j </span><span class="pun">*</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">" "</span><span class="pun">;</span><span class="pln">
      </span><span class="pun">}</span><span class="pln">
      cout </span><span class="pun">&lt;&lt;</span><span class="pln"> endl</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> mat4Transpose</span><span class="pun">(</span><span class="kwd">float</span><span class="pun">*</span><span class="pln"> a</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">transposed</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> t </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">4</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> j </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">4</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">j</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        transposed</span><span class="pun">[</span><span class="pln">t</span><span class="pun">++]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> a</span><span class="pun">[</span><span class="pln">j </span><span class="pun">*</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> i</span><span class="pun">];</span><span class="pln">
      </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">bool</span><span class="pln"> mat4Invert</span><span class="pun">(</span><span class="kwd">float</span><span class="pun">*</span><span class="pln"> m</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">inverse</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">float</span><span class="pln"> inv</span><span class="pun">[</span><span class="lit">16</span><span class="pun">];</span><span class="pln">
    inv</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> m</span><span class="pun">[</span><span class="lit">5</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">10</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">15</span><span class="pun">]-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">5</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">11</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">14</span><span class="pun">]-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">9</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">6</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">15</span><span class="pun">]+</span><span class="pln">
             m</span><span class="pun">[</span><span class="lit">9</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">7</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">14</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">13</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">6</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">11</span><span class="pun">]-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">13</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">7</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">10</span><span class="pun">];</span><span class="pln">
    inv</span><span class="pun">[</span><span class="lit">4</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">4</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">10</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">15</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">4</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">11</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">14</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">8</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">6</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">15</span><span class="pun">]-</span><span class="pln">
             m</span><span class="pun">[</span><span class="lit">8</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">7</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">14</span><span class="pun">]-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">12</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">6</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">11</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">12</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">7</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">10</span><span class="pun">];</span><span class="pln">
    inv</span><span class="pun">[</span><span class="lit">8</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> m</span><span class="pun">[</span><span class="lit">4</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">9</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">15</span><span class="pun">]-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">4</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">11</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">13</span><span class="pun">]-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">8</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">5</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">15</span><span class="pun">]+</span><span class="pln">
             m</span><span class="pun">[</span><span class="lit">8</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">7</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">13</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">12</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">5</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">11</span><span class="pun">]-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">12</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">7</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">9</span><span class="pun">];</span><span class="pln">
    inv</span><span class="pun">[</span><span class="lit">12</span><span class="pun">]=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">4</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">9</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">14</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">4</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">10</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">13</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">8</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">5</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">14</span><span class="pun">]-</span><span class="pln">
             m</span><span class="pun">[</span><span class="lit">8</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">6</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">13</span><span class="pun">]-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">12</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">5</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">10</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">12</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">6</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">9</span><span class="pun">];</span><span class="pln">
    inv</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">10</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">15</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">11</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">14</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">9</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">15</span><span class="pun">]-</span><span class="pln">
             m</span><span class="pun">[</span><span class="lit">9</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">14</span><span class="pun">]-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">13</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">11</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">13</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">10</span><span class="pun">];</span><span class="pln">
    inv</span><span class="pun">[</span><span class="lit">5</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> m</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">10</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">15</span><span class="pun">]-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">11</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">14</span><span class="pun">]-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">8</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">15</span><span class="pun">]+</span><span class="pln">
             m</span><span class="pun">[</span><span class="lit">8</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">14</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">12</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">11</span><span class="pun">]-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">12</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">10</span><span class="pun">];</span><span class="pln">
    inv</span><span class="pun">[</span><span class="lit">9</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">9</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">15</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">11</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">13</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">8</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">15</span><span class="pun">]-</span><span class="pln">
             m</span><span class="pun">[</span><span class="lit">8</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">13</span><span class="pun">]-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">12</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">11</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">12</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">9</span><span class="pun">];</span><span class="pln">
    inv</span><span class="pun">[</span><span class="lit">13</span><span class="pun">]=</span><span class="pln"> m</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">9</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">14</span><span class="pun">]-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">10</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">13</span><span class="pun">]-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">8</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">14</span><span class="pun">]+</span><span class="pln">
             m</span><span class="pun">[</span><span class="lit">8</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">13</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">12</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">10</span><span class="pun">]-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">12</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">9</span><span class="pun">];</span><span class="pln">
    inv</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> m</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">6</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">15</span><span class="pun">]-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">7</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">14</span><span class="pun">]-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">5</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">15</span><span class="pun">]+</span><span class="pln">
             m</span><span class="pun">[</span><span class="lit">5</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">14</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">13</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">7</span><span class="pun">]-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">13</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">6</span><span class="pun">];</span><span class="pln">
    inv</span><span class="pun">[</span><span class="lit">6</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">6</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">15</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">7</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">14</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">4</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">15</span><span class="pun">]-</span><span class="pln">
             m</span><span class="pun">[</span><span class="lit">4</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">14</span><span class="pun">]-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">12</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">7</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">12</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">6</span><span class="pun">];</span><span class="pln">
    inv</span><span class="pun">[</span><span class="lit">10</span><span class="pun">]=</span><span class="pln"> m</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">5</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">15</span><span class="pun">]-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">7</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">13</span><span class="pun">]-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">4</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">15</span><span class="pun">]+</span><span class="pln">
             m</span><span class="pun">[</span><span class="lit">4</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">13</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">12</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">7</span><span class="pun">]-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">12</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">5</span><span class="pun">];</span><span class="pln">
    inv</span><span class="pun">[</span><span class="lit">14</span><span class="pun">]=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">5</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">14</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">6</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">13</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">4</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">14</span><span class="pun">]-</span><span class="pln">
             m</span><span class="pun">[</span><span class="lit">4</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">13</span><span class="pun">]-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">12</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">6</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">12</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">5</span><span class="pun">];</span><span class="pln">
    inv</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">6</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">11</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">7</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">10</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">5</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">11</span><span class="pun">]-</span><span class="pln">
             m</span><span class="pun">[</span><span class="lit">5</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">10</span><span class="pun">]-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">9</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">7</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">9</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">6</span><span class="pun">];</span><span class="pln">
    inv</span><span class="pun">[</span><span class="lit">7</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> m</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">6</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">11</span><span class="pun">]-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">7</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">10</span><span class="pun">]-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">4</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">11</span><span class="pun">]+</span><span class="pln">
             m</span><span class="pun">[</span><span class="lit">4</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">10</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">8</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">7</span><span class="pun">]-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">8</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">6</span><span class="pun">];</span><span class="pln">
    inv</span><span class="pun">[</span><span class="lit">11</span><span class="pun">]=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">5</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">11</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">7</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">9</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">4</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">11</span><span class="pun">]-</span><span class="pln">
             m</span><span class="pun">[</span><span class="lit">4</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">9</span><span class="pun">]-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">8</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">7</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">8</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">5</span><span class="pun">];</span><span class="pln">
    inv</span><span class="pun">[</span><span class="lit">15</span><span class="pun">]=</span><span class="pln"> m</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">5</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">10</span><span class="pun">]-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">6</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">9</span><span class="pun">]-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">4</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">10</span><span class="pun">]+</span><span class="pln">
             m</span><span class="pun">[</span><span class="lit">4</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">9</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">8</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">6</span><span class="pun">]-</span><span class="pln">m</span><span class="pun">[</span><span class="lit">8</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]*</span><span class="pln">m</span><span class="pun">[</span><span class="lit">5</span><span class="pun">];</span><span class="pln">

    </span><span class="kwd">float</span><span class="pln"> det </span><span class="pun">=</span><span class="pln"> m</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]*</span><span class="pln">inv</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]*</span><span class="pln">inv</span><span class="pun">[</span><span class="lit">4</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]*</span><span class="pln">inv</span><span class="pun">[</span><span class="lit">8</span><span class="pun">]+</span><span class="pln">m</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]*</span><span class="pln">inv</span><span class="pun">[</span><span class="lit">12</span><span class="pun">];</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">det </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
    det </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> det</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">16</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> inverse</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> inv</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> det</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">};</span><span class="pln"> </span></pre>
        </div>
      </div>
    </article>

    <!-- Slide (web, intern, german, english) -->
    <article data-slide-num="36" data-total-slides="47" id="36" class="far-next">
      <div class="slidetitle">
         <!-- Slide (web, intern, english) -->
        <h3>Example: Transformation of Surface Normals</h3>
       <!-- Slide (web, intern, german, english) -->
      </div>
      <div class="slidebody">
        <ul>
          <li>Vertex Shader: <pre class="prettyprint prettyprinted" style=""><span class="com">#version 140</span><span class="pln">
</span><span class="kwd">in</span><span class="pln"> vec3 inputPosition</span><span class="pun">;</span><span class="pln"> 
</span><span class="kwd">in</span><span class="pln"> vec2 inputTexCoord</span><span class="pun">;</span><span class="pln"> 
</span><span class="kwd">in</span><span class="pln"> vec3 inputNormal</span><span class="pun">;</span><span class="pln">
uniform mat4 projection</span><span class="pun">,</span><span class="pln"> modelview</span><span class="pun">,</span><span class="pln"> normalMat</span><span class="pun">;</span><span class="pln"> 
uniform </span><span class="kwd">int</span><span class="pln"> mode</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">out</span><span class="pln"> vec4 forFragColor</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">(){</span><span class="pln">
    gl_Position </span><span class="pun">=</span><span class="pln"> projection </span><span class="pun">*</span><span class="pln"> modelview </span><span class="pun">*</span><span class="pln"> vec4</span><span class="pun">(</span><span class="pln">inputPosition</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0</span><span class="pun">);</span><span class="pln">
    vec4 normal </span><span class="pun">=</span><span class="pln"> normalMat </span><span class="pun">*</span><span class="pln"> vec4</span><span class="pun">(</span><span class="pln">inputNormal</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">mode </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> forFragColor </span><span class="pun">=</span><span class="pln"> normal</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">mode </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span><span class="pln"> forFragColor </span><span class="pun">=</span><span class="pln"> vec4</span><span class="pun">(</span><span class="pln">inputNormal</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">mode </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span><span class="pun">)</span><span class="pln"> forFragColor </span><span class="pun">=</span><span class="pln"> gl_Position</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">mode </span><span class="pun">==</span><span class="pln"> </span><span class="lit">4</span><span class="pun">)</span><span class="pln"> forFragColor </span><span class="pun">=</span><span class="pln"> vec4</span><span class="pun">(</span><span class="pln">inputPosition</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">mode </span><span class="pun">==</span><span class="pln"> </span><span class="lit">5</span><span class="pun">)</span><span class="pln"> forFragColor </span><span class="pun">=</span><span class="pln"> vec4</span><span class="pun">(</span><span class="pln">inputTexCoord</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span></pre></li>
        </ul>
      </div>
    </article>

    <!-- Slide (web, intern, german, english) -->
    <article data-slide-num="37" data-total-slides="47" id="37" class="far-next">
      <div class="slidetitle">
        <!-- Slide (web, intern, english) -->
        <h3>Example: Transformation of Surface Normals</h3>
        <!-- Slide (web, intern, german, english) -->
      </div>
      <div class="slidebody">
        <ul>
          <li>Fragment Shader: <pre class="prettyprint prettyprinted" style=""><span class="com">#version 140</span><span class="pln">
</span><span class="kwd">in</span><span class="pln"> vec4 forFragColor</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">out</span><span class="pln"> vec4 outputColor</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    outputColor </span><span class="pun">=</span><span class="pln"> forFragColor</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></pre></li>
        </ul>
      </div>
    </article>
 
    <!-- Slide (web, intern, english) -->
    <article data-slide-num="38" data-total-slides="47" id="38" class="far-next">
      <div class="slidetitle">
        <h3>Accessing Textures in the Shader</h3>
      </div>
      <div class="slidebody">
        <ul>
          <li>Textures can be accessed both in vertex and fragment shaders</li>
          <li>To this end, a <code>uniform</code> variable of the type <code>sampler</code> must be defined: For example, in case of a 2D texture: <pre class="prettyprint prettyprinted" style=""><span class="pln">uniform sampler2D myTexture</span><span class="pun">;</span></pre>
          </li>
          <li>With the function <code>texture(...)</code> the color value at the texture coordinate <span class="MathJax_Preview">(s,t)</span><span class="MathJax MathJax_Processing" id="MathJax-Element-28-Frame" role="textbox" aria-readonly="true"></span><script type="math/tex" id="MathJax-Element-28">(s,t)</script> is read: <pre class="prettyprint prettyprinted" style=""><span class="pln">texture</span><span class="pun">(</span><span class="pln">myTexture</span><span class="pun">,</span><span class="pln"> vec2</span><span class="pun">(</span><span class="pln">s</span><span class="pun">,</span><span class="pln">t</span><span class="pun">))</span></pre></li>
        </ul>
      </div>
    </article>
    
   <!-- Slide (web, intern, english) -->
    <article class="smaller far-next" data-slide-num="39" data-total-slides="47" id="39">
      <div class="slidetitle">
        <h3>Providing Textures</h3>
      </div>
      <div class="slidebody">
        <ul>
          <li>Textures are generated in the application with <code>glGenTexture</code> and <code>glBindTexture</code>, parameters are set with
            <code>glTexParameter</code>, and the texture data is passed with <code>glTexImage</code> (as discussed in Chapter 7)
          </li>
          <li>To provide the texture in the shader, the location identifier of the <code>sampler</code> variable must be queried
            <pre class="prettyprint prettyprinted" style=""><span class="pln">texLoc </span><span class="pun">=</span><span class="pln"> glGetUniformLocation</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="pln"> </span><span class="str">"myTexture"</span><span class="pun">);</span></pre>
          </li>
          <li>Then a texture unit is selected (e.g. here the zeroth unit), the texture is activated, and the number of the selected texture unit is passed to 
            the <code>sampler</code> variable: <pre class="prettyprint prettyprinted" style=""><span class="pln">glActiveTexture</span><span class="pun">(</span><span class="pln">GL_TEXTURE0</span><span class="pun">);</span><span class="pln">    </span><span class="com">// activate texture unit 0</span><span class="pln">
glBindTexture</span><span class="pun">(</span><span class="pln">GL_TEXTURE_2D</span><span class="pun">,</span><span class="pln"> texID</span><span class="pun">);</span><span class="pln"> </span><span class="com">// bind texture</span><span class="pln">
glUniform1i</span><span class="pun">(</span><span class="pln">texLoc</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span><span class="pln">  </span><span class="com">// inform the shader to use texture unit 0</span></pre>
          </li>
        </ul>
      </div>
    </article>
    
    <!-- Slide (web, intern, english) -->
    <article class="smaller far-next" data-slide-num="40" data-total-slides="47" id="40">
      <div class="slidetitle">
        <h3>Example: Accessing Textures in the Shader</h3>
      </div>
      <div class="slidebody">
        <div class="centered">
          <img src="media/opengl_shadertexture.png" width="400" alt="opengl_shadertexture" />
        </div>
        <ul class="mediumTopMargin">
          <li>Source code with GLUT: <a href="./code_v2/ShaderTexture/glut/ShaderTexture.cpp" target="_blank">ShaderTexture.cpp</a>, <a href="./code_v2/ShaderTexture/glut/ShaderTexture.zip" target="_blank">ShaderTexture.zip</a></li>
          <li>Source code with Qt: <a href="./code_v2/ShaderTexture/qt/ShaderTexture.cpp" target="_blank">ShaderTexture.cpp</a>, <a href="./code_v2/ShaderTexture/qt/ShaderTexture.zip" target="_blank">ShaderTexture.zip</a></li>
          <li>Source code with Java: <a href="./code_v2/ShaderTexture/java/ShaderTexture.java" target="_blank">ShaderTexture.java</a>, <a href="./code_v2/ShaderTexture/java/ShaderTexture.zip" target="_blank">ShaderTexture.zip</a></li>
          <li>Source code with Android: <a href="./code_v2/ShaderTexture/android/ShaderTexture.zip" target="_blank">ShaderTexture.zip</a></li>
          <li>Shader sources: <a href="./code_v2/ShaderTexture/java/texture.vert" target="_blank">texture.vert</a>, <a href="./code_v2/ShaderTexture/java/texture.frag" target="_blank">texture.frag</a>,</li>
          <li>Implementation with WebGL: <a href="./code/WebGLShaderTexture/ShaderTexture.html" target="_blank">ShaderTexture.html</a></li>
          <li>GSN Composer: <a href="https://www.gsn-lib.org/index.html#projectName=public3dshader&amp;graphName=ShaderTexture" target="_blank">ShaderTexture.html</a></li>
        </ul>
      </div>
    </article>
    
    <!-- Slide (web, intern, german, english) -->
    <article class="smaller far-next" data-slide-num="41" data-total-slides="47" id="41">
      <div class="slidetitle">
        <!-- Slide (web, intern, english) -->
        <h3>Example: Accessing Textures in the Shader</h3>
        <!-- Slide (web, intern, german, english) -->
      </div>
      <div class="slidebody">
        <div style="overflow: scroll; height: 500px; width: 750px;">
          <pre style="margin: 0px;" class="prettyprint prettyprinted"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Renderer</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

</span><span class="kwd">private</span><span class="pun">:</span><span class="pln">
  </span><span class="kwd">struct</span><span class="pln"> </span><span class="typ">Vertex</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">float</span><span class="pln"> position</span><span class="pun">[</span><span class="lit">3</span><span class="pun">];</span><span class="pln">
    </span><span class="kwd">float</span><span class="pln"> color</span><span class="pun">[</span><span class="lit">4</span><span class="pun">];</span><span class="pln">
    </span><span class="kwd">float</span><span class="pln"> texCoord</span><span class="pun">[</span><span class="lit">2</span><span class="pun">];</span><span class="pln">
    </span><span class="kwd">float</span><span class="pln"> normal</span><span class="pun">[</span><span class="lit">3</span><span class="pun">];</span><span class="pln">
  </span><span class="pun">};</span><span class="pln">

</span><span class="kwd">public</span><span class="pun">:</span><span class="pln">
  </span><span class="kwd">float</span><span class="pln"> t</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">private</span><span class="pun">:</span><span class="pln">
  </span><span class="kwd">enum</span><span class="pln"> </span><span class="pun">{</span><span class="typ">Pyramid</span><span class="pun">,</span><span class="pln"> numVAOs</span><span class="pun">};</span><span class="pln">
  </span><span class="kwd">enum</span><span class="pln"> </span><span class="pun">{</span><span class="typ">PyramidAll</span><span class="pun">,</span><span class="pln"> numVBOs</span><span class="pun">};</span><span class="pln">
  </span><span class="typ">GLuint</span><span class="pln"> vaoID</span><span class="pun">[</span><span class="pln">numVAOs</span><span class="pun">];</span><span class="pln">
  </span><span class="typ">GLuint</span><span class="pln"> bufID</span><span class="pun">[</span><span class="pln">numVBOs</span><span class="pun">];</span><span class="pln">
  </span><span class="kwd">int</span><span class="pln"> pyramidVertNo</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLuint</span><span class="pln"> texID</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLuint</span><span class="pln"> progID</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLuint</span><span class="pln"> vertID</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLuint</span><span class="pln"> fragID</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLint</span><span class="pln"> vertexLoc</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLint</span><span class="pln"> colorLoc</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLint</span><span class="pln"> texCoordLoc</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLint</span><span class="pln"> normalLoc</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLint</span><span class="pln"> projectionLoc</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLint</span><span class="pln"> modelviewLoc</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">GLint</span><span class="pln"> texLoc</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">float</span><span class="pln"> projection</span><span class="pun">[</span><span class="lit">16</span><span class="pun">];</span><span class="pln">  </span><span class="com">// projection matrix</span><span class="pln">
  </span><span class="kwd">float</span><span class="pln"> modelview</span><span class="pun">[</span><span class="lit">16</span><span class="pun">];</span><span class="pln">  </span><span class="com">// modelview matrix</span><span class="pln">

</span><span class="kwd">public</span><span class="pun">:</span><span class="pln">
  </span><span class="com">// constructor</span><span class="pln">
  </span><span class="typ">Renderer</span><span class="pun">()</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> t</span><span class="pun">(</span><span class="lit">0.0</span><span class="pun">),</span><span class="pln"> pyramidVertNo</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span><span class="pln"> texID</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span><span class="pln"> progID</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span><span class="pln"> vertID</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span><span class="pln"> fragID</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span><span class="pln">
               vertexLoc</span><span class="pun">(-</span><span class="lit">1</span><span class="pun">),</span><span class="pln"> colorLoc</span><span class="pun">(-</span><span class="lit">1</span><span class="pun">),</span><span class="pln"> texCoordLoc</span><span class="pun">(-</span><span class="lit">1</span><span class="pun">),</span><span class="pln"> normalLoc</span><span class="pun">(-</span><span class="lit">1</span><span class="pun">),</span><span class="pln">
               projectionLoc</span><span class="pun">(-</span><span class="lit">1</span><span class="pun">),</span><span class="pln"> modelviewLoc</span><span class="pun">(-</span><span class="lit">1</span><span class="pun">),</span><span class="pln"> texLoc</span><span class="pun">(-</span><span class="lit">1</span><span class="pun">)</span><span class="pln">
               </span><span class="pun">{}</span><span class="pln">
  </span><span class="com">//destructor</span><span class="pln">
  </span><span class="pun">~</span><span class="typ">Renderer</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    glDeleteVertexArrays</span><span class="pun">(</span><span class="pln">numVAOs</span><span class="pun">,</span><span class="pln"> vaoID</span><span class="pun">);</span><span class="pln">
    glDeleteBuffers</span><span class="pun">(</span><span class="pln">numVBOs</span><span class="pun">,</span><span class="pln"> bufID</span><span class="pun">);</span><span class="pln">
    glDeleteProgram</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">);</span><span class="pln">
    glDeleteShader</span><span class="pun">(</span><span class="pln">vertID</span><span class="pun">);</span><span class="pln">
    glDeleteShader</span><span class="pun">(</span><span class="pln">fragID</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

</span><span class="kwd">public</span><span class="pun">:</span><span class="pln">
  </span><span class="kwd">void</span><span class="pln"> init</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    initExtensions</span><span class="pun">();</span><span class="pln">
    glEnable</span><span class="pun">(</span><span class="pln">GL_DEPTH_TEST</span><span class="pun">);</span><span class="pln">
    glEnable</span><span class="pun">(</span><span class="pln">GL_DEPTH</span><span class="pun">);</span><span class="pln">

    setupShaders</span><span class="pun">();</span><span class="pln">

    </span><span class="com">// create a Vertex Array Objects (VAO)</span><span class="pln">
    glGenVertexArrays</span><span class="pun">(</span><span class="pln">numVAOs</span><span class="pun">,</span><span class="pln"> vaoID</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// generate a Vertex Buffer Object (VBO)</span><span class="pln">
    glGenBuffers</span><span class="pun">(</span><span class="pln">numVBOs</span><span class="pun">,</span><span class="pln"> bufID</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// bind the pyramid VAO</span><span class="pln">
    glBindVertexArray</span><span class="pun">(</span><span class="pln">vaoID</span><span class="pun">[</span><span class="typ">Pyramid</span><span class="pun">]);</span><span class="pln">

    </span><span class="kwd">float</span><span class="pln"> pyramidVertexData</span><span class="pun">[]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
       </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.5f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0000f</span><span class="pun">,-</span><span class="lit">0.9701f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.2425f</span><span class="pun">,</span><span class="pln">
      </span><span class="pun">-</span><span class="lit">0.5f</span><span class="pun">,-</span><span class="lit">0.5f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0000f</span><span class="pun">,-</span><span class="lit">0.9701f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.2425f</span><span class="pun">,</span><span class="pln">
       </span><span class="lit">0.5f</span><span class="pun">,-</span><span class="lit">0.5f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0000f</span><span class="pun">,-</span><span class="lit">0.9701f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.2425f</span><span class="pun">,</span><span class="pln">
       </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.5f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.9701f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0000f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.2425f</span><span class="pun">,</span><span class="pln">
       </span><span class="lit">0.5f</span><span class="pun">,-</span><span class="lit">0.5f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.9701f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0000f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.2425f</span><span class="pun">,</span><span class="pln">
       </span><span class="lit">0.5f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.5f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.9701f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0000f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.2425f</span><span class="pun">,</span><span class="pln">
       </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.5f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0000f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.9701f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.2425f</span><span class="pun">,</span><span class="pln">
       </span><span class="lit">0.5f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.5f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0000f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.9701f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.2425f</span><span class="pun">,</span><span class="pln">
      </span><span class="pun">-</span><span class="lit">0.5f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.5f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0000f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.9701f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.2425f</span><span class="pun">,</span><span class="pln">
       </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.5f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,-</span><span class="lit">0.9701f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0000f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.2425f</span><span class="pun">,</span><span class="pln">
      </span><span class="pun">-</span><span class="lit">0.5f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.5f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,-</span><span class="lit">0.9701f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0000f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.2425f</span><span class="pun">,</span><span class="pln">
      </span><span class="pun">-</span><span class="lit">0.5f</span><span class="pun">,-</span><span class="lit">0.5f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,-</span><span class="lit">0.9701f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0000f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.2425f</span><span class="pln">
    </span><span class="pun">};</span><span class="pln">

    pyramidVertNo </span><span class="pun">=</span><span class="pln"> </span><span class="lit">12</span><span class="pun">;</span><span class="pln">

    glBindBuffer</span><span class="pun">(</span><span class="pln">GL_ARRAY_BUFFER</span><span class="pun">,</span><span class="pln"> bufID</span><span class="pun">[</span><span class="typ">PyramidAll</span><span class="pun">]);</span><span class="pln">
    glBufferData</span><span class="pun">(</span><span class="pln">GL_ARRAY_BUFFER</span><span class="pun">,</span><span class="pln"> pyramidVertNo</span><span class="pun">*</span><span class="kwd">sizeof</span><span class="pun">(</span><span class="typ">Vertex</span><span class="pun">),</span><span class="pln">
                 pyramidVertexData</span><span class="pun">,</span><span class="pln"> GL_STATIC_DRAW</span><span class="pun">);</span><span class="pln">

    </span><span class="kwd">int</span><span class="pln"> stride </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">sizeof</span><span class="pun">(</span><span class="typ">Vertex</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">char</span><span class="pln"> </span><span class="pun">*</span><span class="pln">offset </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="pln">NULL</span><span class="pun">;</span><span class="pln">

    </span><span class="com">// position</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">vertexLoc </span><span class="pun">!=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      glVertexAttribPointer</span><span class="pun">(</span><span class="pln">vertexLoc</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> GL_FLOAT</span><span class="pun">,</span><span class="pln"> GL_FALSE</span><span class="pun">,</span><span class="pln"> stride</span><span class="pun">,</span><span class="pln"> offset</span><span class="pun">);</span><span class="pln">
      glEnableVertexAttribArray</span><span class="pun">(</span><span class="pln">vertexLoc</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">// color</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">colorLoc </span><span class="pun">!=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      offset </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="pln">NULL </span><span class="pun">+</span><span class="pln"> </span><span class="lit">3</span><span class="pun">*</span><span class="kwd">sizeof</span><span class="pun">(</span><span class="kwd">float</span><span class="pun">);</span><span class="pln">
      glVertexAttribPointer</span><span class="pun">(</span><span class="pln">colorLoc</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> GL_FLOAT</span><span class="pun">,</span><span class="pln"> GL_FALSE</span><span class="pun">,</span><span class="pln"> stride</span><span class="pun">,</span><span class="pln"> offset</span><span class="pun">);</span><span class="pln">
      glEnableVertexAttribArray</span><span class="pun">(</span><span class="pln">colorLoc</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">// texCoord</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">texCoordLoc </span><span class="pun">!=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      offset </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="pln">NULL </span><span class="pun">+</span><span class="pln"> </span><span class="pun">(</span><span class="lit">3</span><span class="pun">+</span><span class="lit">4</span><span class="pun">)*</span><span class="kwd">sizeof</span><span class="pun">(</span><span class="kwd">float</span><span class="pun">);</span><span class="pln">
      glVertexAttribPointer</span><span class="pun">(</span><span class="pln">texCoordLoc</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> GL_FLOAT</span><span class="pun">,</span><span class="pln"> GL_FALSE</span><span class="pun">,</span><span class="pln"> stride</span><span class="pun">,</span><span class="pln"> offset</span><span class="pun">);</span><span class="pln">
      glEnableVertexAttribArray</span><span class="pun">(</span><span class="pln">texCoordLoc</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">// normal</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">normalLoc </span><span class="pun">!=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      offset </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="pln">NULL </span><span class="pun">+</span><span class="pln"> </span><span class="pun">(</span><span class="lit">3</span><span class="pun">+</span><span class="lit">4</span><span class="pun">+</span><span class="lit">2</span><span class="pun">)*</span><span class="kwd">sizeof</span><span class="pun">(</span><span class="kwd">float</span><span class="pun">);</span><span class="pln">
      glVertexAttribPointer</span><span class="pun">(</span><span class="pln">normalLoc</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> GL_FLOAT</span><span class="pun">,</span><span class="pln"> GL_FALSE</span><span class="pun">,</span><span class="pln"> stride</span><span class="pun">,</span><span class="pln"> offset</span><span class="pun">);</span><span class="pln">
      glEnableVertexAttribArray</span><span class="pun">(</span><span class="pln">normalLoc</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    std</span><span class="pun">::</span><span class="kwd">string</span><span class="pln"> fileName</span><span class="pun">(</span><span class="str">"./checkerboard.ppm"</span><span class="pun">);</span><span class="pln">
    texID </span><span class="pun">=</span><span class="pln"> loadTexture</span><span class="pun">(</span><span class="pln">fileName</span><span class="pun">);</span><span class="pln">

  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> setupShaders</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="com">// create shader</span><span class="pln">
    vertID </span><span class="pun">=</span><span class="pln"> glCreateShader</span><span class="pun">(</span><span class="pln">GL_VERTEX_SHADER</span><span class="pun">);</span><span class="pln">
    fragID </span><span class="pun">=</span><span class="pln"> glCreateShader</span><span class="pun">(</span><span class="pln">GL_FRAGMENT_SHADER</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// load shader source from file</span><span class="pln">
     std</span><span class="pun">::</span><span class="kwd">string</span><span class="pln"> vs </span><span class="pun">=</span><span class="pln"> loadShaderSrc</span><span class="pun">(</span><span class="str">"./texture.vert"</span><span class="pun">);</span><span class="pln">
     </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> vss </span><span class="pun">=</span><span class="pln"> vs</span><span class="pun">.</span><span class="pln">c_str</span><span class="pun">();</span><span class="pln">
     std</span><span class="pun">::</span><span class="kwd">string</span><span class="pln"> fs </span><span class="pun">=</span><span class="pln"> loadShaderSrc</span><span class="pun">(</span><span class="str">"./texture.frag"</span><span class="pun">);</span><span class="pln">
     </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> fss </span><span class="pun">=</span><span class="pln"> fs</span><span class="pun">.</span><span class="pln">c_str</span><span class="pun">();</span><span class="pln">

     </span><span class="com">// specify shader source</span><span class="pln">
     glShaderSource</span><span class="pun">(</span><span class="pln">vertID</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;(</span><span class="pln">vss</span><span class="pun">),</span><span class="pln"> NULL</span><span class="pun">);</span><span class="pln">
     glShaderSource</span><span class="pun">(</span><span class="pln">fragID</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;(</span><span class="pln">fss</span><span class="pun">),</span><span class="pln"> NULL</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// compile the shader</span><span class="pln">
    glCompileShader</span><span class="pun">(</span><span class="pln">vertID</span><span class="pun">);</span><span class="pln">
    glCompileShader</span><span class="pun">(</span><span class="pln">fragID</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// check for errors</span><span class="pln">
    printShaderInfoLog</span><span class="pun">(</span><span class="pln">vertID</span><span class="pun">);</span><span class="pln">
    printShaderInfoLog</span><span class="pun">(</span><span class="pln">fragID</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// create program and attach shaders</span><span class="pln">
    progID </span><span class="pun">=</span><span class="pln"> glCreateProgram</span><span class="pun">();</span><span class="pln">
    glAttachShader</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="pln"> vertID</span><span class="pun">);</span><span class="pln">
    glAttachShader</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="pln"> fragID</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// "outColor" is a user-provided OUT variable</span><span class="pln">
    </span><span class="com">// of the fragment shader.</span><span class="pln">
    </span><span class="com">// Its output is bound to the first color buffer</span><span class="pln">
    </span><span class="com">// in the framebuffer</span><span class="pln">
    glBindFragDataLocation</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="str">"outputColor"</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// link the program</span><span class="pln">
    glLinkProgram</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">);</span><span class="pln">
    </span><span class="com">// output error messages</span><span class="pln">
    printProgramInfoLog</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// retrieve the location of the IN variables of the vertex shader.</span><span class="pln">
    vertexLoc </span><span class="pun">=</span><span class="pln"> glGetAttribLocation</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="str">"inputPosition"</span><span class="pun">);</span><span class="pln">
    colorLoc </span><span class="pun">=</span><span class="pln"> glGetAttribLocation</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="pln"> </span><span class="str">"inputColor"</span><span class="pun">);</span><span class="pln">
    texCoordLoc </span><span class="pun">=</span><span class="pln"> glGetAttribLocation</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="str">"inputTexCoord"</span><span class="pun">);</span><span class="pln">
    normalLoc </span><span class="pun">=</span><span class="pln"> glGetAttribLocation</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="pln"> </span><span class="str">"inputNormal"</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// retrieve the location of the UNIFORM variables of the vertex shader.</span><span class="pln">
    projectionLoc </span><span class="pun">=</span><span class="pln"> glGetUniformLocation</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="pln"> </span><span class="str">"projection"</span><span class="pun">);</span><span class="pln">
    modelviewLoc </span><span class="pun">=</span><span class="pln"> glGetUniformLocation</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="pln"> </span><span class="str">"modelview"</span><span class="pun">);</span><span class="pln">
    texLoc </span><span class="pun">=</span><span class="pln"> glGetUniformLocation</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">,</span><span class="pln"> </span><span class="str">"myTexture"</span><span class="pun">);</span><span class="pln">

  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> resize</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> w</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> h</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    glViewport</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> w</span><span class="pun">,</span><span class="pln"> h</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// this function replaces gluPerspective</span><span class="pln">
    mat4Perspective</span><span class="pun">(</span><span class="pln">projection</span><span class="pun">,</span><span class="pln"> </span><span class="lit">30.0f</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">float</span><span class="pun">)</span><span class="pln">w</span><span class="pun">/(</span><span class="kwd">float</span><span class="pun">)</span><span class="pln">h</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10.0f</span><span class="pun">);</span><span class="pln">
    </span><span class="com">// mat4Print(projection);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> display</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    glClearColor</span><span class="pun">(</span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">);</span><span class="pln">
    glClear</span><span class="pun">(</span><span class="pln">GL_COLOR_BUFFER_BIT </span><span class="pun">|</span><span class="pln"> GL_DEPTH_BUFFER_BIT</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// camera orbits in the z=5 plane</span><span class="pln">
    </span><span class="com">// and looks at the origin</span><span class="pln">
    </span><span class="com">// mat4LookAt replaces gluLookAt</span><span class="pln">
    </span><span class="kwd">double</span><span class="pln"> rad </span><span class="pun">=</span><span class="pln"> M_PI </span><span class="pun">/</span><span class="pln"> </span><span class="lit">180.0f</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> t</span><span class="pun">;</span><span class="pln">
    mat4LookAt</span><span class="pun">(</span><span class="pln">modelview</span><span class="pun">,</span><span class="pln">
               </span><span class="lit">5.0f</span><span class="pun">*</span><span class="pln">cos</span><span class="pun">(</span><span class="pln">rad</span><span class="pun">),</span><span class="pln"> </span><span class="lit">5.0f</span><span class="pun">*</span><span class="pln">sin</span><span class="pun">(</span><span class="pln">rad</span><span class="pun">),</span><span class="pln"> </span><span class="lit">5.0f</span><span class="pun">,</span><span class="pln"> </span><span class="com">// eye</span><span class="pln">
               </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.5f</span><span class="pun">,</span><span class="pln"> </span><span class="com">// look at</span><span class="pln">
               </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">);</span><span class="pln"> </span><span class="com">// up</span><span class="pln">

    glUseProgram</span><span class="pun">(</span><span class="pln">progID</span><span class="pun">);</span><span class="pln">
    </span><span class="com">// load the current projection and modelview matrix into the</span><span class="pln">
    </span><span class="com">// corresponding UNIFORM variables of the shader</span><span class="pln">
    glUniformMatrix4fv</span><span class="pun">(</span><span class="pln">projectionLoc</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">,</span><span class="pln"> projection</span><span class="pun">);</span><span class="pln">
    glUniformMatrix4fv</span><span class="pun">(</span><span class="pln">modelviewLoc</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">,</span><span class="pln"> modelview</span><span class="pun">);</span><span class="pln">


    </span><span class="com">// activate texture unit 0</span><span class="pln">
    glActiveTexture</span><span class="pun">(</span><span class="pln">GL_TEXTURE0</span><span class="pun">);</span><span class="pln">
    </span><span class="com">// bind texture</span><span class="pln">
    glBindTexture</span><span class="pun">(</span><span class="pln">GL_TEXTURE_2D</span><span class="pun">,</span><span class="pln"> texID</span><span class="pun">);</span><span class="pln">
    </span><span class="com">// inform the shader to use texture unit 0</span><span class="pln">
    glUniform1i</span><span class="pun">(</span><span class="pln">texLoc</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// bind pyramid VAO</span><span class="pln">
    glBindVertexArray</span><span class="pun">(</span><span class="pln">vaoID</span><span class="pun">[</span><span class="typ">Pyramid</span><span class="pun">]);</span><span class="pln">
    </span><span class="com">// render data</span><span class="pln">
    glDrawArrays</span><span class="pun">(</span><span class="pln">GL_TRIANGLES</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> pyramidVertNo</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">private</span><span class="pun">:</span><span class="pln">
  </span><span class="kwd">void</span><span class="pln"> printShaderInfoLog</span><span class="pun">(</span><span class="typ">GLuint</span><span class="pln"> obj</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> infoLogLength </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> returnLength  </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">char</span><span class="pln"> </span><span class="pun">*</span><span class="pln">infoLog</span><span class="pun">;</span><span class="pln">
    glGetShaderiv</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">,</span><span class="pln"> GL_INFO_LOG_LENGTH</span><span class="pun">,&amp;</span><span class="pln">infoLogLength</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">infoLogLength </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      infoLog </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">malloc</span><span class="pun">(</span><span class="pln">infoLogLength</span><span class="pun">);</span><span class="pln">
      glGetShaderInfoLog</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">,</span><span class="pln"> infoLogLength</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">returnLength</span><span class="pun">,</span><span class="pln"> infoLog</span><span class="pun">);</span><span class="pln">
      printf</span><span class="pun">(</span><span class="str">"%s\n"</span><span class="pun">,</span><span class="pln">infoLog</span><span class="pun">);</span><span class="pln">
      free</span><span class="pun">(</span><span class="pln">infoLog</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> printProgramInfoLog</span><span class="pun">(</span><span class="typ">GLuint</span><span class="pln"> obj</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> infoLogLength </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> returnLength  </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">char</span><span class="pln"> </span><span class="pun">*</span><span class="pln">infoLog</span><span class="pun">;</span><span class="pln">
    glGetProgramiv</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">,</span><span class="pln"> GL_INFO_LOG_LENGTH</span><span class="pun">,&amp;</span><span class="pln">infoLogLength</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">infoLogLength </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      infoLog </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">malloc</span><span class="pun">(</span><span class="pln">infoLogLength</span><span class="pun">);</span><span class="pln">
      glGetProgramInfoLog</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">,</span><span class="pln"> infoLogLength</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">returnLength</span><span class="pun">,</span><span class="pln"> infoLog</span><span class="pun">);</span><span class="pln">
      printf</span><span class="pun">(</span><span class="str">"%s\n"</span><span class="pun">,</span><span class="pln">infoLog</span><span class="pun">);</span><span class="pln">
      free</span><span class="pun">(</span><span class="pln">infoLog</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  std</span><span class="pun">::</span><span class="kwd">string</span><span class="pln"> loadShaderSrc</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> std</span><span class="pun">::</span><span class="kwd">string</span><span class="pun">&amp;</span><span class="pln"> filename</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    std</span><span class="pun">::</span><span class="pln">ifstream </span><span class="kwd">is</span><span class="pun">(</span><span class="pln">filename</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">is</span><span class="pun">.</span><span class="pln">is_open</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      std</span><span class="pun">::</span><span class="pln">stringstream buffer</span><span class="pun">;</span><span class="pln">
      buffer </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="kwd">is</span><span class="pun">.</span><span class="pln">rdbuf</span><span class="pun">();</span><span class="pln">
      </span><span class="kwd">return</span><span class="pln"> buffer</span><span class="pun">.</span><span class="pln">str</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    cerr </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">"Unable to open file "</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> filename </span><span class="pun">&lt;&lt;</span><span class="pln"> endl</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">exit</span><span class="pun">(</span><span class="lit">1</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="com">// the following functions are some matrix and vector helpers</span><span class="pln">
  </span><span class="com">// they work for this demo but in general it is recommended</span><span class="pln">
  </span><span class="com">// to use more advanced matrix libraries,</span><span class="pln">
  </span><span class="com">// e.g. OpenGL Mathematics (GLM)</span><span class="pln">
  </span><span class="kwd">float</span><span class="pln"> vec3Dot</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">a</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">b</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]*</span><span class="pln">b</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]*</span><span class="pln">b</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]*</span><span class="pln">b</span><span class="pun">[</span><span class="lit">2</span><span class="pun">];</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> vec3Cross</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">a</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">b</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">res</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    res</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> b</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln">  </span><span class="pun">-</span><span class="pln">  b</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">2</span><span class="pun">];</span><span class="pln">
    res</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> b</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln">  </span><span class="pun">-</span><span class="pln">  b</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">0</span><span class="pun">];</span><span class="pln">
    res</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> b</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln">  </span><span class="pun">-</span><span class="pln">  b</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">1</span><span class="pun">];</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> vec3Normalize</span><span class="pun">(</span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">a</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">float</span><span class="pln"> mag </span><span class="pun">=</span><span class="pln"> sqrt</span><span class="pun">(</span><span class="pln">a</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln">  </span><span class="pun">+</span><span class="pln">  a</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln">  </span><span class="pun">+</span><span class="pln">  a</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]);</span><span class="pln">
    a</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">/=</span><span class="pln"> mag</span><span class="pun">;</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">/=</span><span class="pln"> mag</span><span class="pun">;</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">/=</span><span class="pln"> mag</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> mat4Identity</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">a</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">16</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class="pln"> a</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">4</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class="pln"> a</span><span class="pun">[</span><span class="pln">i </span><span class="pun">+</span><span class="pln"> i </span><span class="pun">*</span><span class="pln"> </span><span class="lit">4</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> mat4Multiply</span><span class="pun">(</span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">a</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">b</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">res</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">4</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> j </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">4</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">j</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        res</span><span class="pun">[</span><span class="pln">j</span><span class="pun">*</span><span class="lit">4</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> k </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> k </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">4</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">k</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
          res</span><span class="pun">[</span><span class="pln">j</span><span class="pun">*</span><span class="lit">4</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+=</span><span class="pln"> a</span><span class="pun">[</span><span class="pln">k</span><span class="pun">*</span><span class="lit">4</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> b</span><span class="pun">[</span><span class="pln">j</span><span class="pun">*</span><span class="lit">4</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> k</span><span class="pun">];</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
      </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> mat4Perspective</span><span class="pun">(</span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">a</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> fov</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> aspect</span><span class="pun">,</span><span class="pln"> 
                       </span><span class="kwd">float</span><span class="pln"> zNear</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> zFar</span><span class="pun">)</span><span class="pln"> 
  </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">float</span><span class="pln"> f </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="kwd">float</span><span class="pun">(</span><span class="pln">tan </span><span class="pun">(</span><span class="pln">fov</span><span class="pun">/</span><span class="lit">2.0f</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="pun">(</span><span class="pln">M_PI </span><span class="pun">/</span><span class="pln"> </span><span class="lit">180.0f</span><span class="pun">)));</span><span class="pln">
    mat4Identity</span><span class="pun">(</span><span class="pln">a</span><span class="pun">);</span><span class="pln">
    a</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> f </span><span class="pun">/</span><span class="pln"> aspect</span><span class="pun">;</span><span class="pln">
    a</span><span class="pun">[</span><span class="lit">1</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> f</span><span class="pun">;</span><span class="pln">
    a</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">zFar </span><span class="pun">+</span><span class="pln"> zNear</span><span class="pun">)</span><span class="pln">  </span><span class="pun">/</span><span class="pln"> </span><span class="pun">(</span><span class="pln">zNear </span><span class="pun">-</span><span class="pln"> zFar</span><span class="pun">);</span><span class="pln">
    a</span><span class="pun">[</span><span class="lit">3</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">2.0f</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> zFar </span><span class="pun">*</span><span class="pln"> zNear</span><span class="pun">)</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="pun">(</span><span class="pln">zNear </span><span class="pun">-</span><span class="pln"> zFar</span><span class="pun">);</span><span class="pln">
    a</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1.0f</span><span class="pun">;</span><span class="pln">
    a</span><span class="pun">[</span><span class="lit">3</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> mat4LookAt</span><span class="pun">(</span><span class="kwd">float</span><span class="pln"> </span><span class="pun">*</span><span class="pln">viewMatrix</span><span class="pun">,</span><span class="pln">
                  </span><span class="kwd">float</span><span class="pln"> eyeX</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> eyeY</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> eyeZ</span><span class="pun">,</span><span class="pln">
                  </span><span class="kwd">float</span><span class="pln"> centerX</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> centerY</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> centerZ</span><span class="pun">,</span><span class="pln">
                  </span><span class="kwd">float</span><span class="pln"> upX</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> upY</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> upZ</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">float</span><span class="pln"> dir</span><span class="pun">[</span><span class="lit">3</span><span class="pun">],</span><span class="pln"> right</span><span class="pun">[</span><span class="lit">3</span><span class="pun">],</span><span class="pln"> up</span><span class="pun">[</span><span class="lit">3</span><span class="pun">],</span><span class="pln"> eye</span><span class="pun">[</span><span class="lit">3</span><span class="pun">];</span><span class="pln">
    up</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]=</span><span class="pln">upX</span><span class="pun">;</span><span class="pln"> up</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]=</span><span class="pln">upY</span><span class="pun">;</span><span class="pln"> up</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]=</span><span class="pln">upZ</span><span class="pun">;</span><span class="pln">
    eye</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]=</span><span class="pln">eyeX</span><span class="pun">;</span><span class="pln"> eye</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]=</span><span class="pln">eyeY</span><span class="pun">;</span><span class="pln"> eye</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]=</span><span class="pln">eyeZ</span><span class="pun">;</span><span class="pln">

    dir</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]=</span><span class="pln">centerX</span><span class="pun">-</span><span class="pln">eyeX</span><span class="pun">;</span><span class="pln"> dir</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]=</span><span class="pln">centerY</span><span class="pun">-</span><span class="pln">eyeY</span><span class="pun">;</span><span class="pln"> dir</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]=</span><span class="pln">centerZ</span><span class="pun">-</span><span class="pln">eyeZ</span><span class="pun">;</span><span class="pln">
    vec3Normalize</span><span class="pun">(</span><span class="pln">dir</span><span class="pun">);</span><span class="pln">
    vec3Cross</span><span class="pun">(</span><span class="pln">dir</span><span class="pun">,</span><span class="pln">up</span><span class="pun">,</span><span class="pln">right</span><span class="pun">);</span><span class="pln">
    vec3Normalize</span><span class="pun">(</span><span class="pln">right</span><span class="pun">);</span><span class="pln">
    vec3Cross</span><span class="pun">(</span><span class="pln">right</span><span class="pun">,</span><span class="pln">dir</span><span class="pun">,</span><span class="pln">up</span><span class="pun">);</span><span class="pln">
    vec3Normalize</span><span class="pun">(</span><span class="pln">up</span><span class="pun">);</span><span class="pln">
    </span><span class="com">// first row</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> right</span><span class="pun">[</span><span class="lit">0</span><span class="pun">];</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">4</span><span class="pun">]</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> right</span><span class="pun">[</span><span class="lit">1</span><span class="pun">];</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">8</span><span class="pun">]</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> right</span><span class="pun">[</span><span class="lit">2</span><span class="pun">];</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">12</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">vec3Dot</span><span class="pun">(</span><span class="pln">right</span><span class="pun">,</span><span class="pln"> eye</span><span class="pun">);</span><span class="pln">
    </span><span class="com">// second row</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> up</span><span class="pun">[</span><span class="lit">0</span><span class="pun">];</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">5</span><span class="pun">]</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> up</span><span class="pun">[</span><span class="lit">1</span><span class="pun">];</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">9</span><span class="pun">]</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> up</span><span class="pun">[</span><span class="lit">2</span><span class="pun">];</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">13</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">vec3Dot</span><span class="pun">(</span><span class="pln">up</span><span class="pun">,</span><span class="pln"> eye</span><span class="pun">);</span><span class="pln">
    </span><span class="com">// third row</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">dir</span><span class="pun">[</span><span class="lit">0</span><span class="pun">];</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">6</span><span class="pun">]</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">dir</span><span class="pun">[</span><span class="lit">1</span><span class="pun">];</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">10</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">dir</span><span class="pun">[</span><span class="lit">2</span><span class="pun">];</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">14</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln">  vec3Dot</span><span class="pun">(</span><span class="pln">dir</span><span class="pun">,</span><span class="pln"> eye</span><span class="pun">);</span><span class="pln">
    </span><span class="com">// forth row</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">;</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">7</span><span class="pun">]</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">;</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">11</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">;</span><span class="pln">
    viewMatrix</span><span class="pun">[</span><span class="lit">15</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
  </span><span class="kwd">void</span><span class="pln"> mat4Print</span><span class="pun">(</span><span class="kwd">float</span><span class="pun">*</span><span class="pln"> a</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// opengl uses column major order</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">4</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> j </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">4</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">j</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        cout </span><span class="pun">&lt;&lt;</span><span class="pln"> a</span><span class="pun">[</span><span class="pln">j </span><span class="pun">*</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">" "</span><span class="pun">;</span><span class="pln">
      </span><span class="pun">}</span><span class="pln">
      cout </span><span class="pun">&lt;&lt;</span><span class="pln"> endl</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="com">// returns a valid textureID on success, otherwise 0</span><span class="pln">
  </span><span class="typ">GLuint</span><span class="pln"> loadTexture</span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="kwd">string</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">filename</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">unsigned</span><span class="pln"> width</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">unsigned</span><span class="pln"> height</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> level </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> border </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    std</span><span class="pun">::</span><span class="pln">vector</span><span class="pun">&lt;</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">&gt;</span><span class="pln"> imgData</span><span class="pun">;</span><span class="pln">

    </span><span class="com">// load image data</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(!</span><span class="pln">loadPPMImageFlipped</span><span class="pun">(</span><span class="pln">filename</span><span class="pun">,</span><span class="pln"> width</span><span class="pun">,</span><span class="pln"> height</span><span class="pun">,</span><span class="pln"> imgData</span><span class="pun">))</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">

    </span><span class="com">// data is aligned in byte order</span><span class="pln">
    glPixelStorei</span><span class="pun">(</span><span class="pln">GL_UNPACK_ALIGNMENT</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">);</span><span class="pln">

    </span><span class="com">//request textureID</span><span class="pln">
    </span><span class="typ">GLuint</span><span class="pln"> textureID</span><span class="pun">;</span><span class="pln">
    glGenTextures</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">textureID</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// bind texture</span><span class="pln">
    glBindTexture</span><span class="pun">(</span><span class="pln"> GL_TEXTURE_2D</span><span class="pun">,</span><span class="pln"> textureID</span><span class="pun">);</span><span class="pln">

    </span><span class="com">//define how to filter the texture (important but ignore for now)</span><span class="pln">
    glTexParameteri </span><span class="pun">(</span><span class="pln">GL_TEXTURE_2D</span><span class="pun">,</span><span class="pln"> GL_TEXTURE_MAG_FILTER</span><span class="pun">,</span><span class="pln"> GL_LINEAR</span><span class="pun">);</span><span class="pln">
    glTexParameteri </span><span class="pun">(</span><span class="pln">GL_TEXTURE_2D</span><span class="pun">,</span><span class="pln"> GL_TEXTURE_MIN_FILTER</span><span class="pun">,</span><span class="pln"> GL_LINEAR</span><span class="pun">);</span><span class="pln">

    </span><span class="com">//texture colors should replace the original color values</span><span class="pln">
    glTexEnvf</span><span class="pun">(</span><span class="pln">GL_TEXTURE_ENV</span><span class="pun">,</span><span class="pln"> GL_TEXTURE_ENV_MODE</span><span class="pun">,</span><span class="pln"> GL_REPLACE</span><span class="pun">);</span><span class="pln"> </span><span class="com">//GL_MODULATE</span><span class="pln">

    </span><span class="com">// specify the 2D texture map</span><span class="pln">
    glTexImage2D</span><span class="pun">(</span><span class="pln">GL_TEXTURE_2D</span><span class="pun">,</span><span class="pln"> level</span><span class="pun">,</span><span class="pln"> GL_RGB</span><span class="pun">,</span><span class="pln"> width</span><span class="pun">,</span><span class="pln"> height</span><span class="pun">,</span><span class="pln"> border</span><span class="pun">,</span><span class="pln"> 
                 GL_RGB</span><span class="pun">,</span><span class="pln"> GL_UNSIGNED_BYTE</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">imgData</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]);</span><span class="pln">

    </span><span class="com">// return unique texture identifier</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> textureID</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">


  </span><span class="kwd">bool</span><span class="pln"> loadPPMImageFlipped</span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="kwd">string</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">filename</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">width</span><span class="pun">,</span><span class="pln"> 
                 </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">height</span><span class="pun">,</span><span class="pln"> std</span><span class="pun">::</span><span class="pln">vector</span><span class="pun">&lt;</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">imgData</span><span class="pun">)</span><span class="pln"> 
  </span><span class="pun">{</span><span class="pln">

    ifstream input</span><span class="pun">(</span><span class="pln">filename</span><span class="pun">.</span><span class="pln">c_str</span><span class="pun">(),</span><span class="pln"> ifstream</span><span class="pun">::</span><span class="kwd">in</span><span class="pln"> </span><span class="pun">|</span><span class="pln"> ifstream</span><span class="pun">::</span><span class="pln">binary</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(!</span><span class="pln">input</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="com">// cast istream to bool to see if something went wrong</span><span class="pln">
      </span><span class="typ">QMessageBox</span><span class="pln"> msgBox</span><span class="pun">;</span><span class="pln">
      msgBox</span><span class="pun">.</span><span class="pln">setText</span><span class="pun">(</span><span class="typ">QString</span><span class="pun">(</span><span class="str">"Can not find texture data file "</span><span class="pun">)</span><span class="pln">
                     </span><span class="pun">+</span><span class="pln">  </span><span class="typ">QString</span><span class="pun">(</span><span class="pln">filename</span><span class="pun">.</span><span class="pln">c_str</span><span class="pun">()));</span><span class="pln">
      msgBox</span><span class="pun">.</span><span class="kwd">exec</span><span class="pun">();</span><span class="pln">
      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    input</span><span class="pun">.</span><span class="pln">unsetf</span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="pln">ios_base</span><span class="pun">::</span><span class="pln">skipws</span><span class="pun">);</span><span class="pln">

    </span><span class="kwd">string</span><span class="pln"> line</span><span class="pun">;</span><span class="pln">
    input </span><span class="pun">&gt;&gt;</span><span class="pln"> line </span><span class="pun">&gt;&gt;</span><span class="pln"> std</span><span class="pun">::</span><span class="pln">ws</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">line </span><span class="pun">!=</span><span class="pln"> </span><span class="str">"P6"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="typ">QMessageBox</span><span class="pln"> msgBox</span><span class="pun">;</span><span class="pln">
      msgBox</span><span class="pun">.</span><span class="pln">setText</span><span class="pun">(</span><span class="str">"File is not PPM P6 raw format"</span><span class="pun">);</span><span class="pln">
      msgBox</span><span class="pun">.</span><span class="kwd">exec</span><span class="pun">();</span><span class="pln">
      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    width </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    height </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">unsigned</span><span class="pln"> depth </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">unsigned</span><span class="pln"> readItems </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> lastCharBeforeBinary</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">readItems </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">3</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      input </span><span class="pun">&gt;&gt;</span><span class="pln"> std</span><span class="pun">::</span><span class="pln">ws</span><span class="pun">;</span><span class="pln">
      </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">input</span><span class="pun">.</span><span class="pln">peek</span><span class="pun">()</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> </span><span class="str">'#'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">readItems </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> input </span><span class="pun">&gt;&gt;</span><span class="pln"> width</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">readItems </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> input </span><span class="pun">&gt;&gt;</span><span class="pln"> height</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">readItems </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span><span class="pln"> input </span><span class="pun">&gt;&gt;</span><span class="pln"> depth </span><span class="pun">&gt;&gt;</span><span class="pln"> lastCharBeforeBinary</span><span class="pun">;</span><span class="pln">
        readItems</span><span class="pun">++;</span><span class="pln">
      </span><span class="pun">}</span><span class="kwd">else</span><span class="pun">{</span><span class="pln"> </span><span class="com">// skip comments</span><span class="pln">
        std</span><span class="pun">::</span><span class="pln">getline</span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class="pln"> line</span><span class="pun">);</span><span class="pln">
      </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">depth </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">256</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="typ">QMessageBox</span><span class="pln"> msgBox</span><span class="pun">;</span><span class="pln">
      msgBox</span><span class="pun">.</span><span class="pln">setText</span><span class="pun">(</span><span class="str">"Only 8-bit PPM format is supported"</span><span class="pun">);</span><span class="pln">
      msgBox</span><span class="pun">.</span><span class="kwd">exec</span><span class="pun">();</span><span class="pln">
      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">unsigned</span><span class="pln"> byteCount </span><span class="pun">=</span><span class="pln"> width </span><span class="pun">*</span><span class="pln"> height </span><span class="pun">*</span><span class="pln"> </span><span class="lit">3</span><span class="pun">;</span><span class="pln">
    imgData</span><span class="pun">.</span><span class="pln">resize</span><span class="pun">(</span><span class="pln">byteCount</span><span class="pun">);</span><span class="pln">
    input</span><span class="pun">.</span><span class="pln">read</span><span class="pun">((</span><span class="kwd">char</span><span class="pun">*)&amp;</span><span class="pln">imgData</span><span class="pun">[</span><span class="lit">0</span><span class="pun">],</span><span class="pln"> byteCount</span><span class="pun">*</span><span class="kwd">sizeof</span><span class="pun">(</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">));</span><span class="pln">

    </span><span class="com">// vertically flip the image because the image origin</span><span class="pln">
    </span><span class="com">// in OpenGL is the lower-left corner</span><span class="pln">
    </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> tmpData</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">unsigned</span><span class="pln"> y</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> y </span><span class="pun">&lt;</span><span class="pln"> height </span><span class="pun">/</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span><span class="pln"> y</span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="kwd">int</span><span class="pln"> sourceIndex </span><span class="pun">=</span><span class="pln"> y </span><span class="pun">*</span><span class="pln"> width </span><span class="pun">*</span><span class="pln"> </span><span class="lit">3</span><span class="pun">;</span><span class="pln">
      </span><span class="kwd">int</span><span class="pln"> targetIndex </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">height</span><span class="pun">-</span><span class="lit">1</span><span class="pun">-</span><span class="pln">y</span><span class="pun">)</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> width </span><span class="pun">*</span><span class="lit">3</span><span class="pun">;</span><span class="pln">
      </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">unsigned</span><span class="pln"> x</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> x </span><span class="pun">&lt;</span><span class="pln"> width</span><span class="pun">*</span><span class="lit">3</span><span class="pun">;</span><span class="pln"> x</span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
          tmpData </span><span class="pun">=</span><span class="pln"> imgData</span><span class="pun">[</span><span class="pln">targetIndex</span><span class="pun">];</span><span class="pln">
          imgData</span><span class="pun">[</span><span class="pln">targetIndex</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> imgData</span><span class="pun">[</span><span class="pln">sourceIndex</span><span class="pun">];</span><span class="pln">
          imgData</span><span class="pun">[</span><span class="pln">sourceIndex</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> tmpData</span><span class="pun">;</span><span class="pln">
          sourceIndex</span><span class="pun">++;</span><span class="pln">
          targetIndex</span><span class="pun">++;</span><span class="pln">
      </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">};</span></pre>
        </div>
      </div>
    </article>

    <!-- Slide (web, intern, german, english) -->
    <article class="smaller far-next" data-slide-num="42" data-total-slides="47" id="42">
      <div class="slidetitle">
        <!-- Slide (web, intern, english) -->
        <h3>Example: Accessing Textures in the Shader</h3>
        <!-- Slide (web, intern, german, english) -->
      </div>
      <div class="slidebody">
        <ul>
          <li>Vertex Shader: <pre class="prettyprint prettyprinted" style=""><span class="com">#version 140</span><span class="pln">
</span><span class="kwd">in</span><span class="pln"> vec3 inputPosition</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">in</span><span class="pln"> vec4 inputColor</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">in</span><span class="pln"> vec2 inputTexCoord</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">in</span><span class="pln"> vec3 inputNormal</span><span class="pun">;</span><span class="pln">
uniform mat4 projection</span><span class="pun">,</span><span class="pln"> modelview</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">out</span><span class="pln"> vec3 forFragColor</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">out</span><span class="pln"> vec2 forFragTexCoord</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">(){</span><span class="pln">
    forFragColor </span><span class="pun">=</span><span class="pln"> inputColor</span><span class="pun">.</span><span class="pln">rgb</span><span class="pun">;</span><span class="pln">
    forFragTexCoord </span><span class="pun">=</span><span class="pln"> inputTexCoord</span><span class="pun">;</span><span class="pln">
    gl_Position </span><span class="pun">=</span><span class="pln">  projection </span><span class="pun">*</span><span class="pln"> modelview </span><span class="pun">*</span><span class="pln"> vec4</span><span class="pun">(</span><span class="pln">inputPosition</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span></pre></li>
        </ul>
      </div>
    </article>

    <!-- Slide (web, intern, german, english) -->
    <article class="smaller far-next" data-slide-num="43" data-total-slides="47" id="43">
      <div class="slidetitle">
        <!-- Slide (web, intern, english) -->
        <h3>Example: Accessing Textures in the Shader</h3>
        <!-- Slide (web, intern, german, english) -->
      </div>
      <div class="slidebody">
        <ul>
          <li>Fragment Shader: <pre class="prettyprint prettyprinted" style=""><span class="com">#version 140</span><span class="pln">
</span><span class="kwd">in</span><span class="pln"> vec3 forFragColor</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">in</span><span class="pln"> vec2 forFragTexCoord</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">out</span><span class="pln"> vec4 outputColor</span><span class="pun">;</span><span class="pln">
uniform sampler2D myTexture</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    vec3 textureColor </span><span class="pun">=</span><span class="pln"> vec3</span><span class="pun">(</span><span class="pln"> texture</span><span class="pun">(</span><span class="pln">myTexture</span><span class="pun">,</span><span class="pln"> forFragTexCoord</span><span class="pun">)</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
    outputColor </span><span class="pun">=</span><span class="pln"> vec4</span><span class="pun">(</span><span class="pln">forFragColor</span><span class="pun">*</span><span class="pln">textureColor</span><span class="pun">,</span><span class="lit">1.0</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span></pre></li>
        </ul>
      </div>
    </article>

    <!-- Slide (web, intern, english) -->
    <article class="smaller far-next" data-slide-num="44" data-total-slides="47" id="44">
      <div class="slidetitle">
        <h3>Example: Accessing Textures in the Shader</h3>
      </div>
      <div class="slidebody">
        <ul>
          <li>Fragment shader alternative: What is the functionality of this code? <pre class="prettyprint prettyprinted" style=""><span class="com">#version 140</span><span class="pln">
</span><span class="kwd">in</span><span class="pln"> vec3 forFragColor</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">in</span><span class="pln"> vec2 forFragTexCoord</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">out</span><span class="pln"> vec4 outputColor</span><span class="pun">;</span><span class="pln">
uniform sampler2D myTexture</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    vec3 textureColor </span><span class="pun">=</span><span class="pln"> vec3</span><span class="pun">(</span><span class="pln"> texture</span><span class="pun">(</span><span class="pln">myTexture</span><span class="pun">,</span><span class="pln"> forFragTexCoord</span><span class="pun">)</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
    outputColor </span><span class="pun">=</span><span class="pln"> vec4</span><span class="pun">(</span><span class="pln">forFragColor</span><span class="pun">*</span><span class="pln">textureColor</span><span class="pun">,</span><span class="lit">1.0</span><span class="pun">);</span><span class="pln">

    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">forFragTexCoord</span><span class="pun">.</span><span class="pln">x </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0.5</span><span class="pun">)</span><span class="pln"> outputColor </span><span class="pun">=</span><span class="pln"> vec4</span><span class="pun">(</span><span class="lit">1.0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0</span><span class="pun">);</span><span class="pln">

</span><span class="pun">}</span></pre></li>
        </ul>
      </div>
    </article>

   <!-- Slide (web, intern, english) -->
    <article class="smaller far-next" data-slide-num="45" data-total-slides="47" id="45">
      <div class="slidetitle">
        <h3>Example: Accessing Textures in the Shader</h3>
      </div>
      <div class="slidebody">
        <ul>
          <li>Fragment shader alternative 2: What is the functionality of this code? <pre class="prettyprint prettyprinted" style=""><span class="com">#version 140</span><span class="pln">
</span><span class="kwd">in</span><span class="pln"> vec3 forFragColor</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">in</span><span class="pln"> vec2 forFragTexCoord</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">out</span><span class="pln"> vec4 outputColor</span><span class="pun">;</span><span class="pln">
uniform sampler2D myTexture</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">const</span><span class="pln"> vec2 texSize </span><span class="pun">=</span><span class="pln"> vec2</span><span class="pun">(</span><span class="lit">256.0</span><span class="pun">,</span><span class="lit">256.0</span><span class="pun">);</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  vec3 tC </span><span class="pun">=</span><span class="pln"> vec3</span><span class="pun">(</span><span class="pln"> texture</span><span class="pun">(</span><span class="pln">myTexture</span><span class="pun">,</span><span class="pln"> forFragTexCoord</span><span class="pun">)</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
  vec3 tC2 </span><span class="pun">=</span><span class="pln"> vec3</span><span class="pun">(</span><span class="pln"> texture</span><span class="pun">(</span><span class="pln">myTexture</span><span class="pun">,</span><span class="pln"> forFragTexCoord </span><span class="pun">+</span><span class="pln"> vec2</span><span class="pun">(</span><span class="lit">1.0</span><span class="pun">/</span><span class="pln">texSize</span><span class="pun">.</span><span class="pln">x</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
  vec3 tC3 </span><span class="pun">=</span><span class="pln"> vec3</span><span class="pun">(</span><span class="pln"> texture</span><span class="pun">(</span><span class="pln">myTexture</span><span class="pun">,</span><span class="pln"> forFragTexCoord </span><span class="pun">+</span><span class="pln"> vec2</span><span class="pun">(</span><span class="lit">0.0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0</span><span class="pun">/</span><span class="pln">texSize</span><span class="pun">.</span><span class="pln">y</span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
  </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">abs</span><span class="pun">(</span><span class="pln">tC</span><span class="pun">.</span><span class="pln">x </span><span class="pun">-</span><span class="pln"> tC2</span><span class="pun">.</span><span class="pln">x</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0.01</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    outputColor </span><span class="pun">=</span><span class="pln"> vec4</span><span class="pun">(</span><span class="lit">1.0</span><span class="pun">,</span><span class="lit">1.0</span><span class="pun">,</span><span class="lit">1.0</span><span class="pun">,</span><span class="lit">1.0</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">abs</span><span class="pun">(</span><span class="pln">tC</span><span class="pun">.</span><span class="pln">x </span><span class="pun">-</span><span class="pln"> tC3</span><span class="pun">.</span><span class="pln">x</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0.01</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      outputColor </span><span class="pun">=</span><span class="pln"> vec4</span><span class="pun">(</span><span class="lit">1.0</span><span class="pun">,</span><span class="lit">1.0</span><span class="pun">,</span><span class="lit">0.0</span><span class="pun">,</span><span class="lit">1.0</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      outputColor </span><span class="pun">=</span><span class="pln"> vec4</span><span class="pun">(</span><span class="pln">forFragColor</span><span class="pun">*</span><span class="pln">tC</span><span class="pun">,</span><span class="lit">1.0</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></pre></li>
        </ul>
      </div>
    </article>

    <!-- Slide (web, intern, english) -->
    <article class="smaller far-next" data-slide-num="46" data-total-slides="47" id="46">
      <div class="slidetitle">
        <h3>Early Fragment Tests</h3>
      </div>
      <div class="slidebody">
        <div class="captionBoxRight">
          <img width="440" src="media/vectorart/perfragment_fixedfunction_vs_shader.png" alt="perfragment_fixedfunction_vs_shader" />
          <div class="caption">Standard Pipeline</div>
        </div>
        
        <ul>
          <li>A fragment needs to pass a series of tests before it is written to the framebuffer</li>
          <li>According to the OpenGL standard, these tests are executed after the fragment shader</li>
          <li>For optimization, GPUs may perform the tests before the fragment shader if this does not change the behavior of the pipeline</li>
          <li>For example, if the depth value <code>gl_FragDepth</code> is changed by the fragment shader, the depth test cannot be performed early</li>
          <li>As of GLSL version 4.2, <a href="https://www.khronos.org/opengl/wiki/Early_Fragment_Test">Early Fragment Tests</a> can be enforced with:
            <pre class="prettyprint prettyprinted" style=""><span class="com">#version 420</span><span class="pln">
layout</span><span class="pun">(</span><span class="pln">early_fragment_tests</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">in</span><span class="pun">;</span></pre>
          </li>
        </ul>

        <div class="mediaQuote">
          <b>Quelle:</b> basierend auf Mark Segal, Kurt Akeley, <i>The OpenGL Graphics System: A Specification</i> Version 2.0, 2004, Abb. 3.1 und 4.1.
          (modifiziert)
        </div>
      </div>
    </article>
   
    <!-- Slide (web, intern, english) -->
    <article data-slide-num="47" data-total-slides="47" id="47" class="far-next">
      <div class="slidetitle">
        <h3>Are there any questions?</h3>
      </div>
      <div class="slidebody">
        <div class="centered">
          <img src="media/questions_360px.jpg" alt="questions" />
        </div>
          <p>
             Please notify me by <span style="white-space: nowrap;">e-mail</span> 
             if you have questions, suggestions for improvement, or 
             found typos: <a href="https://www.uni-marburg.de/en/fb12/research-groups/grafikmultimedia/thormae">Contact</a>
           </p>
        <p class="smaller smallTopMargin">
          <a href="https://www.uni-marburg.de/en/fb12/research-groups/grafikmultimedia/lectures/graphics">More lecture slides</a>
        </p>
         <p class="smaller smallTopMargin">
          <a href="https://www.uni-marburg.de/de/fb12/arbeitsgruppen/grafikmultimedia/lehre/grafik">Slides in German (Folien auf Deutsch)</a>
        </p>
      </div>
    </article>
  <div class="slide-area" id="prev-slide-area"></div><div class="slide-area" id="next-slide-area"></div></div>










<link rel="stylesheet" type="text/css" href="./fonts/Droid-Sans-Mono/stylesheet.css" /><link rel="stylesheet" type="text/css" href="./fonts/Open-Sans/stylesheet.css" /><link rel="stylesheet" type="text/css" id="myToggleStyle" href="../styles3_print.css" /><link rel="stylesheet" type="text/css" href="../styles3_all.css" /><script type="text/javascript" src="../prettify.js"></script><div id="MathJax_Font_Test" style="position: absolute; visibility: hidden; top: 0px; left: 0px; width: auto; padding: 0px; border: 0px; margin: 0px; white-space: nowrap; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; font-size: 40px; font-weight: normal; font-style: normal; font-family: MathJax_AMS, monospace;">MATHJAX AMS ˆ </div></body></html>