<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml" class=" js csstransforms csstransforms3d csstransitions"><head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
<link rel="alternate" type="application/rss+xml" title="RSS 2.0 - all posts" href="http://www.skywind.me/blog/feed" />
<link rel="alternate" type="application/rss+xml" title="RSS 2.0 - all comments" href="http://www.skywind.me/blog/comments/feed" />
<link rel="pingback" href="http://www.skywind.me/blog/xmlrpc.php" />
<!-- style START -->
<!-- default style -->
<style type="text/css" media="screen">@import url( http://www.skywind.me/blog/wp-content/themes/inove/style.css );</style>
<!-- for translations -->
<!--[if IE]>
<link rel="stylesheet" href="http://www.skywind.me/blog/wp-content/themes/inove/ie.css" type="text/css" media="screen" />
<![endif]-->
<!-- style END -->
<!-- script START -->
<script async="" src="//w.likebtn.com/js/w/widget.js"></script><script src="https://hm.baidu.com/hm.js?430525c455fa119f047f66ba9aa5e3b1"></script><script async="" src="//w.likebtn.com/js/w/widget.js"></script><script src="//www.skywind.me/blog/wp-content/cache/wpfc-minified/2o20d5z7/6eu8x.js" type="text/javascript"></script>
<!-- <script type="text/javascript" src="http://www.skywind.me/blog/wp-content/themes/inove/js/base.js"></script> -->
<!-- <script type="text/javascript" src="http://www.skywind.me/blog/wp-content/themes/inove/js/menu.js"></script> -->
<!-- script END -->
<!-- PVC Template -->
<script type="text/template" id="pvc-stats-view-template">
&lt;i class="fa fa-bar-chart pvc-stats-icon small" aria-hidden="true"&gt;&lt;/i&gt; 
&lt;% if ( total_view &gt; 0 ) { %&gt;
&lt;%= total_view %&gt; &lt;%= total_view &gt; 1 ? "total views" : "total view" %&gt;,
&lt;% if ( today_view &gt; 0 ) { %&gt;
&lt;%= today_view %&gt; &lt;%= today_view &gt; 1 ? "views today" : "view today" %&gt;
&lt;% } else { %&gt;
no views today		&lt;% } %&gt;
&lt;% } else { %&gt;
No views yet	&lt;% } %&gt;
</script>
<script>
MathJax = {tex: {inlineMath: [['$','$'],['\\(','\\)']], processEscapes: true}};
</script>
<!-- This site is optimized with the Yoast SEO plugin v12.3 - https://yoast.com/wordpress/plugins/seo/ -->
<title>如何写一个软件渲染器？ - Skywind Inside</title>
<meta name="robots" content="max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
<link rel="canonical" href="http://www.skywind.me/blog/archives/1498" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:title" content="如何写一个软件渲染器？ - Skywind Inside" />
<meta property="og:description" content="实现个简单的固定渲染管线软渲染器不算复杂，差不多700行代码就可以搞定了。之所以很多人用 D3D用的很熟，写软渲染却坑坑洼洼，主要是现在大部分讲图形的书，讲到透视投影时就是分析一下透视变换矩阵如何生成，顶点如何计算就跳到其他讲模型或者光照的部分了。 因为今天基本上是直接用 D3D 或者 OGL，真正光栅化的部分不了解也不影响使用，所以大部分教材都直接跳过了一大段，摄像机坐标系如何转换？三角形如何生成？CVV边缘如何检测？四维坐标如何裁剪？边缘及步长如何计算？扫描线该如何绘制？透视纹理映射具体代码该怎么写？framebuffer zbuffer 到底该怎么用？z-test 到底是该 test z 还是 w 还是 1/z 还是 1/w ？这些都没讲。 早年培训学生时候，我花两天时间写的一个 DEMO，今天拿出来重新调整注释一下，性能和功能当然比不过高大上的软件渲染器。但一般来讲，工程类项目代码不容易阅读，太多边界情况和太多细节优化容易让初学者迷失，这个 mini3d 的项目不做任何优化，主要目的就是为了突出主干： 源代码：skywind3000/mini3d · GitHub 可执行：http://www.skywind.me/mw/images/c/c8/Mini3d.7z 操作方式：左右键旋转，前后键前进后退，空格键切换模式，ESC退出。   特性介绍： 单个文件：源代码只有一个 mini3d.c，单个文件实现所有内容，阅读容易。 独立编译：没有任何第三方库依赖，没有复杂的工程目录。 模型标准：标准 D3D 坐标模型，左手系 + WORLD/VIEW/PROJECTION 三矩阵 实现裁剪：简单 CVV 裁剪 纹理支持：最大支持 1024 x 1024 的纹理 深度缓存：使用深度缓存判断图像前后 边缘计算：精确的多边形边缘覆盖计算 透视贴图：透视纹理映射以及透视色彩填充 实现精简：渲染部分只有 700行， 模块清晰，主干突出。 详细注释：主要代码详细注释 截图效果 颜色填充 …" />
<meta property="og:url" content="http://www.skywind.me/blog/archives/1498" />
<meta property="og:site_name" content="Skywind Inside" />
<meta property="article:tag" content="图形" />
<meta property="article:section" content="图形编程" />
<meta property="article:published_time" content="2015-08-09T18:52:12+00:00" />
<meta property="article:modified_time" content="2015-08-13T06:26:27+00:00" />
<meta property="og:updated_time" content="2015-08-13T06:26:27+00:00" />
<meta property="og:image" content="http://www.skywind.me/blog/wp-content/uploads/2015/08/image_thumb1.png" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:description" content="实现个简单的固定渲染管线软渲染器不算复杂，差不多700行代码就可以搞定了。之所以很多人用 D3D用的很熟，写软渲染却坑坑洼洼，主要是现在大部分讲图形的书，讲到透视投影时就是分析一下透视变换矩阵如何生成，顶点如何计算就跳到其他讲模型或者光照的部分了。 因为今天基本上是直接用 D3D 或者 OGL，真正光栅化的部分不了解也不影响使用，所以大部分教材都直接跳过了一大段，摄像机坐标系如何转换？三角形如何生成？CVV边缘如何检测？四维坐标如何裁剪？边缘及步长如何计算？扫描线该如何绘制？透视纹理映射具体代码该怎么写？framebuffer zbuffer 到底该怎么用？z-test 到底是该 test z 还是 w 还是 1/z 还是 1/w ？这些都没讲。 早年培训学生时候，我花两天时间写的一个 DEMO，今天拿出来重新调整注释一下，性能和功能当然比不过高大上的软件渲染器。但一般来讲，工程类项目代码不容易阅读，太多边界情况和太多细节优化容易让初学者迷失，这个 mini3d 的项目不做任何优化，主要目的就是为了突出主干： 源代码：skywind3000/mini3d · GitHub 可执行：http://www.skywind.me/mw/images/c/c8/Mini3d.7z 操作方式：左右键旋转，前后键前进后退，空格键切换模式，ESC退出。   特性介绍： 单个文件：源代码只有一个 mini3d.c，单个文件实现所有内容，阅读容易。 独立编译：没有任何第三方库依赖，没有复杂的工程目录。 模型标准：标准 D3D 坐标模型，左手系 + WORLD/VIEW/PROJECTION 三矩阵 实现裁剪：简单 CVV 裁剪 纹理支持：最大支持 1024 x 1024 的纹理 深度缓存：使用深度缓存判断图像前后 边缘计算：精确的多边形边缘覆盖计算 透视贴图：透视纹理映射以及透视色彩填充 实现精简：渲染部分只有 700行， 模块清晰，主干突出。 详细注释：主要代码详细注释 截图效果 颜色填充 […]" />
<meta name="twitter:title" content="如何写一个软件渲染器？ - Skywind Inside" />
<meta name="twitter:site" content="@skywind3000" />
<meta name="twitter:image" content="http://www.skywind.me/blog/wp-content/uploads/2015/08/image_thumb1.png" />
<meta name="twitter:creator" content="@skywind3000" />
<script type="application/ld+json" class="yoast-schema-graph yoast-schema-graph--main">{"@context":"https://schema.org","@graph":[{"@type":["Person","Organization"],"@id":"http://www.skywind.me/blog/#/schema/person/886baa4e1568fc21ec3ecb8c8d7f4e94","name":"skywind","image":{"@type":"ImageObject","@id":"http://www.skywind.me/blog/#personlogo","url":"http://0.gravatar.com/avatar/317acfa0b5f7dd5cb8163103e2bfb3f6?s=96&amp;d=mm&amp;r=g","caption":"skywind"},"logo":{"@id":"http://www.skywind.me/blog/#personlogo"},"description":"Putty \u672c\u65e0\u6811\uff0cMinGW \u4ea6\u975e\u53f0","sameAs":["https://twitter.com/skywind3000"]},{"@type":"WebSite","@id":"http://www.skywind.me/blog/#website","url":"http://www.skywind.me/blog/","name":"Skywind Inside","publisher":{"@id":"http://www.skywind.me/blog/#/schema/person/886baa4e1568fc21ec3ecb8c8d7f4e94"},"potentialAction":{"@type":"SearchAction","target":"http://www.skywind.me/blog/?s={search_term_string}","query-input":"required name=search_term_string"}},{"@type":"ImageObject","@id":"http://www.skywind.me/blog/archives/1498#primaryimage","url":"http://www.skywind.me/blog/wp-content/uploads/2015/08/image_thumb1.png","width":614,"height":480},{"@type":"WebPage","@id":"http://www.skywind.me/blog/archives/1498#webpage","url":"http://www.skywind.me/blog/archives/1498","inLanguage":"en-US","name":"\u5982\u4f55\u5199\u4e00\u4e2a\u8f6f\u4ef6\u6e32\u67d3\u5668\uff1f - Skywind Inside","isPartOf":{"@id":"http://www.skywind.me/blog/#website"},"primaryImageOfPage":{"@id":"http://www.skywind.me/blog/archives/1498#primaryimage"},"datePublished":"2015-08-09T18:52:12+00:00","dateModified":"2015-08-13T06:26:27+00:00"},{"@type":"Article","@id":"http://www.skywind.me/blog/archives/1498#article","isPartOf":{"@id":"http://www.skywind.me/blog/archives/1498#webpage"},"author":{"@id":"http://www.skywind.me/blog/#/schema/person/886baa4e1568fc21ec3ecb8c8d7f4e94"},"headline":"\u5982\u4f55\u5199\u4e00\u4e2a\u8f6f\u4ef6\u6e32\u67d3\u5668\uff1f","datePublished":"2015-08-09T18:52:12+00:00","dateModified":"2015-08-13T06:26:27+00:00","commentCount":"15","mainEntityOfPage":{"@id":"http://www.skywind.me/blog/archives/1498#webpage"},"publisher":{"@id":"http://www.skywind.me/blog/#/schema/person/886baa4e1568fc21ec3ecb8c8d7f4e94"},"image":{"@id":"http://www.skywind.me/blog/archives/1498#primaryimage"},"keywords":"\u56fe\u5f62","articleSection":"\u56fe\u5f62\u7f16\u7a0b,\u7f16\u7a0b\u6280\u672f"}]}</script>
<!-- / Yoast SEO plugin. -->
<link rel="dns-prefetch" href="//cdn.jsdelivr.net" />
<link rel="dns-prefetch" href="//s.w.org" />
<link rel="alternate" type="application/rss+xml" title="Skywind Inside » 如何写一个软件渲染器？ Comments Feed" href="http://www.skywind.me/blog/archives/1498/feed" />
<script type="text/javascript">
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/12.0.0-1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/12.0.0-1\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/www.skywind.me\/blog\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.2.4"}};
!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&amp;&amp;(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55357,56424,55356,57342,8205,55358,56605,8205,55357,56424,55356,57340],[55357,56424,55356,57342,8203,55358,56605,8203,55357,56424,55356,57340]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&amp;&amp;k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i&lt;j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&amp;&amp;c.supports[j[i]],"flag"!==j[i]&amp;&amp;(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&amp;&amp;c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&amp;&amp;!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&amp;&amp;c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&amp;&amp;g.twemoji&amp;&amp;(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
</script><script src="http://www.skywind.me/blog/wp-includes/js/wp-emoji-release.min.js?ver=5.2.4" type="text/javascript" defer=""></script>
<style type="text/css">
img.wp-smiley,
img.emoji {
display: inline !important;
border: none !important;
box-shadow: none !important;
height: 1em !important;
width: 1em !important;
margin: 0 .07em !important;
vertical-align: -0.1em !important;
background: none !important;
padding: 0 !important;
}
</style>
<!-- <link rel='stylesheet' id='wp-block-library-css'  href='http://www.skywind.me/blog/wp-includes/css/dist/block-library/style.min.css?ver=5.2.4' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='likebtn_style-css'  href='http://www.skywind.me/blog/wp-content/plugins/likebtn-like-button/public/css/style.css?ver=5.2.4' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='font-awesome-styles-css'  href='http://www.skywind.me/blog/wp-content/plugins/page-views-count/admin/assets/css/font-awesome.min.css?ver=4.5.0' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='a3-pvc-style-css'  href='http://www.skywind.me/blog/wp-content/plugins/page-views-count/assets/css/style.min.css?ver=2.2.0' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='SFSImainCss-css'  href='http://www.skywind.me/blog/wp-content/plugins/ultimate-social-media-icons/css/sfsi-style.css?ver=5.2.4' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='wordpress-popular-posts-css-css'  href='http://www.skywind.me/blog/wp-content/plugins/wordpress-popular-posts/public/css/wpp.css?ver=4.2.2' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='a3pvc-css'  href='//www.skywind.me/blog/wp-content/uploads/sass/pvc.min.css?ver=1557431066' type='text/css' media='all' /> -->
<link rel="stylesheet" type="text/css" href="//www.skywind.me/blog/wp-content/cache/wpfc-minified/1eotzlxt/6eu8x.css" media="all" />
<script type="text/javascript">
/* &lt;![CDATA[ */
var likebtn_eh_data = {"ajaxurl":"http:\/\/www.skywind.me\/blog\/wp-admin\/admin-ajax.php","security":"d4b8911f2a"};
/* ]]&gt; */
</script>
<script src="//www.skywind.me/blog/wp-content/cache/wpfc-minified/8ht2w6bm/6eu8x.js" type="text/javascript"></script>
<!-- <script type='text/javascript' src='http://www.skywind.me/blog/wp-content/plugins/likebtn-like-button/public/js/frontend.js?ver=5.2.4'></script> -->
<!-- <script type='text/javascript' src='http://www.skywind.me/blog/wp-includes/js/jquery/jquery.js?ver=1.12.4-wp'></script> -->
<!-- <script type='text/javascript' src='http://www.skywind.me/blog/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script> -->
<!-- <script type='text/javascript' src='http://www.skywind.me/blog/wp-includes/js/underscore.min.js?ver=1.8.3'></script> -->
<!-- <script type='text/javascript' src='http://www.skywind.me/blog/wp-includes/js/backbone.min.js?ver=1.2.3'></script> -->
<script type="text/javascript">
/* &lt;![CDATA[ */
var vars = {"rest_api_url":"http:\/\/www.skywind.me\/blog\/wp-json\/pvc\/v1"};
/* ]]&gt; */
</script>
<script src="//www.skywind.me/blog/wp-content/cache/wpfc-minified/l8n5gsbg/6eu8x.js" type="text/javascript"></script>
<!-- <script type='text/javascript' src='http://www.skywind.me/blog/wp-content/plugins/page-views-count/assets/js/pvc.backbone.min.js?ver=2.2.0'></script> -->
<script type="text/javascript">
/* &lt;![CDATA[ */
var wpp_params = {"sampling_active":"0","sampling_rate":"100","ajax_url":"http:\/\/www.skywind.me\/blog\/wp-json\/wordpress-popular-posts\/v1\/popular-posts\/","ID":"1498","token":"f0868ccc03","debug":""};
/* ]]&gt; */
</script>
<script src="//www.skywind.me/blog/wp-content/cache/wpfc-minified/22pqmytr/6eu8x.js" type="text/javascript"></script>
<!-- <script type='text/javascript' src='http://www.skywind.me/blog/wp-content/plugins/wordpress-popular-posts/public/js/wpp-4.2.0.min.js?ver=4.2.2'></script> -->
<link rel="https://api.w.org/" href="http://www.skywind.me/blog/wp-json/" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.skywind.me/blog/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.skywind.me/blog/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 5.2.4" />
<link rel="shortlink" href="http://www.skywind.me/blog/?p=1498" />
<link rel="alternate" type="application/json+oembed" href="http://www.skywind.me/blog/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.skywind.me%2Fblog%2Farchives%2F1498" />
<link rel="alternate" type="text/xml+oembed" href="http://www.skywind.me/blog/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.skywind.me%2Fblog%2Farchives%2F1498&amp;format=xml" />
<!-- HFCM by 99 Robots - Snippet # 2: css-tune -->
<style type="text/css">
.post .content pre {
padding: 1px;
background-image: none;
margin-bottom: 15px;
}
.post .content p {
margin-top: 7px;
margin-bottom: 7px;
}
.post .content h4 {
margin-top: 15px;
margin-bottom: 12px;
font-size: 115%;
}
.post .content h5 {
margin-top: 15px;
margin-bottom: 12px;
font-size: 105%;
}
</style>
<!-- /end HFCM by 99 Robots -->
<!-- HFCM by 99 Robots - Snippet # 3: baidu-tongji -->
<script>
var _hmt = _hmt || [];
(function() {
var hm = document.createElement("script");
hm.src = "https://hm.baidu.com/hm.js?430525c455fa119f047f66ba9aa5e3b1";
var s = document.getElementsByTagName("script")[0]; 
s.parentNode.insertBefore(hm, s);
})();
</script>
<!-- /end HFCM by 99 Robots -->
<!-- HFCM by 99 Robots - Snippet # 4: header-keywords -->
<meta name="keywords" content="编程,游戏开发,游戏同步,KCP,UDP,机器学习,图形,服务端,Linux,Vim" />
<!-- /end HFCM by 99 Robots -->
<meta name="specificfeeds-verification-code-bWRCRDMzMFRkYnoxRWtrRHVlakM3dFV4cnNGUUlKcENTYXQ5UHF3QmUwY3h0V24xbmRXZ0dWNGN5N2RrWnA4QnhLdzU2SzhTVzlSaHF6MHAwN1NoV1dSSDNZcHZhNUdTcUhHeHBqVnJNV05RTVZYTUZMR3M1Nk9XZ254cFZvSnF8aHZldk9EQU1FcmxBb1A2RHI5TmNpc2pLNnpieGw0OXExSWtNOTZ0Tk5pRT0=" content="CqXHCmPJsE2KfEu5HQhb" /><!-- Analytics by WP-Statistics v12.6.10 - https://wp-statistics.com/ -->
<script>var WP_Statistics_http = new XMLHttpRequest();WP_Statistics_http.open('GET', 'http://www.skywind.me/blog/wp-json/wpstatistics/v1/hit?_=1573045759&amp;_wpnonce=f0868ccc03&amp;wp_statistics_hit_rest=yes&amp;browser=Chrome&amp;platform=Windows&amp;version=6.1&amp;referred=http://www.skywind.me/blog&amp;ip=213.234.238.52&amp;exclude_reason&amp;ua=Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.15 Safari/537.36&amp;track_all=1&amp;timestamp=1573074559&amp;search_query&amp;current_page_type=post&amp;current_page_id=1498&amp;page_uri=/archives/1498&amp;user_id=0', true);WP_Statistics_http.setRequestHeader("Content-Type", "application/json;charset=UTF-8");WP_Statistics_http.send(null);</script>
<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<style type="text/css">.CtxtMenu_InfoClose {  top:.2em; right:.2em;}
.CtxtMenu_InfoContent {  overflow:auto; text-align:left; font-size:80%;  padding:.4em .6em; border:1px inset; margin:1em 0px;  max-height:20em; max-width:30em; background-color:#EEEEEE;  white-space:normal;}
.CtxtMenu_Info.CtxtMenu_MousePost {outline:none;}
.CtxtMenu_Info {  position:fixed; left:50%; width:auto; text-align:center;  border:3px outset; padding:1em 2em; background-color:#DDDDDD;  color:black;  cursor:default; font-family:message-box; font-size:120%;  font-style:normal; text-indent:0; text-transform:none;  line-height:normal; letter-spacing:normal; word-spacing:normal;  word-wrap:normal; white-space:nowrap; float:none; z-index:201;  border-radius: 15px;                     /* Opera 10.5 and IE9 */  -webkit-border-radius:15px;               /* Safari and Chrome */  -moz-border-radius:15px;                  /* Firefox */  -khtml-border-radius:15px;                /* Konqueror */  box-shadow:0px 10px 20px #808080;         /* Opera 10.5 and IE9 */  -webkit-box-shadow:0px 10px 20px #808080; /* Safari 3 &amp; Chrome */  -moz-box-shadow:0px 10px 20px #808080;    /* Forefox 3.5 */  -khtml-box-shadow:0px 10px 20px #808080;  /* Konqueror */  filter:progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color="gray", Positive="true"); /* IE */}
</style><style type="text/css">.CtxtMenu_MenuClose {  position:absolute;  cursor:pointer;  display:inline-block;  border:2px solid #AAA;  border-radius:18px;  -webkit-border-radius: 18px;             /* Safari and Chrome */  -moz-border-radius: 18px;                /* Firefox */  -khtml-border-radius: 18px;              /* Konqueror */  font-family: "Courier New", Courier;  font-size:24px;  color:#F0F0F0}
.CtxtMenu_MenuClose span {  display:block; background-color:#AAA; border:1.5px solid;  border-radius:18px;  -webkit-border-radius: 18px;             /* Safari and Chrome */  -moz-border-radius: 18px;                /* Firefox */  -khtml-border-radius: 18px;              /* Konqueror */  line-height:0;  padding:8px 0 6px     /* may need to be browser-specific */}
.CtxtMenu_MenuClose:hover {  color:white!important;  border:2px solid #CCC!important}
.CtxtMenu_MenuClose:hover span {  background-color:#CCC!important}
.CtxtMenu_MenuClose:hover:focus {  outline:none}
</style><style type="text/css">.CtxtMenu_Menu {  position:absolute;  background-color:white;  color:black;  width:auto; padding:5px 0px;  border:1px solid #CCCCCC; margin:0; cursor:default;  font: menu; text-align:left; text-indent:0; text-transform:none;  line-height:normal; letter-spacing:normal; word-spacing:normal;  word-wrap:normal; white-space:nowrap; float:none; z-index:201;  border-radius: 5px;                     /* Opera 10.5 and IE9 */  -webkit-border-radius: 5px;             /* Safari and Chrome */  -moz-border-radius: 5px;                /* Firefox */  -khtml-border-radius: 5px;              /* Konqueror */  box-shadow:0px 10px 20px #808080;         /* Opera 10.5 and IE9 */  -webkit-box-shadow:0px 10px 20px #808080; /* Safari 3 &amp; Chrome */  -moz-box-shadow:0px 10px 20px #808080;    /* Forefox 3.5 */  -khtml-box-shadow:0px 10px 20px #808080;  /* Konqueror */}
.CtxtMenu_MenuItem {  padding: 1px 2em;  background:transparent;}
.CtxtMenu_MenuArrow {  position:absolute; right:.5em; padding-top:.25em; color:#666666;  font-family: null; font-size: .75em}
.CtxtMenu_MenuActive .CtxtMenu_MenuArrow {color:white}
.CtxtMenu_MenuArrow.CtxtMenu_RTL {left:.5em; right:auto}
.CtxtMenu_MenuCheck {  position:absolute; left:.7em;  font-family: null}
.CtxtMenu_MenuCheck.CtxtMenu_RTL { right:.7em; left:auto }
.CtxtMenu_MenuRadioCheck {  position:absolute; left: .7em;}
.CtxtMenu_MenuRadioCheck.CtxtMenu_RTL {  right: .7em; left:auto}
.CtxtMenu_MenuInputBox {  padding-left: 1em; right:.5em; color:#666666;  font-family: null;}
.CtxtMenu_MenuInputBox.CtxtMenu_RTL {  left: .1em;}
.CtxtMenu_MenuComboBox {  left:.1em; padding-bottom:.5em;}
.CtxtMenu_MenuSlider {  left: .1em;}
.CtxtMenu_SliderValue {  position:absolute; right:.1em; padding-top:.25em; color:#333333;  font-size: .75em}
.CtxtMenu_SliderBar {  outline: none; background: #d3d3d3}
.CtxtMenu_MenuLabel {  padding: 1px 2em 3px 1.33em;  font-style:italic}
.CtxtMenu_MenuRule {  border-top: 1px solid #DDDDDD;  margin: 4px 3px;}
.CtxtMenu_MenuDisabled {  color:GrayText}
.CtxtMenu_MenuActive {  background-color: #606872;  color: white;}
.CtxtMenu_MenuDisabled:focus {  background-color: #E8E8E8}
.CtxtMenu_MenuLabel:focus {  background-color: #E8E8E8}
.CtxtMenu_ContextMenu:focus {  outline:none}
.CtxtMenu_ContextMenu .CtxtMenu_MenuItem:focus {  outline:none}
.CtxtMenu_SelectionMenu {  position:relative; float:left;  border-bottom: none; -webkit-box-shadow:none; -webkit-border-radius:0px; }
.CtxtMenu_SelectionItem {  padding-right: 1em;}
.CtxtMenu_Selection {  right: 40%; width:50%; }
.CtxtMenu_SelectionBox {  padding: 0em; max-height:20em; max-width: none;  background-color:#FFFFFF;}
.CtxtMenu_SelectionDivider {  clear: both; border-top: 2px solid #000000;}
.CtxtMenu_Menu .CtxtMenu_MenuClose {  top:-10px; left:-10px}
</style><link type="text/css" rel="stylesheet" href="//w.likebtn.com/css/w/widget.css?v=39" /><link type="text/css" rel="stylesheet" href="//w.likebtn.com/css/w/effect.css?v=39?v=39" /><style id="MJX-CHTML-styles">
mjx-container[jax="CHTML"] {
  line-height: 0;
}

mjx-container [space="1"] {
  margin-left: .111em;
}

mjx-container [space="2"] {
  margin-left: .167em;
}

mjx-container [space="3"] {
  margin-left: .222em;
}

mjx-container [space="4"] {
  margin-left: .278em;
}

mjx-container [space="5"] {
  margin-left: .333em;
}

mjx-container [rspace="1"] {
  margin-right: .111em;
}

mjx-container [rspace="2"] {
  margin-right: .167em;
}

mjx-container [rspace="3"] {
  margin-right: .222em;
}

mjx-container [rspace="4"] {
  margin-right: .278em;
}

mjx-container [rspace="5"] {
  margin-right: .333em;
}

mjx-container [size="s"] {
  font-size: 70.7%;
}

mjx-container [size="ss"] {
  font-size: 50%;
}

mjx-container [size="Tn"] {
  font-size: 60%;
}

mjx-container [size="sm"] {
  font-size: 85%;
}

mjx-container [size="lg"] {
  font-size: 120%;
}

mjx-container [size="Lg"] {
  font-size: 144%;
}

mjx-container [size="LG"] {
  font-size: 173%;
}

mjx-container [size="hg"] {
  font-size: 207%;
}

mjx-container [size="HG"] {
  font-size: 249%;
}

mjx-container [width="full"] {
  width: 100%;
}

mjx-box {
  display: inline-block;
}

mjx-block {
  display: block;
}

mjx-itable {
  display: inline-table;
}

mjx-row {
  display: table-row;
}

mjx-row &gt; * {
  display: table-cell;
}

mjx-mtext {
  display: inline-block;
}

mjx-mstyle {
  display: inline-block;
}

mjx-merror {
  display: inline-block;
  color: red;
  background-color: yellow;
}

mjx-mphantom {
  visibility: hidden;
}

mjx-assistive-mml {
  position: absolute !important;
  top: 0px;
  left: 0px;
  clip: rect(1px, 1px, 1px, 1px);
  padding: 1px 0px 0px 0px !important;
  border: 0px !important;
  display: block !important;
  width: auto !important;
  overflow: hidden !important;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

mjx-assistive-mml[display="block"] {
  width: 100% !important;
}

mjx-c::before {
  display: block;
  width: 0;
}

.MJX-TEX {
  font-family: MJXZERO, MJXTEX;
}

.TEX-B {
  font-family: MJXZERO, MJXTEX-B;
}

.TEX-I {
  font-family: MJXZERO, MJXTEX-I;
}

.TEX-MI {
  font-family: MJXZERO, MJXTEX-MI;
}

.TEX-BI {
  font-family: MJXZERO, MJXTEX-BI;
}

.TEX-S1 {
  font-family: MJXZERO, MJXTEX-S1;
}

.TEX-S2 {
  font-family: MJXZERO, MJXTEX-S2;
}

.TEX-S3 {
  font-family: MJXZERO, MJXTEX-S3;
}

.TEX-S4 {
  font-family: MJXZERO, MJXTEX-S4;
}

.TEX-A {
  font-family: MJXZERO, MJXTEX-A;
}

.TEX-C {
  font-family: MJXZERO, MJXTEX-C;
}

.TEX-CB {
  font-family: MJXZERO, MJXTEX-CB;
}

.TEX-FR {
  font-family: MJXZERO, MJXTEX-FR;
}

.TEX-FRB {
  font-family: MJXZERO, MJXTEX-FRB;
}

.TEX-SS {
  font-family: MJXZERO, MJXTEX-SS;
}

.TEX-SSB {
  font-family: MJXZERO, MJXTEX-SSB;
}

.TEX-SSI {
  font-family: MJXZERO, MJXTEX-SSI;
}

.TEX-SC {
  font-family: MJXZERO, MJXTEX-SC;
}

.TEX-T {
  font-family: MJXZERO, MJXTEX-T;
}

.TEX-V {
  font-family: MJXZERO, MJXTEX-V;
}

.TEX-VB {
  font-family: MJXZERO, MJXTEX-VB;
}

mjx-stretchy-v mjx-c, mjx-stretchy-h mjx-c {
  font-family: MJXZERO, MJXTEX-S1, MJXTEX-S4, MJXTEX, MJXTEX-A ! important;
}

@font-face /* 0 */ {
  font-family: MJXZERO;
  src: url("http://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Zero.woff") format("woff");
}

@font-face /* 1 */ {
  font-family: MJXTEX;
  src: url("http://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Main-Regular.woff") format("woff");
}

@font-face /* 2 */ {
  font-family: MJXTEX-B;
  src: url("http://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Main-Bold.woff") format("woff");
}

@font-face /* 3 */ {
  font-family: MJXTEX-I;
  src: url("http://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Math-Italic.woff") format("woff");
}

@font-face /* 4 */ {
  font-family: MJXTEX-MI;
  src: url("http://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Main-Italic.woff") format("woff");
}

@font-face /* 5 */ {
  font-family: MJXTEX-BI;
  src: url("http://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Math-BoldItalic.woff") format("woff");
}

@font-face /* 6 */ {
  font-family: MJXTEX-S1;
  src: url("http://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Size1-Regular.woff") format("woff");
}

@font-face /* 7 */ {
  font-family: MJXTEX-S2;
  src: url("http://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Size2-Regular.woff") format("woff");
}

@font-face /* 8 */ {
  font-family: MJXTEX-S3;
  src: url("http://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Size3-Regular.woff") format("woff");
}

@font-face /* 9 */ {
  font-family: MJXTEX-S4;
  src: url("http://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Size4-Regular.woff") format("woff");
}

@font-face /* 10 */ {
  font-family: MJXTEX-A;
  src: url("http://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_AMS-Regular.woff") format("woff");
}

@font-face /* 11 */ {
  font-family: MJXTEX-C;
  src: url("http://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Calligraphic-Regular.woff") format("woff");
}

@font-face /* 12 */ {
  font-family: MJXTEX-CB;
  src: url("http://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Calligraphic-Bold.woff") format("woff");
}

@font-face /* 13 */ {
  font-family: MJXTEX-FR;
  src: url("http://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Fraktur-Regular.woff") format("woff");
}

@font-face /* 14 */ {
  font-family: MJXTEX-FRB;
  src: url("http://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Fraktur-Bold.woff") format("woff");
}

@font-face /* 15 */ {
  font-family: MJXTEX-SS;
  src: url("http://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_SansSerif-Regular.woff") format("woff");
}

@font-face /* 16 */ {
  font-family: MJXTEX-SSB;
  src: url("http://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_SansSerif-Bold.woff") format("woff");
}

@font-face /* 17 */ {
  font-family: MJXTEX-SSI;
  src: url("http://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_SansSerif-Italic.woff") format("woff");
}

@font-face /* 18 */ {
  font-family: MJXTEX-SC;
  src: url("http://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Script-Regular.woff") format("woff");
}

@font-face /* 19 */ {
  font-family: MJXTEX-T;
  src: url("http://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Typewriter-Regular.woff") format("woff");
}

@font-face /* 20 */ {
  font-family: MJXTEX-V;
  src: url("http://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Vector-Regular.woff") format("woff");
}

@font-face /* 21 */ {
  font-family: MJXTEX-VB;
  src: url("http://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Vector-Bold.woff") format("woff");
}
</style><meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" /><meta http-equiv="Pragma" content="no-cache" /><meta http-equiv="Expires" content="0" /></head>
<body class="sfsi_2.43">
<!-- wrap START -->
<div id="wrap">
<!-- container START -->
<div id="container">
<!-- header START -->
<div id="header">
<!-- banner START -->
<!-- banner END -->
<div id="caption">
<h1 id="title"><a href="http://www.skywind.me/blog/">Skywind Inside</a></h1>
<div id="tagline">写自己的代码，让别人猜去吧</div>
</div>
<div class="fixed"></div>
</div>
<!-- header END -->
<!-- navigation START -->
<div id="navigation">
<!-- menus START -->
<ul id="menus">
<li class="page_item"><a class="home" title="Home" href="http://www.skywind.me/blog/">Home</a></li>
<li class="page_item page-item-11"><a href="/blog/topics/life">大浪淘沙</a></li>
<li class="page_item page-item-16"><a href="/blog/topics/program">编程技术</a></li>
<li class="page_item page-item-18"><a href="/blog/topics/gamedev">游戏开发</a></li>
<li class="page_item page-item-21"><a href="/blog/topics/network">网络编程</a></li>
<li class="page_item page-item-23"><a href="/blog/topics/graphics">图形编程</a></li>
<li class="page_item page-item-25"><a href="/blog/topics/ai">AI</a></li>
<li class="page_item page-item-30"><a href="/blog/topics/compile">编译</a></li>
<li class="page_item page-item-32"><a href="/blog/topics/casual">随笔</a></li>
<li class="page_item page-item-146"><a href="http://www.skywind.me/blog/guest">关于</a></li>
<li><a class="lastmenu" href="javascript:void(0);"></a></li>
</ul>
<!-- menus END -->
<!-- searchbox START -->
<div id="searchbox">
<form action="http://www.skywind.me/blog" method="get">
<div class="content">
<input type="text" class="textfield searchtip" name="s" size="24" value="" />
<input type="submit" class="button" value="" />
</div>
</form>
</div>
<script type="text/javascript">
//&lt;![CDATA[
var searchbox = MGJS.$("searchbox");
var searchtxt = MGJS.getElementsByClassName("textfield", "input", searchbox)[0];
var searchbtn = MGJS.getElementsByClassName("button", "input", searchbox)[0];
var tiptext = "Type text to search here...";
if(searchtxt.value == "" || searchtxt.value == tiptext) {
searchtxt.className += " searchtip";
searchtxt.value = tiptext;
}
searchtxt.onfocus = function(e) {
if(searchtxt.value == tiptext) {
searchtxt.value = "";
searchtxt.className = searchtxt.className.replace(" searchtip", "");
}
}
searchtxt.onblur = function(e) {
if(searchtxt.value == "") {
searchtxt.className += " searchtip";
searchtxt.value = tiptext;
}
}
searchbtn.onclick = function(e) {
if(searchtxt.value == "" || searchtxt.value == tiptext) {
return false;
}
}
//]]&gt;
</script>
<!-- searchbox END -->
<div class="fixed"></div>
</div>
<!-- navigation END -->
<!-- content START -->
<div id="content">
<!-- main START -->
<div id="main">
<div id="postpath">
<a title="Go to homepage" href="http://www.skywind.me/blog/">Home</a>
&gt; <a href="http://www.skywind.me/blog/topics/graphics" rel="category tag">图形编程</a>, <a href="http://www.skywind.me/blog/topics/program" rel="category tag">编程技术</a>		 &gt; 如何写一个软件渲染器？	</div>
<div class="post" id="post-1498">
<h2>如何写一个软件渲染器？</h2>
<div class="info">
<span class="date">August 10th, 2015</span>
<span class="author"><a href="http://www.skywind.me/blog/archives/author/skywind" title="Posts by skywind" rel="author">skywind</a></span>										<span class="addcomment"><a href="#respond">Leave a comment</a></span>
<span class="comments"><a href="#comments">Go to comments</a></span>
<div class="fixed"></div>
</div>
<div class="content">
<p>实现个简单的固定渲染管线软渲染器不算复杂，差不多700行代码就可以搞定了。之所以很多人用 D3D用的很熟，写软渲染却坑坑洼洼，主要是现在大部分讲图形的书，讲到透视投影时就是分析一下透视变换矩阵如何生成，顶点如何计算就跳到其他讲模型或者光照的部分了。</p>
<p>因为今天基本上是直接用 D3D 或者 OGL，真正光栅化的部分不了解也不影响使用，所以大部分教材都直接跳过了一大段，摄像机坐标系如何转换？三角形如何生成？CVV边缘如何检测？四维坐标如何裁剪？边缘及步长如何计算？扫描线该如何绘制？透视纹理映射具体代码该怎么写？framebuffer zbuffer 到底该怎么用？z-test 到底是该 test z 还是 w 还是 1/z 还是 1/w ？这些都没讲。</p>
<p>早年培训学生时候，我花两天时间写的一个 DEMO，今天拿出来重新调整注释一下，性能和功能当然比不过高大上的软件渲染器。但一般来讲，工程类项目代码不容易阅读，太多边界情况和太多细节优化容易让初学者迷失，这个 mini3d 的项目不做任何优化，主要目的就是为了突出主干：</p>
<p>源代码：<a href="https://github.com/skywind3000/mini3d" target="_blank">skywind3000/mini3d · GitHub</a>     <br />可执行：<a href="http://www.skywind.me/mw/images/c/c8/Mini3d.7z" target="_blank">http://www.skywind.me/mw/images/c/c8/Mini3d.7z</a></p>
<p>操作方式：左右键旋转，前后键前进后退，空格键切换模式，ESC退出。</p>
<p> </p>
<p><strong>特性介绍：</strong></p>
<ul>
<li>单个文件：源代码只有一个 mini3d.c，单个文件实现所有内容，阅读容易。 </li>
<li>独立编译：没有任何第三方库依赖，没有复杂的工程目录。 </li>
<li>模型标准：标准 D3D 坐标模型，左手系 + WORLD/VIEW/PROJECTION 三矩阵 </li>
<li>实现裁剪：简单 CVV 裁剪 </li>
<li>纹理支持：最大支持 1024 x 1024 的纹理 </li>
<li>深度缓存：使用深度缓存判断图像前后 </li>
<li>边缘计算：精确的多边形边缘覆盖计算 </li>
<li>透视贴图：透视纹理映射以及透视色彩填充 </li>
<li>实现精简：渲染部分只有 700行， 模块清晰，主干突出。 </li>
<li>详细注释：主要代码详细注释 </li>
</ul>
<p><strong>截图效果</strong></p>
<p>颜色填充</p>
<p><a href="http://www.skywind.me/blog/wp-content/uploads/2015/08/image1.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="http://www.skywind.me/blog/wp-content/uploads/2015/08/image_thumb1.png" width="614" height="480" /></a></p>
<p> </p>
<p>透视纹理映射</p>
<p><a href="http://www.skywind.me/blog/wp-content/uploads/2015/08/image2.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="http://www.skywind.me/blog/wp-content/uploads/2015/08/image_thumb2.png" width="614" height="480" /></a></p>
<p><span id="more-1498"></span></p>
<p>线框图</p>
<p><a href="http://www.skywind.me/blog/wp-content/uploads/2015/08/image3.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="http://www.skywind.me/blog/wp-content/uploads/2015/08/image_thumb3.png" width="614" height="480" /></a></p>
<p><strong></strong></p>
<p><strong></strong></p>
<p>增加光照和二次线性插值（朋友给 Mini3D加的平行光源）效果还行：</p>
<p><a href="http://www.skywind.me/blog/wp-content/uploads/2015/08/image4.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="http://www.skywind.me/blog/wp-content/uploads/2015/08/image_thumb4.png" width="614" height="480" /></a></p>
<p><strong></strong></p>
<p><strong>阅读要求：</strong></p>
<ul>
<li>看过并了解 D3D / OGL的矩阵变换。 </li>
<li>用 D3D / OGL 完成过简单程序。 </li>
</ul>
<p><strong>实现说明：</strong></p>
<ul>
<li>transform：实现坐标变换，和书本手册同 </li>
<li>vertex： 如何定义顶点？如何定义边？如何定义扫描线？如何定义渲染主体（trapezoid）？ </li>
<li>device： 设备，如何 projection，如何裁剪和归一化，如何切分三角形，如何顶点排序？ </li>
<li>trapezoid：如何生成 trape，如何生成边，如何计算步长，如何计算扫描线 </li>
<li>scanline：如何绘制扫描线，如何透视纠正，如何使用深度缓存，如何绘制 </li>
</ul>
<ol>
<ul><strong>基础练习：先前给学生的作业</strong></ul>
<ol>增加背面剔      <br />增加简单光照       <br />提供更多渲染模式       <br />实现二次线性差值的纹理读取</ol>
</ol>
<p><strong>扩展练习：给有余力的学生</strong></p>
<p>推导并证明程序中用到的所有几何知识    <br />优化顶点计算性能     <br />优化 draw_scanline 性能     <br />从 BMP/TGA 文件加载纹理     <br />载入 BSP 场景并实现漫游</p>
<p> </p>
<p><strong>其他内容</strong></p>
<p>当年还用不了 D3D 和 OGL ，开发游戏，做图形实现软件渲染是必备技能，当年机型差，连浮点数都用不了，要用定点数来计算，矩阵稍不注意就越界了。计算透视纠正还是一个比较昂贵的工作，更多游戏使用仿射纹理绘制，只是把离屏幕近的多边形切割成更小的三角形，让人看起来没有那么明显。即便到了 Quake 年代，计算 1/z 的除法也只是四个点才算一次（经过精确计算CPU周期，绘制四个点时下一个点的 1/z刚好算完），Quake 的四个点内也还是仿射纹理绘制……</p>
<p>那时显卡没普及，光软件渲染器的优化就是一个无底洞，今天有了 OGL/D3D和显卡，人的精力才能充分集中在更高层次的场景组织、层次细节、动态光照等功能上。然而有空的时候，花个一周时间坐下来了解一下这部分的大概原理，推导所用到的数学模型，也能帮助大家更好的理解底层运行机制，写出更加优化的代码来。</p>
<p>PS：光线跟踪版本的软件渲染，考虑光照的话，简单实现起来差不多 500 行，比这个要简单一些。各位有兴趣也可以尝试一下，就是简单渲染个立方体足够了。</p>
<div class="pvc_clear"></div>
<p id="pvc_stats_1498" class="pvc_stats  pvc_load_by_ajax_update" data-element-id="1498" style=""><span>
<i class="fa fa-bar-chart pvc-stats-icon small" aria-hidden="true"></i> 

2601 total views,

6 views today


</span></p>
<div class="pvc_clear"></div>
<div class="likebtn_container" style="clear:both;text-align:right;"><p><!-- LikeBtn.com BEGIN --><span class="likebtn-wrapper lb-loaded lb-style-google lb-popup-position-top lb-popup-style-light" data-identifier="post_1498" data-site_id="5cd3258a6fd08b806f60cafb" data-theme="google" data-ef_voting="push" data-style="" data-unlike_allowed="" data-show_copyright="" data-item_url="http://www.skywind.me/blog/archives/1498" data-item_title="如何写一个软件渲染器？" data-item_date="2015-08-10T02:52:12+08:00" data-engine="WordPress" data-plugin_v="2.6.17" data-prx="http://www.skywind.me/blog/wp-admin/admin-ajax.php?action=likebtn_prx" data-event_handler="likebtn_eh"><span class="likebtn-button lb-like lb-ef-push" id="lb-like-0"><span onclick="LikeBtn.vote(1, 0, event);" class="lb-a" data-lb_index="0"><i class="lb-tt lb-tooltip-tt"><i class="lb-tt-lt"></i><i class="lb-tt-rt"></i><i class="lb-tt-m">I like this</i><i class="lb-tt-mu">Unlike</i><i class="lb-tt-m2"></i><i class="lb-tt-lb"></i><i class="lb-tt-rb"></i><i class="lb-tt-a"></i></i><span class="likebtn-icon lb-like-icon"> </span><span class="likebtn-label lb-like-label">Like</span></span><span class="lb-count" data-count="4">4</span></span><span class="likebtn-button lb-dislike  lb-ef-push" id="lb-dislike-0"><span onclick="LikeBtn.vote(-1, 0, event);" class="lb-a" data-lb_index="0"><i class="lb-tt lb-tooltip-tt"><i class="lb-tt-lt"></i><i class="lb-tt-rt"></i><i class="lb-tt-m">I dislike this</i><i class="lb-tt-mu">Undislike</i><i class="lb-tt-m2"></i><i class="lb-tt-lb"></i><i class="lb-tt-rb"></i><i class="lb-tt-a"></i></i><span class="likebtn-icon lb-dislike-icon"> </span></span><span class="lb-count" data-count="2">2</span></span></span><!-- LikeBtn.com END --></p></div>			<div class="fixed"></div>
</div>
<div class="under">
<span class="categories">Categories: </span><span><a href="http://www.skywind.me/blog/topics/graphics" rel="category tag">图形编程</a>, <a href="http://www.skywind.me/blog/topics/program" rel="category tag">编程技术</a></span>			<span class="tags">Tags: </span><span><a href="http://www.skywind.me/blog/tags/%e5%9b%be%e5%bd%a2" rel="tag">图形</a></span>		</div>
</div>
<!-- related posts START -->
<!-- related posts END -->
<script type="text/javascript" src="http://www.skywind.me/blog/wp-content/themes/inove/js/comment.js"></script>
<div id="comments">
<div id="cmtswitcher">
<a id="commenttab" class="curtab" href="javascript:void(0);" onclick="MGJS.switchTab('thecomments,commentnavi', 'thetrackbacks', 'commenttab', 'curtab', 'trackbacktab', 'tab');">Comments (15)</a>
<a id="trackbacktab" class="tab" href="javascript:void(0);" onclick="MGJS.switchTab('thetrackbacks', 'thecomments,commentnavi', 'trackbacktab', 'curtab', 'commenttab', 'tab');">Trackbacks (0)</a>
<span class="addcomment"><a href="#respond">Leave a comment</a></span>
<span class="addtrackback"><a href="http://www.skywind.me/blog/archives/1498/trackback">Trackback</a></span>
<div class="fixed"></div>
</div>
<div id="commentlist">
<!-- comments START -->
<ol id="thecomments">
<li class="comment regularcomment" id="comment-4712">
<div class="author">
<div class="pic">
<img alt="" src="http://1.gravatar.com/avatar/4f9b57a28e1dae3d2432c9f999d8e827?s=32&amp;d=mm&amp;r=g" srcset="http://1.gravatar.com/avatar/4f9b57a28e1dae3d2432c9f999d8e827?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" />			</div>
<div class="name">
<span id="commentauthor-4712">
chris
</span>
</div>
</div>
<div class="info">
<div class="date">
August 25th, 2015 at 12:43					 | <a href="#comment-4712">#1</a>
</div>
<div class="act">
<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-4712', 'comment-4712', 'comment');">Reply</a> | 
<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-4712', 'comment-4712', 'commentbody-4712', 'comment');">Quote</a>
</div>
<div class="fixed"></div>
<div class="content">
<div id="commentbody-4712">
<p>帅哥，你这个真的是业界良心。不过可以不可以写篇文章配合代码讲解讲解原理性的东西腻</p>
</div>
</div>
</div>
<div class="fixed"></div>
</li><!-- #comment-## -->
<li class="comment admincomment" id="comment-5222">
<div class="author">
<div class="pic">
<img alt="" src="http://0.gravatar.com/avatar/317acfa0b5f7dd5cb8163103e2bfb3f6?s=32&amp;d=mm&amp;r=g" srcset="http://0.gravatar.com/avatar/317acfa0b5f7dd5cb8163103e2bfb3f6?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" />			</div>
<div class="name">
<a id="commentauthor-5222" class="url" href="http://www.skywind.me/blog" rel="external nofollow">
skywind
</a>
</div>
</div>
<div class="info">
<div class="date">
August 31st, 2015 at 08:59					 | <a href="#comment-5222">#2</a>
</div>
<div class="act">
<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-5222', 'comment-5222', 'comment');">Reply</a> | 
<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-5222', 'comment-5222', 'commentbody-5222', 'comment');">Quote</a>
</div>
<div class="fixed"></div>
<div class="content">
<div id="commentbody-5222">
<p><a href="#comment-4712" rel="nofollow">@chris </a><br />
看懂这个之前先要熟悉 D3D 的基本原理呀，我这个注释已经满详细的了嘛，如果需要，等我有空再整理下吧。</p>
</div>
</div>
</div>
<div class="fixed"></div>
</li><!-- #comment-## -->
<li class="comment regularcomment" id="comment-5376">
<div class="author">
<div class="pic">
<img alt="" src="http://1.gravatar.com/avatar/dec8da3fa4b55d82c5ce72e3844eb443?s=32&amp;d=mm&amp;r=g" srcset="http://1.gravatar.com/avatar/dec8da3fa4b55d82c5ce72e3844eb443?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" />			</div>
<div class="name">
<span id="commentauthor-5376">
IceCoffee
</span>
</div>
</div>
<div class="info">
<div class="date">
September 2nd, 2015 at 09:32					 | <a href="#comment-5376">#3</a>
</div>
<div class="act">
<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-5376', 'comment-5376', 'comment');">Reply</a> | 
<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-5376', 'comment-5376', 'commentbody-5376', 'comment');">Quote</a>
</div>
<div class="fixed"></div>
<div class="content">
<div id="commentbody-5376">
<p>很好的教程,希望楼主有空再做个详细点的解释哦,照顾一下没看过矩阵变换的同学:-)</p>
</div>
</div>
</div>
<div class="fixed"></div>
</li><!-- #comment-## -->
<li class="comment regularcomment" id="comment-8160">
<div class="author">
<div class="pic">
<img alt="" src="http://2.gravatar.com/avatar/5ca559866aa96ea6dbc21bbc27cc1ebc?s=32&amp;d=mm&amp;r=g" srcset="http://2.gravatar.com/avatar/5ca559866aa96ea6dbc21bbc27cc1ebc?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" />			</div>
<div class="name">
<span id="commentauthor-8160">
nobody
</span>
</div>
</div>
<div class="info">
<div class="date">
October 28th, 2015 at 18:43					 | <a href="#comment-8160">#4</a>
</div>
<div class="act">
<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-8160', 'comment-8160', 'comment');">Reply</a> | 
<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-8160', 'comment-8160', 'commentbody-8160', 'comment');">Quote</a>
</div>
<div class="fixed"></div>
<div class="content">
<div id="commentbody-8160">
<blockquote cite="#commentbody-5376"><p>
<strong><a href="#comment-5376" rel="nofollow">IceCoffee </a> :</strong>很好的教程,希望楼主有空再做个详细点的解释哦,照顾一下没看过矩阵变换的同学:-)</p></blockquote>
<p>嗯，D3D有大量教程，进行这个课程前，起码要用D3D写过旋转立方体这样简单的DEMO，并且弄清楚背后的数学啊。</p>
</div>
</div>
</div>
<div class="fixed"></div>
</li><!-- #comment-## -->
<li class="comment regularcomment" id="comment-9191">
<div class="author">
<div class="pic">
<img alt="" src="http://1.gravatar.com/avatar/4f9b57a28e1dae3d2432c9f999d8e827?s=32&amp;d=mm&amp;r=g" srcset="http://1.gravatar.com/avatar/4f9b57a28e1dae3d2432c9f999d8e827?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" />			</div>
<div class="name">
<span id="commentauthor-9191">
chris
</span>
</div>
</div>
<div class="info">
<div class="date">
December 3rd, 2015 at 11:09					 | <a href="#comment-9191">#5</a>
</div>
<div class="act">
<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-9191', 'comment-9191', 'comment');">Reply</a> | 
<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-9191', 'comment-9191', 'commentbody-9191', 'comment');">Quote</a>
</div>
<div class="fixed"></div>
<div class="content">
<div id="commentbody-9191">
<p><a href="#comment-5376" rel="nofollow">@IceCoffee </a><br />
我把d3d涉及 的矩阵知识学了一遍，知道了相机具体存在的形式，旋转，平移，缩放，投影。<br />
现停在 扫描线和帧缓存这里 ，没有完全理解扫描线是什么</p>
</div>
</div>
</div>
<div class="fixed"></div>
</li><!-- #comment-## -->
<li class="comment regularcomment" id="comment-9192">
<div class="author">
<div class="pic">
<img alt="" src="http://1.gravatar.com/avatar/4f9b57a28e1dae3d2432c9f999d8e827?s=32&amp;d=mm&amp;r=g" srcset="http://1.gravatar.com/avatar/4f9b57a28e1dae3d2432c9f999d8e827?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" />			</div>
<div class="name">
<span id="commentauthor-9192">
chris
</span>
</div>
</div>
<div class="info">
<div class="date">
December 3rd, 2015 at 11:12					 | <a href="#comment-9192">#6</a>
</div>
<div class="act">
<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-9192', 'comment-9192', 'comment');">Reply</a> | 
<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-9192', 'comment-9192', 'commentbody-9192', 'comment');">Quote</a>
</div>
<div class="fixed"></div>
<div class="content">
<div id="commentbody-9192">
<p>帅哥有时间 搞一个稍微详细的图，描述下渲染的执行过程o(∩_∩)o</p>
</div>
</div>
</div>
<div class="fixed"></div>
</li><!-- #comment-## -->
<li class="comment regularcomment" id="comment-11162">
<div class="author">
<div class="pic">
<img alt="" src="http://2.gravatar.com/avatar/2b473a73b5ac690b525a0e9652f423d6?s=32&amp;d=mm&amp;r=g" srcset="http://2.gravatar.com/avatar/2b473a73b5ac690b525a0e9652f423d6?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" />			</div>
<div class="name">
<span id="commentauthor-11162">
Shihira Fung
</span>
</div>
</div>
<div class="info">
<div class="date">
February 17th, 2016 at 22:38					 | <a href="#comment-11162">#7</a>
</div>
<div class="act">
<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-11162', 'comment-11162', 'comment');">Reply</a> | 
<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-11162', 'comment-11162', 'commentbody-11162', 'comment');">Quote</a>
</div>
<div class="fixed"></div>
<div class="content">
<div id="commentbody-11162">
<p>你好。</p>
<p>有点问题想请教一下。深度测试那里，为什么是用rhw来做，而不是z？</p>
</div>
</div>
</div>
<div class="fixed"></div>
</li><!-- #comment-## -->
<li class="comment admincomment" id="comment-11184">
<div class="author">
<div class="pic">
<img alt="" src="http://0.gravatar.com/avatar/317acfa0b5f7dd5cb8163103e2bfb3f6?s=32&amp;d=mm&amp;r=g" srcset="http://0.gravatar.com/avatar/317acfa0b5f7dd5cb8163103e2bfb3f6?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" />			</div>
<div class="name">
<a id="commentauthor-11184" class="url" href="http://www.skywind.me/blog" rel="external nofollow">
skywind
</a>
</div>
</div>
<div class="info">
<div class="date">
February 18th, 2016 at 19:20					 | <a href="#comment-11184">#8</a>
</div>
<div class="act">
<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-11184', 'comment-11184', 'comment');">Reply</a> | 
<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-11184', 'comment-11184', 'commentbody-11184', 'comment');">Quote</a>
</div>
<div class="fixed"></div>
<div class="content">
<div id="commentbody-11184">
<p><a href="#comment-11162" rel="nofollow">@Shihira Fung </a><br />
实际是w缓存，经过projection矩阵乘法后，w和z是成线性关系的（具体见透视投影矩阵生成），固定管线标准模型中，都是用w进行缓存的，而rhw是保存着1/w的值，在具体绘制的时候才会计算 w = 1/rhw，除法代价大，因此直接用1/w进行判断，越远的点rhw值越小，越近的点，rhw值越大，所以深度缓存中rhw越大的值覆盖越小的值，因为他们代表越近的像素点。这样清空深度缓存时填写0就行了。不需要笨拙的用传统的z判断，初始化成一个很大的值，每次判断更小的值被保留下来。</p>
</div>
</div>
</div>
<div class="fixed"></div>
</li><!-- #comment-## -->
<li class="comment regularcomment" id="comment-12582">
<div class="author">
<div class="pic">
<img alt="" src="http://1.gravatar.com/avatar/d09a161d9fdb9f877d07da78992f71a2?s=32&amp;d=mm&amp;r=g" srcset="http://1.gravatar.com/avatar/d09a161d9fdb9f877d07da78992f71a2?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" />			</div>
<div class="name">
<span id="commentauthor-12582">
Christal
</span>
</div>
</div>
<div class="info">
<div class="date">
April 8th, 2016 at 23:17					 | <a href="#comment-12582">#9</a>
</div>
<div class="act">
<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-12582', 'comment-12582', 'comment');">Reply</a> | 
<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-12582', 'comment-12582', 'commentbody-12582', 'comment');">Quote</a>
</div>
<div class="fixed"></div>
<div class="content">
<div id="commentbody-12582">
<p>博主，请教一个问题。<br />
假如我要给Mini3D添加光照，而且不是Gourand是Phong，也就是要给每个pixel计算法向量。因为每个pixel是在线性插值的时候计算出来的，这个时候pixel的坐标x和y分量是在屏幕空间中的，但是Phong光照模型计算需要计算入射向量和观察点到该点的向量，光源坐标和光差点坐标是在世界空间的，这样来怎么计算入射向量和观察点到该点的向量呢</p>
</div>
</div>
</div>
<div class="fixed"></div>
</li><!-- #comment-## -->
<li class="comment regularcomment" id="comment-12584">
<div class="author">
<div class="pic">
<img alt="" src="http://1.gravatar.com/avatar/d09a161d9fdb9f877d07da78992f71a2?s=32&amp;d=mm&amp;r=g" srcset="http://1.gravatar.com/avatar/d09a161d9fdb9f877d07da78992f71a2?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" />			</div>
<div class="name">
<span id="commentauthor-12584">
Christal
</span>
</div>
</div>
<div class="info">
<div class="date">
April 9th, 2016 at 01:03					 | <a href="#comment-12584">#10</a>
</div>
<div class="act">
<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-12584', 'comment-12584', 'comment');">Reply</a> | 
<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-12584', 'comment-12584', 'commentbody-12584', 'comment');">Quote</a>
</div>
<div class="fixed"></div>
<div class="content">
<div id="commentbody-12584">
<p>请教博主一个问题：<br />
假如我要给Mini3D添加Phong光照。Phong光照需要计算每一个pixel的入射光向量和观察点到pixel的向量，但是由于在求pixel的时候已经是在屏幕空间中进行线性插值了，这个时候求出来的x和y分量不能用来求入射光向量和观察点到该点的向量，该怎么办呢？</p>
</div>
</div>
</div>
<div class="fixed"></div>
</li><!-- #comment-## -->
<li class="comment regularcomment" id="comment-14291">
<div class="author">
<div class="pic">
<img alt="" src="http://0.gravatar.com/avatar/9bf14de300e2c11b76810f325bed0268?s=32&amp;d=mm&amp;r=g" srcset="http://0.gravatar.com/avatar/9bf14de300e2c11b76810f325bed0268?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" />			</div>
<div class="name">
<span id="commentauthor-14291">
aceyan
</span>
</div>
</div>
<div class="info">
<div class="date">
June 13th, 2016 at 15:39					 | <a href="#comment-14291">#11</a>
</div>
<div class="act">
<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-14291', 'comment-14291', 'comment');">Reply</a> | 
<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-14291', 'comment-14291', 'commentbody-14291', 'comment');">Quote</a>
</div>
<div class="fixed"></div>
<div class="content">
<div id="commentbody-14291">
<p><a href="#comment-12584" rel="nofollow">@Christal  </a><br />
你想做phong像素光照的话实际上是这样一个过程：<br />
顶点程序中保存转换到世界空间的法线（如何你打算在世界空间计算光照的话），保存世界空间顶点位置，传递到片段程序。<br />
片段程序中利用顶点传递的法线和顶点位置进行光照，这样光照还是在世界空间进行的呀，放到顶点里面计算是为了让法线得到透视校正插值，这样的光照效果更加精确。</p>
</div>
</div>
</div>
<div class="fixed"></div>
</li><!-- #comment-## -->
<li class="comment admincomment" id="comment-17735">
<div class="author">
<div class="pic">
<img alt="" src="http://0.gravatar.com/avatar/317acfa0b5f7dd5cb8163103e2bfb3f6?s=32&amp;d=mm&amp;r=g" srcset="http://0.gravatar.com/avatar/317acfa0b5f7dd5cb8163103e2bfb3f6?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" />			</div>
<div class="name">
<a id="commentauthor-17735" class="url" href="http://www.skywind.me" rel="external nofollow">
skywind
</a>
</div>
</div>
<div class="info">
<div class="date">
August 18th, 2016 at 17:29					 | <a href="#comment-17735">#12</a>
</div>
<div class="act">
<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-17735', 'comment-17735', 'comment');">Reply</a> | 
<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-17735', 'comment-17735', 'commentbody-17735', 'comment');">Quote</a>
</div>
<div class="fixed"></div>
<div class="content">
<div id="commentbody-17735">
<p><a href="#comment-12584" rel="nofollow">@Christal </a><br />
很简单，你需要将三维空间的 x,y,z 一起放入插值，即（一开始/w），进行屏幕空间插值，插值完后再* w。这个问题我新文章里面有解释：http://www.skywind.me/blog/archives/1828 类似 OpenGL的 varying 的标准插值方法，希望能帮助到你，给 mini3d 添加 varying 很简单。</p>
</div>
</div>
</div>
<div class="fixed"></div>
</li><!-- #comment-## -->
<li class="comment regularcomment" id="comment-30730">
<div class="author">
<div class="pic">
<img alt="" src="http://0.gravatar.com/avatar/6e7894779f3e6387ba5d56d073ee721e?s=32&amp;d=mm&amp;r=g" srcset="http://0.gravatar.com/avatar/6e7894779f3e6387ba5d56d073ee721e?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" />			</div>
<div class="name">
<span id="commentauthor-30730">
Shady
</span>
</div>
</div>
<div class="info">
<div class="date">
July 27th, 2017 at 10:14					 | <a href="#comment-30730">#13</a>
</div>
<div class="act">
<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-30730', 'comment-30730', 'comment');">Reply</a> | 
<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-30730', 'comment-30730', 'commentbody-30730', 'comment');">Quote</a>
</div>
<div class="fixed"></div>
<div class="content">
<div id="commentbody-30730">
<p>博主，请教一个问题。<br />
我看在扫描线绘制的时候，顶点属性进行了透视矫正插值（z(b1/z1 + t(b2/z2 – b1/z1))），但是在生成水平扫描线时，扫描线的左右两端点属性是直接线性插值的结果（b1 + （1 – t）b2）），没有进行透视矫正。不知道是不是我的理解有问题，希望博主指点一下。</p>
</div>
</div>
</div>
<div class="fixed"></div>
</li><!-- #comment-## -->
<li class="comment regularcomment" id="comment-30731">
<div class="author">
<div class="pic">
<img alt="" src="http://1.gravatar.com/avatar/4d8c8c8f7faa2350415e0d00ea46386d?s=32&amp;d=mm&amp;r=g" srcset="http://1.gravatar.com/avatar/4d8c8c8f7faa2350415e0d00ea46386d?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" />			</div>
<div class="name">
<span id="commentauthor-30731">
demon
</span>
</div>
</div>
<div class="info">
<div class="date">
July 27th, 2017 at 10:23					 | <a href="#comment-30731">#14</a>
</div>
<div class="act">
<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-30731', 'comment-30731', 'comment');">Reply</a> | 
<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-30731', 'comment-30731', 'commentbody-30731', 'comment');">Quote</a>
</div>
<div class="fixed"></div>
<div class="content">
<div id="commentbody-30731">
<p>博主，请教一个问题。<br />
我看在扫描线绘制的时候，顶点属性进行了透视矫正插值（z(b1/z1 + t(b2/z2 – b1/z1))），但是在生成水平扫描线时，扫描线的左右两端点属性是直接线性插值的结果（b1 + （1 – t）b2）），没有进行透视矫正。不知道是不是我的理解有问题，希望博主指点一下。</p>
</div>
</div>
</div>
<div class="fixed"></div>
</li><!-- #comment-## -->
<li class="comment regularcomment" id="comment-30733">
<div class="author">
<div class="pic">
<img alt="" src="http://0.gravatar.com/avatar/6e7894779f3e6387ba5d56d073ee721e?s=32&amp;d=mm&amp;r=g" srcset="http://0.gravatar.com/avatar/6e7894779f3e6387ba5d56d073ee721e?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" />			</div>
<div class="name">
<span id="commentauthor-30733">
Shady
</span>
</div>
</div>
<div class="info">
<div class="date">
July 27th, 2017 at 10:25					 | <a href="#comment-30733">#15</a>
</div>
<div class="act">
<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-30733', 'comment-30733', 'comment');">Reply</a> | 
<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-30733', 'comment-30733', 'commentbody-30733', 'comment');">Quote</a>
</div>
<div class="fixed"></div>
<div class="content">
<div id="commentbody-30733">
<p>我看在扫描线绘制的时候，顶点属性进行了透视矫正插值（z(b1/z1 + t(b2/z2 – b1/z1))），但是在生成水平扫描线时，扫描线的左右两端点属性是直接线性插值的结果（b1 + （1 – t）b2）），没有进行透视矫正。不知道是不是我的理解有问题，希望博主指点一下。</p>
</div>
</div>
</div>
<div class="fixed"></div>
</li><!-- #comment-## -->
</ol>
<!-- comments END -->
<!-- trackbacks START -->
<ol id="thetrackbacks">
<li class="messagebox">
No trackbacks yet.				</li>
</ol>
<div class="fixed"></div>
<!-- trackbacks END -->
</div>
</div>
<form action="http://www.skywind.me/blog/wp-comments-post.php" method="post" id="commentform">
<div id="respond">
<div id="author_info">
<div class="row">
<input type="text" name="author" id="author" class="textfield" value="" size="24" tabindex="1" />
<label for="author" class="small">Name (required)</label>
</div>
<div class="row">
<input type="text" name="email" id="email" class="textfield" value="" size="24" tabindex="2" />
<label for="email" class="small">E-Mail (will not be published) (required)</label>
</div>
<div class="row">
<input type="text" name="url" id="url" class="textfield" value="" size="24" tabindex="3" />
<label for="url" class="small">Website</label>
</div>
</div>
<!-- comment input -->
<div class="row">
<textarea name="comment" id="comment" tabindex="4" rows="8" cols="50"></textarea>
</div>
<!-- comment submit and rss -->
<div id="submitbox">
<a class="feed" href="http://www.skywind.me/blog/comments/feed">Subscribe to comments feed</a>
<div class="submitbutton">
<input name="submit" type="submit" id="submit" class="button" tabindex="5" value="Submit Comment" />
</div>
<input type="hidden" name="comment_post_ID" value="1498" />
<div class="fixed"></div>
</div>
</div>
<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="090e0357e8" /></p><p style="display: none;"></p>	<input type="hidden" id="ak_js" name="ak_js" value="1619510087800" /></form>
<div id="postnavi">
<span class="prev"><a href="http://www.skywind.me/blog/archives/1545" rel="next">Android 命令行调试 C/C++  程序</a></span>
<span class="next"><a href="http://www.skywind.me/blog/archives/1480" rel="prev">如何设计一个内存分配器？</a></span>
<div class="fixed"></div>
</div>
                                	</div>
<!-- main END -->
<!-- sidebar START -->
<div id="sidebar">
<!-- sidebar north START -->
<div id="northsidebar" class="sidebar">
<!-- feeds -->
<div class="widget widget_feeds">
<div class="content">
<div id="subscribe"><a rel="external nofollow" id="feedrss" title="Subscribe to this blog..." href="http://www.skywind.me/blog/feed"><abbr title="Really Simple Syndication">RSS</abbr></a><ul id="feed_readers" style="visibility: hidden; display: block;"><li id="google_reader"><a rel="external nofollow" class="reader" title="Subscribe with Google" href="http://fusion.google.com/add?feedurl=http://www.skywind.me/blog/feed"><span>Google</span></a></li><li id="youdao_reader"><a rel="external nofollow" class="reader" title="Subscribe with Youdao" href="http://reader.youdao.com/#url=http://www.skywind.me/blog/feed"><span>Youdao</span></a></li><li id="xianguo_reader"><a rel="external nofollow" class="reader" title="Subscribe with Xian Guo" href="http://www.xianguo.com/subscribe.php?url=http://www.skywind.me/blog/feed"><span>Xian Guo</span></a></li><li id="zhuaxia_reader"><a rel="external nofollow" class="reader" title="Subscribe with Zhua Xia" href="http://www.zhuaxia.com/add_channel.php?url=http://www.skywind.me/blog/feed"><span>Zhua Xia</span></a></li><li id="yahoo_reader"><a rel="external nofollow" class="reader" title="Subscribe with My Yahoo!" href="http://add.my.yahoo.com/rss?url=http://www.skywind.me/blog/feed"><span>My Yahoo!</span></a></li><li id="newsgator_reader"><a rel="external nofollow" class="reader" title="Subscribe with newsgator" href="http://www.newsgator.com/ngs/subscriber/subfext.aspx?url=http://www.skywind.me/blog/feed"><span>newsgator</span></a></li><li id="bloglines_reader"><a rel="external nofollow" class="reader" title="Subscribe with Bloglines" href="http://www.bloglines.com/sub/http://www.skywind.me/blog/feed"><span>Bloglines</span></a></li><li id="inezha_reader"><a rel="external nofollow" class="reader last" title="Subscribe with iNezha" href="http://inezha.com/add?url=http://www.skywind.me/blog/feed"><span>iNezha</span></a></li></ul></div>
<div class="fixed"></div>
</div>
</div>
<!-- showcase -->
<!-- posts -->
<div class="widget">
<h3>Recent Posts</h3>
<ul>
<li><a href="http://www.skywind.me/blog/archives/2554">如何长时间保存重要数据？</a></li><li><a href="http://www.skywind.me/blog/archives/2343">用 Vim/VsCode 来写 WordPress 博客</a></li><li><a href="http://www.skywind.me/blog/archives/2308">kNN 的花式用法</a></li><li><a href="http://www.skywind.me/blog/archives/2250">如何实现和优化 SVM（支持向量机）？</a></li><li><a href="http://www.skywind.me/blog/archives/2542">内网穿透：在公网访问你家的 NAS</a></li><li><a href="http://www.skywind.me/blog/archives/2546">SSH 命令的三种代理功能（-L/-R/-D）</a></li><li><a href="http://www.skywind.me/blog/archives/2229">别让 cd 浪费你的时间</a></li><li><a href="http://www.skywind.me/blog/archives/2538">Nas 系统的虚拟化方案</a></li><li><a href="http://www.skywind.me/blog/archives/2530">KVM 虚拟化环境搭建 – WebVirtMgr</a></li><li><a href="http://www.skywind.me/blog/archives/2549">常用公有云的替换方案</a></li>		</ul>
</div>
<!-- recent comments -->
<!-- tag cloud -->
<div id="tag_cloud" class="widget">
<h3>Tag Cloud</h3>
<a href="http://www.skywind.me/blog/tags/ai-2" class="tag-cloud-link tag-link-45 tag-link-position-1" style="font-size: 13.591397849462pt;" aria-label="AI (8 items)">AI</a>
<a href="http://www.skywind.me/blog/tags/android" class="tag-cloud-link tag-link-52 tag-link-position-2" style="font-size: 9.5483870967742pt;" aria-label="Android (2 items)">Android</a>
<a href="http://www.skywind.me/blog/tags/as3" class="tag-cloud-link tag-link-37 tag-link-position-3" style="font-size: 9.5483870967742pt;" aria-label="AS3 (2 items)">AS3</a>
<a href="http://www.skywind.me/blog/tags/c" class="tag-cloud-link tag-link-49 tag-link-position-4" style="font-size: 12.731182795699pt;" aria-label="C++ (6 items)">C++</a>
<a href="http://www.skywind.me/blog/tags/cygwin" class="tag-cloud-link tag-link-47 tag-link-position-5" style="font-size: 8pt;" aria-label="cygwin (1 item)">cygwin</a>
<a href="http://www.skywind.me/blog/tags/dos" class="tag-cloud-link tag-link-20 tag-link-position-6" style="font-size: 10.58064516129pt;" aria-label="Dos (3 items)">Dos</a>
<a href="http://www.skywind.me/blog/tags/kcp" class="tag-cloud-link tag-link-54 tag-link-position-7" style="font-size: 8pt;" aria-label="KCP (1 item)">KCP</a>
<a href="http://www.skywind.me/blog/tags/linux" class="tag-cloud-link tag-link-60 tag-link-position-8" style="font-size: 13.591397849462pt;" aria-label="Linux (8 items)">Linux</a>
<a href="http://www.skywind.me/blog/tags/nas" class="tag-cloud-link tag-link-70 tag-link-position-9" style="font-size: 9.5483870967742pt;" aria-label="Nas (2 items)">Nas</a>
<a href="http://www.skywind.me/blog/tags/p2p" class="tag-cloud-link tag-link-42 tag-link-position-10" style="font-size: 8pt;" aria-label="P2P (1 item)">P2P</a>
<a href="http://www.skywind.me/blog/tags/python" class="tag-cloud-link tag-link-32 tag-link-position-11" style="font-size: 9.5483870967742pt;" aria-label="Python (2 items)">Python</a>
<a href="http://www.skywind.me/blog/tags/udp" class="tag-cloud-link tag-link-69 tag-link-position-12" style="font-size: 8pt;" aria-label="Udp (1 item)">Udp</a>
<a href="http://www.skywind.me/blog/tags/vim" class="tag-cloud-link tag-link-57 tag-link-position-13" style="font-size: 16pt;" aria-label="Vim (16 items)">Vim</a>
<a href="http://www.skywind.me/blog/tags/win32" class="tag-cloud-link tag-link-24 tag-link-position-14" style="font-size: 8pt;" aria-label="Win32 (1 item)">Win32</a>
<a href="http://www.skywind.me/blog/tags/%e4%bc%98%e5%8c%96" class="tag-cloud-link tag-link-43 tag-link-position-15" style="font-size: 12.129032258065pt;" aria-label="优化 (5 items)">优化</a>
<a href="http://www.skywind.me/blog/tags/%e5%88%9b%e4%b8%9a" class="tag-cloud-link tag-link-64 tag-link-position-16" style="font-size: 11.440860215054pt;" aria-label="创业 (4 items)">创业</a>
<a href="http://www.skywind.me/blog/tags/%e5%90%8c%e6%ad%a5" class="tag-cloud-link tag-link-28 tag-link-position-17" style="font-size: 11.440860215054pt;" aria-label="同步 (4 items)">同步</a>
<a href="http://www.skywind.me/blog/tags/%e5%91%bd%e4%bb%a4%e8%a1%8c" class="tag-cloud-link tag-link-66 tag-link-position-18" style="font-size: 13.591397849462pt;" aria-label="命令行 (8 items)">命令行</a>
<a href="http://www.skywind.me/blog/tags/%e5%9b%be%e5%bd%a2" class="tag-cloud-link tag-link-41 tag-link-position-19" style="font-size: 15.311827956989pt;" aria-label="图形 (13 items)">图形</a>
<a href="http://www.skywind.me/blog/tags/%e5%b0%8f%e6%b8%b8%e6%88%8f" class="tag-cloud-link tag-link-23 tag-link-position-20" style="font-size: 9.5483870967742pt;" aria-label="小游戏 (2 items)">小游戏</a>
<a href="http://www.skywind.me/blog/tags/%e6%8a%97%e9%94%af%e9%bd%bf" class="tag-cloud-link tag-link-39 tag-link-position-21" style="font-size: 9.5483870967742pt;" aria-label="抗锯齿 (2 items)">抗锯齿</a>
<a href="http://www.skywind.me/blog/tags/%e6%b1%87%e7%bc%96" class="tag-cloud-link tag-link-31 tag-link-position-22" style="font-size: 14.021505376344pt;" aria-label="汇编 (9 items)">汇编</a>
<a href="http://www.skywind.me/blog/tags/%e6%bc%94%e7%a4%ba" class="tag-cloud-link tag-link-25 tag-link-position-23" style="font-size: 12.731182795699pt;" aria-label="演示 (6 items)">演示</a>
<a href="http://www.skywind.me/blog/tags/%e7%9f%a2%e9%87%8f%e4%bd%9c%e5%9b%be" class="tag-cloud-link tag-link-40 tag-link-position-24" style="font-size: 8pt;" aria-label="矢量作图 (1 item)">矢量作图</a>
<a href="http://www.skywind.me/blog/tags/%e7%9f%a5%e4%b9%8e" class="tag-cloud-link tag-link-48 tag-link-position-25" style="font-size: 9.5483870967742pt;" aria-label="知乎 (2 items)">知乎</a>
<a href="http://www.skywind.me/blog/tags/%e7%ad%96%e5%88%92" class="tag-cloud-link tag-link-35 tag-link-position-26" style="font-size: 9.5483870967742pt;" aria-label="策划 (2 items)">策划</a>
<a href="http://www.skywind.me/blog/tags/%e7%ae%97%e6%b3%95" class="tag-cloud-link tag-link-33 tag-link-position-27" style="font-size: 14.021505376344pt;" aria-label="算法 (9 items)">算法</a>
<a href="http://www.skywind.me/blog/tags/%e7%ae%a1%e7%90%86" class="tag-cloud-link tag-link-65 tag-link-position-28" style="font-size: 10.58064516129pt;" aria-label="管理 (3 items)">管理</a>
<a href="http://www.skywind.me/blog/tags/%e7%b3%bb%e7%bb%9f%e5%bc%80%e5%8f%91" class="tag-cloud-link tag-link-51 tag-link-position-29" style="font-size: 12.129032258065pt;" aria-label="系统开发 (5 items)">系统开发</a>
<a href="http://www.skywind.me/blog/tags/%e7%bd%91%e7%bb%9c" class="tag-cloud-link tag-link-27 tag-link-position-30" style="font-size: 14.709677419355pt;" aria-label="网络 (11 items)">网络</a>
<a href="http://www.skywind.me/blog/tags/%e7%bf%bb%e8%af%91" class="tag-cloud-link tag-link-36 tag-link-position-31" style="font-size: 10.58064516129pt;" aria-label="翻译 (3 items)">翻译</a>
<a href="http://www.skywind.me/blog/tags/%e8%99%9a%e6%8b%9f%e6%9c%ba" class="tag-cloud-link tag-link-17 tag-link-position-32" style="font-size: 10.58064516129pt;" aria-label="虚拟机 (3 items)">虚拟机</a>
<a href="http://www.skywind.me/blog/tags/%e8%a7%86%e9%a2%91" class="tag-cloud-link tag-link-53 tag-link-position-33" style="font-size: 10.58064516129pt;" aria-label="视频 (3 items)">视频</a>
<a href="http://www.skywind.me/blog/tags/%e8%ae%b2%e4%b9%89" class="tag-cloud-link tag-link-44 tag-link-position-34" style="font-size: 12.129032258065pt;" aria-label="讲义 (5 items)">讲义</a>
<a href="http://www.skywind.me/blog/tags/%e8%af%8d%e6%b3%95%e5%88%86%e6%9e%90" class="tag-cloud-link tag-link-15 tag-link-position-35" style="font-size: 12.129032258065pt;" aria-label="词法分析 (5 items)">词法分析</a>
<a href="http://www.skywind.me/blog/tags/%e8%af%ad%e6%b3%95%e5%88%86%e6%9e%90" class="tag-cloud-link tag-link-18 tag-link-position-36" style="font-size: 10.58064516129pt;" aria-label="语法分析 (3 items)">语法分析</a>
<a href="http://www.skywind.me/blog/tags/%e8%b6%b3%e8%bf%b9" class="tag-cloud-link tag-link-46 tag-link-position-37" style="font-size: 12.731182795699pt;" aria-label="足迹 (6 items)">足迹</a>
<a href="http://www.skywind.me/blog/tags/%e9%97%b2%e8%81%8a" class="tag-cloud-link tag-link-29 tag-link-position-38" style="font-size: 14.709677419355pt;" aria-label="闲聊 (11 items)">闲聊</a>
<a href="http://www.skywind.me/blog/tags/%e9%9a%8f%e7%ac%94" class="tag-cloud-link tag-link-58 tag-link-position-39" style="font-size: 13.591397849462pt;" aria-label="随笔 (8 items)">随笔</a>	</div>
</div>
<!-- sidebar north END -->
<div id="centersidebar">
<!-- sidebar east START -->
<div id="eastsidebar" class="sidebar">
<div id="linkcat-2" class="widget widget_links"><h3>Links</h3>
<ul class="xoxo blogroll">
<li><a href="https://twitter.com/skywind3000" rel="me" title="我的推特首页" target="_blank">Twitter</a></li>
<li><a href="https://zhihu.com/people/skywind3000" rel="me" title="我的知乎首页" target="_blank">知乎</a></li>
</ul>
</div>
</div>
<!-- sidebar east END -->
<!-- sidebar west START -->
<div id="westsidebar" class="sidebar">
<div id="categories-4" class="widget widget_categories"><h3>Categories</h3>		<ul>
<li class="cat-item cat-item-5"><a href="http://www.skywind.me/blog/topics/ai">人工智能</a> (9)
</li>
<li class="cat-item cat-item-4"><a href="http://www.skywind.me/blog/topics/graphics">图形编程</a> (22)
</li>
<li class="cat-item cat-item-7"><a href="http://www.skywind.me/blog/topics/life">大浪淘沙</a> (19)
</li>
<li class="cat-item cat-item-13"><a href="http://www.skywind.me/blog/topics/opensrc">开源项目</a> (8)
</li>
<li class="cat-item cat-item-1"><a href="http://www.skywind.me/blog/topics/uncategorized">未分类</a> (16)
</li>
<li class="cat-item cat-item-6"><a href="http://www.skywind.me/blog/topics/gamedev">游戏开发</a> (28)
</li>
<li class="cat-item cat-item-11"><a href="http://www.skywind.me/blog/topics/program">编程技术</a> (51)
</li>
<li class="cat-item cat-item-10"><a href="http://www.skywind.me/blog/topics/compile">编译技术</a> (6)
</li>
<li class="cat-item cat-item-3"><a href="http://www.skywind.me/blog/topics/network">网络编程</a> (16)
</li>
<li class="cat-item cat-item-8"><a href="http://www.skywind.me/blog/topics/casual">随笔</a> (60)
</li>
</ul>
</div>	</div>
<!-- sidebar west END -->
<div class="fixed"></div>
</div>
<!-- sidebar south START -->
<div id="southsidebar" class="sidebar">
<div id="wpp-2" class="widget popular-posts">
<h3>Popular Posts</h3><!-- cached -->
<!-- WordPress Popular Posts -->
<ul class="wpp-list">
<li>
<a href="http://www.skywind.me/blog/archives/2084" title="Vim 8 下 C/C++ 开发环境搭建" class="wpp-post-title" target="_self">Vim 8 下 C/C++ 开发环境搭建</a>
</li>
<li>
<a href="http://www.skywind.me/blog/archives/1145" title="影子跟随算法（2007年老文一篇）" class="wpp-post-title" target="_self">影子跟随算法（2007年老文一篇）</a>
</li>
<li>
<a href="http://www.skywind.me/blog/archives/2554" title="如何长时间保存重要数据？" class="wpp-post-title" target="_self">如何长时间保存重要数据？</a>
</li>
<li>
<a href="http://www.skywind.me/blog/archives/1343" title="再谈网游同步技术" class="wpp-post-title" target="_self">再谈网游同步技术</a>
</li>
<li>
<a href="http://www.skywind.me/blog/archives/2534" title="WSL 服务自动启动的正确方法" class="wpp-post-title" target="_self">WSL 服务自动启动的正确方法</a>
</li>
<li>
<a href="http://www.skywind.me/blog/archives/131" title="帧锁定同步算法" class="wpp-post-title" target="_self">帧锁定同步算法</a>
</li>
<li>
<a href="http://www.skywind.me/blog/archives/112" title="网络游戏同步法则" class="wpp-post-title" target="_self">网络游戏同步法则</a>
</li>
<li>
<a href="http://www.skywind.me/blog/archives/1048" title="快速可靠协议-KCP" class="wpp-post-title" target="_self">快速可靠协议-KCP</a>
</li>
<li>
<a href="http://www.skywind.me/blog/archives/2021" title="终端里正确设置 ALT 键和 BS 键" class="wpp-post-title" target="_self">终端里正确设置 ALT 键和 BS 键</a>
</li>
<li>
<a href="http://www.skywind.me/blog/archives/1566" title="视频编码原理简介" class="wpp-post-title" target="_self">视频编码原理简介</a>
</li>
</ul>
</div>
<div id="archives-5" class="widget widget_archive"><h3>Archives</h3>		<ul>
<li><a href="http://www.skywind.me/blog/archives/date/2019/05">May 2019</a> (2)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2019/04">April 2019</a> (2)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2019/02">February 2019</a> (3)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2019/01">January 2019</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2018/12">December 2018</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2018/11">November 2018</a> (3)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2018/10">October 2018</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2018/08">August 2018</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2018/05">May 2018</a> (2)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2018/04">April 2018</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2018/03">March 2018</a> (3)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2018/02">February 2018</a> (2)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2018/01">January 2018</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2017/12">December 2017</a> (3)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2017/10">October 2017</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2017/06">June 2017</a> (2)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2017/05">May 2017</a> (2)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2017/02">February 2017</a> (2)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2017/01">January 2017</a> (2)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2016/12">December 2016</a> (6)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2016/11">November 2016</a> (2)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2016/08">August 2016</a> (4)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2016/07">July 2016</a> (3)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2016/06">June 2016</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2016/05">May 2016</a> (7)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2016/04">April 2016</a> (4)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2016/03">March 2016</a> (2)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2016/02">February 2016</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2015/12">December 2015</a> (3)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2015/11">November 2015</a> (3)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2015/10">October 2015</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2015/08">August 2015</a> (3)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2015/07">July 2015</a> (6)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2015/06">June 2015</a> (5)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2015/05">May 2015</a> (3)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2015/04">April 2015</a> (9)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2013/04">April 2013</a> (2)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2012/12">December 2012</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2012/11">November 2012</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2011/09">September 2011</a> (2)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2011/08">August 2011</a> (6)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2011/07">July 2011</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2011/06">June 2011</a> (2)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2011/04">April 2011</a> (10)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2011/03">March 2011</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2010/12">December 2010</a> (2)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2010/07">July 2010</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2010/06">June 2010</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2010/01">January 2010</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2009/09">September 2009</a> (2)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2009/07">July 2009</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2009/01">January 2009</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2008/04">April 2008</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2008/03">March 2008</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2008/02">February 2008</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2008/01">January 2008</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2007/12">December 2007</a> (2)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2007/11">November 2007</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2007/09">September 2007</a> (2)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2007/05">May 2007</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2007/04">April 2007</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2007/03">March 2007</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2007/02">February 2007</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2006/10">October 2006</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2006/08">August 2006</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2006/06">June 2006</a> (2)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2006/03">March 2006</a> (3)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2006/01">January 2006</a> (3)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2005/12">December 2005</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2005/11">November 2005</a> (2)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2005/10">October 2005</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2005/06">June 2005</a> (2)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2005/04">April 2005</a> (3)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2004/09">September 2004</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2002/09">September 2002</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2002/04">April 2002</a> (1)</li>
<li><a href="http://www.skywind.me/blog/archives/date/2001/04">April 2001</a> (1)</li>
</ul>
</div><div id="recent-comments-3" class="widget widget_recent_comments"><h3>Recent Comments</h3><ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link"><a href="http://123" rel="external nofollow" class="url">123</a></span> on <a href="http://www.skywind.me/blog/archives/2554#comment-76528">如何长时间保存重要数据？</a></li><li class="recentcomments"><span class="comment-author-link">hello</span> on <a href="http://www.skywind.me/blog/archives/2530#comment-76432">KVM 虚拟化环境搭建 – WebVirtMgr</a></li><li class="recentcomments"><span class="comment-author-link">hhh2000</span> on <a href="http://www.skywind.me/blog/archives/2006#comment-76418">基础优化-最不坏的哈希表</a></li><li class="recentcomments"><span class="comment-author-link">Flint Niu</span> on <a href="http://www.skywind.me/blog/archives/2441#comment-76369">精通 C++ 是一种怎样的体验？</a></li><li class="recentcomments"><span class="comment-author-link"><a href="http://www.skywind.me/blog" rel="external nofollow" class="url">skywind</a></span> on <a href="http://www.skywind.me/blog/archives/2554#comment-76295">如何长时间保存重要数据？</a></li></ul></div><div id="meta-3" class="widget widget_meta"><h3>Meta</h3>			<ul>
<li><a rel="nofollow" href="http://www.skywind.me/blog/wp-login.php">Log in</a></li>
<li><a href="http://www.skywind.me/blog/feed">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
<li><a href="http://www.skywind.me/blog/comments/feed">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
<li><a href="https://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress.org</a></li>			</ul>
</div><div id="wp_statistics_widget-2" class="widget widget_wp_statistics_widget"><h3></h3><ul><li><label>Today's Visits: </label>183</li><li><label>Last 30 Days Visits: </label>2,430</li><li><label>Total Visits: </label>42,970</li></ul></div></div>
<!-- sidebar south END -->
</div>
<!-- sidebar END -->
<div class="fixed"></div>
</div>
<!-- content END -->
<!-- footer START -->
<div id="footer">
<a id="gotop" href="#" onclick="MGJS.goTop();return false;">Top</a>
<a id="powered" href="http://wordpress.org/">WordPress</a>
<div id="copyright">
Copyright © 2001-2019 Skywind Inside	</div>
<div id="themeinfo">
Theme by <a href="http://www.neoease.com/">NeoEase</a>. Valid <a href="http://validator.w3.org/check?uri=referer">XHTML 1.1</a> and <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3">CSS 3</a>.	</div>
</div>
<!-- footer END -->
</div>
<!-- container END -->
</div>
<!-- wrap END -->
<!-- LikeBtn.com BEGIN -->
<script type="text/javascript">var likebtn_wl = 1; (function(d, e, s) {a = d.createElement(e);m = d.getElementsByTagName(e)[0];a.async = 1;a.src = s;m.parentNode.insertBefore(a, m)})(document, 'script', '//w.likebtn.com/js/w/widget.js'); if (typeof(LikeBtn) != "undefined") { LikeBtn.init(); }</script>
<!-- LikeBtn.com END -->
<div class="sfsiplus_footerLnk" style="margin: 0 auto;z-index:1000; text-align: center;"><a href="https://www.ultimatelysocial.com/usm-premium/" target="new">Wordpress Social Share Plugin </a> powered by Ultimatelysocial</div><script>
window.addEventListener('sfsi_functions_loaded', function() {
if (typeof sfsi_responsive_toggle == 'function') {
sfsi_responsive_toggle(0);
console.log('sfsi_responsive_toggle');
}
})
</script>
<script>
window.addEventListener('sfsi_functions_loaded', function() {
if (typeof sfsi_plugin_version == 'function') {
sfsi_plugin_version(2.43);
}
});
function sfsi_processfurther(ref) {
var feed_id = 'bWRCRDMzMFRkYnoxRWtrRHVlakM3dFV4cnNGUUlKcENTYXQ5UHF3QmUwY3h0V24xbmRXZ0dWNGN5N2RrWnA4QnhLdzU2SzhTVzlSaHF6MHAwN1NoV1dSSDNZcHZhNUdTcUhHeHBqVnJNV05RTVZYTUZMR3M1Nk9XZ254cFZvSnF8aHZldk9EQU1FcmxBb1A2RHI5TmNpc2pLNnpieGw0OXExSWtNOTZ0Tk5pRT0=';
var feedtype = 8;
var email = jQuery(ref).find('input[name="data[Widget][email]"]').val();
var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
if ((email != "Enter your email") &amp;&amp; (filter.test(email))) {
if (feed_id != "") {
if (feedtype == "8") {
var url = "https://www.specificfeeds.com/widgets/subscribeWidget/" + feed_id + "/" + feedtype;
window.open('', "popupwindow", "scrollbars=yes,width=1080,height=760");
ref.action = url;
ref.target = "popupwindow";
return true;
} else {
return false
}
}
} else {
alert("Please enter email address");
jQuery(ref).find('input[name="data[Widget][email]"]').focus();
return false;
}
}
</script>
<style type="text/css" aria-selected="true">
.sfsi_subscribe_Popinner {
width: 100% !important;
height: auto !important;
padding: 18px 0px !important;
background-color: #ffffff !important;
}
.sfsi_subscribe_Popinner form {
margin: 0 20px !important;
}
.sfsi_subscribe_Popinner h5 {
font-family: Helvetica,Arial,sans-serif !important;
font-weight: bold !important;
color: #000000 !important;
font-size: 16px !important;
text-align: center !important;
margin: 0 0 10px !important;
padding: 0 !important;
}
.sfsi_subscription_form_field {
margin: 5px 0 !important;
width: 100% !important;
display: inline-flex;
display: -webkit-inline-flex;
}
.sfsi_subscription_form_field input {
width: 100% !important;
padding: 10px 0px !important;
}
.sfsi_subscribe_Popinner input[type=email] {
font-family: Helvetica,Arial,sans-serif !important;
font-style: normal !important;
color: #000000 !important;
font-size: 14px !important;
text-align: center !important;
}
.sfsi_subscribe_Popinner input[type=email]::-webkit-input-placeholder {
font-family: Helvetica,Arial,sans-serif !important;
font-style: normal !important;
color: #000000 !important;
font-size: 14px !important;
text-align: center !important;
}
.sfsi_subscribe_Popinner input[type=email]:-moz-placeholder {
/* Firefox 18- */
font-family: Helvetica,Arial,sans-serif !important;
font-style: normal !important;
color: #000000 !important;
font-size: 14px !important;
text-align: center !important;
}
.sfsi_subscribe_Popinner input[type=email]::-moz-placeholder {
/* Firefox 19+ */
font-family: Helvetica,Arial,sans-serif !important;
font-style: normal !important;
color: #000000 !important;
font-size: 14px !important;
text-align: center !important;
}
.sfsi_subscribe_Popinner input[type=email]:-ms-input-placeholder {
font-family: Helvetica,Arial,sans-serif !important;
font-style: normal !important;
color: #000000 !important;
font-size: 14px !important;
text-align: center !important;
}
.sfsi_subscribe_Popinner input[type=submit] {
font-family: Helvetica,Arial,sans-serif !important;
font-weight: bold !important;
color: #000000 !important;
font-size: 16px !important;
text-align: center !important;
background-color: #dedede !important;
}
</style>
<!-- <link rel='stylesheet' id='hljstheme-css'  href='http://www.skywind.me/blog/wp-content/plugins/wp-code-highlightjs/styles/rainbow.css?ver=0.6.2' type='text/css' media='all' /> -->
<link rel="stylesheet" type="text/css" href="//www.skywind.me/blog/wp-content/cache/wpfc-minified/f4qw93ph/6eu8x.css" media="all" />
<script type="text/javascript" src="//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.2.4"></script>
<script type="text/javascript" src="http://www.skywind.me/blog/wp-includes/js/jquery/ui/core.min.js?ver=1.11.4"></script>
<script type="text/javascript" src="http://www.skywind.me/blog/wp-content/plugins/ultimate-social-media-icons/js/shuffle/modernizr.custom.min.js?ver=5.2.4"></script>
<script type="text/javascript" src="http://www.skywind.me/blog/wp-content/plugins/ultimate-social-media-icons/js/shuffle/jquery.shuffle.min.js?ver=5.2.4"></script>
<script type="text/javascript" src="http://www.skywind.me/blog/wp-content/plugins/ultimate-social-media-icons/js/shuffle/random-shuffle-min.js?ver=5.2.4"></script>
<script type="text/javascript">
/* &lt;![CDATA[ */
var sfsi_icon_ajax_object = {"ajax_url":"http:\/\/www.skywind.me\/blog\/wp-admin\/admin-ajax.php"};
var sfsi_icon_ajax_object = {"ajax_url":"http:\/\/www.skywind.me\/blog\/wp-admin\/admin-ajax.php","plugin_url":"http:\/\/www.skywind.me\/blog\/wp-content\/plugins\/ultimate-social-media-icons\/"};
/* ]]&gt; */
</script>
<script type="text/javascript" src="http://www.skywind.me/blog/wp-content/plugins/ultimate-social-media-icons/js/custom.js?ver=5.2.4"></script>
<script type="text/javascript" src="http://www.skywind.me/blog/wp-content/plugins/page-links-to/js/new-tab.min.js?ver=3.1.2"></script>
<script type="text/javascript" src="http://www.skywind.me/blog/wp-includes/js/wp-embed.min.js?ver=5.2.4"></script>
<script type="text/javascript" src="http://www.skywind.me/blog/wp-content/plugins/wp-code-highlightjs/highlight.common.pack.js?ver=0.6.2"></script>
<script type="text/javascript" src="http://www.skywind.me/blog/wp-content/plugins/wp-code-highlightjs/highlight.custom.pack.js?ver=0.6.2"></script>
<script async="async" type="text/javascript" src="http://www.skywind.me/blog/wp-content/plugins/akismet/_inc/form.js?ver=4.1.2"></script>
<style>code.hljs { 
/* margin: 5px; */
padding: 5px;
background-image: none;
font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;
font-size: 13px;
}
</style>
<script type="text/javascript">
(function($, window) {
var init_fn_flag = false;
var init_fn = (function() {
if (init_fn_flag)
return;
init_fn_flag = true;
hljs.configure({"tabReplace":"    "});
$('pre code').each(function(i, block) {
hljs.highlightBlock(block);
});
$('pre:not(:has(code))').each(function(i, block){
var class_desc = $(block).attr("class") || "";
var reg_mat = class_desc.match(/brush\s*:\s*([\w\d]+)/i);
if(!reg_mat || reg_mat.length &lt; 2)
return;
var code_content = $(block).removeClass("brush:").removeClass("ruler:").removeClass("first-line:").removeClass("highlight:")
.removeClass("brush:" + reg_mat[1] + ";").removeClass(reg_mat[1] + ";").removeClass("true;").removeClass("false;").html();
$(block).empty().append($("&lt;code class='hljs'&gt;&lt;/code&gt;").html(code_content)).addClass(reg_mat[1]);
hljs.highlightBlock(block);
});
});
$(document).ready(init_fn);
$(window).on("load", init_fn);
})(jQuery, window);
</script>

</body></html><!-- WP Fastest Cache file was created in 0.45945811271667 seconds, on 06-11-19 21:09:19 -->