<!doctype html>
<html lang="zh" data-hairline="true" data-theme="light"><head><meta charSet="utf-8"/><title data-react-helmet="true">windows api设计的如何？ - 知乎</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"/><meta name="renderer" content="webkit"/><meta name="force-rendering" content="webkit"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><meta name="google-site-verification" content="FTeR0c8arOPKh8c5DYh_9uu98_zJbaWw53J-Sch9MTg"/><meta data-react-helmet="true" name="description" property="og:description" content="C语言怎么从函数中返回未知长度的字符串，可以让它的调用者优雅地接收？"/><meta data-react-helmet="true" name="keywords" content="Microsoft Windows"/><link data-react-helmet="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-152.67c7b278.png"/><link data-react-helmet="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-152.67c7b278.png" sizes="152x152"/><link data-react-helmet="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-120.b3e6278d.png" sizes="120x120"/><link data-react-helmet="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-76.7a750095.png" sizes="76x76"/><link data-react-helmet="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-60.a4a761d4.png" sizes="60x60"/><link rel="shortcut icon" type="image/x-icon" href="https://static.zhihu.com/static/favicon.ico"/><link rel="search" type="application/opensearchdescription+xml" href="https://static.zhihu.com/static/search.xml" title="知乎"/><link rel="dns-prefetch" href="//static.zhimg.com"/><link rel="dns-prefetch" href="//pic1.zhimg.com"/><link rel="dns-prefetch" href="//pic2.zhimg.com"/><link rel="dns-prefetch" href="//pic3.zhimg.com"/><link rel="dns-prefetch" href="//pic4.zhimg.com"/><style>
.u-safeAreaInset-top {
  height: constant(safe-area-inset-top) !important;
  height: env(safe-area-inset-top) !important;
  
}
.u-safeAreaInset-bottom {
  height: constant(safe-area-inset-bottom) !important;
  height: env(safe-area-inset-bottom) !important;
  
}
</style><link href="https://static.zhihu.com/heifetz/main.app.216a26f4.444e6bc325eac9299ec7.css" rel="stylesheet"/><link href="https://static.zhihu.com/heifetz/main.question-routes.216a26f4.1306ce0a17fd3d640d4d.css" rel="stylesheet"/><script defer="" crossorigin="anonymous" src="https://unpkg.zhimg.com/@cfe/sentry-script@latest/dist/init.js" data-sentry-config="{&quot;dsn&quot;:&quot;https://2d8d764432cc4f6fb3bc78ab9528299d@crash2.zhihu.com/1224&quot;,&quot;sampleRate&quot;:0.1,&quot;release&quot;:&quot;1202-292d138f&quot;,&quot;ignoreErrorNames&quot;:[&quot;NetworkError&quot;,&quot;SecurityError&quot;],&quot;ignoreErrors&quot;:[&quot;origin message&quot;,&quot;Network request failed&quot;,&quot;Loading chunk&quot;,&quot;这个系统不支持该功能。&quot;,&quot;Can&#x27;t find variable: webkit&quot;,&quot;Can&#x27;t find variable: $&quot;,&quot;内存不足&quot;,&quot;out of memory&quot;,&quot;DOM Exception 18&quot;,&quot;The operation is insecure&quot;,&quot;[object Event]&quot;,&quot;[object FileError]&quot;,&quot;[object DOMError]&quot;,&quot;[object Object]&quot;,&quot;拒绝访问。&quot;,&quot;Maximum call stack size exceeded&quot;,&quot;UploadError&quot;,&quot;无法 fetch&quot;,&quot;draft-js&quot;,&quot;缺少 JavaScript 对象&quot;,&quot;componentWillEnter&quot;,&quot;componentWillLeave&quot;,&quot;componentWillAppear&quot;,&quot;getInlineStyleAt&quot;,&quot;getCharacterList&quot;],&quot;whitelistUrls&quot;:[&quot;static.zhihu.com&quot;]}"></script></head><body><div id="root"><div><div class="LoadingBar"></div><div><header role="banner" class="Sticky AppHeader" data-za-module="TopNavBar"><div class="AppHeader-inner"><a class="ZhihuLogoLink" href="//www.zhihu.com" aria-label="知乎"><svg viewBox="0 0 200 91" fill="#0084FF" width="64" height="30"><path d="M53.29 80.035l7.32.002 2.41 8.24 13.128-8.24h15.477v-67.98H53.29v67.978zm7.79-60.598h22.756v53.22h-8.73l-8.718 5.473-1.587-5.46-3.72-.012v-53.22zM46.818 43.162h-16.35c.545-8.467.687-16.12.687-22.955h15.987s.615-7.05-2.68-6.97H16.807c1.09-4.1 2.46-8.332 4.1-12.708 0 0-7.523 0-10.085 6.74-1.06 2.78-4.128 13.48-9.592 24.41 1.84-.2 7.927-.37 11.512-6.94.66-1.84.785-2.08 1.605-4.54h9.02c0 3.28-.374 20.9-.526 22.95H6.51c-3.67 0-4.863 7.38-4.863 7.38H22.14C20.765 66.11 13.385 79.24 0 89.62c6.403 1.828 12.784-.29 15.937-3.094 0 0 7.182-6.53 11.12-21.64L43.92 85.18s2.473-8.402-.388-12.496c-2.37-2.788-8.768-10.33-11.496-13.064l-4.57 3.627c1.363-4.368 2.183-8.61 2.46-12.71H49.19s-.027-7.38-2.372-7.38zm128.752-.502c6.51-8.013 14.054-18.302 14.054-18.302s-5.827-4.625-8.556-1.27c-1.874 2.548-11.51 15.063-11.51 15.063l6.012 4.51zm-46.903-18.462c-2.814-2.577-8.096.667-8.096.667s12.35 17.2 12.85 17.953l6.08-4.29s-8.02-11.752-10.83-14.33zM199.99 46.5c-6.18 0-40.908.292-40.953.292v-31.56c1.503 0 3.882-.124 7.14-.376 12.773-.753 21.914-1.25 27.427-1.504 0 0 3.817-8.496-.185-10.45-.96-.37-7.24 1.43-7.24 1.43s-51.63 5.153-72.61 5.64c.5 2.756 2.38 5.336 4.93 6.11 4.16 1.087 7.09.53 15.36.277 7.76-.5 13.65-.76 17.66-.76v31.19h-41.71s.88 6.97 7.97 7.14h33.73v22.16c0 4.364-3.498 6.87-7.65 6.6-4.4.034-8.15-.36-13.027-.566.623 1.24 1.977 4.496 6.035 6.824 3.087 1.502 5.054 2.053 8.13 2.053 9.237 0 14.27-5.4 14.027-14.16V53.93h38.235c3.026 0 2.72-7.432 2.72-7.432z" fill-rule="evenodd"></path></svg></a><ul role="navigation" class="Tabs AppHeader-Tabs"><li role="tab" class="Tabs-item AppHeader-Tab Tabs-item--noMeta"><a class="Tabs-link AppHeader-TabsLink" href="//www.zhihu.com/" data-za-not-track-link="true">首页</a></li><li role="tab" class="Tabs-item AppHeader-Tab Tabs-item--noMeta"><a class="Tabs-link AppHeader-TabsLink" href="//www.zhihu.com/xen/market/webpage/homepage" data-za-not-track-link="true">会员</a></li><li role="tab" class="Tabs-item AppHeader-Tab Tabs-item--noMeta"><a class="Tabs-link AppHeader-TabsLink" href="//www.zhihu.com/explore" data-za-not-track-link="true">发现</a></li><li role="tab" class="Tabs-item AppHeader-Tab Tabs-item--noMeta"><a class="Tabs-link AppHeader-TabsLink" href="//www.zhihu.com/question/waiting" data-za-not-track-link="true">等你来答</a></li></ul><div class="SearchBar AppHeader-SearchBar" role="search" data-za-module="PresetWordItem"><form class="SearchBar-tool"><div><div class="Popover"><label class="SearchBar-input Input-wrapper Input-wrapper--grey"><input type="text" maxLength="100" value="" autoComplete="off" role="combobox" aria-expanded="false" aria-autocomplete="list" aria-activedescendant="null--1" id="null-toggle" aria-haspopup="true" aria-owns="null-content" class="Input" placeholder=""/><button aria-label="搜索" type="button" class="Button SearchBar-searchButton Button--primary"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Search SearchBar-searchIcon" fill="currentColor" viewBox="0 0 24 24" width="18" height="18"><path d="M17.068 15.58a8.377 8.377 0 0 0 1.774-5.159 8.421 8.421 0 1 0-8.42 8.421 8.38 8.38 0 0 0 5.158-1.774l3.879 3.88c.957.573 2.131-.464 1.488-1.49l-3.879-3.878zm-6.647 1.157a6.323 6.323 0 0 1-6.316-6.316 6.323 6.323 0 0 1 6.316-6.316 6.323 6.323 0 0 1 6.316 6.316 6.323 6.323 0 0 1-6.316 6.316z" fill-rule="evenodd"></path></svg></span></button></label></div></div></form></div><div class="AppHeader-userInfo"><div class="AppHeader-profile"><div><button type="button" class="Button AppHeader-login Button--blue">登录</button><button type="button" class="Button Button--primary Button--blue">加入知乎</button></div></div></div></div><div></div></header></div><main role="main" class="App-main"><div class="QuestionPage" itemscope="" itemType="http://schema.org/Question"><meta itemProp="name" content="windows api设计的如何？"/><meta itemProp="url" content="https://www.zhihu.com/question/33058061"/><meta itemProp="keywords" content="Microsoft Windows"/><meta itemProp="answerCount" content="6"/><meta itemProp="commentCount" content="0"/><meta itemProp="dateCreated" content="2015-07-21T08:58:04.000Z"/><meta itemProp="dateModified" content="2015-07-21T08:58:04.000Z"/><meta itemProp="zhihu:visitsCount"/><meta itemProp="zhihu:followerCount" content="68"/><div data-zop-question="{&quot;title&quot;:&quot;windows api设计的如何？&quot;,&quot;topics&quot;:[{&quot;name&quot;:&quot;Microsoft Windows&quot;,&quot;id&quot;:&quot;19552612&quot;}],&quot;id&quot;:33058061,&quot;isEditable&quot;:false}"><div><div class="QuestionHeader"><div class="QuestionHeader-content"><div class="QuestionHeader-main"><div class="QuestionHeader-tags"><div class="QuestionHeader-topics"><div class="Tag QuestionTopic"><span class="Tag-content"><a class="TopicLink" href="//www.zhihu.com/topic/19552612" target="_blank"><div class="Popover"><div id="null-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="null-content">Microsoft Windows</div></div></a></span></div></div></div><h1 class="QuestionHeader-title">windows api设计的如何？</h1><div><style data-emotion-css="eew49z">.css-eew49z{min-height:10px;}</style><div class="css-eew49z"><div class="QuestionRichText QuestionRichText--collapsed"><div><span class="RichText ztext" itemProp="text">C语言怎么从函数中返回未知长度的字符串，可以让它的调用者优雅地接收？</span></div></div></div></div></div><div class="QuestionHeader-side"><div class="QuestionHeader-follow-status"><div class="QuestionFollowStatus"><div class="NumberBoard QuestionFollowStatus-counts NumberBoard--divider"><div class="NumberBoard-item"><div class="NumberBoard-itemInner"><div class="NumberBoard-itemName">关注者</div><strong class="NumberBoard-itemValue" title="68">68</strong></div></div><div class="NumberBoard-item"><div class="NumberBoard-itemInner"><div class="NumberBoard-itemName">被浏览</div><strong class="NumberBoard-itemValue" title="7405">7,405</strong></div></div></div></div></div></div></div><div class="QuestionHeader-footer"><div class="QuestionHeader-footer-inner"><div class="QuestionHeader-main QuestionHeader-footer-main"><div class="QuestionButtonGroup"><button type="button" class="Button FollowButton Button--primary Button--blue">关注问题</button><button type="button" class="Button Button--blue"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Edit QuestionButton-icon" fill="currentColor" viewBox="0 0 24 24" width="16" height="16"><path d="M4.076 16.966a4.19 4.19 0 0 1 1.05-1.76l8.568-8.569a.524.524 0 0 1 .741 0l2.928 2.927a.524.524 0 0 1 0 .74l-8.568 8.57c-.49.49-1.096.852-1.761 1.051l-3.528 1.058a.394.394 0 0 1-.49-.488l1.06-3.53zM20.558 4.83c.59.59.59 1.546 0 2.136l-1.693 1.692a.503.503 0 0 1-.712 0l-2.812-2.812a.504.504 0 0 1 0-.712l1.693-1.693a1.51 1.51 0 0 1 2.135 0l1.389 1.389z"></path></svg></span>写回答</button></div><div class="QuestionHeaderActions"><button style="margin-right:16px" type="button" class="Button Button--grey Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Invite Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M4 10V8a1 1 0 1 1 2 0v2h2a1 1 0 0 1 0 2H6v2a1 1 0 0 1-2 0v-2H2a1 1 0 0 1 0-2h2zm10.455 2c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm-7 6c0-2.66 4.845-4 7.272-4C17.155 14 22 15.34 22 18v1.375c0 .345-.28.625-.625.625H8.08a.625.625 0 0 1-.625-.625V18z" fill-rule="evenodd"></path></svg></span>邀请回答</button><div class="GoodQuestionAction"><button type="button" class="Button GoodQuestionAction-commonBtn Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Like Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z" fill-rule="evenodd"></path></svg></span>好问题</button></div><div class="QuestionHeader-Comment"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Comment Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z" fill-rule="evenodd"></path></svg></span>添加评论</button></div><div class="Popover ShareMenu"><div class="ShareMenu-toggler" id="null-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="null-content"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Share Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z" fill-rule="evenodd"></path></svg></span>分享</button></div></div><div class="Popover"><button aria-label="更多" id="null-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="null-content" type="button" class="Button Button--plain Button--withIcon Button--iconOnly"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Dots Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z" fill-rule="evenodd"></path></svg></span></button></div></div><div class="QuestionHeader-actions"></div></div></div></div></div></div><div><div class="Sticky"></div></div></div><div class="Question-main"><div class="Question-mainColumn"><div><div id="QuestionAnswers-answers" class="QuestionAnswers-answers" data-zop-feedlistmap="0,0,1,0"><div class="Card AnswersNavWrapper"><div class="ListShortcut"><div class="List"><div class="List-header"><h4 class="List-headerText"><span>6<!-- --> 个回答</span></h4><div class="List-headerOptions"><div class="Popover"><button role="combobox" aria-expanded="false" id="null-toggle" aria-haspopup="true" aria-owns="null-content" type="button" class="Button InputLike InputButton Select-button Select-plainButton Button--plain">默认排序<svg class="Zi Zi--Select Select-arrow" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M12 16.183l2.716-2.966a.757.757 0 0 1 1.064.001.738.738 0 0 1 0 1.052l-3.247 3.512a.758.758 0 0 1-1.064 0L8.22 14.27a.738.738 0 0 1 0-1.052.758.758 0 0 1 1.063 0L12 16.183zm0-9.365L9.284 9.782a.758.758 0 0 1-1.064 0 .738.738 0 0 1 0-1.052l3.248-3.512a.758.758 0 0 1 1.065 0L15.78 8.73a.738.738 0 0 1 0 1.052.757.757 0 0 1-1.063.001L12 6.818z" fill-rule="evenodd"></path></svg></button></div></div></div><div><div class=""><div class="List-item" tabindex="0"><div class="ContentItem AnswerItem" data-za-index="0" data-zop="{&quot;authorName&quot;:&quot;知乎用户&quot;,&quot;itemId&quot;:55893890,&quot;title&quot;:&quot;windows api设计的如何？&quot;,&quot;type&quot;:&quot;answer&quot;}" name="55893890" itemProp="acceptedAnswer" itemType="http://schema.org/Answer" itemscope=""><div class="ContentItem-meta"><div class="AuthorInfo AnswerItem-authorInfo AnswerItem-authorInfo--related" itemProp="author" itemscope="" itemType="http://schema.org/Person"><meta itemProp="name" content="知乎用户"/><meta itemProp="image" content="https://pic4.zhimg.com/da8e974dc_l.jpg?source=1940ef5c"/><meta itemProp="url" content="https://www.zhihu.com/people/"/><meta itemProp="zhihu:followerCount" content="839960"/><span class="UserLink AuthorInfo-avatarWrapper"><img class="Avatar AuthorInfo-avatar" width="38" height="38" src="https://pic4.zhimg.com/da8e974dc_xs.jpg?source=1940ef5c" srcSet="https://pic4.zhimg.com/da8e974dc_l.jpg?source=1940ef5c 2x" alt="知乎用户"/></span><div class="AuthorInfo-content"><div class="AuthorInfo-head"><span class="UserLink AuthorInfo-name">知乎用户</span></div><div class="AuthorInfo-detail"><div class="AuthorInfo-badge"></div></div></div></div><style data-emotion-css="h5al4j">.css-h5al4j{box-sizing:border-box;margin:0;min-width:0;color:#8590A6;font-size:14px;margin-top:10px;margin-bottom:-4px;}</style><div class="css-h5al4j"><span><span class="Voters"><button type="button" class="Button Button--plain">17 人<!-- -->赞同了该回答</button></span></span></div></div><meta itemProp="image"/><meta itemProp="upvoteCount" content="17"/><meta itemProp="url" content="https://www.zhihu.com/question/33058061/answer/55893890"/><meta itemProp="dateCreated" content="2015-07-21T09:55:42.000Z"/><meta itemProp="dateModified" content="2015-07-21T09:55:42.000Z"/><meta itemProp="commentCount" content="4"/><div class="RichContent RichContent--unescapable"><div class="RichContent-inner"><span class="RichText ztext CopyrightRichText-richText" itemProp="text">各大API都有相同的注释：如果你这个参数写成NULL，返回值也会返回正确的你需要的wchar_t的最少数量。</span></div><div><div class="ContentItem-time"><a target="_blank" href="//www.zhihu.com/question/33058061/answer/55893890"><span data-tooltip="发布于 2015-07-21 17:55">发布于 2015-07-21</span></a></div></div><div class="ContentItem-actions RichContent-actions"><span><button aria-label="赞同 17 " type="button" class="Button VoteButton VoteButton--up"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--TriangleUp VoteButton-TriangleUp" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M2 18.242c0-.326.088-.532.237-.896l7.98-13.203C10.572 3.57 11.086 3 12 3c.915 0 1.429.571 1.784 1.143l7.98 13.203c.15.364.236.57.236.896 0 1.386-.875 1.9-1.955 1.9H3.955c-1.08 0-1.955-.517-1.955-1.9z" fill-rule="evenodd"></path></svg></span>赞同 17</button><button aria-label="反对" type="button" class="Button VoteButton VoteButton--down"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--TriangleDown" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M20.044 3H3.956C2.876 3 2 3.517 2 4.9c0 .326.087.533.236.896L10.216 19c.355.571.87 1.143 1.784 1.143s1.429-.572 1.784-1.143l7.98-13.204c.149-.363.236-.57.236-.896 0-1.386-.876-1.9-1.956-1.9z" fill-rule="evenodd"></path></svg></span></button></span><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Comment Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z" fill-rule="evenodd"></path></svg></span>4 条评论</button><div class="Popover ShareMenu ContentItem-action"><div class="ShareMenu-toggler" id="null-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="null-content"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Share Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z" fill-rule="evenodd"></path></svg></span>分享</button></div></div><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Star Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5.515 19.64l.918-5.355-3.89-3.792c-.926-.902-.639-1.784.64-1.97L8.56 7.74l2.404-4.871c.572-1.16 1.5-1.16 2.072 0L15.44 7.74l5.377.782c1.28.186 1.566 1.068.64 1.97l-3.89 3.793.918 5.354c.219 1.274-.532 1.82-1.676 1.218L12 18.33l-4.808 2.528c-1.145.602-1.896.056-1.677-1.218z" fill-rule="evenodd"></path></svg></span>收藏</button><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Heart Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2 8.437C2 5.505 4.294 3.094 7.207 3 9.243 3 11.092 4.19 12 6c.823-1.758 2.649-3 4.651-3C19.545 3 22 5.507 22 8.432 22 16.24 13.842 21 12 21 10.158 21 2 16.24 2 8.437z" fill-rule="evenodd"></path></svg></span>喜欢</button><button data-zop-retract-question="true" type="button" class="Button ContentItem-action ContentItem-rightButton Button--plain"><span class="RichContent-collapsedText">收起</span><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--ArrowDown ContentItem-arrowIcon is-active" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M12 13L8.285 9.218a.758.758 0 0 0-1.064 0 .738.738 0 0 0 0 1.052l4.249 4.512a.758.758 0 0 0 1.064 0l4.246-4.512a.738.738 0 0 0 0-1.052.757.757 0 0 0-1.063 0L12.002 13z" fill-rule="evenodd"></path></svg></span></button></div></div><div class="ModalWrap"><div><div class=""></div><div class="ModalExp-content"><div class="ModalWrap-content"><div class="ModalWrap-title">继续浏览内容</div><div class="ModalWrap-item"><div class="ModalWrap-itemImg"><img src="https://pic1.zhimg.com/80/v2-10e18ff65a640175ad058b4b5dfd2867_1440w.png"/></div><div class="ModalWrap-itemContent"><div class="ModalWrap-itemTitle">知乎</div><div class="ModalWrap-itemDesc">发现更大的世界</div></div><div class="ModalWrap-itemBtn">打开</div></div><div class="ModalWrap-item"><div class="ModalWrap-itemImg"><img src="https://pic2.zhimg.com/80/v2-da7d9e4b6a7ddba507299bcf5a4d0600_1440w.png"/></div><div class="ModalWrap-itemContent"><div class="ModalWrap-itemTitle">浏览器</div></div><div class="ModalWrap-itemBtn">继续</div></div></div></div></div></div><div><div><div class=""></div><div class="ModalLoading-content"><svg width="30" height="30" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg" class="CircleLoadingBar" aria-hidden="true"><g><circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></g></svg></div></div></div></div></div><div class="List-item" tabindex="0"><div class="ContentItem AnswerItem" data-za-index="1" data-zop="{&quot;authorName&quot;:&quot;Tim Chen&quot;,&quot;itemId&quot;:55896568,&quot;title&quot;:&quot;windows api设计的如何？&quot;,&quot;type&quot;:&quot;answer&quot;}" name="55896568" itemProp="suggestedAnswer" itemType="http://schema.org/Answer" itemscope=""><div class="ContentItem-meta"><div class="AuthorInfo AnswerItem-authorInfo AnswerItem-authorInfo--related" itemProp="author" itemscope="" itemType="http://schema.org/Person"><meta itemProp="name" content="Tim Chen"/><meta itemProp="image" content="https://pic4.zhimg.com/88c444be01bc6eb8cbfdc360ccc60651_l.jpg?source=1940ef5c"/><meta itemProp="url" content="https://www.zhihu.com/people/tim-chen-21"/><meta itemProp="zhihu:followerCount" content="38195"/><span class="UserLink AuthorInfo-avatarWrapper"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/tim-chen-21"><img class="Avatar AuthorInfo-avatar" width="38" height="38" src="https://pic4.zhimg.com/88c444be01bc6eb8cbfdc360ccc60651_xs.jpg?source=1940ef5c" srcSet="https://pic4.zhimg.com/88c444be01bc6eb8cbfdc360ccc60651_l.jpg?source=1940ef5c 2x" alt="Tim Chen"/></a></span><div class="AuthorInfo-content"><div class="AuthorInfo-head"><span class="UserLink AuthorInfo-name"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/tim-chen-21">Tim Chen</a><style data-emotion-css="1cd9gw4">.css-1cd9gw4{margin-left:.3em;}</style><style data-emotion-css="n99yhz">.css-n99yhz{box-sizing:border-box;margin:0;min-width:0;color:#175199;display:inline-block;margin-left:.3em;}</style><a href="https://www.zhihu.com/topic/20054793" target="_blank" class="css-n99yhz" aria-label="编程话题下的优秀回答者" data-tooltip="编程话题下的优秀回答者"><style data-emotion-css="18biwo">.css-18biwo{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><span class="css-18biwo">​<style data-emotion-css="1ifz0go">.css-1ifz0go{overflow:visible!important;}</style><svg viewBox="0 0 24 24" class="css-1ifz0go" width="18" height="18"><svg viewBox="0 0 24 24" x="-3" y="-3" fill="#FFFFFF" width="30" height="30"><path d="M3.56231227,13.8535307 C2.40051305,12.768677 2.41398885,11.0669203 3.59484487,9.99979213 L3.59222085,9.99654885 C4.26730143,9.45036719 4.79446755,8.21005186 4.7184197,7.34453784 L4.72305873,7.34412719 C4.66942824,5.75539997 5.8824188,4.56066914 7.47188965,4.64242381 L7.47229112,4.6386236 C8.33515314,4.72977993 9.58467253,4.22534048 10.1426329,3.55925173 L10.1462611,3.56228565 C11.2316055,2.40008701 12.9353108,2.41394456 14.0015072,3.59634088 L14.0047263,3.59374004 C14.5498229,4.26841874 15.7896857,4.79521622 16.6545744,4.71844347 L16.6549836,4.72304294 C18.245027,4.66894057 19.4396947,5.88213996 19.3575031,7.47241135 L19.3623099,7.47292747 C19.2704388,8.3358681 19.7742711,9.58421483 20.4407199,10.1424506 L20.437686,10.1460789 C21.5997217,11.2312209 21.5860695,12.9345218 20.4042441,14.0007396 L20.4072865,14.0045125 C19.7325967,14.5495925 19.2055209,15.7896954 19.2815865,16.6561959 L19.2770449,16.6565978 C19.3315454,18.2453037 18.1173775,19.4393568 16.5274188,19.3571512 L16.5269029,19.3619539 C15.6647098,19.270083 14.415408,19.7741709 13.8573671,20.4403558 L13.8537409,20.4373235 C12.76842,21.5995708 11.0650432,21.5864553 9.99899434,20.4039226 L9.99527367,20.406923 C9.45025436,19.7323399 8.21017638,19.2051872 7.34461983,19.2812352 L7.344304,19.2776405 C5.75448683,19.3312904 4.55977145,18.1170085 4.64254978,16.527117 L4.63769921,16.5265942 C4.72957031,15.6644394 4.22547659,14.4151814 3.55928015,13.8571569 L3.56231227,13.8535307 Z"></path></svg><path d="M2.63951518,13.3895441 C3.70763333,14.2842292 4.44777637,16.1226061 4.30075305,17.5023312 L4.32211542,17.3063047 C4.17509209,18.6910561 5.17786655,19.7063729 6.5613937,19.5844846 L6.364106,19.6008202 C7.75140298,19.4789319 9.57474349,20.2554985 10.4468305,21.3349009 L10.3224262,21.1803415 C11.1982831,22.2647703 12.6257916,22.2723098 13.5167278,21.2079863 L13.3898102,21.3600325 C14.2845162,20.2919393 16.1229361,19.5518136 17.5026934,19.6988334 L17.3054057,19.6774716 C18.6914461,19.8244915 19.7067866,18.8217404 19.5836389,17.4395022 L19.6012314,17.6367853 C19.4793403,16.2482641 20.255925,14.4249662 21.3353526,13.5528995 L21.1807897,13.677301 C22.2639871,12.8014646 22.2727834,11.3739894 21.2084351,10.483074 L21.3604848,10.6099886 C20.2923667,9.71530351 19.5522236,7.87818322 19.6992469,6.49720154 L19.6778846,6.69448464 C19.8249079,5.30847665 18.8221335,4.2944164 17.4386063,4.41630468 L17.635894,4.39871256 C16.248597,4.52185742 14.4252565,3.74529084 13.5531695,2.66588842 L13.6775738,2.81919121 C12.8017169,1.73601905 11.3742084,1.72722299 10.4832722,2.79154644 L10.6101898,2.63950024 C9.71548377,3.70759343 7.87706394,4.44771919 6.49730661,4.30195588 L6.69459432,4.32206116 C5.30855394,4.17504128 4.29447,5.17904888 4.41636114,6.56128713 L4.3987686,6.36400404 C4.52065973,7.75126861 3.74407501,9.57456653 2.66464737,10.4478898 L2.81921035,10.3222318 C1.73601288,11.1993248 1.72721662,12.6255433 2.79156494,13.5164587 L2.63951518,13.3895441 Z" fill="#FF9607"></path><svg class="Zi Zi--Star" fill="#fff" x="6" y="6" viewBox="0 0 24 24" width="12" height="12"><path d="M5.515 19.64l.918-5.355-3.89-3.792c-.926-.902-.639-1.784.64-1.97L8.56 7.74l2.404-4.871c.572-1.16 1.5-1.16 2.072 0L15.44 7.74l5.377.782c1.28.186 1.566 1.068.64 1.97l-3.89 3.793.918 5.354c.219 1.274-.532 1.82-1.676 1.218L12 18.33l-4.808 2.528c-1.145.602-1.896.056-1.677-1.218z" fill-rule="evenodd"></path></svg></svg></span></a></span></div><div class="AuthorInfo-detail"><div class="AuthorInfo-badge"><div class="ztext AuthorInfo-badgeText">编程话题下的优秀回答者</div></div></div></div></div><style data-emotion-css="h5al4j">.css-h5al4j{box-sizing:border-box;margin:0;min-width:0;color:#8590A6;font-size:14px;margin-top:10px;margin-bottom:-4px;}</style><div class="css-h5al4j"><span><span class="Voters"><button type="button" class="Button Button--plain">6 人<!-- -->赞同了该回答</button></span></span></div></div><meta itemProp="image"/><meta itemProp="upvoteCount" content="6"/><meta itemProp="url" content="https://www.zhihu.com/question/33058061/answer/55896568"/><meta itemProp="dateCreated" content="2015-07-21T10:20:08.000Z"/><meta itemProp="dateModified" content="2015-07-21T10:20:08.000Z"/><meta itemProp="commentCount" content="0"/><div class="RichContent RichContent--unescapable"><div class="RichContent-inner"><span class="RichText ztext CopyrightRichText-richText" itemProp="text">因为牵涉到如何分配并释放内存，这并不是件简单的事。<br/><br/>一种做法是让调用方分配内存，这种一般要先调用一次返回给你需要分配的大小然后分配内存后再调用一次。这样当然释放内存也是调用方来做。<br/><br/>还有一种是被调用的函数内部负责分配内存，这种就需要规定好由谁来释放内存。因为不同组件的allocator实现不一样，如果由调用者来释放是件挺麻烦的事情，除非说好了使用某种特定的allocator。而由被调用方来释放的问题是需要有个机制使被调用方知道何时可以释放，比如通过调用另一个函数来释放。</span></div><div><div class="ContentItem-time"><a target="_blank" href="//www.zhihu.com/question/33058061/answer/55896568"><span data-tooltip="发布于 2015-07-21 18:20">发布于 2015-07-21</span></a></div></div><div class="ContentItem-actions RichContent-actions"><span><button aria-label="赞同 6 " type="button" class="Button VoteButton VoteButton--up"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--TriangleUp VoteButton-TriangleUp" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M2 18.242c0-.326.088-.532.237-.896l7.98-13.203C10.572 3.57 11.086 3 12 3c.915 0 1.429.571 1.784 1.143l7.98 13.203c.15.364.236.57.236.896 0 1.386-.875 1.9-1.955 1.9H3.955c-1.08 0-1.955-.517-1.955-1.9z" fill-rule="evenodd"></path></svg></span>赞同 6</button><button aria-label="反对" type="button" class="Button VoteButton VoteButton--down"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--TriangleDown" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M20.044 3H3.956C2.876 3 2 3.517 2 4.9c0 .326.087.533.236.896L10.216 19c.355.571.87 1.143 1.784 1.143s1.429-.572 1.784-1.143l7.98-13.204c.149-.363.236-.57.236-.896 0-1.386-.876-1.9-1.956-1.9z" fill-rule="evenodd"></path></svg></span></button></span><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Comment Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z" fill-rule="evenodd"></path></svg></span>添加评论</button><div class="Popover ShareMenu ContentItem-action"><div class="ShareMenu-toggler" id="null-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="null-content"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Share Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z" fill-rule="evenodd"></path></svg></span>分享</button></div></div><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Star Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5.515 19.64l.918-5.355-3.89-3.792c-.926-.902-.639-1.784.64-1.97L8.56 7.74l2.404-4.871c.572-1.16 1.5-1.16 2.072 0L15.44 7.74l5.377.782c1.28.186 1.566 1.068.64 1.97l-3.89 3.793.918 5.354c.219 1.274-.532 1.82-1.676 1.218L12 18.33l-4.808 2.528c-1.145.602-1.896.056-1.677-1.218z" fill-rule="evenodd"></path></svg></span>收藏</button><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Heart Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2 8.437C2 5.505 4.294 3.094 7.207 3 9.243 3 11.092 4.19 12 6c.823-1.758 2.649-3 4.651-3C19.545 3 22 5.507 22 8.432 22 16.24 13.842 21 12 21 10.158 21 2 16.24 2 8.437z" fill-rule="evenodd"></path></svg></span>喜欢</button><button data-zop-retract-question="true" type="button" class="Button ContentItem-action ContentItem-rightButton Button--plain"><span class="RichContent-collapsedText">收起</span><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--ArrowDown ContentItem-arrowIcon is-active" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M12 13L8.285 9.218a.758.758 0 0 0-1.064 0 .738.738 0 0 0 0 1.052l4.249 4.512a.758.758 0 0 0 1.064 0l4.246-4.512a.738.738 0 0 0 0-1.052.757.757 0 0 0-1.063 0L12.002 13z" fill-rule="evenodd"></path></svg></span></button></div></div><div class="ModalWrap"><div><div class=""></div><div class="ModalExp-content"><div class="ModalWrap-content"><div class="ModalWrap-title">继续浏览内容</div><div class="ModalWrap-item"><div class="ModalWrap-itemImg"><img src="https://pic1.zhimg.com/80/v2-10e18ff65a640175ad058b4b5dfd2867_1440w.png"/></div><div class="ModalWrap-itemContent"><div class="ModalWrap-itemTitle">知乎</div><div class="ModalWrap-itemDesc">发现更大的世界</div></div><div class="ModalWrap-itemBtn">打开</div></div><div class="ModalWrap-item"><div class="ModalWrap-itemImg"><img src="https://pic2.zhimg.com/80/v2-da7d9e4b6a7ddba507299bcf5a4d0600_1440w.png"/></div><div class="ModalWrap-itemContent"><div class="ModalWrap-itemTitle">浏览器</div></div><div class="ModalWrap-itemBtn">继续</div></div></div></div></div></div><div><div><div class=""></div><div class="ModalLoading-content"><svg width="30" height="30" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg" class="CircleLoadingBar" aria-hidden="true"><g><circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></g></svg></div></div></div></div></div><div></div></div></div></div></div></div></div></div></div></div></div></main><div data-zop-usertoken="{}"></div></div></div><script id="js-clientConfig" type="text/json">{"host":"zhihu.com","protocol":"https:","wwwHost":"www.zhihu.com","fetchRoot":{"www":"https:\u002F\u002Fwww.zhihu.com","api":"https:\u002F\u002Fapi.zhihu.com","zhuanlan":"https:\u002F\u002Fzhuanlan.zhihu.com"}}</script><script id="js-initialData" type="text/json">{"initialState":{"common":{"ask":{}},"loading":{"global":{"count":0},"local":{"question\u002Fget\u002F":false,"question\u002FgetAnswers\u002F33058061":false}},"club":{"tags":{},"admins":{"data":[]},"members":{"data":[]},"explore":{"candidateSyncClubs":{}},"profile":{},"checkin":{},"comments":{"paging":{},"loading":{},"meta":{},"ids":{}},"postList":{"paging":{},"loading":{},"ids":{}},"recommend":{"data":[]},"silences":{"data":[]},"application":{"profile":null}},"entities":{"users":{},"questions":{"33058061":{"type":"question","id":33058061,"title":"windows api设计的如何？","questionType":"normal","created":1437469084,"updatedTime":1437469084,"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fquestions\u002F33058061","isMuted":false,"isVisible":true,"isNormal":true,"isEditable":false,"adminClosedComment":false,"hasPublishingDraft":false,"answerCount":6,"visitCount":7405,"commentCount":0,"followerCount":68,"collapsedAnswerCount":2,"excerpt":"C语言怎么从函数中返回未知长度的字符串，可以让它的调用者优雅地接收？","commentPermission":"all","detail":"C语言怎么从函数中返回未知长度的字符串，可以让它的调用者优雅地接收？","editableDetail":"C语言怎么从函数中返回未知长度的字符串，可以让它的调用者优雅地接收？","status":{"isLocked":false,"isClose":false,"isEvaluate":false,"isSuggest":false},"relationship":{"isAuthor":false,"isFollowing":false,"isAnonymous":false,"canLock":false,"canStickAnswers":false,"canCollapseAnswers":false,"voting":0},"topics":[{"id":"19552612","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19552612","name":"Microsoft Windows","avatarUrl":"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-ff6c969503eedfe9a279532f7aaf301c_720w.jpg?source=54b3c3a5","topicType":"NORMAL"}],"author":{"id":"0","urlToken":"","name":"匿名用户","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002Faadd7b895_l.jpg?source=1940ef5c","avatarUrlTemplate":"https:\u002F\u002Fpic1.zhimg.com\u002Faadd7b895.jpg?source=1940ef5c","isOrg":false,"type":"people","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fpeople\u002F0","userType":"people","headline":"","badge":[],"badgeV2":{"title":"","mergedBadges":[],"detailBadges":[],"icon":"","nightIcon":""},"gender":1,"isAdvertiser":false,"followerCount":0,"isFollowing":false,"isFollowed":false,"isCelebrity":false,"isBlocking":false,"isBlocked":false,"isPrivacy":false},"canComment":{"status":true,"reason":""},"thumbnailInfo":{"count":0,"type":"thumbnail_info","thumbnails":[]},"reviewInfo":{"type":"","tips":"","editTips":"","isReviewing":false,"editIsReviewing":false},"relatedCards":[],"muteInfo":{"type":""},"showAuthor":false,"isLabeled":false,"showEncourageAuthor":false,"voteupCount":0,"canVote":true,"visibleOnlyToAuthor":false}},"answers":{"55893890":{"id":55893890,"type":"answer","answerType":"normal","question":{"type":"question","id":33058061,"title":"windows api设计的如何？","questionType":"normal","created":1437469084,"updatedTime":1437469084,"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fquestions\u002F33058061","relationship":{}},"author":{"id":"0970f947b898ecc0ec035f9126dd4e08","urlToken":"","name":"知乎用户","avatarUrl":"https:\u002F\u002Fpic4.zhimg.com\u002Fda8e974dc_l.jpg?source=1940ef5c","avatarUrlTemplate":"https:\u002F\u002Fpic1.zhimg.com\u002Fda8e974dc.jpg?source=1940ef5c","isOrg":false,"type":"people","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fpeople\u002F0","userType":"people","headline":"","badge":[],"badgeV2":{"title":"","mergedBadges":[],"detailBadges":[],"icon":"","nightIcon":""},"gender":1,"isAdvertiser":false,"followerCount":839960,"isFollowed":false,"isPrivacy":true},"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fanswers\u002F55893890","isCollapsed":false,"createdTime":1437472542,"updatedTime":1437472542,"extras":"","isCopyable":true,"isNormal":true,"voteupCount":17,"commentCount":4,"isSticky":false,"adminClosedComment":false,"commentPermission":"all","canComment":{"reason":"","status":true},"reshipmentSettings":"allowed","content":"各大API都有相同的注释：如果你这个参数写成NULL，返回值也会返回正确的你需要的wchar_t的最少数量。","editableContent":"","excerpt":"各大API都有相同的注释：如果你这个参数写成NULL，返回值也会返回正确的你需要的wchar_t的最少数量。","collapsedBy":"nobody","collapseReason":"","annotationAction":null,"markInfos":[],"relevantInfo":{"isRelevant":false,"relevantType":"","relevantText":""},"suggestEdit":{"reason":"","status":false,"tip":"","title":"","unnormalDetails":{"status":"","description":"","reason":"","reasonId":0,"note":""},"url":""},"isLabeled":false,"rewardInfo":{"canOpenReward":false,"isRewardable":false,"rewardMemberCount":0,"rewardTotalMoney":0,"tagline":""},"relationship":{"isAuthor":false,"isAuthorized":false,"isNothelp":false,"isThanked":false,"isRecognized":false,"voting":0,"upvotedFollowees":[]},"adAnswer":null},"55896568":{"id":55896568,"type":"answer","answerType":"normal","question":{"type":"question","id":33058061,"title":"windows api设计的如何？","questionType":"normal","created":1437469084,"updatedTime":1437469084,"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fquestions\u002F33058061","relationship":{}},"author":{"id":"5f8dec5f4fec496de6e11c3886951d4f","urlToken":"tim-chen-21","name":"Tim Chen","avatarUrl":"https:\u002F\u002Fpic4.zhimg.com\u002F88c444be01bc6eb8cbfdc360ccc60651_l.jpg?source=1940ef5c","avatarUrlTemplate":"https:\u002F\u002Fpic1.zhimg.com\u002F88c444be01bc6eb8cbfdc360ccc60651.jpg?source=1940ef5c","isOrg":false,"type":"people","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fpeople\u002F5f8dec5f4fec496de6e11c3886951d4f","userType":"people","headline":"","badge":[{"type":"best_answerer","description":"优秀回答者","topics":[{"id":"19554298","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19554298","name":"编程","avatarUrl":"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-27b8ba1e647956fa6f1a2a8ad90138ef_720w.jpg?source=54b3c3a5","topicType":"CHANNEL"},{"id":"19552330","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19552330","name":"程序员","avatarUrl":"https:\u002F\u002Fpic3.zhimg.com\u002F50\u002Fv2-3d917fb11613b7b13ecd7bbeb1c554e6_720w.jpg?source=54b3c3a5","topicType":"CHANNEL"}]}],"badgeV2":{"title":"编程话题下的优秀回答者","mergedBadges":[{"type":"best","detailType":"best","title":"优秀认证","description":"编程话题下的优秀回答者","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F20054793","sources":[{"id":"19554298","token":"19554298","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19554298","name":"编程","avatarPath":"v2-27b8ba1e647956fa6f1a2a8ad90138ef","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-27b8ba1e647956fa6f1a2a8ad90138ef_hd.jpg","description":"","priority":0},{"id":"19552330","token":"19552330","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19552330","name":"程序员","avatarPath":"v2-3d917fb11613b7b13ecd7bbeb1c554e6","avatarUrl":"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-3d917fb11613b7b13ecd7bbeb1c554e6_hd.jpg","description":"","priority":0}],"icon":"","nightIcon":""}],"detailBadges":[{"type":"best","detailType":"best_answerer","title":"优秀回答者","description":"编程话题下的优秀回答者","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F20054793","sources":[{"id":"19554298","token":"19554298","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19554298","name":"编程","avatarPath":"v2-27b8ba1e647956fa6f1a2a8ad90138ef","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-27b8ba1e647956fa6f1a2a8ad90138ef_hd.jpg","description":"","priority":0},{"id":"19552330","token":"19552330","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19552330","name":"程序员","avatarPath":"v2-3d917fb11613b7b13ecd7bbeb1c554e6","avatarUrl":"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-3d917fb11613b7b13ecd7bbeb1c554e6_hd.jpg","description":"","priority":0}],"icon":"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-bf0eec3c31c8e866c468f60eb296696c_l.png","nightIcon":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-c724649168d8f9d36d7c3d13140a2594_l.png"}],"icon":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-bf0eec3c31c8e866c468f60eb296696c_l.png","nightIcon":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-c724649168d8f9d36d7c3d13140a2594_l.png"},"gender":1,"isAdvertiser":false,"followerCount":38195,"isFollowed":false,"isPrivacy":false},"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fanswers\u002F55896568","isCollapsed":false,"createdTime":1437474008,"updatedTime":1437474008,"extras":"","isCopyable":true,"isNormal":true,"voteupCount":6,"commentCount":0,"isSticky":false,"adminClosedComment":false,"commentPermission":"all","canComment":{"reason":"","status":true},"reshipmentSettings":"allowed","content":"因为牵涉到如何分配并释放内存，这并不是件简单的事。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E一种做法是让调用方分配内存，这种一般要先调用一次返回给你需要分配的大小然后分配内存后再调用一次。这样当然释放内存也是调用方来做。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E还有一种是被调用的函数内部负责分配内存，这种就需要规定好由谁来释放内存。因为不同组件的allocator实现不一样，如果由调用者来释放是件挺麻烦的事情，除非说好了使用某种特定的allocator。而由被调用方来释放的问题是需要有个机制使被调用方知道何时可以释放，比如通过调用另一个函数来释放。","editableContent":"","excerpt":"因为牵涉到如何分配并释放内存，这并不是件简单的事。 一种做法是让调用方分配内存，这种一般要先调用一次返回给你需要分配的大小然后分配内存后再调用一次。这样当然释放内存也是调用方来做。 还有一种是被调用的函数内部负责分配内存，这种就需要规定好由谁来释放内存。因为不同组件的allocator实现不一样，如果由调用者来释放是件挺麻烦的事情，除非说好了使用某种特定的allocator。而由被调用方来释放的问题是需要有个机制使…","collapsedBy":"nobody","collapseReason":"","annotationAction":null,"markInfos":[],"relevantInfo":{"isRelevant":false,"relevantType":"","relevantText":""},"suggestEdit":{"reason":"","status":false,"tip":"","title":"","unnormalDetails":{"status":"","description":"","reason":"","reasonId":0,"note":""},"url":""},"isLabeled":false,"rewardInfo":{"canOpenReward":false,"isRewardable":false,"rewardMemberCount":0,"rewardTotalMoney":0,"tagline":""},"relationship":{"isAuthor":false,"isAuthorized":false,"isNothelp":false,"isThanked":false,"isRecognized":false,"voting":0,"upvotedFollowees":[]},"adAnswer":null},"55909208":{"id":55909208,"type":"answer","answerType":"normal","question":{"type":"question","id":33058061,"title":"windows api设计的如何？","questionType":"normal","created":1437469084,"updatedTime":1437469084,"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fquestions\u002F33058061","relationship":{}},"author":{"id":"264ef4765d10a40dbfe3b5bb6480fa7f","urlToken":"","name":"知乎用户","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002Fda8e974dc_l.jpg?source=1940ef5c","avatarUrlTemplate":"https:\u002F\u002Fpic4.zhimg.com\u002Fda8e974dc.jpg?source=1940ef5c","isOrg":false,"type":"people","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fpeople\u002F0","userType":"people","headline":"","badge":[],"badgeV2":{"title":"","mergedBadges":[],"detailBadges":[],"icon":"","nightIcon":""},"gender":1,"isAdvertiser":false,"followerCount":4496,"isFollowed":false,"isPrivacy":true},"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fanswers\u002F55909208","isCollapsed":false,"createdTime":1437482015,"updatedTime":1437482015,"extras":"","isCopyable":true,"isNormal":true,"voteupCount":1,"commentCount":0,"isSticky":false,"adminClosedComment":false,"commentPermission":"all","canComment":{"reason":"","status":true},"reshipmentSettings":"allowed","content":"BSTR是Windows COM中标准的做法。被调用方分配内存，然后调用方释放。使用统一的分配API：SysAllocString\u002FSysFreeString.","editableContent":"","excerpt":"BSTR是Windows COM中标准的做法。被调用方分配内存，然后调用方释放。使用统一的分配API：SysAllocString\u002FSysFreeString.","collapsedBy":"nobody","collapseReason":"","annotationAction":null,"markInfos":[],"relevantInfo":{"isRelevant":false,"relevantType":"","relevantText":""},"suggestEdit":{"reason":"","status":false,"tip":"","title":"","unnormalDetails":{"status":"","description":"","reason":"","reasonId":0,"note":""},"url":""},"isLabeled":false,"rewardInfo":{"canOpenReward":false,"isRewardable":false,"rewardMemberCount":0,"rewardTotalMoney":0,"tagline":""},"relationship":{"isAuthor":false,"isAuthorized":false,"isNothelp":false,"isThanked":false,"isRecognized":false,"voting":0,"upvotedFollowees":[]},"adAnswer":null},"55951154":{"id":55951154,"type":"answer","answerType":"normal","question":{"type":"question","id":33058061,"title":"windows api设计的如何？","questionType":"normal","created":1437469084,"updatedTime":1437469084,"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fquestions\u002F33058061","relationship":{}},"author":{"id":"28e02f4158cb57e164c6d82de83b3511","urlToken":"","name":"知乎用户","avatarUrl":"https:\u002F\u002Fpic1.zhimg.com\u002Fda8e974dc_l.jpg?source=1940ef5c","avatarUrlTemplate":"https:\u002F\u002Fpic4.zhimg.com\u002Fda8e974dc.jpg?source=1940ef5c","isOrg":false,"type":"people","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fpeople\u002F0","userType":"people","headline":"","badge":[],"badgeV2":{"title":"","mergedBadges":[],"detailBadges":[],"icon":"","nightIcon":""},"gender":1,"isAdvertiser":false,"followerCount":5095,"isFollowed":false,"isPrivacy":true},"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fanswers\u002F55951154","isCollapsed":false,"createdTime":1437525050,"updatedTime":1437534427,"extras":"","isCopyable":true,"isNormal":true,"voteupCount":1,"commentCount":0,"isSticky":false,"adminClosedComment":false,"commentPermission":"all","canComment":{"reason":"","status":true},"reshipmentSettings":"allowed","content":"一般来说，为了避免由于跨模块调用（尤其是使用动态链接库）的时候，内存分配方和释放方不同而可能引发的问题（一般是由于分配方与释放方使用了不同的堆），肯定是要坚持“谁分配，谁释放”的原则的。\u003Cbr\u002F\u003E因此大部分的API一般是由调用方提供一个字符串缓冲区以及缓冲区可以接受字符的最大长度，然后由被调用方将自己的字符串复制到调用方指定的位置去的。\u003Cbr\u002F\u003E不过，作为函数的被调用方，你也可以使用 char** 或者返回 char*，但是需要暴露一个专门的函数，用于回收你分配的内存。例如：\u003Cbr\u002F\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-cpp\"\u003E\u003Cspan class=\"c1\"\u003E\u002F\u002F 假设你已经根据实际情况定义好了 _DLLEXPORT 用于导出函数。\n\u003C\u002Fspan\u003E\u003Cspan class=\"c1\"\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003E_DLLEXPORT\u003C\u002Fspan\u003E \u003Cspan class=\"kt\"\u003Echar\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003ECreateString\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003E_DLLEXPORT\u003C\u002Fspan\u003E \u003Cspan class=\"kt\"\u003Evoid\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003EDeleteString\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"kt\"\u003Echar\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EpString\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"kt\"\u003Echar\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003ECreateString\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"kt\"\u003Echar\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Emystr\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"kt\"\u003Echar\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E100\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E];\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"n\"\u003Estrcpy\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Emystr\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"s\"\u003E&#34;这是一个测试。\u003C\u002Fspan\u003E\u003Cspan class=\"se\"\u003E\\n\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E稍后你可以用其他内容填充这片内存。&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Emystr\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"kt\"\u003Evoid\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003EDeleteString\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"kt\"\u003Echar\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EpString\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"k\"\u003Edelete\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E[]\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EpString\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E然后另一个模块内想要使用 CreateString ，那么就需要这样\u003Cbr\u002F\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-cpp\"\u003E \t\u003Cspan class=\"kt\"\u003Echar\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eclient\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ECreateString\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"c1\"\u003E\u002F\u002F 对 client 做你想做的事情。\n\u003C\u002Fspan\u003E\u003Cspan class=\"c1\"\u003E\u003C\u002Fspan\u003E\t\u003Cspan class=\"n\"\u003EDeleteString\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eclient\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E然而在 Windows API 中，字符串的处理方法以第一种情况居多，就是由调用方来分配缓冲区。这一点与 sprintf 类似。\u003Cbr\u002F\u003E例如，如果我们拿到了一个窗口的句柄，想要获取窗口的标题，可以使用 GetWindowText 函数：\u003Cbr\u002F\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-text\"\u003Eint WINAPI GetWindowText(\n  _In_   HWND hWnd,\n  _Out_  LPTSTR lpString,\n  _In_   int nMaxCount\n); \u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E其中，\u003Cbr\u002F\u003E\u003Cblockquote\u003E lpString [out] \u003Cbr\u002F\u003EType: LPTSTR\u003Cbr\u002F\u003EThe buffer that will receive the text. If the string is as long or longer than the buffer, the string is truncated and terminated with a null character.\u003Cbr\u002F\u003E\u003Cbr\u002F\u003EnMaxCount [in] \u003Cbr\u002F\u003EType: int\u003Cbr\u002F\u003EThe maximum number of characters to copy to the buffer, including the null character. If the text exceeds this limit, it is truncated.\u003C\u002Fblockquote\u003E也就是说，首先，lpString的内存是由调用方提供的，GetWindowText 仅负责把字符填入指定的内存中去；其次如果发现窗口标题文本的实际长度大于 nMaxCount - 1，那么文本会被截断。\u003Cbr\u002F\u003E可能你会有一个问题，我们能否在获取文本之前，确定窗口标题究竟有多长？ 这样，我们就可以分配最合适的内存长度。Windows API 当然已经考虑到这一点了，于是就有了 GetWindowTextLength 函数：\u003Cbr\u002F\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-text\"\u003Eint WINAPI GetWindowTextLength(\n  _In_  HWND hWnd\n); \u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E我们来看看它的描述\u003Cbr\u002F\u003E\u003Cblockquote\u003EReturn value\n\u003Cp\u003E\nType: int\u003C\u002Fp\u003E\u003Cp\u003EIf the function succeeds, the return value is the length, in characters, of \nthe text. Under certain conditions, this value may actually be greater than the \nlength of the text. For more information, see the following Remarks section.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E这里提到的“返回值可能比实际文本的长度要大”，是考虑到了多字节字符系统（MBCS）中某些字符可能会占用两个或更多字节数。也就是说，如果你是用的是 ANSI 版本的函数（即 GetWindowTextLengthA），那么你可以把返回值作为分配内存的字节数（别忘了 +1）来使用，绝对可以放得下。\u003Cbr\u002F\u003E而且，就算你在调用 GetWindowTextLength 和 GetWindowText 两个步骤之间，目标窗口的文本发生变化了，例如，变长了，那么也不会有问题。GetWindowText 会根据你提供的缓冲区大小，将多出去的部分截断。因此起码不会造成崩溃。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E在有些情况下，字符串的最大长度是已知的，例如 GetComputerName：\u003Cbr\u002F\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-text\"\u003EBOOL WINAPI GetComputerName(\n  _Out_    LPTSTR lpBuffer,\n  _Inout_  LPDWORD lpnSize\n); \u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E这里是这么说的：\u003Cbr\u002F\u003E\u003Cblockquote\u003ElpBuffer [out] \n\n\u003Cp\u003EA pointer to a buffer that receives the computer name or the cluster virtual \nserver name. \u003Cu\u003EThe buffer size should be large enough to contain \nMAX_COMPUTERNAME_LENGTH + 1 characters.\u003C\u002Fu\u003E\u003C\u002Fp\u003E\nlpnSize [in, out] \n\n\u003Cp\u003EOn input, specifies the size of the buffer, in TCHARs. On output, the number of TCHARs copied to the destination buffer, not \nincluding the terminating null character.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cu\u003EIf the buffer is too small, the function fails and \u003C\u002Fu\u003E\u003Ca href=\"ms-xhelp:\u002F\u002F\u002F?method=page&amp;id=d852e148-985c-416f-a5a7-27b6914b45d4&amp;vendor=Microsoft&amp;topicVersion=85&amp;topicLocale=EN-US\"\u003E\u003Cu\u003EGetLastError\u003C\u002Fu\u003E\u003C\u002Fa\u003E\u003Cu\u003E returns ERROR_BUFFER_OVERFLOW. \nThe lpnSize parameter specifies the size \nof the buffer required, including the terminating null character.\u003C\u002Fu\u003E\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E也就是说，只要你的缓冲区足以包含 MAX_COMPUTERNAME_LENGTH + 1 个字符，那么调用就是绝对没有问题的。如果你稍微吝啬一点，缓冲区分配少了，也可以，只不过每次调用完毕后都要检查一下 GetLastError 以确定你的缓冲区够不够用。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E实际上，不仅仅是字符串。还有结构体也是如此处理的。在有些情况下，调用方不知道需要多大的用于填充结构体的来容纳信息，例如 GDI 中的 GetObject 函数：\u003Cbr\u002F\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-cpp\"\u003E\u003Cspan class=\"kt\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003EGetObject\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\n  \u003Cspan class=\"n\"\u003E_In_\u003C\u002Fspan\u003E   \u003Cspan class=\"n\"\u003EHGDIOBJ\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ehgdiobj\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"n\"\u003E_In_\u003C\u002Fspan\u003E   \u003Cspan class=\"kt\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EcbBuffer\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"n\"\u003E_Out_\u003C\u002Fspan\u003E  \u003Cspan class=\"n\"\u003ELPVOID\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ElpvObject\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E \n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E其中，hgdiobj 是你使用 GDI 中的相关函数创建的句柄，这个句柄可以是 位图、画笔、画刷、调板和字体 句柄，对于不同类型的句柄，GetObject 填入 lpvObject 的字节数也不一样。就如你可以在定义中看到的 LPVOID 一样。就 GetObject 调用本身而言，如果调用方并不知道 hgdiobj 是一个什么句柄（感觉这种情况其实很少见，但理论上来说确实有这个可能），那么调用方也就不知道自己在调用此函数前，应该给 lpvObject 分配 BITMAP、DIBSECTION、EXTLOGPEN、LOGPEN、LOGBRUSH、LOGFONT，还是WORD（对于调板）。\u003Cbr\u002F\u003E那么，怎么办？我们来看看这个函数的返回值\u003Cbr\u002F\u003E\u003Cblockquote\u003EReturn value\n\u003Cp\u003EIf the function succeeds, and lpvObject is a valid pointer, the return value \nis the number of bytes stored \ninto the buffer.\u003C\u002Fp\u003E\u003Cp\u003EIf the function succeeds, and lpvObject is NULL, the return value is the number of bytes required to hold the information \nthe function would store into the buffer.\u003C\u002Fp\u003E\u003Cp\u003EIf the function fails, the return value is zero.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E也就是说，只要先令 lpvObject 为 NULL，调用一次 GetObject，那么我们就知道需要多大的缓冲区了，那么接下来只要备足缓冲区，再调用一次 GetObject 就可以了。就算你不知道应该使用哪种结构体，你甚至都可以直接使用 new char[...] 来分配内存……总之，就函数调用本身而言，这个流程是没错的。\u003Cbr\u002F\u003E好吧，如果你真的不知道你手握的 hgdiobj 是什么，其实也可以先去问问 GetObjectType 的。","editableContent":"","excerpt":"一般来说，为了避免由于跨模块调用（尤其是使用动态链接库）的时候，内存分配方和释放方不同而可能引发的问题（一般是由于分配方与释放方使用了不同的堆），肯定是要坚持“谁分配，谁释放”的原则的。 因此大部分的API一般是由调用方提供一个字符串缓冲区以及缓冲区可以接受字符的最大长度，然后由被调用方将自己的字符串复制到调用方指定的位置去的。 不过，作为函数的被调用方，你也可以使用 char** 或者返回 char*，但是需要…","collapsedBy":"nobody","collapseReason":"","annotationAction":null,"markInfos":[],"relevantInfo":{"isRelevant":false,"relevantType":"","relevantText":""},"suggestEdit":{"reason":"","status":false,"tip":"","title":"","unnormalDetails":{"status":"","description":"","reason":"","reasonId":0,"note":""},"url":""},"isLabeled":false,"rewardInfo":{"canOpenReward":false,"isRewardable":false,"rewardMemberCount":0,"rewardTotalMoney":0,"tagline":""},"relationship":{"isAuthor":false,"isAuthorized":false,"isNothelp":false,"isThanked":false,"isRecognized":false,"voting":0,"upvotedFollowees":[]},"adAnswer":null},"126551593":{"id":126551593,"type":"answer","answerType":"normal","question":{"type":"question","id":33058061,"title":"windows api设计的如何？","questionType":"normal","created":1437469084,"updatedTime":1437469084,"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fquestions\u002F33058061","relationship":{}},"author":{"id":"5512b2dde2e8ecefbba31b37283d53ad","urlToken":"xiong-qi-1-54","name":"熊起","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-8f7da4cd0bf848d3d438cdd37f401ebc_l.jpg?source=1940ef5c","avatarUrlTemplate":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-8f7da4cd0bf848d3d438cdd37f401ebc.jpg?source=1940ef5c","isOrg":false,"type":"people","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fpeople\u002F5512b2dde2e8ecefbba31b37283d53ad","userType":"people","headline":"克莱登大学农业学院品药丸专业","badge":[],"badgeV2":{"title":"","mergedBadges":[],"detailBadges":[],"icon":"","nightIcon":""},"gender":1,"isAdvertiser":false,"followerCount":633,"isFollowed":false,"isPrivacy":false},"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fanswers\u002F126551593","isCollapsed":false,"createdTime":1476430848,"updatedTime":1476430848,"extras":"","isCopyable":true,"isNormal":true,"voteupCount":0,"commentCount":0,"isSticky":false,"adminClosedComment":false,"commentPermission":"all","canComment":{"reason":"","status":true},"reshipmentSettings":"allowed","content":"用回调：\u003Cbr\u002F\u003EC++处理这种接口最漂亮，硬要用的C方案大概这样：\u003Cbr\u002F\u003E协议部分：\u003Cbr\u002F\u003Estruct writer\u003Cbr\u002F\u003E{\u003Cbr\u002F\u003Evoid* data;\u003Cbr\u002F\u003Evoid(*proc)(void*, const char*, size_t);\u003Cbr\u002F\u003E};\u003Cbr\u002F\u003E\u003Cbr\u002F\u003Evoid write_string(writer w, const char* s, size_t len)\u003Cbr\u002F\u003E{\u003Cbr\u002F\u003Ew.proc(w.data,s,len);\u003Cbr\u002F\u003E}\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E\u002F\u002FABI这边\u003Cbr\u002F\u003Emystring s;\u003Cbr\u002F\u003Eget_string(make_writer(s));\u003Cbr\u002F\u003E\u002F\u002Fmake_writer函数你自己提供\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E\u002F\u002F另一边\u003Cbr\u002F\u003E\u003Cbr\u002F\u003Evoid get_string(struct writer w)\u003Cbr\u002F\u003E{\u003Cbr\u002F\u003E  write_string(w,“hello”,6);\u003Cbr\u002F\u003E}","editableContent":"","excerpt":"用回调： C++处理这种接口最漂亮，硬要用的C方案大概这样： 协议部分： struct writer { void* data; void(*proc)(void*, const char*, size_t); }; void write_string(writer w, const char* s, size_t len) { w.proc(w.data,s,len); } \u002F\u002FABI这边 mystring s; get_string(make_writer(s)); \u002F\u002Fmake_writer函数你自己提供 \u002F\u002F另一边 void get_string(struct writer w) { write_string(w,“hello”,6); }","collapsedBy":"nobody","collapseReason":"","annotationAction":null,"markInfos":[],"relevantInfo":{"isRelevant":false,"relevantType":"","relevantText":""},"suggestEdit":{"reason":"","status":false,"tip":"","title":"","unnormalDetails":{"status":"","description":"","reason":"","reasonId":0,"note":""},"url":""},"isLabeled":false,"rewardInfo":{"canOpenReward":false,"isRewardable":false,"rewardMemberCount":0,"rewardTotalMoney":0,"tagline":""},"relationship":{"isAuthor":false,"isAuthorized":false,"isNothelp":false,"isThanked":false,"isRecognized":false,"voting":0,"upvotedFollowees":[]},"adAnswer":null}},"articles":{},"columns":{},"topics":{},"roundtables":{},"favlists":{},"comments":{},"notifications":{},"ebooks":{},"activities":{},"feeds":{},"pins":{},"promotions":{},"drafts":{},"chats":{},"posts":{},"clubs":{},"clubTags":{}},"currentUser":"","account":{"lockLevel":{},"unlockTicketStatus":false,"unlockTicket":null,"challenge":[],"errorStatus":false,"message":"","isFetching":false,"accountInfo":{},"urlToken":{"loading":false}},"settings":{"socialBind":null,"inboxMsg":null,"notification":{},"email":{},"privacyFlag":null,"blockedUsers":{"isFetching":false,"paging":{"pageNo":1,"pageSize":6},"data":[]},"blockedFollowees":{"isFetching":false,"paging":{"pageNo":1,"pageSize":6},"data":[]},"ignoredTopics":{"isFetching":false,"paging":{"pageNo":1,"pageSize":6},"data":[]},"restrictedTopics":null,"laboratory":{}},"notification":{},"people":{"profileStatus":{},"activitiesByUser":{},"answersByUser":{},"answersSortByVotesByUser":{},"answersIncludedByUser":{},"votedAnswersByUser":{},"thankedAnswersByUser":{},"voteAnswersByUser":{},"thankAnswersByUser":{},"topicAnswersByUser":{},"zvideosByUser":{},"articlesByUser":{},"articlesSortByVotesByUser":{},"articlesIncludedByUser":{},"pinsByUser":{},"questionsByUser":{},"commercialQuestionsByUser":{},"favlistsByUser":{},"followingByUser":{},"followersByUser":{},"mutualsByUser":{},"followingColumnsByUser":{},"followingQuestionsByUser":{},"followingFavlistsByUser":{},"followingTopicsByUser":{},"publicationsByUser":{},"columnsByUser":{},"allFavlistsByUser":{},"brands":null,"creationsByUser":{},"creationsSortByVotesByUser":{},"creationsFeed":{},"infinity":{}},"env":{"ab":{"config":{"experiments":[{"expId":"launch-qa_cl_guest-2","expPrefix":"qa_cl_guest","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-se_item-3","expPrefix":"se_item","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_timeguide-2","expPrefix":"vd_timeguide","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_video_replay-3","expPrefix":"vd_video_replay","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_zvideo_link-10","expPrefix":"vd_zvideo_link","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"vd_bullet_gui-1","expPrefix":"vd_bullet_gui","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"vd_vserial-1","expPrefix":"vd_vserial","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"web_nvgt-2_v5","expPrefix":"web_nvgt","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"Test_Punk-1_v2","expPrefix":"Test_Punk","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"meta_ebook-2_v1","expPrefix":"meta_ebook","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"recnew_2th-4_v2","expPrefix":"recnew_2th","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"hot_card-2_v2","expPrefix":"hot_card","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"general_1-2_v1","expPrefix":"general_1","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"se_hour_ctr-2_v1","expPrefix":"se_hour_ctr","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"correct_gpu-2_v2","expPrefix":"correct_gpu","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"se_fix_ebook-3_v2","expPrefix":"se_fix_ebook","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false}],"params":[{"id":"gue_visit_n_artcard","type":"String","value":"1","layerId":"gueqa_layer_579"},{"id":"ge_cp_zvideo","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_742","key":3111},{"id":"ge_emoji","type":"String","value":"0","chainId":"_gene_","layerId":"getp_layer_827","key":3209},{"id":"show_ad","type":"Int","value":"0","chainId":"_gene_","layerId":"show_ad","key":27},{"id":"pfd_newbie2","type":"Int","value":"0","chainId":"_gene_","layerId":"pfd_newbie2","key":71},{"id":"hot_card","type":"Int","value":"0","chainId":"_gene_","layerId":"hot_card","key":108},{"id":"li_sp_mqbk","type":"String","value":"0","chainId":"_all_","layerId":"lili_layer_748"},{"id":"ge_sxzx","type":"String","value":"0","chainId":"_gene_","layerId":"gere_layer_990","key":3060},{"id":"tp_zrec","type":"String","value":"0","chainId":"_all_","layerId":"tptp_layer_619"},{"id":"gue_bullet_second","type":"String","value":"1","layerId":"guevd_layer_1"},{"id":"li_paid_answer_exp","type":"String","value":"0","chainId":"_all_","layerId":"lili_layer_3"},{"id":"ge_kocbox","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_945","key":3087},{"id":"general_1","type":"Int","value":"2","chainId":"_gene_","layerId":"general_1","key":8},{"id":"web_scl_rec","type":"String","value":"0","layerId":"webgw_layer_759"},{"id":"gue_v_serial","type":"String","value":"1","layerId":"guevd_layer_695"},{"id":"ge_newyanzhi","type":"String","value":"0","chainId":"_gene_","layerId":"geus_layer_1019","key":2788},{"id":"li_panswer_topic","type":"String","value":"0","chainId":"_all_","layerId":"lili_layer_602"},{"id":"gue_art2qa","type":"String","value":"0","layerId":"gueqa_layer_579"},{"id":"gue_fo_recom","type":"String","value":"0","layerId":"gueqa_layer_780"},{"id":"ge_com_sup","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_859","key":2891},{"id":"gue_zvideo_link","type":"String","value":"1","layerId":"guevd_layer_2"},{"id":"ge_rec_2th","type":"String","value":"11","chainId":"_gene_","layerId":"geli_layer_965","key":3023},{"id":"ge_vector","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_989","key":3134},{"id":"gue_bullet_guide","type":"String","value":"发个弹幕聊聊…","layerId":"guevd_layer_0"},{"id":"web_nvgt","type":"Int","value":"1","layerId":"web_nvgt"},{"id":"Test_Punk","type":"Int","value":"0","layerId":"Test_Punk"},{"id":"ge_query_pv","type":"Int","value":"0","chainId":"_gene_","layerId":"ge_query_pv","key":58},{"id":"web_login","type":"String","value":"0","layerId":"webgw_layer_759"},{"id":"ge_mixer2","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_976","key":3133},{"id":"gue_recmess","type":"String","value":"0","layerId":"gueqa_layer_795"},{"id":"tp_topic_style","type":"String","value":"0","chainId":"_all_","layerId":"tptp_layer_4"},{"id":"ge_prf_rec","type":"String","value":"0","chainId":"_gene_","layerId":"getop_layer_991","key":3040},{"id":"li_video_section","type":"String","value":"0","chainId":"_all_","layerId":"lili_layer_7"},{"id":"gue_repost","type":"String","value":"0","layerId":"gueqa_layer_671"},{"id":"web_audit_01","type":"String","value":"case1","layerId":"webre_layer_1"},{"id":"ge_infinity6","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_815","key":2817},{"id":"se_ffzx_jushen1","type":"String","value":"0","chainId":"_all_","layerId":"sese_layer_4"},{"id":"gue_bulletmb","type":"String","value":"0","layerId":"guevd_layer_812"},{"id":"gue_vid_tab","type":"String","value":"0","layerId":"guevd_layer_900"},{"id":"web_answer_list_ad","type":"String","value":"1","layerId":"webqa_layer_4"},{"id":"ge_mixer","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_1009","key":3106},{"id":"ge_yuzhi_v1","type":"String","value":"1","chainId":"_gene_","layerId":"gese_layer_1029","key":3127},{"id":"ge_sug_rep","type":"String","value":"1","chainId":"_gene_","layerId":"gese_layer_1034","key":3158},{"id":"gue_playh_an","type":"String","value":"0","layerId":"guevd_layer_622"},{"id":"gue_iosplay","type":"String","value":"0","layerId":"guevd_layer_896"},{"id":"ge_recency","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_1047","key":3072},{"id":"ge_hard_s_ma","type":"String","value":"0","chainId":"_gene_","layerId":"geli_layer_856","key":3031},{"id":"gue_goods_card","type":"String","value":"0","layerId":"gueqa_layer_1"},{"id":"gue_art_ui","type":"String","value":"0","layerId":"gueqa_layer_647"},{"id":"ge_recall","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_1029","key":3110},{"id":"web_mem_tab","type":"String","value":"1","layerId":"webtop_layer_1006"},{"id":"ge_newbie3","type":"String","value":"0","chainId":"_gene_","layerId":"geus_layer_1074","key":3208},{"id":"ge_relation2","type":"String","value":"1","chainId":"_gene_","layerId":"gese_layer_815","key":2796},{"id":"zanswer","type":"Int","value":"0","layerId":"zanswer"},{"id":"se_fix_ebook","type":"Int","value":"1","chainId":"_gene_","layerId":"se_fix_ebook","key":103},{"id":"web_heifetz_grow_ad","type":"String","value":"1","layerId":"webgw_layer_3"},{"id":"web_sem_ab","type":"String","value":"1","layerId":"webgw_layer_3"},{"id":"gue_self_censoring","type":"String","value":"1","layerId":"gueqa_layer_1"},{"id":"gue_cdzixun","type":"String","value":"0","layerId":"gueqa_layer_3"},{"id":"ge_sug_v2","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_1000","key":3189},{"id":"recnew_2th","type":"Int","value":"22","layerId":"recnew_2th"},{"id":"ge_aaaa","type":"Int","value":"0","chainId":"_gene_","layerId":"ge_aaaa","key":121},{"id":"li_edu_page","type":"String","value":"old","chainId":"_all_","layerId":"lili_layer_580"},{"id":"gue_sharp","type":"String","value":"1","layerId":"guevd_layer_686"},{"id":"zr_expslotpaid","type":"String","value":"1","chainId":"_all_","layerId":"zrrec_layer_11"},{"id":"ge_meta_ss","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_834","key":3079},{"id":"pf_noti_entry_num","type":"String","value":"0","chainId":"_all_","layerId":"pfus_layer_718"},{"id":"web_answerlist_ad","type":"String","value":"0","layerId":"webqa_layer_1"},{"id":"web_unfriendly_comm","type":"String","value":"0","layerId":"webre_layer_1"},{"id":"ge_vec_bert","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_1000","key":3154},{"id":"ge_search_ui","type":"String","value":"1","chainId":"_gene_","layerId":"gese_layer_838","key":2898},{"id":"ge_upload","type":"String","value":"0","chainId":"_gene_","layerId":"geus_layer_839","key":2892},{"id":"pf_adjust","type":"String","value":"0","chainId":"_all_","layerId":"pfus_layer_9"},{"id":"ge_v068","type":"Int","value":"0","chainId":"_gene_","layerId":"ge_v068","key":139},{"id":"gue_card_test","type":"String","value":"1","layerId":"gueqa_layer_2"},{"id":"ge_rm_d2q_v2","type":"String","value":"1","chainId":"_gene_","layerId":"gese_layer_1034","key":3105},{"id":"tp_contents","type":"String","value":"2","chainId":"_all_","layerId":"tptp_layer_627"},{"id":"pfd_newbie","type":"Int","value":"0","chainId":"_gene_","layerId":"pfd_newbie","key":63},{"id":"gue_q_share","type":"String","value":"0","layerId":"gueqa_layer_647"},{"id":"ge_dipin_pre","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_1000","key":3124},{"id":"ge_usercard1","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_742","key":2740},{"id":"web_creator_route","type":"String","value":"1","layerId":"webtop_layer_1"},{"id":"qap_question_author","type":"String","value":"0","chainId":"_all_","layerId":"qapqa_layer_2"},{"id":"web_collection_guest","type":"String","value":"1","layerId":"webqa_layer_4"},{"id":"ge_base_only","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_1029","key":3172},{"id":"ge_tbw","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_1071","key":3201},{"id":"gue_andplayd","type":"String","value":"0","layerId":"guevd_layer_686"},{"id":"ge_video","type":"String","value":"0","chainId":"_gene_","layerId":"geli_layer_856","key":2831},{"id":"ge_time","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_1047","key":3147},{"id":"ge_entityner","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_859","key":3177},{"id":"ge_guess","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_938","key":2912},{"id":"gue_video_replay","type":"String","value":"2","layerId":"guevd_layer_3"},{"id":"gue_profile_video","type":"String","value":"1","layerId":"guevd_layer_5"},{"id":"gue_video_guide","type":"String","value":"1","layerId":"guevd_layer_625"},{"id":"web_ad_banner","type":"String","value":"0","layerId":"webgw_layer_3"},{"id":"web_column_auto_invite","type":"String","value":"0","layerId":"webqa_layer_1"},{"id":"zr_intervene","type":"String","value":"0","chainId":"_all_","layerId":"zrrec_layer_2"},{"id":"ge_v_rank_v3","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_1047","key":2966},{"id":"ge_spe_rt","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_742","key":2970},{"id":"qap_question_visitor","type":"String","value":" 0","chainId":"_all_","layerId":"qapqa_layer_2"},{"id":"meta_ebook","type":"Int","value":"1","layerId":"meta_ebook"},{"id":"se_hour_ctr","type":"Int","value":"0","chainId":"_gene_","layerId":"se_hour_ctr","key":109},{"id":"gue_messrec","type":"String","value":"0","layerId":"gueqa_layer_769"},{"id":"ge_entity","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_946","key":3036},{"id":"tp_dingyue_video","type":"String","value":"0","chainId":"_all_","layerId":"tptp_layer_4"},{"id":"ge_newcard","type":"String","value":"0","chainId":"_gene_","layerId":"geus_layer_839","key":2997},{"id":"top_test_4_liguangyi","type":"String","value":"1","chainId":"_all_","layerId":"iosus_layer_1"},{"id":"correct_gpu","type":"Int","value":"1","chainId":"_gene_","layerId":"correct_gpu","key":66},{"id":"ge_corr","type":"String","value":"1","chainId":"_gene_","layerId":"gese_layer_976","key":3041},{"id":"ge_flow_join","type":"String","value":"0","chainId":"_gene_","layerId":"getp_layer_872","key":2988},{"id":"li_vip_verti_search","type":"String","value":"0","chainId":"_all_","layerId":"lili_layer_2"},{"id":"zr_slotpaidexp","type":"String","value":"1","chainId":"_all_","layerId":"zrrec_layer_5"},{"id":"ge_item","type":"String","value":"2","chainId":"_gene_","layerId":"gese_layer_945","key":2971}],"chains":[{"chainId":"_all_"}],"encodedParams":"CmYnDIkMGwBHAGwA9AsPDAgA5ApLC88LPgw6AD0M4AsBCyIMNwxWDAAM1wsmDIgM7ApnAHUMeQAHDFIMUgtMC4sAIQw\u002FADQMtApkDIEMDwtLDGkMYAuWC5oLbQDcC7ULQgDhC6wLmwsSMwAAAAAAAAACAAALAAAAAAAAAQEAAAAAAQEAAAAAAQAAAQAAAAAAAAAAAAAAAAAAAQEAAg=="},"triggers":{}},"userAgent":{"Edge":false,"IE":false,"Wechat":false,"Weibo":false,"QQ":false,"MQQBrowser":false,"Qzone":false,"Mobile":false,"Android":false,"iOS":false,"isAppleDevice":false,"Zhihu":false,"ZhihuHybrid":false,"isBot":false,"Tablet":false,"UC":false,"Sogou":false,"Qihoo":false,"Baidu":false,"BaiduApp":false,"Safari":false,"GoogleBot":false,"AndroidDaily":false,"iOSDaily":false,"WxMiniProgram":false,"BaiduMiniProgram":false,"QQMiniProgram":false,"JDMiniProgram":false,"isWebView":false,"isMiniProgram":false,"origin":"Python-urllib\u002F3.8"},"appViewConfig":{},"ctx":{"path":"\u002Fquestion\u002F33058061","query":{},"href":"http:\u002F\u002Fwww.zhihu.com\u002Fquestion\u002F33058061","host":"www.zhihu.com"},"trafficSource":"production","edition":{"beijing":false,"baidu":false,"sogou":false,"baiduBeijing":false,"sogouBeijing":false,"sogouInput":false,"baiduSearch":false,"googleSearch":false,"miniProgram":false,"xiaomi":false},"theme":"light","enableShortcut":true,"referer":"","xUDID":"","mode":"ssr","conf":{},"xTrafficFreeOrigin":"","ipInfo":{},"logged":false,"vars":{"passThroughHeaders":{}}},"me":{"columnContributions":[]},"label":{"recognizerLists":{}},"ecommerce":{},"comments":{"pagination":{},"collapsed":{},"reverse":{},"reviewing":{},"conversation":{},"parent":{}},"commentsV2":{"stickers":[],"commentWithPicPermission":{},"notificationsComments":{},"pagination":{},"collapsed":{},"reverse":{},"reviewing":{},"conversation":{},"conversationMore":{},"parent":{}},"pushNotifications":{"default":{"isFetching":false,"isDrained":false,"ids":[]},"follow":{"isFetching":false,"isDrained":false,"ids":[]},"vote_thank":{"isFetching":false,"isDrained":false,"ids":[]},"currentTab":"default","notificationsCount":{"default":0,"follow":0,"vote_thank":0}},"messages":{"data":{},"currentTab":"common","messageCount":0},"register":{"registerValidateSucceeded":null,"registerValidateErrors":{},"registerConfirmError":null,"sendDigitsError":null,"registerConfirmSucceeded":null},"login":{"loginUnregisteredError":false,"loginBindWechatError":false,"loginConfirmError":null,"sendDigitsError":null,"needSMSIdentify":false,"validateDigitsError":false,"loginConfirmSucceeded":null,"qrcodeLoginToken":"","qrcodeLoginScanStatus":0,"qrcodeLoginError":null,"qrcodeLoginReturnNewToken":false},"active":{"sendDigitsError":null,"activeConfirmSucceeded":null,"activeConfirmError":null},"switches":{},"captcha":{"captchaNeeded":false,"captchaValidated":false,"captchaBase64String":null,"captchaValidationMessage":null,"loginCaptchaExpires":false},"sms":{"supportedCountries":[]},"chat":{"chats":{},"inbox":{"recents":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"strangers":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"friends":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"search":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"config":{"newCount":0,"strangerMessageSwitch":false,"strangerMessageUnread":false,"friendCount":0}},"global":{"isChatMqttExisted":false}},"emoticons":{"emoticonGroupList":[],"emoticonGroupDetail":{}},"creator":{"currentCreatorUrlToken":null,"homeData":{"recommendQuestions":[]},"tools":{"question":{"invitationCount":{"questionFolloweeCount":0,"questionTotalCount":0},"goodatTopics":[]},"customPromotion":{"itemLists":{}},"recommend":{"recommendTimes":{}}},"explore":{"academy":{"tabs":[],"article":{}}},"rights":[],"rightsStatus":{},"levelUpperLimit":10,"account":{"growthLevel":{}},"mcn":{},"applyStatus":{},"videoSupport":{},"mcnManage":{},"tasks":{},"recentlyCreated":[]},"question":{"followers":{},"concernedFollowers":{},"answers":{"33058061":{"isFetching":false,"isDrained":false,"ids":[55893890,55896568,55951154,55909208,126551593],"newIds":[55893890,55896568,55951154,55909208,126551593],"totals":6,"isPrevDrained":true,"previous":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fquestions\u002F33058061\u002Fanswers?include=data%5B%2A%5D.is_normal%2Cadmin_closed_comment%2Creward_info%2Cis_collapsed%2Cannotation_action%2Cannotation_detail%2Ccollapse_reason%2Cis_sticky%2Ccollapsed_by%2Csuggest_edit%2Ccomment_count%2Ccan_comment%2Ccontent%2Ceditable_content%2Cattachment%2Cvoteup_count%2Creshipment_settings%2Ccomment_permission%2Ccreated_time%2Cupdated_time%2Creview_info%2Crelevant_info%2Cquestion%2Cexcerpt%2Crelationship.is_authorized%2Cis_author%2Cvoting%2Cis_thanked%2Cis_nothelp%2Cis_labeled%2Cis_recognized%2Cpaid_info%2Cpaid_info_content%3Bdata%5B%2A%5D.mark_infos%5B%2A%5D.url%3Bdata%5B%2A%5D.author.follower_count%2Cbadge%5B%2A%5D.topics%3Bsettings.table_of_content.enabled%3B&limit=5&offset=0&platform=desktop&sort_by=default","next":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fquestions\u002F33058061\u002Fanswers?include=data%5B%2A%5D.is_normal%2Cadmin_closed_comment%2Creward_info%2Cis_collapsed%2Cannotation_action%2Cannotation_detail%2Ccollapse_reason%2Cis_sticky%2Ccollapsed_by%2Csuggest_edit%2Ccomment_count%2Ccan_comment%2Ccontent%2Ceditable_content%2Cattachment%2Cvoteup_count%2Creshipment_settings%2Ccomment_permission%2Ccreated_time%2Cupdated_time%2Creview_info%2Crelevant_info%2Cquestion%2Cexcerpt%2Crelationship.is_authorized%2Cis_author%2Cvoting%2Cis_thanked%2Cis_nothelp%2Cis_labeled%2Cis_recognized%2Cpaid_info%2Cpaid_info_content%3Bdata%5B%2A%5D.mark_infos%5B%2A%5D.url%3Bdata%5B%2A%5D.author.follower_count%2Cbadge%5B%2A%5D.topics%3Bsettings.table_of_content.enabled%3B&limit=5&offset=5&platform=desktop&sort_by=default"}},"hiddenAnswers":{},"updatedAnswers":{},"collapsedAnswers":{},"notificationAnswers":{},"invitedQuestions":{"total":{"count":null,"isEnd":false,"isLoading":false,"questions":[]},"followees":{"count":null,"isEnd":false,"isLoading":false,"questions":[]}},"laterQuestions":{"count":null,"globalWriteAnimate":false,"isEnd":false,"isLoading":false,"questions":[]},"waitingQuestions":{"recommend":{"isEnd":false,"isLoading":false,"questions":[]},"hot":{"isEnd":false,"isLoading":false,"questions":[]},"newest":{"isEnd":false,"isLoading":false,"questions":[]},"invite":{"isEnd":false,"isLoading":false,"questions":[]}},"invitationCandidates":{},"inviters":{},"invitees":{},"similarQuestions":{},"relatedCommodities":{},"bio":{},"brand":{},"permission":{},"adverts":{"3":{"ad":{"adVerb":"","brand":{"id":0,"logo":"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-6c915f1916327d2140ad2ed127ab705f_250x250.jpeg","name":"AWS"},"category":1,"clickTracks":["https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper?pf=0&ui=114.255.181.137&ed=CjEEfh4wM312QGFRBmgtUUZ1CC5cbm4mfUd_BgljLx1ZcFovW3Y4cSwXNwIXMTYNWXYPbFkqPn13E2JeCGNqQAJ4C38Be21yaEY7WghpdQZbcx8pTH5rZi1Kb1cfZXkWCTUEfw1zfCw7GGKnhn5850yRIQ%3D%3D&tu=https%3A%2F%2Faws.amazon.com%2Ffree%2F%3Fall_free_tier.sort_by%3Ditem.additionalFields.SortRank%26all_free_tier.sort_order%3Dasc%3Ftrk%3Dba_a134p000003ypeXAAQ%26trkCampaign%3Dacq_paid_media_cn%26sc_channel%3Dba%26sc_campaign%3Dacquisition_CN%26sc_publisher%3DZH%26sc_category%3DCompute%26sc_country%3DCN%26sc_geo%3DCHINA%26sc_outcome%3Dacq%26sc_detail%3Dkeyword%26sc_content%3Dad1%26sc_segment%3D400x224%26sc_medium%3DACQ_CHINA_ZH_TS_Desktop_SU_Compute_Solution_CN_CN_Image__&nt=0&ut=3c3fc81c0b1242779dabbccb84561e61&ar=1&ts=1607331253&au=22961&pdi=1586771060311459&idi=8005"],"closeTrack":"https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper?idi=8005&tu=https%3A%2F%2Faws.amazon.com%2Ffree%2F%3Fall_free_tier.sort_by%3Ditem.additionalFields.SortRank%26all_free_tier.sort_order%3Dasc%3Ftrk%3Dba_a134p000003ypeXAAQ%26trkCampaign%3Dacq_paid_media_cn%26sc_channel%3Dba%26sc_campaign%3Dacquisition_CN%26sc_publisher%3DZH%26sc_category%3DCompute%26sc_country%3DCN%26sc_geo%3DCHINA%26sc_outcome%3Dacq%26sc_detail%3Dkeyword%26sc_content%3Dad1%26sc_segment%3D400x224%26sc_medium%3DACQ_CHINA_ZH_TS_Desktop_SU_Compute_Solution_CN_CN_Image__&ar=1&ts=1607331253&au=22961&ui=114.255.181.137&nt=0&ut=3c3fc81c0b1242779dabbccb84561e61&pf=0&pdi=1586771060311459&ed=CjEEfR4wM312QGFRBmgtUUZ1CC5cbm4mfUd_BgljLx1ZcFovW3Y4cSwXNwIXMTYNWXYPbFkqPn13E2JeCGNqQAJ4C38Be21yaEY7WghpdQZbcx8pTH5rZi1Kb1cfZXkWCTUEfw1zfCw7GGIKgt3inWLx3w%3D%3D","closeTracks":["https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper?idi=8005&tu=https%3A%2F%2Faws.amazon.com%2Ffree%2F%3Fall_free_tier.sort_by%3Ditem.additionalFields.SortRank%26all_free_tier.sort_order%3Dasc%3Ftrk%3Dba_a134p000003ypeXAAQ%26trkCampaign%3Dacq_paid_media_cn%26sc_channel%3Dba%26sc_campaign%3Dacquisition_CN%26sc_publisher%3DZH%26sc_category%3DCompute%26sc_country%3DCN%26sc_geo%3DCHINA%26sc_outcome%3Dacq%26sc_detail%3Dkeyword%26sc_content%3Dad1%26sc_segment%3D400x224%26sc_medium%3DACQ_CHINA_ZH_TS_Desktop_SU_Compute_Solution_CN_CN_Image__&ar=1&ts=1607331253&au=22961&ui=114.255.181.137&nt=0&ut=3c3fc81c0b1242779dabbccb84561e61&pf=0&pdi=1586771060311459&ed=CjEEfR4wM312QGFRBmgtUUZ1CC5cbm4mfUd_BgljLx1ZcFovW3Y4cSwXNwIXMTYNWXYPbFkqPn13E2JeCGNqQAJ4C38Be21yaEY7WghpdQZbcx8pTH5rZi1Kb1cfZXkWCTUEfw1zfCw7GGIKgt3inWLx3w%3D%3D"],"conversionTracks":["https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper?ed=CjEEfx4wM312QGFRBmgtUUZ1CC5cbm4mfUd_BgljLx1ZcFovW3Y4cSwXNwIXMTYNWXYPbFkqPn13E2JeCGNqQAJ4C38Be21yaEY7WghpdQZbcx8pTH5rZi1Kb1cfZXkWCTUEfw1zfCw7GGJ4yMXnxon_ug%3D%3D&ar=1&ts=1607331253&pdi=1586771060311459&tu=https%3A%2F%2Faws.amazon.com%2Ffree%2F%3Fall_free_tier.sort_by%3Ditem.additionalFields.SortRank%26all_free_tier.sort_order%3Dasc%3Ftrk%3Dba_a134p000003ypeXAAQ%26trkCampaign%3Dacq_paid_media_cn%26sc_channel%3Dba%26sc_campaign%3Dacquisition_CN%26sc_publisher%3DZH%26sc_category%3DCompute%26sc_country%3DCN%26sc_geo%3DCHINA%26sc_outcome%3Dacq%26sc_detail%3Dkeyword%26sc_content%3Dad1%26sc_segment%3D400x224%26sc_medium%3DACQ_CHINA_ZH_TS_Desktop_SU_Compute_Solution_CN_CN_Image__&au=22961&nt=0&ut=3c3fc81c0b1242779dabbccb84561e61&pf=0&idi=8005&ui=114.255.181.137"],"creatives":[{"appPromotionUrl":"","brand":{"id":0,"logo":"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-6c915f1916327d2140ad2ed127ab705f_250x250.jpeg","name":"AWS"},"cta":{"value":"查看详情"},"description":"还在为业务增长困扰吗？随着企业数字化发展趋势需求，公司数据架构和数据处理能力都影响着业务转型的步伐。注册AWS 海外区域账户，免费体验海外区域产品和服务，业务驱动，不再困难！","footer":{"value":""},"landingUrl":"https:\u002F\u002Faws.amazon.com\u002Ffree\u002F?all_free_tier.sort_by=item.additionalFields.SortRank&all_free_tier.sort_order=asc?trk=ba_a134p000003ypeXAAQ&trkCampaign=acq_paid_media_cn&sc_channel=ba&sc_campaign=acquisition_CN&sc_publisher=ZH&sc_category=Compute&sc_country=CN&sc_geo=CHINA&sc_outcome=acq&sc_detail=keyword&sc_content=ad1&sc_segment=400x224&sc_medium=ACQ_CHINA_ZH_TS_Desktop_SU_Compute_Solution_CN_CN_Image__","title":"立即注册AWS海外账户，即可享受60多种产品免费套餐！"}],"debugTracks":["https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper?pdi=1586771060311459&nt=0&ed=CjEEcx4wM312QGFRBmgtUUZ1CC5cbm4mfUd_BgljLx1ZcFovW3Y4cSwXNwIXMTYNWXYPbFkqPn13E2JeCGNqQAJ4C38Be21yaEY7WghpdQZbcx8pTH5rZi1Kb1cfZXkWCTUEfw1zfCw7GGLH9ndWYyC1hw%3D%3D&au=22961&ut=3c3fc81c0b1242779dabbccb84561e61&pf=0&idi=8005&ui=114.255.181.137&ts=1607331253&ar=1&tu=https%3A%2F%2Faws.amazon.com%2Ffree%2F%3Fall_free_tier.sort_by%3Ditem.additionalFields.SortRank%26all_free_tier.sort_order%3Dasc%3Ftrk%3Dba_a134p000003ypeXAAQ%26trkCampaign%3Dacq_paid_media_cn%26sc_channel%3Dba%26sc_campaign%3Dacquisition_CN%26sc_publisher%3DZH%26sc_category%3DCompute%26sc_country%3DCN%26sc_geo%3DCHINA%26sc_outcome%3Dacq%26sc_detail%3Dkeyword%26sc_content%3Dad1%26sc_segment%3D400x224%26sc_medium%3DACQ_CHINA_ZH_TS_Desktop_SU_Compute_Solution_CN_CN_Image__"],"displayAdvertisingTag":true,"experimentInfo":"{}","id":960993,"impressionTracks":["https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper?ts=1607331253&au=22961&ut=3c3fc81c0b1242779dabbccb84561e61&ui=114.255.181.137&nt=0&pf=0&idi=8005&ed=CjEEeB4wM312QGFRBmgtUUZ1CC5cbm4mfUd_BgljLx1ZcFovW3Y4cSwXNwIXMTYNWXYPbFkqPn13E2JeCGNqQAJ4C38Be21yaEY7WghpdQZbcx8pTH5rZi1Kb1cfZXkWCTUEfw1zfCw7GGI1Vg7Tm33zrQ%3D%3D&ar=1&pdi=1586771060311459&tu=https%3A%2F%2Faws.amazon.com%2Ffree%2F%3Fall_free_tier.sort_by%3Ditem.additionalFields.SortRank%26all_free_tier.sort_order%3Dasc%3Ftrk%3Dba_a134p000003ypeXAAQ%26trkCampaign%3Dacq_paid_media_cn%26sc_channel%3Dba%26sc_campaign%3Dacquisition_CN%26sc_publisher%3DZH%26sc_category%3DCompute%26sc_country%3DCN%26sc_geo%3DCHINA%26sc_outcome%3Dacq%26sc_detail%3Dkeyword%26sc_content%3Dad1%26sc_segment%3D400x224%26sc_medium%3DACQ_CHINA_ZH_TS_Desktop_SU_Compute_Solution_CN_CN_Image__"],"isEvergreen":false,"isNewWebview":true,"isSpeeding":false,"isWebp":false,"landPrefetch":false,"name":"","nativePrefetch":true,"partyId":-2,"revertCloseTrack":"https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper?pf=0&tu=https%3A%2F%2Faws.amazon.com%2Ffree%2F%3Fall_free_tier.sort_by%3Ditem.additionalFields.SortRank%26all_free_tier.sort_order%3Dasc%3Ftrk%3Dba_a134p000003ypeXAAQ%26trkCampaign%3Dacq_paid_media_cn%26sc_channel%3Dba%26sc_campaign%3Dacquisition_CN%26sc_publisher%3DZH%26sc_category%3DCompute%26sc_country%3DCN%26sc_geo%3DCHINA%26sc_outcome%3Dacq%26sc_detail%3Dkeyword%26sc_content%3Dad1%26sc_segment%3D400x224%26sc_medium%3DACQ_CHINA_ZH_TS_Desktop_SU_Compute_Solution_CN_CN_Image__&ts=1607331253&nt=0&pdi=1586771060311459&idi=8005&ed=CjEEch4wM312QGFRBmgtUUZ1CC5cbm4mfUd_BgljLx1ZcFovW3Y4cSwXNwIXMTYNWXYPbFkqPn13E2JeCGNqQAJ4C38Be21yaEY7WghpdQZbcx8pTH5rZi1Kb1cfZXkWCTUEfw1zfCw7GGJ50EUmeAzQ2g%3D%3D&ar=1&au=22961&ui=114.255.181.137&ut=3c3fc81c0b1242779dabbccb84561e61","template":"web_word","viewTrack":"https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper?au=22961&nt=0&ut=3c3fc81c0b1242779dabbccb84561e61&pf=0&tu=https%3A%2F%2Faws.amazon.com%2Ffree%2F%3Fall_free_tier.sort_by%3Ditem.additionalFields.SortRank%26all_free_tier.sort_order%3Dasc%3Ftrk%3Dba_a134p000003ypeXAAQ%26trkCampaign%3Dacq_paid_media_cn%26sc_channel%3Dba%26sc_campaign%3Dacquisition_CN%26sc_publisher%3DZH%26sc_category%3DCompute%26sc_country%3DCN%26sc_geo%3DCHINA%26sc_outcome%3Dacq%26sc_detail%3Dkeyword%26sc_content%3Dad1%26sc_segment%3D400x224%26sc_medium%3DACQ_CHINA_ZH_TS_Desktop_SU_Compute_Solution_CN_CN_Image__&pdi=1586771060311459&ui=114.255.181.137&ar=1&ts=1607331253&ed=CjEEeR4wM312QGFRBmgtUUZ1CC5cbm4mfUd_BgljLx1ZcFovW3Y4cSwXNwIXMTYNWXYPbFkqPn13E2JeCGNqQAJ4C38Be21yaEY7WghpdQZbcx8pTH5rZi1Kb1cfZXkWCTUEfw1zfCw7GGJ2A5JO-Tglug%3D%3D&idi=8005","viewTracks":["https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper?au=22961&nt=0&ut=3c3fc81c0b1242779dabbccb84561e61&pf=0&tu=https%3A%2F%2Faws.amazon.com%2Ffree%2F%3Fall_free_tier.sort_by%3Ditem.additionalFields.SortRank%26all_free_tier.sort_order%3Dasc%3Ftrk%3Dba_a134p000003ypeXAAQ%26trkCampaign%3Dacq_paid_media_cn%26sc_channel%3Dba%26sc_campaign%3Dacquisition_CN%26sc_publisher%3DZH%26sc_category%3DCompute%26sc_country%3DCN%26sc_geo%3DCHINA%26sc_outcome%3Dacq%26sc_detail%3Dkeyword%26sc_content%3Dad1%26sc_segment%3D400x224%26sc_medium%3DACQ_CHINA_ZH_TS_Desktop_SU_Compute_Solution_CN_CN_Image__&pdi=1586771060311459&ui=114.255.181.137&ar=1&ts=1607331253&ed=CjEEeR4wM312QGFRBmgtUUZ1CC5cbm4mfUd_BgljLx1ZcFovW3Y4cSwXNwIXMTYNWXYPbFkqPn13E2JeCGNqQAJ4C38Be21yaEY7WghpdQZbcx8pTH5rZi1Kb1cfZXkWCTUEfw1zfCw7GGJ2A5JO-Tglug%3D%3D&idi=8005"],"zaAdInfo":"COHTOhDsASIBMV3bm79OYLaBPQ==","zaAdInfoJson":"{\"ad_id\":960993,\"ad_zone_id\":236,\"category\":\"1\",\"timestamp\":1607331200,\"creative_id\":999606}"},"adjson":"{\"ads\":[{\"id\":960993,\"ad_zone_id\":236,\"template\":\"web_word\",\"impression_tracks\":[\"https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper?ar=1\\u0026tu=https%3A%2F%2Faws.amazon.com%2Ffree%2F%3Fall_free_tier.sort_by%3Ditem.additionalFields.SortRank%26all_free_tier.sort_order%3Dasc%3Ftrk%3Dba_a134p000003ypeXAAQ%26trkCampaign%3Dacq_paid_media_cn%26sc_channel%3Dba%26sc_campaign%3Dacquisition_CN%26sc_publisher%3DZH%26sc_category%3DCompute%26sc_country%3DCN%26sc_geo%3DCHINA%26sc_outcome%3Dacq%26sc_detail%3Dkeyword%26sc_content%3Dad1%26sc_segment%3D400x224%26sc_medium%3DACQ_CHINA_ZH_TS_Desktop_SU_Compute_Solution_CN_CN_Image__\\u0026pf=0\\u0026ed=CjEEeB4wM312QGFRBmgtUUZ1CC5cbm4mfUd_BgljLx1ZcFovW3Y4cSwXNwIXMTYNWXYPbFkqPn13E2JeCGNqQAJ4C38Be21yaEY7WghpdQZbcx8pTH5rZi1Kb1cfZXkWCTUEfw1zfCw7GGI1Vg7Tm33zrQ%3D%3D\\u0026au=22961\\u0026ut=3c3fc81c0b1242779dabbccb84561e61\\u0026pdi=1586771060311459\\u0026ui=114.255.181.137\\u0026ts=1607331253\\u0026idi=8005\\u0026nt=0\"],\"view_tracks\":[\"https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper?ar=1\\u0026tu=https%3A%2F%2Faws.amazon.com%2Ffree%2F%3Fall_free_tier.sort_by%3Ditem.additionalFields.SortRank%26all_free_tier.sort_order%3Dasc%3Ftrk%3Dba_a134p000003ypeXAAQ%26trkCampaign%3Dacq_paid_media_cn%26sc_channel%3Dba%26sc_campaign%3Dacquisition_CN%26sc_publisher%3DZH%26sc_category%3DCompute%26sc_country%3DCN%26sc_geo%3DCHINA%26sc_outcome%3Dacq%26sc_detail%3Dkeyword%26sc_content%3Dad1%26sc_segment%3D400x224%26sc_medium%3DACQ_CHINA_ZH_TS_Desktop_SU_Compute_Solution_CN_CN_Image__\\u0026ui=114.255.181.137\\u0026pdi=1586771060311459\\u0026ut=3c3fc81c0b1242779dabbccb84561e61\\u0026idi=8005\\u0026nt=0\\u0026ts=1607331253\\u0026au=22961\\u0026pf=0\\u0026ed=CjEEeR4wM312QGFRBmgtUUZ1CC5cbm4mfUd_BgljLx1ZcFovW3Y4cSwXNwIXMTYNWXYPbFkqPn13E2JeCGNqQAJ4C38Be21yaEY7WghpdQZbcx8pTH5rZi1Kb1cfZXkWCTUEfw1zfCw7GGJ2A5JO-Tglug%3D%3D\"],\"click_tracks\":[\"https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper?pf=0\\u0026ts=1607331253\\u0026nt=0\\u0026ut=3c3fc81c0b1242779dabbccb84561e61\\u0026idi=8005\\u0026ui=114.255.181.137\\u0026ed=CjEEfh4wM312QGFRBmgtUUZ1CC5cbm4mfUd_BgljLx1ZcFovW3Y4cSwXNwIXMTYNWXYPbFkqPn13E2JeCGNqQAJ4C38Be21yaEY7WghpdQZbcx8pTH5rZi1Kb1cfZXkWCTUEfw1zfCw7GGKnhn5850yRIQ%3D%3D\\u0026ar=1\\u0026au=22961\\u0026pdi=1586771060311459\\u0026tu=https%3A%2F%2Faws.amazon.com%2Ffree%2F%3Fall_free_tier.sort_by%3Ditem.additionalFields.SortRank%26all_free_tier.sort_order%3Dasc%3Ftrk%3Dba_a134p000003ypeXAAQ%26trkCampaign%3Dacq_paid_media_cn%26sc_channel%3Dba%26sc_campaign%3Dacquisition_CN%26sc_publisher%3DZH%26sc_category%3DCompute%26sc_country%3DCN%26sc_geo%3DCHINA%26sc_outcome%3Dacq%26sc_detail%3Dkeyword%26sc_content%3Dad1%26sc_segment%3D400x224%26sc_medium%3DACQ_CHINA_ZH_TS_Desktop_SU_Compute_Solution_CN_CN_Image__\"],\"close_tracks\":[\"https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper?pdi=1586771060311459\\u0026tu=https%3A%2F%2Faws.amazon.com%2Ffree%2F%3Fall_free_tier.sort_by%3Ditem.additionalFields.SortRank%26all_free_tier.sort_order%3Dasc%3Ftrk%3Dba_a134p000003ypeXAAQ%26trkCampaign%3Dacq_paid_media_cn%26sc_channel%3Dba%26sc_campaign%3Dacquisition_CN%26sc_publisher%3DZH%26sc_category%3DCompute%26sc_country%3DCN%26sc_geo%3DCHINA%26sc_outcome%3Dacq%26sc_detail%3Dkeyword%26sc_content%3Dad1%26sc_segment%3D400x224%26sc_medium%3DACQ_CHINA_ZH_TS_Desktop_SU_Compute_Solution_CN_CN_Image__\\u0026ed=CjEEfR4wM312QGFRBmgtUUZ1CC5cbm4mfUd_BgljLx1ZcFovW3Y4cSwXNwIXMTYNWXYPbFkqPn13E2JeCGNqQAJ4C38Be21yaEY7WghpdQZbcx8pTH5rZi1Kb1cfZXkWCTUEfw1zfCw7GGIKgt3inWLx3w%3D%3D\\u0026ui=114.255.181.137\\u0026ar=1\\u0026idi=8005\\u0026au=22961\\u0026ut=3c3fc81c0b1242779dabbccb84561e61\\u0026pf=0\\u0026ts=1607331253\\u0026nt=0\"],\"debug_tracks\":[\"https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper?pf=0\\u0026ut=3c3fc81c0b1242779dabbccb84561e61\\u0026ed=CjEEcx4wM312QGFRBmgtUUZ1CC5cbm4mfUd_BgljLx1ZcFovW3Y4cSwXNwIXMTYNWXYPbFkqPn13E2JeCGNqQAJ4C38Be21yaEY7WghpdQZbcx8pTH5rZi1Kb1cfZXkWCTUEfw1zfCw7GGLH9ndWYyC1hw%3D%3D\\u0026pdi=1586771060311459\\u0026ar=1\\u0026ts=1607331253\\u0026nt=0\\u0026ui=114.255.181.137\\u0026idi=8005\\u0026tu=https%3A%2F%2Faws.amazon.com%2Ffree%2F%3Fall_free_tier.sort_by%3Ditem.additionalFields.SortRank%26all_free_tier.sort_order%3Dasc%3Ftrk%3Dba_a134p000003ypeXAAQ%26trkCampaign%3Dacq_paid_media_cn%26sc_channel%3Dba%26sc_campaign%3Dacquisition_CN%26sc_publisher%3DZH%26sc_category%3DCompute%26sc_country%3DCN%26sc_geo%3DCHINA%26sc_outcome%3Dacq%26sc_detail%3Dkeyword%26sc_content%3Dad1%26sc_segment%3D400x224%26sc_medium%3DACQ_CHINA_ZH_TS_Desktop_SU_Compute_Solution_CN_CN_Image__\\u0026au=22961\"],\"conversion_tracks\":[\"https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper?ts=1607331253\\u0026idi=8005\\u0026ed=CjEEfx4wM312QGFRBmgtUUZ1CC5cbm4mfUd_BgljLx1ZcFovW3Y4cSwXNwIXMTYNWXYPbFkqPn13E2JeCGNqQAJ4C38Be21yaEY7WghpdQZbcx8pTH5rZi1Kb1cfZXkWCTUEfw1zfCw7GGJ4yMXnxon_ug%3D%3D\\u0026ui=114.255.181.137\\u0026au=22961\\u0026pdi=1586771060311459\\u0026pf=0\\u0026tu=https%3A%2F%2Faws.amazon.com%2Ffree%2F%3Fall_free_tier.sort_by%3Ditem.additionalFields.SortRank%26all_free_tier.sort_order%3Dasc%3Ftrk%3Dba_a134p000003ypeXAAQ%26trkCampaign%3Dacq_paid_media_cn%26sc_channel%3Dba%26sc_campaign%3Dacquisition_CN%26sc_publisher%3DZH%26sc_category%3DCompute%26sc_country%3DCN%26sc_geo%3DCHINA%26sc_outcome%3Dacq%26sc_detail%3Dkeyword%26sc_content%3Dad1%26sc_segment%3D400x224%26sc_medium%3DACQ_CHINA_ZH_TS_Desktop_SU_Compute_Solution_CN_CN_Image__\\u0026nt=0\\u0026ut=3c3fc81c0b1242779dabbccb84561e61\\u0026ar=1\"],\"extra_conversion_tracks\":{\"call_back\":[\"https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper_callback?si=8e3678aa-01dd-4f3b-a83c-25cec5b1b2ee\\u0026os=3\\u0026zid=236\\u0026zaid=960993\\u0026zcid=999606\\u0026cid=999598\\u0026event=__EVENTTYPE__\\u0026value=__EVENTVALUE__\\u0026ts=__TIMESTAMP__\\u0026cts=__TS__\\u0026mh=__MEMBERHASHID__\"]},\"za_ad_info\":\"COHTOhDsASIBMV3bm79OYLaBPQ==\",\"za_ad_info_json\":\"{\\\"ad_id\\\":960993,\\\"ad_zone_id\\\":236,\\\"category\\\":\\\"1\\\",\\\"timestamp\\\":1607331200,\\\"creative_id\\\":999606}\",\"creatives\":[{\"id\":999606,\"asset\":{\"brand_name\":\"AWS\",\"brand_logo\":\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-6c915f1916327d2140ad2ed127ab705f_250x250.jpeg\",\"title\":\"立即注册AWS海外账户，即可享受60多种产品免费套餐！\",\"desc\":\"还在为业务增长困扰吗？随着企业数字化发展趋势需求，公司数据架构和数据处理能力都影响着业务转型的步伐。注册AWS 海外区域账户，免费体验海外区域产品和服务，业务驱动，不再困难！\",\"landing_url\":\"https:\u002F\u002Faws.amazon.com\u002Ffree\u002F?all_free_tier.sort_by=item.additionalFields.SortRank\\u0026all_free_tier.sort_order=asc?trk=ba_a134p000003ypeXAAQ\\u0026trkCampaign=acq_paid_media_cn\\u0026sc_channel=ba\\u0026sc_campaign=acquisition_CN\\u0026sc_publisher=ZH\\u0026sc_category=Compute\\u0026sc_country=CN\\u0026sc_geo=CHINA\\u0026sc_outcome=acq\\u0026sc_detail=keyword\\u0026sc_content=ad1\\u0026sc_segment=400x224\\u0026sc_medium=ACQ_CHINA_ZH_TS_Desktop_SU_Compute_Solution_CN_CN_Image__\",\"img_size\":0,\"cta\":\"查看详情\",\"native_asset\":{}}}],\"expand\":{\"display_advertising_tag\":true,\"is_new_webview\":true,\"is_cdn_speeding\":false,\"is_apk_market_direct\":false,\"interactive\":{\"deliver_time\":\"25 分钟前\",\"browse_string\":\"47 \",\"participate_string\":\"356 \"}},\"experiment_info\":\"{}\",\"view_x_tracks\":[\"https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper?ts=1607331253\\u0026ui=114.255.181.137\\u0026pf=0\\u0026pdi=1586771060311459\\u0026ut=3c3fc81c0b1242779dabbccb84561e61\\u0026au=22961\\u0026idi=8005\\u0026nt=0\\u0026tu=https%3A%2F%2Faws.amazon.com%2Ffree%2F%3Fall_free_tier.sort_by%3Ditem.additionalFields.SortRank%26all_free_tier.sort_order%3Dasc%3Ftrk%3Dba_a134p000003ypeXAAQ%26trkCampaign%3Dacq_paid_media_cn%26sc_channel%3Dba%26sc_campaign%3Dacquisition_CN%26sc_publisher%3DZH%26sc_category%3DCompute%26sc_country%3DCN%26sc_geo%3DCHINA%26sc_outcome%3Dacq%26sc_detail%3Dkeyword%26sc_content%3Dad1%26sc_segment%3D400x224%26sc_medium%3DACQ_CHINA_ZH_TS_Desktop_SU_Compute_Solution_CN_CN_Image__\\u0026ed=CjEEewhlKSlzHTdUB2d0UQpoCXtcJ3d0KBYwSlBof1NGdwwpXSBvIn9HYAJUdi1KVncKfB4iMyRzHGRXCGl_FhssBHgNemJ3fAMxDgxpdQlddQ9sWzdncWhGPVoBfnkFTSdJdw12amYiUG9XRZH_S_dk-VU%3D\\u0026ar=1\"],\"mobile_experiment\":{\"am_ad_logo\":\"0\",\"am_ad_video\":\"0\",\"am_adx_video\":\"2\",\"am_bid_ratio\":\"10000\",\"am_or_ad\":\"0\",\"am_test_ss\":\"0\"}}]}"}},"advancedStyle":{},"commonAnswerCount":0,"hiddenAnswerCount":0,"meta":{},"bluestarRanklist":{},"relatedSearch":{},"autoInvitation":{},"simpleConcernedFollowers":{},"draftStatus":{},"disclaimers":{}},"shareTexts":{},"answers":{"voters":{},"copyrightApplicants":{},"favlists":{},"newAnswer":{},"concernedUpvoters":{},"simpleConcernedUpvoters":{},"paidContent":{},"settings":{}},"banner":{},"topic":{"bios":{},"hot":{},"newest":{},"top":{},"unanswered":{},"questions":{},"followers":{},"contributors":{},"parent":{},"children":{},"bestAnswerers":{},"wikiMeta":{},"index":{},"intro":{},"meta":{},"schema":{},"creatorWall":{},"wikiEditInfo":{},"committedWiki":{},"landingBasicData":{},"landingExcellentItems":[],"landingExcellentEditors":[],"landingCatalog":[],"landingEntries":{}},"explore":{"recommendations":{},"specials":{"entities":{},"order":[]},"roundtables":{"entities":{},"order":[]},"collections":{},"columns":{}},"articles":{"voters":{}},"favlists":{"relations":{}},"pins":{"reviewing":{}},"topstory":{"recommend":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"follow":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"room":{"meta":{},"isFetching":false,"afterId":0,"items":[],"next":null},"followWonderful":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"sidebar":null,"announcement":{},"hotListCategories":[],"hotList":[],"guestFeeds":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"followExtra":{"isNewUser":null,"isFetched":false,"followCount":0,"followers":[]},"hotDaily":{"data":[],"paging":{}},"hotHighlight":{"isFetching":false,"isDrained":false,"data":[],"paging":{}}},"upload":{},"video":{"data":{},"shareVideoDetail":{},"last":{}},"zvideos":{"campaigns":{},"tagoreCategory":[],"recommendations":{},"insertable":{},"recruit":{"form":{"platform":"","nickname":"","followerCount":"","domain":"","contact":""},"submited":false,"ranking":[]},"club":{}},"guide":{"guide":{"isFetching":false,"isShowGuide":false}},"reward":{"answer":{},"article":{},"question":{}},"search":{"recommendSearch":[],"topSearch":{},"searchValue":{},"suggestSearch":{},"attachedInfo":{},"nextOffset":{},"topicReview":{},"generalByQuery":{},"generalByQueryInADay":{},"generalByQueryInAWeek":{},"generalByQueryInThreeMonths":{},"peopleByQuery":{},"clubentityByQuery":{},"clubPostByQuery":{},"topicByQuery":{},"columnByQuery":{},"liveByQuery":{},"albumByQuery":{},"eBookByQuery":{},"kmGeneralByQuery":{}},"publicEditPermission":{},"vessay":{"trackData":{"videoTrack":[],"audioTrack":[],"subtitleTrack":[]},"tracks":{},"isLoading":false,"materialLib":{"isLoading":true,"data":[]}},"readStatus":{},"draftHistory":{"history":{},"drafts":{}},"notifications":{"recent":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"history":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"notificationActors":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"recentNotificationEntry":"all"},"specials":{"entities":{},"all":{"data":[],"paging":{},"isLoading":false}},"collections":{"hot":{"data":[],"paging":{},"isLoading":false},"collectionFeeds":{}},"userProfit":{"permission":{"permissionStatus":{"zhiZixuan":0,"recommend":-1,"task":0,"plugin":0},"visible":false}},"mcn":{"bindInfo":{},"memberCategoryList":[],"producerList":[],"categoryList":[],"lists":{},"banners":{},"protocolStatus":{"isAgreedNew":true,"isAgreedOld":true},"probationCountdownDays":0},"mcnActivity":{"household":{"products":{},"rankList":{"total":{},"yesterday":{}}}},"brand":{"contentPlugin":{}},"metaLink":{"metaLinkTemplate":{}},"host":{"roundtable":{"subjects":{},"applications":{"total":0},"online":{"total":0},"applies":{},"details":{},"includedResource":{},"hotQuestions":{},"warmupContents":{},"batchInclude":{}},"special":{"applications":{"total":0,"pages":{},"entities":{}},"censorHistory":{},"drafts":{}}},"campaign":{"single":{},"list":{},"videoMakerAcq":{},"vote":{},"cardCollecting":{"error":null,"profile":null,"shareLink":null,"sharePoster":null,"shareIntention":"share","drawResult":null,"newCoinCount":null,"inviterInfo":null,"giverInfo":null,"newCardList":[],"taskList":[],"cardList":null,"panel":{"showTaskPanel":false,"showRewardPanel":false},"modal":{"showWelcomeModal":false,"showFusionModal":false,"showFusionPromptModal":false,"showShareModal":false,"showBackModal":false}}},"knowledgePlan":{"lists":{},"allCreationRankList":{},"featuredQuestions":{}},"wallE":{"protectHistory":{"total":0,"pages":{},"entities":{}}},"roundtables":{"hotQuestions":{},"warmupContents":{},"hotDiscussions":{},"selectedContents":{},"roundtables":{}},"helpCenter":{"entities":{"question":{},"category":{}},"categories":[],"commonQuestions":[],"relatedQuestions":{}},"republish":{},"creatorMCN":{"mcn":{},"mcnStatistics":{},"isNoAuth":false,"creatorManageData":[],"creatorManageDataTotal":1,"mcnDomains":[]}},"subAppName":"main"}</script><script src="https://static.zhihu.com/heifetz/vendor.546efe75409c9aff627d.js"></script><script src="https://static.zhihu.com/heifetz/main.app.23e0feae3a6188db7f62.js"></script><script src="https://static.zhihu.com/heifetz/main.question-routes.f3f72c54a669ec39b86a.js"></script></body><script src="https://hm.baidu.com/hm.js?98beee57fd2ef70ccdd5ca52b9740c49" async=""></script></html>