---
title : 自动快照存档
---

* TIME: 2021-02-05 22:59:01
* URL: <https://github.com/histolab/histolab>

-----

Skip to content

[ ](https://github.com/)

[ Sign up
](/join?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-
name%3E%2F%3Crepo-name%3E&source=header-repo)

  * Why GitHub? 

[Features →](/features)

    * [Code review](/features/code-review/)
    * [Project management](/features/project-management/)
    * [Integrations](/features/integrations)
    * [Actions](/features/actions)
    * [Packages](/features/packages)
    * [Security](/features/security)
    * [Team management](/features#team-management)
    * [Hosting](/features#hosting)
    * [Mobile](/mobile)
    * [Customer stories →](/customer-stories)
    * [Security →](/security)

  * [Team](/team)
  * [Enterprise](/enterprise)
  * Explore 

    * [Explore GitHub →](/explore)

#### Learn & contribute

    * [Topics](/topics)
    * [Collections](/collections)
    * [Trending](/trending)
    * [Learning Lab](https://lab.github.com/)
    * [Open source guides](https://opensource.guide)

#### Connect with others

    * [Events](https://github.com/events)
    * [Community forum](https://github.community)
    * [GitHub Education](https://education.github.com)
    * [GitHub Stars program](https://stars.github.com)

  * [Marketplace](/marketplace)
  * Pricing 

[Plans →](/pricing)

    * [Compare plans](/pricing#feature-comparison)
    * [Contact Sales](https://enterprise.github.com/contact)
    * [Nonprofit →](/nonprofit)
    * [Education →](https://education.github.com)

![](https://github.githubassets.com/images/search-key-slash.svg)

  * [ ![]() In this repository  All GitHub  ↵ Jump to ↵ ]()

  * No suggested jump to results

  * [ ![]() In this repository  All GitHub  ↵ Jump to ↵ ]()
  * [ ![]() In this repository  All GitHub  ↵ Jump to ↵ ]()

[ Sign in ](/login?return_to=%2Fhistolab%2Fhistolab) [ Sign up
](/join?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-
name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=histolab%2Fhistolab)

{{ message }}

#  [histolab](/histolab) / **[histolab](/histolab/histolab) **

  * [ Watch ](/login?return_to=%2Fhistolab%2Fhistolab) [ 3 ](/histolab/histolab/watchers)
  * [ Star ](/login?return_to=%2Fhistolab%2Fhistolab) [ 54 ](/histolab/histolab/stargazers)
  * [ Fork ](/login?return_to=%2Fhistolab%2Fhistolab) [ 4 ](/histolab/histolab/network/members)

Library for Digital Pathology Image Processing

[histolab.readthedocs.io](http://histolab.readthedocs.io
"http://histolab.readthedocs.io")

[ Apache-2.0 License ](/histolab/histolab/blob/master/LICENSE.txt)

[ 54 stars ](/histolab/histolab/stargazers) [ 4 forks
](/histolab/histolab/network/members)

[ Star ](/login?return_to=%2Fhistolab%2Fhistolab)

[ Watch ](/login?return_to=%2Fhistolab%2Fhistolab)

  * [ Code ](/histolab/histolab)
  * [ Issues 12 ](/histolab/histolab/issues)
  * [ Pull requests 1 ](/histolab/histolab/pulls)
  * [ Actions ](/histolab/histolab/actions)
  * [ Projects 1 ](/histolab/histolab/projects)
  * [ Wiki ](/histolab/histolab/wiki)
  * [ Security ](/histolab/histolab/security)
  * [ Insights ](/histolab/histolab/pulse)

More

  * [ Code ](/histolab/histolab)
  * [ Issues ](/histolab/histolab/issues)
  * [ Pull requests ](/histolab/histolab/pulls)
  * [ Actions ](/histolab/histolab/actions)
  * [ Projects ](/histolab/histolab/projects)
  * [ Wiki ](/histolab/histolab/wiki)
  * [ Security ](/histolab/histolab/security)
  * [ Insights ](/histolab/histolab/pulse)

master

[ **3** branches ](/histolab/histolab/branches) [ **7** tags
](/histolab/histolab/tags)

[ Go to file ](/histolab/histolab/find/master) Code

[ ](https://docs.github.com/articles/which-remote-url-should-i-use)

Clone

HTTPS  GitHub CLI

Use Git or checkout with SVN using the web URL.

Work fast with our official CLI. [Learn more](https://cli.github.com).

  * [ Open with GitHub Desktop ](https://desktop.github.com)
  * [ Download ZIP ](/histolab/histolab/archive/master.zip)

#### Launching GitHub Desktop

If nothing happens, [download GitHub Desktop](https://desktop.github.com/) and
try again.

Go back

#### Launching GitHub Desktop

If nothing happens, [download GitHub Desktop](https://desktop.github.com/) and
try again.

Go back

#### Launching Xcode

If nothing happens, [download Xcode](https://developer.apple.com/xcode/) and
try again.

Go back

#### Launching Visual Studio

If nothing happens, [download the GitHub extension for Visual
Studio](https://visualstudio.github.com/) and try again.

Go back

## Latest commit

[
![@ernestoarbitrio](https://avatars0.githubusercontent.com/u/4196091?s=60&u=e1824d135435c0af14ef7427aa4e919205754b6a&v=4)
](/ernestoarbitrio)

[ernestoarbitrio](/histolab/histolab/commits?author=ernestoarbitrio "View all
commits by ernestoarbitrio") [release: prepare v0.2.1
release](/histolab/histolab/commit/cc41b94d5f630108d78f96b21835ef830f25a2a3
"release: prepare v0.2.1 release")

…

Loading status checks…

[cc41b94](/histolab/histolab/commit/cc41b94d5f630108d78f96b21835ef830f25a2a3)
[ 2 days ago
](/histolab/histolab/commit/cc41b94d5f630108d78f96b21835ef830f25a2a3)

[release: prepare v0.2.1
release](/histolab/histolab/commit/cc41b94d5f630108d78f96b21835ef830f25a2a3)

cc41b94

## Git stats

  * [ **675** commits  ](/histolab/histolab/commits/master)

## Files

[Permalink](/histolab/histolab/tree/cc41b94d5f630108d78f96b21835ef830f25a2a3)

Failed to load latest commit information.

Type

Name

Latest commit message

Commit time

[.github](/histolab/histolab/tree/master/.github ".github")

[workflow for pypi
release](/histolab/histolab/commit/888766ddd56b64ab95a8d36b39ba828ed511d8c5
"workflow for pypi release")

14 days ago

[docs](/histolab/histolab/tree/master/docs "docs")

[include locate_tiles in sphinx
doc](/histolab/histolab/commit/a2172382d64b9f7ec99b7268ce6ad5f81f92e5a0
"include locate_tiles in sphinx doc")

21 days ago

[examples](/histolab/histolab/tree/master/examples "examples")

[Extra Reqs for examples with Instructions & README
update](/histolab/histolab/commit/8b07d870020e291cfd69b1d0c63905d43de577ba
"Extra Reqs for examples with Instructions & README update")

last month

[src](/histolab/histolab/tree/master/src "src")

[release: prepare v0.2.1
release](/histolab/histolab/commit/cc41b94d5f630108d78f96b21835ef830f25a2a3
"release: prepare v0.2.1 release")

2 days ago

[tests](/histolab/histolab/tree/master/tests "tests")

[fix conftest HTMLRenderer when items is
empty](/histolab/histolab/commit/567c7dd5573889a9c3f9bf572e436a904c143097 "fix
conftest HTMLRenderer when items is empty")

2 days ago

[.coveragerc](/histolab/histolab/blob/master/.coveragerc ".coveragerc")

[Omit examples folder from
coverage](/histolab/histolab/commit/83fc5614d63cbf8abc53e2588f64a6c6a9e5d711
"Omit examples folder from coverage")

2 months ago

[.flake8](/histolab/histolab/blob/master/.flake8 ".flake8")

[grooming flake8 duplicates
directives](/histolab/histolab/commit/512ba639f9782f345675a0829bf885a6388a4033
"grooming flake8 duplicates directives")

4 months ago

[.gitignore](/histolab/histolab/blob/master/.gitignore ".gitignore")

[first
benchmarks](/histolab/histolab/commit/51d71fb931d43a0a214b69fae117afd8f9b19bb9
"first benchmarks")

3 months ago

[.pre-commit-config.yaml](/histolab/histolab/blob/master/.pre-commit-
config.yaml ".pre-commit-config.yaml")

[typing __getitem__ in
slide.py](/histolab/histolab/commit/2e90a45e3b8a10c7b49f12b8cbe1eb5094feddad
"typing __getitem__ in slide.py")

25 days ago

[AUTHORS](/histolab/histolab/blob/master/AUTHORS "AUTHORS")

[rfctr: name refactoring from wsi ->
slide](/histolab/histolab/commit/70e3a75f9241620519fbcf0e316c901165161656
"rfctr: name refactoring from wsi -> slide")

7 months ago

[CHANGELOG.rst](/histolab/histolab/blob/master/CHANGELOG.rst "CHANGELOG.rst")

[release: prepare v0.2.1
release](/histolab/histolab/commit/cc41b94d5f630108d78f96b21835ef830f25a2a3
"release: prepare v0.2.1 release")

2 days ago

[CONTRIBUTING.md](/histolab/histolab/blob/master/CONTRIBUTING.md
"CONTRIBUTING.md")

[Update
CONTRIBUTING.md](/histolab/histolab/commit/98ba4d594ef3b3de09addcb71398416cd24889b5
"Update CONTRIBUTING.md")

3 months ago

[LICENSE.txt](/histolab/histolab/blob/master/LICENSE.txt "LICENSE.txt")

[making histolab pip-
installable](/histolab/histolab/commit/e75683ce47515676f87aacb28cd7989d7701ff4f
"making histolab pip-installable")

7 months ago

[MANIFEST.in](/histolab/histolab/blob/master/MANIFEST.in "MANIFEST.in")

[making histolab pip-
installable](/histolab/histolab/commit/e75683ce47515676f87aacb28cd7989d7701ff4f
"making histolab pip-installable")

7 months ago

[Makefile](/histolab/histolab/blob/master/Makefile "Makefile")

[Change spaces to tab to fix the help
rule](/histolab/histolab/commit/94b7740717aa15c0bd43513246b5b02f2e897168
"Change spaces to tab to fix the help rule")

5 months ago

[README.md](/histolab/histolab/blob/master/README.md "README.md")

[release: prepare v0.2.0
release](/histolab/histolab/commit/66267a959712a32959358da6a4882a7ca5a894b6
"release: prepare v0.2.0 release")

9 days ago

[pyproject.toml](/histolab/histolab/blob/master/pyproject.toml
"pyproject.toml")

[pre-commit: added precommit hooks with black and
flake8](/histolab/histolab/commit/9a030bfee8e6beb19cd2f6a46cc234417b0fdfbc
"pre-commit: added precommit hooks with black and flake8")

7 months ago

[readthedocs.yml](/histolab/histolab/blob/master/readthedocs.yml
"readthedocs.yml")

[Add requirements for
readthedocs](/histolab/histolab/commit/777357da4367ebb49a95f35046e721b98bb89d9d
"Add requirements for readthedocs")

6 months ago

[requirements-dev.txt](/histolab/histolab/blob/master/requirements-dev.txt
"requirements-dev.txt")

[tests: augment report using pytest-html and custom
helpers](/histolab/histolab/commit/f03c6201114e4b4ce28810dee4828bf678dbc84d
"tests: augment report using pytest-html and custom helpers")

10 days ago

[requirements.txt](/histolab/histolab/blob/master/requirements.txt
"requirements.txt")

[pin
dependencies](/histolab/histolab/commit/99f269fa21f9f3e51d9494d9ab877c5a8d57f592
"pin dependencies")

2 days ago

[setup.cfg](/histolab/histolab/blob/master/setup.cfg "setup.cfg")

[fix flake for
windows](/histolab/histolab/commit/379baa19534e72ddfe2c32844ced69aaa62eade7
"fix flake for windows")

4 months ago

[setup.py](/histolab/histolab/blob/master/setup.py "setup.py")

[address Alessia's
comment](/histolab/histolab/commit/b7c78c711bb67a1130cd3cbbaf22dc7d37d2d01a
"address Alessia's comment")

2 days ago

View code

##  README.md

[![histolab](https://user-
images.githubusercontent.com/4196091/84828232-048fcc00-b026-11ea-8caa-5c14bb8565bd.png)](https://user-
images.githubusercontent.com/4196091/84828232-048fcc00-b026-11ea-8caa-5c14bb8565bd.png)

[![Open Source Love
svg1](https://camo.githubusercontent.com/97d4586afa582b2dcec2fa8ed7c84d02977a21c2dd1578ade6d48ed82296eb10/68747470733a2f2f6261646765732e66726170736f66742e636f6d2f6f732f76312f6f70656e2d736f757263652e7376673f763d313033)](https://github.com/ellerbrock/open-
source-badges/)

Test Status |
[![](https://github.com/histolab/histolab/workflows/CI/badge.svg?branch=master)](https://github.com/histolab/histolab/workflows/CI/badge.svg?branch=master)
[![](https://camo.githubusercontent.com/7337ace8775f0215c9071e872901aca5a1c6ee49fbc60db921c944ba65bf7001/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6769746875622f686973746f6c61622f686973746f6c61622f62616467652e7376673f6272616e63683d6d6173746572266b696c6c5f63616368653d31)](https://coveralls.io/github/histolab/histolab?branch=master)  
---|---  
Code Quality |
[![](https://camo.githubusercontent.com/1bee50015652942ed038a3da9ea9b6fe9fa7f018718306b0f3e6a1f1eaf104f5/68747470733a2f2f696d672e736869656c64732e696f2f6c67746d2f616c657274732f672f686973746f6c61622f686973746f6c61622e7376673f6c6f676f3d6c67746d266c6f676f57696474683d3138)](https://lgtm.com/projects/g/histolab/histolab/alerts/)
[![](https://camo.githubusercontent.com/7f1200d37fb3e5ffae0fc7942d66374b75e7fa09726460dfafa3b3e71f2ad90d/68747470733a2f2f696d672e736869656c64732e696f2f6c67746d2f67726164652f707974686f6e2f672f686973746f6c61622f686973746f6c61622e7376673f6c6f676f3d6c67746d266c6f676f57696474683d3138)](https://lgtm.com/projects/g/histolab/histolab/context:python)
[![](https://camo.githubusercontent.com/528a0c5652d70c427b649dc209f0c27267bc39f30e2b8a21e550ff9bfede2ad0/68747470733a2f2f7777772e636f6465666163746f722e696f2f7265706f7369746f72792f6769746875622f686973746f6c61622f686973746f6c61622f6261646765)](https://www.codefactor.io/repository/github/histolab/histolab)
[![](https://camo.githubusercontent.com/d91ed7ac7abbd5a6102cbe988dd8e9ac21bde0a73d97be7603b891ad08ce3479/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f636f64652532307374796c652d626c61636b2d3030303030302e737667)](https://github.com/psf/black)  
Version Info |
[![](https://camo.githubusercontent.com/8ab463bb70f77f271e7c80debd7410a0e9908ea2b2bee9e641c2116f7d2c3f56/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f686973746f6c6162)](https://pypi.org/project/histolab/)
[![](https://camo.githubusercontent.com/cc228b4da4e42d3edda3e3a76a9c22cc31da75cd83fbfce20bd419a19a35fe2f/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f686973746f6c6162)](https://camo.githubusercontent.com/cc228b4da4e42d3edda3e3a76a9c22cc31da75cd83fbfce20bd419a19a35fe2f/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f686973746f6c6162)
[![](https://camo.githubusercontent.com/bacf4c1532a2a3b5d35ab74c4e103547e67131c4b537091f4532b08ddcbb5b40/68747470733a2f2f696d672e736869656c64732e696f2f707970692f776865656c2f686973746f6c6162)](https://camo.githubusercontent.com/bacf4c1532a2a3b5d35ab74c4e103547e67131c4b537091f4532b08ddcbb5b40/68747470733a2f2f696d672e736869656c64732e696f2f707970692f776865656c2f686973746f6c6162)  
License |
[![](https://camo.githubusercontent.com/e2e95c311b45a7d807f9a7088b0b6b92026015cc4d306278a1e21782afd4b259/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f686973746f6c61622f686973746f6c6162)](https://github.com/histolab/histolab/blob/master/LICENSE.txt")  
Documentation |
[![](https://camo.githubusercontent.com/5620d3ec09fafc82c5b58a7cd3eb7430e84e17d6ebcd1cfd0f2618b4800eca81/68747470733a2f2f72656164746865646f63732e6f72672f70726f6a656374732f686973746f6c61622f62616467652f3f76657273696f6e3d6c6174657374)](https://histolab.readthedocs.io/en/latest/)  
  
**Compatibility Details**

Operating System | Python version  
---|---  
Linux |
[![](https://camo.githubusercontent.com/85c4fbf5fbbb0aecde470afd6bb3c4647d149a10e2ee718005711a8401a168e4/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f2d332e36253230253743253230332e37253230253743253230332e382d626c7565)](https://camo.githubusercontent.com/85c4fbf5fbbb0aecde470afd6bb3c4647d149a10e2ee718005711a8401a168e4/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f2d332e36253230253743253230332e37253230253743253230332e382d626c7565)  
MacOs |
[![](https://camo.githubusercontent.com/85c4fbf5fbbb0aecde470afd6bb3c4647d149a10e2ee718005711a8401a168e4/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f2d332e36253230253743253230332e37253230253743253230332e382d626c7565)](https://camo.githubusercontent.com/85c4fbf5fbbb0aecde470afd6bb3c4647d149a10e2ee718005711a8401a168e4/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f2d332e36253230253743253230332e37253230253743253230332e382d626c7565)  
Windows |
[![](https://camo.githubusercontent.com/b12765e738a5b61b1f4d5de0b05dfd4a3803b40694003e849424196fe1633ad4/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f2d332e36253230253743253230332e372532302d626c7565)](https://camo.githubusercontent.com/b12765e738a5b61b1f4d5de0b05dfd4a3803b40694003e849424196fe1633ad4/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f2d332e36253230253743253230332e372532302d626c7565)  
  
* * *

## Table of Contents

  * Motivation

  * Getting Started

    * Prerequisites
    * Quickstart
  * Versioning

  * Authors

  * License

  * Roadmap

  * Acknowledgements

  * References

  * Contribution guidelines

## Motivation

The histo-pathological analysis of tissue sections is the gold standard to
assess the presence of many complex diseases, such as tumors, and understand
their nature. In daily practice, pathologists usually perform microscopy
examination of tissue slides considering a limited number of regions and the
clinical evaulation relies on several factors such as nuclei morphology, cell
distribution, and color (staining): this process is time consuming, could lead
to information loss, and suffers from inter-observer variability.

The advent of digital pathology is changing the way patholgists work and
collaborate, and has opened the way to a new era in computational pathology.
In particular, histopathology is expected to be at the center of the AI
revolution in medicine [1], prevision supported by the increasing success of
deep learning applications to digital pathology.

Whole Slide Images (WSIs), namely the translation of tissue slides from glass
to digital format, are a great source of information from both a medical and a
computational point of view. WSIs can be coloured with different staining
techniques (e.g. H&E or IHC), and are usually very large in size (up to
several GB per slide). Because of WSIs typical pyramidal structure, images can
be retrieved at different magnification factors, providing a further layer of
information beyond color.

However, processing WSIs is far from being trivial. First of all, WSIs can be
stored in different proprietary formats, according to the scanner used to
digitalize the slides, and a standard protocol is still missing. WSIs can also
present artifacts, such as shadows, mold, or annotations (pen marks) that are
not useful. Moreover, giving their dimensions, it is not possible to process a
WSI all at once, or, for example, to feed a neural network: it is necessary to
crop smaller regions of tissues (tiles), which in turns require a tissue
detection step.

The aim of this project is to provide a tool for WSI processing in a
reproducible environment to support clinical and scientific research. Histolab
is designed to handle WSIs, automatically detect the tissue, and retrieve
informative tiles, and it can thus be integrated in a deep learning pipeline.

## Getting Started

### Prerequisites

Histolab has only one system-wide dependency: OpenSlide.

You can download and install it from
[OpenSlide](https://openslide.org/download/) according to your operating
system.

### Documentation

Read the full documentation here <https://histolab.readthedocs.io/en/latest/>.

### Communication

Join our user group on [![](https://user-
images.githubusercontent.com/4196091/101638148-01522780-3a2e-11eb-8502-f718564ffd43.png)](https://user-
images.githubusercontent.com/4196091/101638148-01522780-3a2e-11eb-8502-f718564ffd43.png)
[Slack](https://communityinviter.com/apps/histolab/histolab)

# Quickstart

Here we present a step-by-step tutorial on the use of `histolab` to extract a
tile dataset from example WSIs. The corresponding Jupyter Notebook is
available at <https://github.com/histolab/histolab-box>: this repository
contains a complete `histolab` environment that can be used through
[Docker](http://www.docker.com) on all platforms.

Thus, the user can decide either to use `histolab` through `histolab-box` or
installing it in his/her python virtual environment (using conda, pipenv,
pyenv, virtualenv, etc...). In the latter case, as the `histolab` package has
been published on ([PyPi](http://www.pypi.org)), it can be easily installed
via the command:

    
    
    pip install histolab
    

## TCGA data

First things first, let’s import some data to work with, for example the
prostate tissue slide and the ovarian tissue slide available in the `data`
module:

    
    
    from histolab.data import prostate_tissue, ovarian_tissue

**Note:** To use the `data` module, you need to install `pooch`, also
available on PyPI (<https://pypi.org/project/pooch/>). This step is needless
if we are using the Vagrant/Docker virtual environment.

The calling to a `data` function will automatically download the WSI from the
corresponding repository and save the slide in a cached directory:

    
    
    prostate_svs, prostate_path = prostate_tissue()
    ovarian_svs, ovarian_path = ovarian_tissue()

Notice that each `data` function outputs the corresponding slide, as an
OpenSlide object, and the path where the slide has been saved.

## Slide initialization

`histolab` maps a WSI file into a `Slide` object. Each usage of a WSI requires
a 1-o-1 association with a `Slide` object contained in the `slide` module:

    
    
    from histolab.slide import Slide

To initialize a Slide it is necessary to specify the WSI path, and the
`processed_path` where the thumbnail and the tiles will be saved. In our
example, we want the `processed_path` of each slide to be a subfolder of the
current working directory:

    
    
    import os
    
    BASE_PATH = os.getcwd()
    
    PROCESS_PATH_PROSTATE = os.path.join(BASE_PATH, 'prostate', 'processed')
    PROCESS_PATH_OVARIAN = os.path.join(BASE_PATH, 'ovarian', 'processed')
    
    prostate_slide = Slide(prostate_path, processed_path=PROCESS_PATH_PROSTATE)
    ovarian_slide = Slide(ovarian_path, processed_path=PROCESS_PATH_OVARIAN)

**Note:** If the slides were stored in the same folder, this can be done
directly on the whole dataset by using the `SlideSet` object of the `slide`
module.

With a `Slide` object we can easily retrieve information about the slide, such
as the slide name, the number of available levels, the dimensions at native
magnification or at a specified level:

    
    
    print(f"Slide name: {prostate_slide.name}")
    print(f"Levels: {prostate_slide.levels}")
    print(f"Dimensions at level 0: {prostate_slide.dimensions}")
    print(f"Dimensions at level 1: {prostate_slide.level_dimensions(level=1)}")
    print(f"Dimensions at level 2: {prostate_slide.level_dimensions(level=2)}")
    
    
    Slide name: 6b725022-f1d5-4672-8c6c-de8140345210
    Levels: [0, 1, 2]
    Dimensions at level 0: (16000, 15316)
    Dimensions at level 1: (4000, 3829)
    Dimensions at level 2: (2000, 1914)
    
    
    
    print(f"Slide name: {ovarian_slide.name}")
    print(f"Levels: {ovarian_slide.levels}")
    print(f"Dimensions at level 0: {ovarian_slide.dimensions}")
    print(f"Dimensions at level 1: {ovarian_slide.level_dimensions(level=1)}")
    print(f"Dimensions at level 2: {ovarian_slide.level_dimensions(level=2)}")
    
    
    Slide name: b777ec99-2811-4aa4-9568-13f68e380c86
    Levels: [0, 1, 2]
    Dimensions at level 0: (30001, 33987)
    Dimensions at level 1: (7500, 8496)
    Dimensions at level 2: (1875, 2124)
    

Moreover, we can save and show the slide thumbnail in a separate window. In
particular, the thumbnail image will be automatically saved in a subdirectory
of the `processed_path`:

    
    
    prostate_slide.save_thumbnail()
    prostate_slide.show()

[![](https://user-
images.githubusercontent.com/4196091/92748324-5033e680-f385-11ea-812b-6a9a225ceca4.png)](https://user-
images.githubusercontent.com/4196091/92748324-5033e680-f385-11ea-812b-6a9a225ceca4.png)

    
    
    ovarian_slide.save_thumbnail()
    ovarian_slide.show()

[![](https://user-
images.githubusercontent.com/4196091/92748248-3db9ad00-f385-11ea-846b-a5ce8cf3ca09.png)](https://user-
images.githubusercontent.com/4196091/92748248-3db9ad00-f385-11ea-846b-a5ce8cf3ca09.png)

## Tile extraction

Once that the `Slide` objects are defined, we can proceed to extract the
tiles. To speed up the extraction process, `histolab` automatically detects
the tissue region with the largest connected area and crops the tiles within
this field. The `tiler` module implements different strategies for the tiles
extraction and provides an intuitive interface to easily retrieve a tile
dataset suitable for our task. In particular, each extraction method is
customizable with several common parameters:

  * `tile_size`: the tile size;
  * `level`: the extraction level (from 0 to the number of available levels);
  * `check_tissue`: if a minimum percentage of tissue is required to save the tiles (default is 80%);
  * `prefix`: a prefix to be added at the beginning of the tiles’ filename (default is the empty string);
  * `suffix`: a suffix to be added to the end of the tiles’ filename (default is `.png`).

### Random Extraction

The simplest approach we may adopt is to randomly crop a fixed number of tiles
from our slides; in this case, we need the `RandomTiler` extractor:

    
    
    from histolab.tiler import RandomTiler

Let us suppose that we want to randomly extract 6 squared tiles at level 2 of
size 512 from our prostate slide, and that we want to save them only if they
have at least 80% of tissue inside. We then initialize our `RandomTiler`
extractor as follows:

    
    
    random_tiles_extractor = RandomTiler(
        tile_size=(512, 512),
        n_tiles=6,
        level=2,
        seed=42,
        check_tissue=True, # default
        prefix="random/", # save tiles in the "random" subdirectory of slide's processed_path
        suffix=".png" # default
    )

Notice that we also specify the random seed to ensure the reproducibility of
the extraction process. Starting the extraction is as simple as calling the
`extract` method on the extractor, passing the slide as parameter:

    
    
    random_tiles_extractor.extract(prostate_slide)

[![](https://user-
images.githubusercontent.com/4196091/92750145-1663df80-f387-11ea-8d98-7794eef2fd47.png)](https://user-
images.githubusercontent.com/4196091/92750145-1663df80-f387-11ea-8d98-7794eef2fd47.png)

Random tiles extracted from the prostate slide at level 2.

### Grid Extraction

Instead of picking tiles at random, we may want to retrieve all the tiles
available. The Grid Tiler extractor crops the tiles following a grid structure
on the largest tissue region detected in the WSI:

    
    
    from histolab.tiler import GridTiler

In our example, we want to extract squared tiles at level 0 of size 512 from
our ovarian slide, independently of the amount of tissue detected. By default,
tiles will not overlap, namely the parameter defining the number of
overlapping pixels between two adjacent tiles, `pixel_overlap`, is set to
zero:

    
    
    grid_tiles_extractor = GridTiler(
       tile_size=(512, 512),
       level=0,
       check_tissue=False,
       pixel_overlap=0, # default
       prefix="grid/", # save tiles in the "grid" subdirectory of slide's processed_path 
       suffix=".png" # default
    )

Again, the extraction process starts when the extract method is called on our
extractor:

    
    
    grid_tiles_extractor.extract(ovarian_slide)

[![](https://user-
images.githubusercontent.com/4196091/92751173-0993bb80-f388-11ea-9d30-a6cd17769d76.png)](https://user-
images.githubusercontent.com/4196091/92751173-0993bb80-f388-11ea-9d30-a6cd17769d76.png)

Examples of non-overlapping grid tiles extracted from the ovarian slide at
level 0.

### Score-based extraction

Depending on the task we will use our tile dataset for, the extracted tiles
may not be equally informative. The `ScoreTiler` allows us to save only the
"best" tiles, among all the ones extracted with a grid structure, based on a
specific scoring function. For example, let us suppose that our goal is the
detection of mitotic activity on our ovarian slide. In this case, tiles with a
higher presence of nuclei are preferable over tiles with few or no nuclei. We
can leverage the `NucleiScorer` function of the `scorer` module to order the
extracted tiles based on the proportion of the tissue and of the hematoxylin
staining. In particular, the score is computed as
[![formula](https://render.githubusercontent.com/render/math?math=N_t%5Ccdot%5Cmathrm%7Btanh%7D\(T_t\))](https://render.githubusercontent.com/render/math?math=N_t%5Ccdot%5Cmathrm%7Btanh%7D\(T_t\))
where
[![formula](https://render.githubusercontent.com/render/math?math=N_t)](https://render.githubusercontent.com/render/math?math=N_t)
is the percentage of nuclei and
[![formula](https://render.githubusercontent.com/render/math?math=T_t)](https://render.githubusercontent.com/render/math?math=T_t)
the percentage of tissue in the tile _t_

First, we need the extractor and the scorer:

    
    
    from histolab.tiler import ScoreTiler
    from histolab.scorer import NucleiScorer

As the `ScoreTiler` extends the `GridTiler` extractor, we also set the
`pixel_overlap` as additional parameter. Moreover, we can specify the number
of the top tiles we want to save with the `n_tile` parameter:

    
    
    scored_tiles_extractor = ScoreTiler(
        scorer = NucleiScorer(),
        tile_size=(512, 512),
        n_tiles=100,
        level=0,
        check_tissue=True,
        pixel_overlap=0, # default
        prefix="scored/", # save tiles in the "scored" subdirectory of slide's processed_path 
        suffix=".png" # default
    )

Finally, when we extract our cropped images, we can also write a report of the
saved tiles and their scores in a CSV file:

    
    
    summary_filename = "summary_ovarian_tiles.csv"
    SUMMARY_PATH = os.path.join(ovarian_slide.processed_path, summary_filename)
    
    scored_tiles_extractor.extract(ovarian_slide, report_path=SUMMARY_PATH)

[![](https://user-
images.githubusercontent.com/4196091/92751801-9d658780-f388-11ea-8132-5d0c82bb112b.png)](https://user-
images.githubusercontent.com/4196091/92751801-9d658780-f388-11ea-8132-5d0c82bb112b.png)

Representation of the score assigned to each extracted tile by the
`NucleiScorer`, based on the amount of nuclei detected.

## Versioning

We use [PEP 440](https://www.python.org/dev/peps/pep-0440/) for versioning.

## Authors

  * **[Alessia Marcolini](https://github.com/alessiamarcolini)**
  * **[Ernesto Arbitrio](https://github.com/ernestoarbitrio)**
  * **[Nicole Bussola](https://gitlab.fbk.eu/bussola)**

## License

This project is licensed under `Apache License Version 2.0` \- see the
[LICENSE.txt](https://github.com/histolab/histolab/blob/master/LICENSE.txt)
file for details

## Roadmap

[Open issues](https://github.com/histolab/histolab/issues)

## Acknowledgements

  * <https://github.com/deroneriksson>

## References

[1] Colling, Richard, et al. "Artificial intelligence in digital pathology: A
roadmap to routine use in clinical practice." The Journal of pathology 249.2
(2019)

## Contribution guidelines

If you want to contribute to Histolab, be sure to review the [contribution
guidelines](/histolab/histolab/blob/master/CONTRIBUTING.md)

## About

Library for Digital Pathology Image Processing

[histolab.readthedocs.io](http://histolab.readthedocs.io
"http://histolab.readthedocs.io")

### Topics

[ digital-pathology-data ](/topics/digital-pathology-data "Topic: digital-
pathology-data") [ digital-pathology ](/topics/digital-pathology "Topic:
digital-pathology") [ bioinformatics ](/topics/bioinformatics "Topic:
bioinformatics") [ biology ](/topics/biology "Topic: biology") [ wsi
](/topics/wsi "Topic: wsi")

### Resources

Readme

### License

[ Apache-2.0 License ](/histolab/histolab/blob/master/LICENSE.txt)

##  [ Releases 7 ](/histolab/histolab/releases)

[ Version 0.2.1 Latest  2 days ago ](/histolab/histolab/releases/tag/v0.2.1)

[ \+ 6 releases ](/histolab/histolab/releases)

##  [ Used by 2
](/histolab/histolab/network/dependents?package_id=UGFja2FnZS0xMjYzMTU2MTg5)

  * [ ![@leriomaggio](https://avatars3.githubusercontent.com/u/1908453?s=88&v=4) @leriomaggio / histolab ](/leriomaggio/histolab)
  * [ ![@histolab](https://avatars3.githubusercontent.com/u/67164772?s=88&v=4) @histolab / histolab ](/histolab/histolab)

##  [ Contributors 5 ](/histolab/histolab/graphs/contributors)

  * [ ![@ernestoarbitrio](https://avatars2.githubusercontent.com/u/4196091?s=64&v=4) ](/ernestoarbitrio)
  * [ ![@alessiamarcolini](https://avatars1.githubusercontent.com/u/20052362?s=64&v=4) ](/alessiamarcolini)
  * [ ![@nicolebussola](https://avatars2.githubusercontent.com/u/31658006?s=64&v=4) ](/nicolebussola)
  * [ ![@leriomaggio](https://avatars2.githubusercontent.com/u/1908453?s=64&v=4) ](/leriomaggio)

## Languages

  * [ Python 99.7% ](/histolab/histolab/search?l=python)
  * [ Makefile 0.3% ](/histolab/histolab/search?l=makefile)

  * © 2020 GitHub, Inc.
  * [Terms](https://github.com/site/terms)
  * [Privacy](https://github.com/site/privacy)
  * [Security](https://github.com/security)
  * [Status](https://githubstatus.com/)
  * [Help](https://docs.github.com)

[ ](https://github.com "GitHub")

  * [Contact GitHub](https://github.com/contact)
  * [Pricing](https://github.com/pricing)
  * [API](https://docs.github.com)
  * [Training](https://services.github.com)
  * [Blog](https://github.blog)
  * [About](https://github.com/about)

You can’t perform that action at this time.

You signed in with another tab or window. [Reload]() to refresh your session.
You signed out in another tab or window. [Reload]() to refresh your session.

