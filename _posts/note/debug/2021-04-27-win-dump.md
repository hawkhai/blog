---
layout: post
title: "调试 Memory -- Windows Windbg dump 崩溃分析"
author:
location: "珠海"
categories: ["调试"]
tags: ["调试", "Memory"]
toc: true
toclistyle:
comments:
visibility: hidden
mathjax:
mermaid:
glslcanvas:
codeprint:
cluster: "Windbg"
---

崩溃，高 CPU 占用，死锁，内存泄漏。
感觉最难处理的就是堆破坏，因为不知道被哪个线程写坏了的。

* 堆破坏 谁破坏了堆内存
* 指针破坏 谁动了我的指针


## 高 CPU !runaway

{% include image.html url="/assets/images/210427-win-dump/1.png" %}
{% include image.html url="/assets/images/210427-win-dump/2.png" %}


## 死锁 !locks

{% include image.html url="/assets/images/210427-win-dump/3.png" %}
{% include image.html url="/assets/images/210427-win-dump/4.png" url2="/assets/images/210427-win-dump/5.png" %}
{% include image.html url="/assets/images/210427-win-dump/6.png" url2="/assets/images/210427-win-dump/7.png" %}


## DllMain 死锁分析

{% include image.html url="/assets/images/210427-win-dump/8.png" url2="/assets/images/210427-win-dump/9.png" url3="/assets/images/210427-win-dump/10.png" %}

{% include image.html url="/assets/images/210427-win-dump/11.png" %}
{% include image.html url="/assets/images/210427-win-dump/13.png" url2="/assets/images/210427-win-dump/14.png" %}


### Ntdll!LdrpLoaderLock

IDA 反汇编 ntdll!_LdrpInitialize：
{% include image.html url="/assets/images/210427-win-dump/15.png" %}

<hr class='reviewline'/>
<p class='reviewtip'><script type='text/javascript' src='{% include relref.html url="/assets/reviewjs/blogs/2021-04-27-win-dump.md.js" %}'></script></p>
