<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="zh-cn"><head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="referrer" content="origin" />
    <meta name="description" content="上篇博文：Android OpenGL 开发 概念与入门 EGL 内容介绍 说明：Khronos 是 OpenGL, OpenGL ES, OpenVG 和 EGL 等规范的定义者。以下的代码主要是用" />
    <meta property="og:description" content="上篇博文：Android OpenGL 开发 概念与入门 EGL 内容介绍 说明：Khronos 是 OpenGL, OpenGL ES, OpenVG 和 EGL 等规范的定义者。以下的代码主要是用" />
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title> Android OpenGL 开发---EGL 的使用 - 尛惢刕孨 - 博客园</title>
    <link id="favicon" rel="shortcut icon" href="//common.cnblogs.com/favicon.svg" type="image/svg+xml" />
    
    <link rel="stylesheet" href="/css/blog-common.min.css?v=R2wBwmwSMG0Sqiw8GFSVjHT4Payg_JFAn51R8XcuvN0" />
    
    <link type="text/css" rel="stylesheet" href="https://www.cnblogs.com/wellcherish/custom.css?v=dHjnM/mBCCQb0bWgFK9MIbWwGYA=" />
    <link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="/skins/codinglife/bundle-codinglife-mobile.min.css?v=VdN8Las2tPHZ0_VGM-H30hnBIcNWAKfCWmdIs14AsU8" />
    
    <link type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/wellcherish/rss" />
    <link type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/wellcherish/rsd.xml" />
    <link type="application/wlwmanifest+xml" rel="wlwmanifest" href="https://www.cnblogs.com/wellcherish/wlwmanifest.xml" />
    <script src="https://www.googletagservices.com/activeview/js/current/osd.js?cb=%2Fr20100101"></script><script async="" src="https://www.google-analytics.com/analytics.js"></script><script>
        var currentBlogId = 517113;
        var currentBlogApp = 'wellcherish';
        var cb_enable_mathjax = false;
        var isLogined = false;
        var isBlogOwner = false;
        var skinName = 'CodingLife';
        var visitorUserId = '';
    </script>
        <script>
            var currentPostDateAdded = '2020-07-24 11:16';
        </script>
    <script src="https://common.cnblogs.com/scripts/jquery-2.2.0.min.js"></script>
    <script src="/js/blog-common.min.js?v=fF0V4GI7mbdrRh5FVzZECWvuJT-UrF5wINdTKezXLFA"></script>
    
    
    
<script src="https://securepubads.g.doubleclick.net/gpt/pubads_impl_2020120801.js" async=""></script><link rel="preload" href="https://adservice.google.com/adsid/integrator.js?domain=www.cnblogs.com" as="script" /><script type="text/javascript" src="https://adservice.google.com/adsid/integrator.js?domain=www.cnblogs.com"></script><link rel="prefetch" href="https://e770b864bbfe05b98fd6eb0853e8f198.safeframe.googlesyndication.com/safeframe/1-0-37/html/container.html" /><link rel="prefetch" href="https://tpc.googlesyndication.com/safeframe/1-0-37/html/container.html" /></head>
<body class="no-navbar">
    <a name="top"></a>
        <div id="bannerbar" class="bannerbar-mobile formobile">
            <a href="https://brands.cnblogs.com/aws/free?source=mobile-banner" target="_blank" onclick="ga('send', 'event', 'Link', 'click', 'aws-mobile-bannerbar')">
            <img src="https://img2020.cnblogs.com/blog/35695/202012/35695-20201211073419417-355442931.jpg" alt="" />
            </a>
        </div>
    <div id="top_nav" class="navbar forpc navbar-custom">
        <nav id="nav_main" class="navbar-main">
            <ul id="nav_left" class="navbar-list navbar-left">
                <li class="navbar-branding"><a href="https://www.cnblogs.com/" title="开发者的网上家园"><img src="/images/logo.svg?v=R9M0WmLAIPVydmdzE2keuvnjl-bPR7_35oHqtiBzGsM" alt="博客园Logo" /></a></li>
                <li><a href="/" onclick="ga('send', 'event', 'Link', 'click', 'skin-navbar-sitehome')">首页</a></li>
                <li><a href="https://news.cnblogs.com/" onclick="ga('send', 'event', 'Link', 'click', 'skin-navbar-news')">新闻</a></li>
                <li><a href="https://q.cnblogs.com/" onclick="ga('send', 'event', 'Link', 'click', 'skin-navbar-q')">博问</a></li>
                <li><a id="nav_brandzone" href="https://brands.cnblogs.com/" onclick="ga('send', 'event', 'Link', 'click', 'skin-navbar-brands')">专区</a></li>
                <li><a href="https://ing.cnblogs.com/" onclick="ga('send', 'event', 'Link', 'click', 'skin-navbar-ing')">闪存</a></li>
                <li><a href="https://edu.cnblogs.com/" onclick="ga('send', 'event', 'Link', 'click', 'skin-navbar-edu')">班级</a></li>
            </ul>
            <ul id="nav_right" class="navbar-list navbar-right">
                <li>
                    <form id="zzk_search" class="navbar-search" action="https://zzk.cnblogs.com/s" method="get">
                        <input name="w" id="zzk_search_input" placeholder="代码改变世界" type="text" tabindex="3" />
                        <button type="submit" id="zzk_search_button">
                            <img src="/images/aggsite/search.svg" alt="搜索" />
                        </button>
                    </form>
                </li>
                <li id="navbar_login_status" class="navbar-list">
                    <a id="navblog-myblog-icon" class="navbar-user-info navbar-blog" href="https://passport.cnblogs.com/GetBlogApplyStatus.aspx" alt="我的博客" title="我的博客" style="display: none;">
                        <img id="myblog_icon" class="navbar-icon" src="/images/aggsite/myblog.svg" alt="我的博客" />
                    </a>
                    <a class="navbar-user-info navbar-message navbar-icon-wrapper" href="https://msg.cnblogs.com/" alt="短消息" title="短消息" style="display: none;">
                        <img id="msg_icon" class="navbar-icon" src="/images/aggsite/message.svg?v=oS4PkibyMjZ9rGD5XAcLt99uW_s76Javy2up4dbnZNY" alt="短消息" />
                        <span id="msg_count" style="display: none"></span>
                    </a>
                    <div id="user_info" class="navbar-user-info dropdown" style="display: none;">
                        <a class="dropdown-button" href="https://home.cnblogs.com/">
                            <img id="user_icon" class="navbar-avatar" src="/images/aggsite/avatar-default.svg" alt="用户头像" />
                        </a>
                        <div class="dropdown-menu">
                            <a id="navblog-myblog-text" href="https://passport.cnblogs.com/GetBlogApplyStatus.aspx">我的博客</a>
                            <a href="https://home.cnblogs.com/">我的园子</a>
                            <a href="https://account.cnblogs.com/settings/account">账号设置</a>
                            <a href="javascript:void(0)" onclick="logout();">退出登录</a>
                        </div>
                    </div>
                    <a class="navbar-anonymous" href="https://account.cnblogs.com/signup/" style="display: inline;">注册</a>
                    <a class="navbar-anonymous" href="javascript:void(0);" onclick="login()" style="display: inline;">登录</a>
                </li>
            </ul>
        </nav>
    </div>

    
    <!--done-->
<div id="home">
<div id="header">
	<div id="blogTitle">
        <a id="lnkBlogLogo" href="https://www.cnblogs.com/wellcherish/"><img id="blogLogo" src="/skins/custom/images/logo.gif" alt="返回主页" /></a>		
		
<!--done-->
<h1><a id="Header1_HeaderTitle" class="headermaintitle HeaderMainTitle" href="https://www.cnblogs.com/wellcherish/">尛惢刕孨</a>
</h1>
<h2></h2>




		
	</div><!--end: blogTitle 博客的标题和副标题 -->
	<div id="navigator">
		
<ul id="navList">
<li>
</li>
<li>
<a id="blog_nav_myhome" class="menu" href="https://www.cnblogs.com/wellcherish/">
首页</a>
</li>
<li>

<a id="blog_nav_newpost" class="menu" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">
新随笔</a>
</li>
<li>
<a id="blog_nav_contact" class="menu" href="https://msg.cnblogs.com/send/%E5%B0%9B%E6%83%A2%E5%88%95%E5%AD%A8">
联系</a></li>
<li>
<a id="blog_nav_rss" class="menu" href="javascript:void(0)" data-rss="https://www.cnblogs.com/wellcherish/rss/">
订阅</a>
<!--<partial name="./Shared/_XmlLink.cshtml" model="Model" /></li>--></li>
<li>
<a id="blog_nav_admin" class="menu" href="https://i.cnblogs.com/">
管理</a>
</li>
</ul>


		<div class="blogStats">
			<span id="stats_post_count">随笔 - 36  </span>
<span id="stats_article_count">文章 - 1  </span>
<span id="stats-comment_count">评论 - 1</span>

		</div><!--end: blogStats -->
	</div><!--end: navigator 博客导航栏 -->
</div><!--end: header 头部 -->
<div id="main">
	<div id="mainContent">
	<div class="forFlow">
		<div id="post_detail">
    <!--done-->
    <div id="topics">
        <div class="post">
            <h1 class="postTitle">
                
<a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/wellcherish/p/12727906.html">
    <span> Android OpenGL 开发---EGL 的使用</span>
    


</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
    <p>上篇博文：<a href="https://www.cnblogs.com/wellcherish/p/12702121.html" target="_blank">Android OpenGL 开发---概念与入门</a></p>
<h1 id="egl-内容介绍">EGL 内容介绍</h1>
<p>说明：Khronos 是 OpenGL, OpenGL ES, OpenVG 和 EGL 等规范的定义者。以下的代码主要是用 Android 书写，但规范是 EGL 规范。</p>
<p>EGL 是 Khronos 组织定义的用于管理绘图表面(窗口只是绘图表面的一种类型，还有其他的类型)的 API，EGL 提供了 OpenGL ES(以及其他 Khronos 图形 API(如 OpenVG))和不同操作系统(Android、Windows 等)之间的一个 “结合层次”。即 EGL 定义了 Khronos API 如何与底层窗口系统交流，是 Khronos 定义的规范，相当于一个框架，具体的实现由各个操作系统确定。它是在 OpenGL ES 等规范中讨论的概念，故应和这些规范的文档结合起来阅读，且其 API 的说明文档也应在 Khronos 网站上寻找。注意：IOS 提供了自己的 EGL API 实现，称为 EAGL。</p>
<p>通常，在 Android 中，EGL14 实现的是 EGL 1.4 规范。其相当于 Google 官方对 JAVA 的 EGL10(EGL 1.0 规范)的一次重新设计。通常，我们使用 EGL14 中的函数。而 EGL15 是 EGL 1.5 规范，其在设计时，仅仅是做了规范的补充，并未重新设计。通常 EGL14、EGL15 与 GLES20 等一起使用。GLES20 是 OpenGL ES 2.0 规范的实现。OpenGL ES 1.x 规范因为是早期版本，受限于机器性能和架构设计等，基本可以不再使用。而 OpenGL ES 2.x 规范从 Android 2.3 版本后开始支持，目前市面上的所有手机都支持。相比于 1.0，OpenGL ES 2.0 引入了可编程图形管线，具体的渲染相关使用专门的着色语言来表达。</p>
<p>下面，介绍一下 EGL 的使用流程。</p>
<h2 id="1-egl-与操作系统窗口系统通信">1. EGL 与操作系统窗口系统通信</h2>
<p>在 EGL 能够确定可用的绘制表面类型之前，它必须打开和窗口系统的通信渠道。因为每个窗口系统都有不同的语义，所以 EGL 提供了基本的不对操作系统透明的类型---EGLDisplay。该类型封装了所有系统相关性，用于和原生窗口系统交流。任何使用 EGL 的应用程序，第一个操作必须是创建和初始化与本地 EGL 显示的连接。以下代码展示如何创建连接：</p>
<pre><code class="language-java hljs"><span class="hljs-comment">/**
 * EGL14 实现了 EGL1.4 定义的规范
 * EGL15 等主要是 EGL 新增规范的补充
 * 
 * eglGetDisplay 方法定义了如何获取本地 EGL 显示。
 *
 * EGL_DEFAULT_DISPLAY 是默认的连接。
 * EGL_NO_DISPLAY 表示连接不可用，进而说明 EGL 与 OpenGL ES 不可用
 * */</span>
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initEGLDisplay</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// 获取本地默认的显示</span>
    EGLDisplay display = EGL14.eglGetDisplay(EGL14.EGL_DEFAULT_DISPLAY);
    <span class="hljs-keyword">if</span>(display == EGL14.EGL_NO_DISPLAY) {
        <span class="hljs-comment">// 具体的错误查询方法下面讲述</span>
        Log.e(<span class="hljs-string">"NO"</span>, <span class="hljs-string">"Link Error"</span>);
        <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-comment">// 做接下来的操作</span>
}
</code></pre>
<h2 id="2-检查错误">2. 检查错误</h2>
<p>上面的代码中，我们已经知道 EGL 会发生错误，也可以获取错误。</p>
<p>EGL 中的大部分函数，在成功时会返回 EGL_TRUE，否则返回 EGL_FALSE。但是，EGL 所做的不仅是告诉我们调用是否失败，它还将记录错误，指示故障原因。不过，这个错误代码并不会直接告诉我们，我们需要查询规范，才能知道每个的含义。可以调用 eglGetError() 函数获取错误，以下是错误的说明：</p>
<pre><code class="language-java hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getError</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">int</span> errorCode = EGL14.eglGetError();
    <span class="hljs-keyword">switch</span> (errorCode) {
        <span class="hljs-keyword">case</span> EGL14.EGL_SUCCESS:
            println(<span class="hljs-string">"函数执行成功，无错误---没有错误"</span>);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> EGL14.EGL_NOT_INITIALIZED:
            println(<span class="hljs-string">"对于特定的 Display, EGL 未初始化，或者不能初始化---没有初始化"</span>);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> EGL14.EGL_BAD_ACCESS:
            println(<span class="hljs-string">"EGL 无法访问资源(如 Context 绑定在了其他线程)---访问失败"</span>);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> EGL14.EGL_BAD_ALLOC:
            println(<span class="hljs-string">"对于请求的操作，EGL 分配资源失败---分配失败"</span>);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> EGL14.EGL_BAD_ATTRIBUTE:
            println(<span class="hljs-string">"未知的属性，或者属性已失效---错误的属性"</span>);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> EGL14.EGL_BAD_CONTEXT:
            println(<span class="hljs-string">"EGLContext(上下文) 错误或无效---错误的上下文"</span>);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> EGL14.EGL_BAD_CONFIG:
            println(<span class="hljs-string">"EGLConfig(配置) 错误或无效---错误的配置"</span>);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> EGL14.EGL_BAD_DISPLAY:
            println(<span class="hljs-string">"EGLDisplay(显示) 错误或无效---错误的显示设备对象"</span>);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> EGL14.EGL_BAD_SURFACE:
            println(<span class="hljs-string">"未知的属性，或者属性已失效---错误的Surface对象"</span>);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> EGL14.EGL_BAD_CURRENT_SURFACE:
            println(<span class="hljs-string">"窗口，缓冲和像素图(三种 Surface)的调用线程的 Surface 错误或无效---当前Surface对象错误"</span>);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> EGL14.EGL_BAD_MATCH:
            println(<span class="hljs-string">"参数不符(如有效的 Context 申请缓冲，但缓冲不是有效的 Surface 提供)---无法匹配"</span>);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> EGL14.EGL_BAD_PARAMETER:
            println(<span class="hljs-string">"错误的参数"</span>);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> EGL14.EGL_BAD_NATIVE_PIXMAP:
            println(<span class="hljs-string">"NativePixmapType 对象未指向有效的本地像素图对象---错误的像素图"</span>);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> EGL14.EGL_BAD_NATIVE_WINDOW:
            println(<span class="hljs-string">"NativeWindowType 对象未指向有效的本地窗口对象---错误的本地窗口对象"</span>);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> EGL14.EGL_CONTEXT_LOST:
            println(<span class="hljs-string">"电源错误事件发生，Open GL重新初始化，上下文等状态重置---上下文丢失"</span>);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">default</span>:
            <span class="hljs-keyword">break</span>;
    }
}

<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">println</span><span class="hljs-params">(String s)</span> </span>{
    System.out.println(s);
}
</code></pre>
<h2 id="3-初始化-egl">3. 初始化 EGL</h2>
<p>成功打开连接之后，需要初始化 EGL。可以调用如下函数完成：</p>
<pre><code class="language-c hljs"><span class="hljs-comment">// 标准的 EGL 定义</span>

<span class="hljs-function">EGLBoolean <span class="hljs-title">eglInitialize</span><span class="hljs-params">(EGLDisplay display, EGLint *majorVersion, EGLint *minorVersion)</span></span>;

<span class="hljs-comment">// display:      指定 EGL 的显示连接</span>
<span class="hljs-comment">// majorVersion: 存储指定 EGL 实现，返回的主版本号，可能为 NULL</span>
<span class="hljs-comment">// minorVersion: 存储指定 EGL 实现，返回的次版本号，可能为 NULL</span>
</code></pre>
<p>在 Android 中，其具体实现如下：</p>
<pre><code class="language-java hljs"><span class="hljs-comment">// 定义一个 2 维数组，用于存放获取到的版本号，主版本号放在 version[0]，次版本号放在 version[1]</span>
<span class="hljs-keyword">int</span>[] version = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[<span class="hljs-number">2</span>];

<span class="hljs-comment">// 初始化 EGL, eglDisplay 的获取在上面讲述了</span>
<span class="hljs-keyword">boolean</span> isSuccess = EGL14.eglInitialize(eglDisplay, version, <span class="hljs-number">0</span>, version, <span class="hljs-number">1</span>);

<span class="hljs-keyword">if</span>(!isSuccess) {
    <span class="hljs-keyword">switch</span> (EGL14.eglGetError()) {
        <span class="hljs-keyword">case</span> EGL14.EGL_BAD_DISPLAY:
            println(<span class="hljs-string">"无效的 EGLDisplay 参数"</span>);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> EGL14.EGL_NOT_INITIALIZED:
            println(<span class="hljs-string">"EGL 不能初始化"</span>);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">default</span>:
            println(<span class="hljs-string">"发生错误："</span> + EGL14.eglGetError());
            <span class="hljs-keyword">break</span>;
    }
    <span class="hljs-keyword">return</span>;
}
<span class="hljs-comment">// 初始化成功，往下走</span>
<span class="hljs-comment">// ......</span>
</code></pre>
<p>这个函数初始化 EGL 内部数据结构，返回 EGL 实现的主版本号和次版本号。如果 EGL 无法初始化，函数会返回 EGL_FALSE，并将 EGL 错误代码设置为：</p>
<ul>
<li>EGL_BAD_DISPLAY     --- 如果 display 不是有效的 EGLDisplay</li>
<li>EGL_NOT_INITIALIZED --- 如果 EGL 不能初始化</li>
</ul>
<h2 id="4-确定可用表面配置">4. 确定可用表面配置</h2>
<p>一旦初始化了 EGL，就可以确定可用渲染表面的类型和配置，这有两种方法：</p>
<ul>
<li>查询每个表面配置，找出最好的选择</li>
<li>指定一组需求，让 EGL 推荐最佳匹配</li>
</ul>
<p>在许多情况下，使用第二种方法更简单，而且最有可能得到用第一种方法找到的匹配。</p>
<p>在任何一种情况下，EGL 都将返回一个 EGLConfig，这是包含有关特定表面及其特征(如每个颜色分量的位数、与 EGLConfig 相关的深度缓冲区(如果有的话))的 EGL 内部数据结构的标识符。可以用 eglGetConfigAttrib 函数查询 EGLConfig 的任何属性。后面会讲。</p>
<p>调用以下函数，可以查询系统支持的所有 EGL 表面配置：</p>
<pre><code class="language-java hljs"><span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">eglGetConfigs</span><span class="hljs-params">(EGLDisplay display, EGLConfig[] configs, <span class="hljs-keyword">int</span> configsOffset, <span class="hljs-keyword">int</span> config_size, <span class="hljs-keyword">int</span>[] num_config, <span class="hljs-keyword">int</span> num_configOffset)</span></span>;
<span class="hljs-comment">// display:          EGL 连接的显示</span>
<span class="hljs-comment">// configs:          指定的 configs 列表(第 2 个参数)</span>
<span class="hljs-comment">// configsOffset:    列表取值的起始偏移值</span>
<span class="hljs-comment">// config_size:      指定的 configs 列表的尺寸</span>
<span class="hljs-comment">// num_config:       存放获取到的配置数量。一般来说，此列表仅存放大小，列表长度设置为 1 即可(第 5 个参数)</span>
<span class="hljs-comment">// num_configOffset: 存值时的起始偏移值(第 6 个参数)</span>
</code></pre>
<p>函数在调用成功时，会返回 EGL_TRUE。失败时，会返回 EGL_FALSE，并将 EGL 错误代码设置为：</p>
<ul>
<li>EGL_NOT_INITIALIZED --- 如果 display 不能初始化</li>
<li>EGL_BAD_PARAMETER   --- 如果 num_config(用于存放 返回结果的大小 的列表(上述说明中的第 5 个参数))为空</li>
</ul>
<p>调用 eglGetConfigs 有两种方法。</p>
<ol>
<li>如果指定的入参 configs 为 NULL，则将返回 EGL_TRUE，并将返回可用的 EGLConfig 的数量。在足够谨慎的情况下，当没有返回任何 EGLConfig 的信息，但是知道了可用配置的数量时，我们可以分配足够的内存，来获得完成的 EGLConfig 集合</li>
<li>在更普遍的情况下，我们一般会分配一个未初始化的 EGLConfig 值的数组((上述说明中的第 2 个参数))，并作为参数传递给 eglGetConfigs 函数。函数调用完成时，会获取到配置列表((上述说明中的第 2 个参数，此参数被修改过，存放了结果))，并根据上述说明中的第 5 和第 6 个参数来确定列表中可用的配置数量和位置(即根据 5、6 确定结果在 2 中的位置)。当然，获取到的配置结果的大小不会超过传入的未初始化的 EGLConfig 值的数组的大小。</li>
</ol>
<h2 id="5-查询-eglconfig-属性">5. 查询 EGLConfig 属性</h2>
<p>此处，说明一下与 EGLConfig 相关的 EGL 值，并说明如果检索这些值。</p>
<p>EGLConfig 包含关于 EGL 启用的表面的所有信息。其包括关于可用颜色、与配置相关的其他缓冲区(深度和模板缓冲区)、表面类型等等。可以用下面的函数查询与 EGLConfig 相关的特定属性：</p>
<pre><code class="language-java hljs"><span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">eglGetConfigAttrib</span><span class="hljs-params">(EGLDisplay display, EGLConfig config, <span class="hljs-keyword">int</span> attribute, <span class="hljs-keyword">int</span>[] value, <span class="hljs-keyword">int</span> offset)</span></span>;

<span class="hljs-comment">// display:   EGL 的显示连接</span>
<span class="hljs-comment">// config:    待查询的配置</span>
<span class="hljs-comment">// attribute: 指定返回的特定属性</span>
<span class="hljs-comment">// value:     指定的返回值</span>
<span class="hljs-comment">// offset:    结果放入数组时的偏移值，一般为 0</span>
</code></pre>
<p>上述函数在调用成功时返回 EGL_TRUE，失败时返回 EGL_FALSE，并将 EGL 错误代码设置为：</p>
<ul>
<li>EGL_BAD_DISPLAY：     显示无效</li>
<li>EGL_NOT_INITIALIZED:  显示未初始化</li>
<li>EGL_BAD_CONFIG：      配置无效</li>
<li>EGL_BAD_ATTRIBUTE：   属性无效</li>
</ul>
<p>下面是在 eglGetConfigAttrib 函数中所有的可用的 EGLConfig 属性列表：</p>
<table>
<thead>
<tr>
<th style="text-align: center">属性名</th>
<th style="text-align: center">描述</th>
<th style="text-align: center">默认值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">EGL_ALPHA_SIZE</td>
<td style="text-align: center">颜色缓冲区中的 Alpha 值位数</td>
<td style="text-align: center">0</td>
</tr>
<tr>
<td style="text-align: center">EGL_ALPHA_MASK_SIZE</td>
<td style="text-align: center">掩码缓冲区中的 Alpha 掩码位数0，掩码缓冲区只被 OpenVG 使用</td>
<td style="text-align: center">0</td>
</tr>
<tr>
<td style="text-align: center">EGL_BIND_TO_TEXTURE_RGB</td>
<td style="text-align: center">如果可以绑定到 RGB 纹理，则返回 EGL_TRUE，否则返回 EGL_FALSE</td>
<td style="text-align: center">EGL_DONT_CARE</td>
</tr>
<tr>
<td style="text-align: center">EGL_BIND_TO_TEXTURE_RGBA</td>
<td style="text-align: center">如果可以绑定到 RGBA 纹理，则返回 EGL_TRUE，否则返回 EGL_FALSE</td>
<td style="text-align: center">EGL_DONT_CARE</td>
</tr>
<tr>
<td style="text-align: center">EGL_BLUE_SIZE</td>
<td style="text-align: center">颜色缓冲区中蓝色分量的位数</td>
<td style="text-align: center">0</td>
</tr>
<tr>
<td style="text-align: center">EGL_BUFFER_SIZE</td>
<td style="text-align: center">颜色缓冲区中所有颜色分量的位数，其值是 EGL_RED_SIZE, EGL_GREEN_SIZE, EGL_BLUE_SIZE, 和 EGL_ALPHA_SIZE 的位数之和</td>
<td style="text-align: center">0</td>
</tr>
<tr>
<td style="text-align: center">EGL_COLOR_BUFFER_TYPE</td>
<td style="text-align: center">颜色缓冲区类型：EGL_RGB_BUFFER 或者 EGL_LUMINANCE_BUFFER</td>
<td style="text-align: center">EGL_RGB_BUFFER</td>
</tr>
<tr>
<td style="text-align: center">EGL_CONFIG_CAVEAT</td>
<td style="text-align: center">和配置相关的任何注意事项，可取的值为：EGL_NONE, EGL_SLOW_CONFIG, 和 EGL_NON_CONFORMANT</td>
<td style="text-align: center">EGL_DONT_CARE</td>
</tr>
<tr>
<td style="text-align: center">EGL_CONFIG_ID</td>
<td style="text-align: center">EGLConfig的唯一标识符的值</td>
<td style="text-align: center">EGL_DONT_CARE</td>
</tr>
<tr>
<td style="text-align: center">EGL_CONFORMANT</td>
<td style="text-align: center">如果用此配置创建的上下文是有效的，则返回真</td>
<td style="text-align: center">---</td>
</tr>
<tr>
<td style="text-align: center">EGL_DEPTH_SIZE</td>
<td style="text-align: center">深度缓冲区位数</td>
<td style="text-align: center">0</td>
</tr>
<tr>
<td style="text-align: center">EGL_GREEN_SIZE</td>
<td style="text-align: center">颜色缓冲区中绿色分量的位数</td>
<td style="text-align: center">0</td>
</tr>
<tr>
<td style="text-align: center">EGL_LEVEL</td>
<td style="text-align: center">帧缓冲区的级别</td>
<td style="text-align: center">0</td>
</tr>
<tr>
<td style="text-align: center">EGL_LUMINANCE_SIZE</td>
<td style="text-align: center">颜色缓冲区中的亮度位数</td>
<td style="text-align: center">0</td>
</tr>
<tr>
<td style="text-align: center">EGL_MAX_PBUFFER_WIDTH</td>
<td style="text-align: center">像素缓冲区表面(pixel buffer surface)的最大宽度</td>
<td style="text-align: center">---</td>
</tr>
<tr>
<td style="text-align: center">EGL_MAX_PBUFFER_HEIGHT</td>
<td style="text-align: center">像素缓冲区表面(pixel buffer surface)的最大高度</td>
<td style="text-align: center">---</td>
</tr>
<tr>
<td style="text-align: center">EGL_MAX_PBUFFER_PIXELS</td>
<td style="text-align: center">像素缓冲区表面(pixel buffer surface)的最大尺寸</td>
<td style="text-align: center">---</td>
</tr>
<tr>
<td style="text-align: center">EGL_MAX_SWAP_INTERVAL</td>
<td style="text-align: center">最大缓冲区交换间隔(参见 eglSwapInterval 函数)</td>
<td style="text-align: center">EGL_DONT_CARE</td>
</tr>
<tr>
<td style="text-align: center">EGL_MIN_SWAP_INTERVAL</td>
<td style="text-align: center">最小缓冲区交换间隔(参见 eglSwapInterval 函数)</td>
<td style="text-align: center">EGL_DONT_CARE</td>
</tr>
<tr>
<td style="text-align: center">EGL_NATIVE_RENDERABLE</td>
<td style="text-align: center">如果原生渲染 API 可以渲染此 EGLConfig 创建的表面，则为真</td>
<td style="text-align: center">EGL_DONT_CARE</td>
</tr>
<tr>
<td style="text-align: center">EGL_NATIVE_VISUAL_ID</td>
<td style="text-align: center">原生窗口系统的可视 ID 的句柄</td>
<td style="text-align: center">EGL_DONT_CARE</td>
</tr>
<tr>
<td style="text-align: center">EGL_NATIVE_VISUAL_TYPE</td>
<td style="text-align: center">原生窗口系统的可视类型</td>
<td style="text-align: center">EGL_DONT_CARE</td>
</tr>
<tr>
<td style="text-align: center">EGL_RED_SIZE</td>
<td style="text-align: center">颜色缓冲区中红色分量的位数</td>
<td style="text-align: center">0</td>
</tr>
<tr>
<td style="text-align: center">EGL_RENDERABLE_TYPE</td>
<td style="text-align: center">位掩码，代表 EGL 支持的渲染类型的接口。由 EGL_OPENGL_ES_BIT、EGL_OPENGL_ES2_BIT、EGL_OPENGL_ES3 _BIT_KHR(需要 EGL_KHR_create_context 扩展)、EGL_OPENGL_BIT 或 EGL_OPENVG_BIT 组成</td>
<td style="text-align: center">EGL_OPENGL_ES_BIT</td>
</tr>
<tr>
<td style="text-align: center">EGL_SAMPLE_BUFFERS</td>
<td style="text-align: center">可用的多重采用缓冲区的数量</td>
<td style="text-align: center">0</td>
</tr>
<tr>
<td style="text-align: center">EGL_SAMPLES</td>
<td style="text-align: center">每个像素的样本数量</td>
<td style="text-align: center">0</td>
</tr>
<tr>
<td style="text-align: center">EGL_STENCIL_SIZE</td>
<td style="text-align: center">模板缓冲区位数</td>
<td style="text-align: center">0</td>
</tr>
<tr>
<td style="text-align: center">EGL_SURFACE_TYPE</td>
<td style="text-align: center">支持的 EGL 表面类型。可能是：EGL_WINDOW_BIT、EGL_PIXMAP_BIT、EGL_PBUFFER_BIT、EGL_MULTISAMPLE_RESOLVE_BOX_BIT、EGL_SWAP_BEHAVIOR_PRESERVED_BIT、EGL_VG_COLORSPACE_LINEAR_BIT 或 EGL_VG_ALPHA_FORMAT_PRE_BIT</td>
<td style="text-align: center">EGL_WINDOW_BIT</td>
</tr>
<tr>
<td style="text-align: center">EGL_TRANSPARENT_TYPE</td>
<td style="text-align: center">支持的透明度类型：EGL_NONE 或者 EGL_TRANSPARENT_RGB</td>
<td style="text-align: center">EGL_NONE</td>
</tr>
<tr>
<td style="text-align: center">EGL_TRANSPARENT_RED_VALUE</td>
<td style="text-align: center">透明的红色值</td>
<td style="text-align: center">EGL_DONT_CARE</td>
</tr>
<tr>
<td style="text-align: center">EGL_TRANSPARENT_GREEN_VALUE</td>
<td style="text-align: center">透明的绿色值</td>
<td style="text-align: center">EGL_DONT_CARE</td>
</tr>
<tr>
<td style="text-align: center">EGL_TRANSPARENT_BLUE_VALUE</td>
<td style="text-align: center">透明的蓝色值</td>
<td style="text-align: center">EGL_DONT_CARE</td>
</tr>
<tr>
<td style="text-align: center">EGL_MATCH_NATIVE_PIXMAP</td>
<td style="text-align: center">匹配本地的像素图，该属性只能通过 eglChooseConfig 获取到，无法通过 eglGetConfigAttrib 获取到</td>
<td style="text-align: center">EGL_NONE</td>
</tr>
</tbody>
</table>
<h2 id="6-选择-eglconfig-属性">6. 选择 EGLCONFIG 属性</h2>
<p>如果我们不关心所有的属性，那么可以使用 eglChooseConfig 函数，此函数可以指定我们关心的重要的属性，并返回最佳匹配结果：</p>
<pre><code class="language-java hljs"><span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">eglChooseConfig</span><span class="hljs-params">(EGLDisplay display, <span class="hljs-keyword">int</span>[] attrib_list, <span class="hljs-keyword">int</span> attrib_listOffset, EGLConfig[] configs, <span class="hljs-keyword">int</span> configsOffset, <span class="hljs-keyword">int</span> config_size, <span class="hljs-keyword">int</span>[] num_config, <span class="hljs-keyword">int</span> num_configOffset)</span></span>;

<span class="hljs-comment">// display:            连接的 EGL 显示</span>
<span class="hljs-comment">// attrib_list:        指定待查询的 EGLConfig 匹配的属性列表</span>
<span class="hljs-comment">// attrib_listOffset:  属性列表的取值位移</span>
<span class="hljs-comment">// configs:            EGLConfig 的配置列表</span>
<span class="hljs-comment">// configsOffset:      配置的取值偏移</span>
<span class="hljs-comment">// config_size:        配置列表的尺寸</span>
<span class="hljs-comment">// num_config:         指定返回的配置大小，数组长度一般设置为 1 即可</span>
<span class="hljs-comment">// num_configOffset:   取值偏移0</span>
</code></pre>
<p>函数调用成功时，返回 EGL_TRUE，否则返回 EGL_FALSE，并将错误码置为以下的值：</p>
<ul>
<li>EGL_BAD_DISPLAY 显示无效</li>
<li>EGL_BAD_ATTRIBUTE 属性错误或无效</li>
<li>EGL_NOT_INITIALIZED 显示(EGLDisplay)未初始化</li>
<li>EGL_BAD_PARAMETER num_config 为空</li>
</ul>
<p>我们在设置属性列表时，需要设置相关属性的默认值。如果不设置，则会使用上述表格中的默认值。例如，我们需要获取支持 5 位红色和蓝色分量、6 位绿色分量(常用的 RGB565 格式)的渲染表面、一个深度缓冲区和 OpenGL 3.0 的 EGLConfig，则可以指定以下的数组：</p>
<pre><code class="language-java hljs"><span class="hljs-keyword">int</span>[] attrs = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[] {
    <span class="hljs-comment">// 属性名                     默认值</span>
    EGL14.EGL_RENDERABLE_TYPE, EGLExt.EGL_OPENGL_ES3_BIT_KHR,
    EGL14.EGL_RED_SIZE, <span class="hljs-number">5</span>,
    EGL14.EGL_GREEN_SIZE, <span class="hljs-number">6</span>,
    EGL14.EGL_BLUE_SIZE, <span class="hljs-number">5</span>,
    EGL14.EGL_DEPTH_SIZE, <span class="hljs-number">1</span>,
    <span class="hljs-comment">// 属性定义结束</span>
    EGL14.EGL_NONE
};

<span class="hljs-comment">// 注：使用 EGL_OPENGL_ES3_BIT_KHR 需要使用 EGL_KHR_create_context 扩展。该属性在 eglext.h (EGL v1.4) 中定义</span>
</code></pre>
<p>下面是一个查询的代码示范：</p>
<pre><code class="language-java hljs"><span class="hljs-comment">// 存储返回的配置数量</span>
<span class="hljs-keyword">int</span> []numConfigs = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[<span class="hljs-number">1</span>];
EGLConfig[]configs = <span class="hljs-keyword">new</span> EGLConfig[<span class="hljs-number">1</span>];
<span class="hljs-keyword">if</span> (!EGL14.eglChooseConfig(eglDisplay, attrs, <span class="hljs-number">0</span>, configs, <span class="hljs-number">0</span>, configs.length, numConfigs, <span class="hljs-number">0</span>)) {
    <span class="hljs-comment">// 获取属性出错</span>
    <span class="hljs-keyword">return</span>;
}
<span class="hljs-comment">// 获取属性成功</span>
</code></pre>
<p>如果 eglChooseConfig 匹配成功，则将返回一组匹配相应属性列表的标准的 EGLConfig。如果 EGLConfig 的数量超过一个(最多是我们指定的最大配置数量)，则将按如下顺序排列：</p>
<ol>
<li>按照 EGL_CONFIG_CAVEAT 的值。如果没有配置注意事项(EGL_CONFIG_CAVEAT 的值为 EGL_NONE)的配置优先，然后是慢速渲染配置(EGL_SLOW_CONFIG)，最后是不兼容的配置(EGL_NON_CONFORMANT_CONFIG)</li>
<li>按照 EGL_COLOR_BUFFER_TYPE 指定的缓冲区类型</li>
<li>按照颜色缓冲区位数降序排列。缓冲区的位数取决于 EGL_COLOR_BUFFER_TYPE，至少是为特定颜色通道指定的值。当缓冲区类型为 EGL_RGB_BUFFER 时，位数是 EGL_RED_SIZE、EGL_GREEN_SIZE、EGL_BLUE_SIZE的和。当颜色缓冲区类型为 EGL_LUMINANCE_BUFFER 时，位数是 EGL_LUMINANCE_SIZE 与 EGL_ALPHA_SIZE 的和。</li>
<li>按照 EGL_BUFFER_SIZE 值的升序排列</li>
<li>按照 EGL_SAMPLE_BUFFERS 值的升序排列</li>
<li>按照 EGL_SAMPLES 数量的升序排列</li>
<li>按照 EGL_DEPTH_SIZE 值的升序排列</li>
<li>按照 EGL_STENCIL_SIZE 值的升序排列</li>
<li>按照 EGL_ALPHA_MASK_SIZE 的值排序(这仅适用于 OpenVG)</li>
<li>按照 EGL_NATIVE_VISUAL_TYPE，以实现相关的方式排序</li>
<li>按照 EGL_CONFIG_ID 值的升序排列</li>
</ol>
<p>上述列表中未提及到的参数不用于排列过程</p>
<p>同时，需要注意以下事项：</p>
<ul>
<li>因为第 3 条排序规则的存在，为了匹配最佳的属性格式，必须添加额外的逻辑检查。如：我们要求的是 RGB565，但是 RGB888 会先出现在返回结果中。</li>
<li>如果指定属性列表时，没有设置对应的默认值，则默认的渲染表面是屏幕上的窗口(EGL_SURFACE_TYPE 属性对应的值)。</li>
</ul>
<h2 id="7-创建屏幕上的渲染区域：egl-窗口">7. 创建屏幕上的渲染区域：EGL 窗口</h2>
<p>一旦我们有了符合渲染需求的 EGLConfig，就为创建窗口做好了准备。可以调用以下函数来创建窗口：</p>
<pre><code class="language-java hljs"><span class="hljs-function">EGLSurface <span class="hljs-title">eglCreateWindowSurface</span><span class="hljs-params">(EGLDisplay display, EGLConfig config, Object window, <span class="hljs-keyword">int</span>[] attrib_list, <span class="hljs-keyword">int</span> offset)</span></span>;

<span class="hljs-comment">// display      指定 EGL 的显示连接</span>
<span class="hljs-comment">// config       指定的配置</span>
<span class="hljs-comment">// window       指定原生窗口，在 Android 中，可传入 SurfaceHolder 对象</span>
<span class="hljs-comment">// attrib_list  指定窗口属性列表，可能为 NULL</span>
<span class="hljs-comment">// offset       属性列表的取值偏移</span>
</code></pre>
<p>上面的属性列表可以取以下值，因为 EGL 还可以支持其他 API(如 Open VG)，故创建时，有些属性不适用。下面是 OpenGL ES 支持的属性：</p>
<table>
<thead>
<tr>
<th style="text-align: center">属性名</th>
<th style="text-align: center">描述</th>
<th style="text-align: center">默认值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">EGL_RENDER_BUFFER</td>
<td style="text-align: center">指定渲染用的缓冲区(EGL_SINGLE_BUFFER，或者后台缓冲区 EGL_BACK_BUFFER)</td>
<td style="text-align: center">EGL_BACK_BUFFER</td>
</tr>
<tr>
<td style="text-align: center">EGL_GL_COLORSPACE</td>
<td style="text-align: center">指定 Open GL 和 Open GL ES 渲染表面时，用到的颜色空间，此属性在 EGL1.5 中被定义</td>
<td style="text-align: center">EGL_GL_COLORSPACE_SRGB</td>
</tr>
</tbody>
</table>
<p>说明，对于 OpenGL ES 3.0，只支持双缓冲区窗口。</p>
<p>当属性列表 attrib_list 为空，或者 EGL_NONE 作为属性第一个元素时，所有的属性值都将使用默认值。当调用失败时，函数会返回 EGL_NO_SURFACE，并设置以下错误：</p>
<ul>
<li>EGL_BAD_DISPLAY       显示错误</li>
<li>EGL_NOT_INITIALIZED   显示未初始化</li>
<li>EGL_BAD_CONFIG        配置错误，配置未得到系统支持</li>
<li>EGL_BAD_NATIVE_WINDOW 本地原生窗口错误</li>
<li>EGL_BAD_ATTRIBUTE     属性错误</li>
<li>EGL_BAD_ALLOC         分配错误，如无法分配窗口资源，或者已有 EGLSurface 与本地原生窗口关联时</li>
<li>EGL_BAD_MATCH         匹配错误 EGLConfig 不匹配原生窗口系统。或者 EGLConfig 不支持渲染到窗口(EGL_SURFACE_TYPE 属性没有设置 EGL_WINDOW_BIT)</li>
</ul>
<p>下面是一个创建 EGL 窗口的代码，参照了 GLSurfaceView：</p>
<pre><code class="language-java hljs">EGLSurface surface = EGL14.eglCreateWindowSurface(display, config, view.getHolder(), <span class="hljs-keyword">null</span>, <span class="hljs-number">0</span>);
<span class="hljs-keyword">if</span>(surface == <span class="hljs-keyword">null</span>) {
    Log.e(<span class="hljs-string">"Test"</span>, <span class="hljs-string">"窗口为空"</span>);
    <span class="hljs-keyword">return</span>;
}
<span class="hljs-keyword">if</span>(surface == EGL14.EGL_NO_SURFACE) {
    <span class="hljs-keyword">int</span> error = EGL14.eglGetError();
    <span class="hljs-comment">// 处理错误</span>
    <span class="hljs-keyword">return</span>;
}
<span class="hljs-comment">// 函数执行成功，往下走</span>
</code></pre>
<p>下面，介绍另外一种 EGL 渲染区域：EGL Pbuffer。</p>
<h2 id="8-创建屏幕外渲染区域：egl-pbuffer">8. 创建屏幕外渲染区域：EGL Pbuffer</h2>
<p>除了可以用 OpenGL ES 在屏幕上的窗口渲染之外，还可以渲染被称为 Pbuffer(像素缓冲区 Pixel buffer 的简写) 的不可见屏幕外表面。和窗口一样，Pbuffer 可以利用 OpenGL ES 中的任何硬件加速。Pbuffer 常用于生成纹理贴图。当然，如果想要的是渲染到一个纹理，建议使用帧缓冲区对象代替 Pbuffer，因为帧缓冲区更高效。不过，在某些帧缓冲区无法使用的情况下，Pbuffer 仍然有效，比如用 OpenGL ES 在屏幕外表面渲染，然后将其作为其他 API(如 OpenVG)中的纹理。</p>
<p>和窗口一样，Pbuffer 支持 OpenGL ES 的所有渲染机制。主要的区别是：</p>
<ul>
<li>窗口：渲染的内容可以在屏幕上显示，渲染完成时，需要交换缓冲区</li>
<li>Pbuffer：渲染的内容无法在屏幕上显示，渲染完成时，无需交换缓冲区。而是从 Pbuffer 中将数值直接复制到应用程序，或者是将 Pbuffer 的绑定更改为纹理，则 Pbuffer 的渲染对目标纹理生效</li>
</ul>
<p>创建 Pbuffer 和创建 EGL 窗口非常类似。为了创建 Pbuffer，需要和窗口一样找到 EGLConfig，并作一处修改；我们需要扩增 EGL_SURFACE_TYPE 的值，使其包含 EGL_PBUFFER_BIT。拥有适用的 EGLConfig 之后，就可以用如下函数创建 Pbuffer:</p>
<pre><code class="language-java hljs"><span class="hljs-function">EGLSurface <span class="hljs-title">eglCreatePbufferSurface</span><span class="hljs-params">(EGLDisplay display, EGLConfig config, <span class="hljs-keyword">int</span>[] attrib_list, <span class="hljs-keyword">int</span> offset)</span></span>;

<span class="hljs-comment">// display       指定的 EGL 显示</span>
<span class="hljs-comment">// config        指定的配置</span>
<span class="hljs-comment">// attrib_list   指定像素缓冲区的属性列表，可能为 NULL</span>
<span class="hljs-comment">// offset        属性数组取值的偏移值</span>
</code></pre>
<p>在 OpenGL ES 中，下面是可用的属性列表：</p>
<table>
<thead>
<tr>
<th style="text-align: center">属性名</th>
<th style="text-align: center">描述</th>
<th style="text-align: center">默认值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">EGL_WIDTH</td>
<td style="text-align: center">指定 Pbuffer 的宽度(以像素表示)</td>
<td style="text-align: center">0</td>
</tr>
<tr>
<td style="text-align: center">EGL_HEIGHT</td>
<td style="text-align: center">指定 Pbuffer 的高度(以像素表示)</td>
<td style="text-align: center">0</td>
</tr>
<tr>
<td style="text-align: center">EGL_LARGEST_PBUFFER</td>
<td style="text-align: center">如果请求的大小不可用，则选择最大的可用 Pbuffer，有效值为 EGL_TRUE 和 EGL_FALSE</td>
<td style="text-align: center">EGL_FALSE</td>
</tr>
<tr>
<td style="text-align: center">EGL_TEXTURE_FORMAT</td>
<td style="text-align: center">如果 Pbuffer 指定到一个纹理贴图，则指定纹理格式类型，有效值是 EGL_NO_TEXTURE, EGL_TEXTURE_RGB, 和 EGL_TEXTURE_RGBA</td>
<td style="text-align: center">EGL_NO_TEXTURE(表示 Pbuffer 不能直接指定到纹理)</td>
</tr>
<tr>
<td style="text-align: center">EGL_TEXTURE_TARGET</td>
<td style="text-align: center">指定 Pbuffer 作为纹理贴图时，应该连接到的相关纹理目标，有效值是 EGL_NO_TEXTURE, 和 EGL_TEXTURE_2D</td>
<td style="text-align: center">EGL_NO_TEXTURE</td>
</tr>
<tr>
<td style="text-align: center">EGL_MIPMAP_TEXTURE</td>
<td style="text-align: center">指定 是否应该为 纹理mipmap 分配存储，有效值是 EGL_TRUE 和 EGL_FALSE</td>
<td style="text-align: center">EGL_FALSE</td>
</tr>
<tr>
<td style="text-align: center">EGL_GL_COLORSPACE</td>
<td style="text-align: center">指定 Open GL 和 Open GL ES 渲染表面时，用到的颜色空间，此属性在 EGL1.5 中被定义</td>
<td style="text-align: center">EGL_GL_COLORSPACE_SRGB</td>
</tr>
</tbody>
</table>
<p>和窗口创建一样，函数调用失败时，会返回 EGL_NO_SURFACE，并设置以下错误码：</p>
<ul>
<li>EGL_BAD_DISPLAY  EGL 显示连接错误</li>
<li>EGL_NOT_INITIALIZED  EGL 显示未初始化</li>
<li>EGL_BAD_CONFIG   配置无效</li>
<li>EGL_BAD_ATTRIBUTE  如果指定了 EGL_MIPMAP_TEXTURE, EGL_TEXTURE_FORMAT, 或者 EGL_TEXTURE_TARGET，但是提供的 EGLConfig 不支持 OpenGL ES 渲染(如只支持 OpenVG 渲染)，则发生该错误</li>
<li>EGL_BAD_ALLOC EGL Pbuffer 因为缺少资源而无法分配时，发生该错误</li>
<li>EGL_BAD_PARAMETER  如果属性指定的 EGL_WIDTH 或 EGL_HEIGHT 是负值，则发生该错误</li>
<li>EGL_BAD_MATCH  如果出现以下情况，则出现该错误：
<ol>
<li>提供的 EGLConfig 不支持 Pbuffer 表面</li>
<li>Pbuffer 被用作纹理贴图(EGL_TEXTURE_FORMAT 不是 EGL_NO_TEXTURE)，且指定的 EGL_WIDTH 和 EGL_HEIGHT 时无效的纹理尺寸</li>
<li>EGL_TEXTURE_FORMAT 和 EGL_TEXTURE_TARGET 设置为 EGL_NO_TEXTURE，而其他属性没有设置成 EGL_NO_TEXTURE</li>
</ol>
</li>
</ul>
<h2 id="9-创建一个渲染上下文">9. 创建一个渲染上下文</h2>
<p>渲染上下文是 OpenGL ES 的内部数据结构，包含操作所需的所有状态信息。在 OpenGL ES 中，必须要有个上下文才能绘图。可以用如下函数创建上下文：</p>
<pre><code class="language-java hljs"><span class="hljs-function">EGLContext <span class="hljs-title">eglCreateContext</span><span class="hljs-params">(EGLDisplay display, EGLConfig config, EGLContext share_context, <span class="hljs-keyword">int</span>[] attrib_list, <span class="hljs-keyword">int</span> offset)</span></span>;

<span class="hljs-comment">// display       指定的 EGL 显示</span>
<span class="hljs-comment">// config        指定的配置</span>
<span class="hljs-comment">// share_context 允许多个 EGL 上下文共享特定类型的数据，比如着色器程序和纹理贴图，使用 EGL_NO_CONTEXT 表示没有共享</span>
<span class="hljs-comment">// attrib_list   指定上下文使用的属性列表，只有一个可接受的属性： EGL_CONTEXT_CLIENT_VERSION。该属性用于指定与我们所使用的 OpenGL ES 版本相关的上下文类型。默认值是1(即指定 OpenGL ES 1.X 版本的上下文类型)</span>
<span class="hljs-comment">// offset        属性列表的取值偏移</span>
</code></pre>
<p>函数执行成功时，会返回一个指向新创建上下文的句柄。如果失败，则会返回 EGL_NO_CONTEXT，并设置如以下错误码(不全，官方文档未说明。以实际返回为准)：</p>
<ul>
<li>EGL_BAD_CONFIG   配置无效</li>
</ul>
<p>下面是创建上下文的一段示范代码：</p>
<pre><code class="language-java hljs"><span class="hljs-keyword">int</span> []contextAttribs = {
    EGL14.EGL_CONTEXT_CLIENT_VERSION, <span class="hljs-number">2</span>, <span class="hljs-comment">// EGL14 一般与 GLES20 结合使用</span>
    EGL14.EGL_NONE
};
eglContext = EGL14.eglCreateContext(eglDisplay, eglConfig, EGL14.EGL_NO_CONTEXT, contextAttribs,<span class="hljs-number">0</span>);
<span class="hljs-keyword">if</span>(eglContext== EGL14.EGL_NO_CONTEXT) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(<span class="hljs-string">"EGL error "</span>+EGL14.eglGetError());
}
</code></pre>
<h2 id="10-指定某个-eglcontext-为当前上下文">10. 指定某个 EGLContext 为当前上下文</h2>
<p>终于，我们来到了最后一步，完成这一步后，我们就能开始渲染了。</p>
<p>因为一个应用程序可能创建多个 EGLContext 用于不同的用途，所以我们需要关联特定的 EGLContext 和渲染表面。这一步骤通常叫做 "指定当前上下文"。使用下列函数，关联特定的 EGLContext 和 EGLSurface：</p>
<pre><code class="language-java hljs"><span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">eglMakeCurrent</span><span class="hljs-params">(EGLDisplay display, EGLSurface draw, EGLSurface read, EGLContext context)</span></span>;

<span class="hljs-comment">// display       指定的 EGL 显示</span>
<span class="hljs-comment">// draw          指定的 EGL 绘图表面</span>
<span class="hljs-comment">// read          指定的 EGL 读取表面</span>
<span class="hljs-comment">// context       指定连接到该表面的渲染上下文</span>
</code></pre>
<p>函数执行成功时，会返回 EGL_TRUE，否则返回 EGL_FALSE，并设置以下错误码：</p>
<ul>
<li>EGL_BAD_MATCH     draw 或 read 与 context 上下文不兼容</li>
<li>EGL_BAD_ACCESS    发生以下情况时，会产生该错误
<ol>
<li>当前未指定上下文</li>
<li>上下文的版本与客户端(手机实体)支持的版本不兼容</li>
<li>或者 draw 或 read 未绑定到当前上下文</li>
<li>draw 或者 read 是由 eglCreatePbufferFromClientBuffer 函数创建的 Pbuffer，但是创建他们的底层客户端缓冲区正在被创建他们的客户端 API 使用</li>
</ol>
</li>
<li>EGL_BAD_CONTEXT    上下文无效，并且上下文不是 EGL_NO_CONTEXT</li>
<li>EGL_BAD_SURFACE    draw 或者 read 无效，并且不是 EGL_NO_SURFACE</li>
<li>EGL_BAD_MATCH    出现以下情况时，会产生该错误：
<ol>
<li>上下文是 EGL_NO_CONTEXT，但是 draw 或者 read 不是 EGL_NO_SURFACE</li>
<li>draw 或者 read 的其中一个有效，另一个是 EGL_NO_SURFACE</li>
<li>上下文不支持在没有 draw 或者 read 的情况下绑定，而 draw 和 read 都是 EGL_NO_SURFACE</li>
<li>如果 draw 和 read 的渲染内容无法同时放入图形内存</li>
</ol>
</li>
<li>EGL_BAD_NATIVE_WINDOW    作为 draw 或者 read 的本机窗口不再有效</li>
<li>EGL_BAD_CURRENT_SURFACE    如果之前调用线程的上下文未清除命令，并且之前的表面不再有效</li>
<li>EGL_BAD_ALLOC    用于 draw 和 read 的辅助缓冲区无法分配</li>
<li>EGL_CONTEXT_LOST    发生意外的电源事件</li>
<li>EGL_NOT_INITIALIZED    如果指定的显示(EGLDisplay)有效但未初始化，并且存在以下的情形之一：
<ol>
<li>context 不是 EGL_NO_CONTEXT</li>
<li>draw 或者 read 不是 EGL_NO_SURFACE</li>
</ol>
</li>
<li>EGL_BAD_DISPLAY    EGL 指定的显示无效。部分 EGL 实现允许 EGL_NO_DISPLAY 作为 eglMakeCurrent 函数的有效显示参数。但这并不是 EGL 的标准定义，应被视为特定厂商的扩展。</li>
</ul>
<p>我们注意到函数需要两个 EGLSurface 表面。尽管这种方法具有灵活性(在 EGL 的高级用法中将被利用到)，但是通常我们把 draw 和 read 设置为同一个值---我们前面创建的渲染表面(窗口或者 Pbuffer)。注意，因为 EGL 规范要求 eglMakeCurrent 实现进行一次刷新，所以这一调用对于基于图块的架构代价很高。</p>
<p>讲述完用 EGL 渲染前的所有准备后，我们正式整合所有步骤，输出一个完整的代码示范。</p>
<h2 id="11-同步渲染">11. 同步渲染</h2>
<p>此部分是扩展内容，不是必须的步骤。不想看的可以跳过，看下面的代码示范。</p>
<p>有时我们会碰到，协调多个图形 API 在单个窗口中渲染的情况。在这种情况下，需要让应用程序允许多个库渲染到共享窗口。EGL 提供了几个函数来处理这种同步任务。</p>
<ul>
<li>
<ol>
<li>只用 OpenGL ES，可以调用 glFinish 函数来保证所有渲染已经发生。或者是更高级的同步对象和栅栏。</li>
</ol>
</li>
<li>
<ol start="2">
<li>不止一种 Khronos API。在切换窗口系统原生渲染 API 之前，可能不知道使用的是哪个 API。为此可以调用 eglWaitClient 函数延迟客户端的执行，直到某个 Khronos API 的所有渲染完成，再切换 API。该函数执行成功时，会返回 EGL_TRUE，失败时返回 EGL_FALSE，并设置错误码为 EGL_BAD_CURRENT_SURFACE。</li>
</ol>
</li>
<li>
<ol start="3">
<li>同样在不止一种 Khronos API 的情况，如果想要保证原生窗口系统的渲染完成，则可以调用 eglWaitNative(EGLInt engine)。参数可设置为 EGL_CORE_NATIVE_ENGINE，代表支持的最常见引擎，其他实现视为 EGL 扩展。函数执行成功，返回 EGL_TRUE，否则返回 EGL_FALSE，并设置错误码为 EGL_BAD_PARAMETER。</li>
</ol>
</li>
</ul>
<h1 id="步骤整合与代码示范">步骤整合与代码示范</h1>
<p>下面是一段示范，可能无法运行，但是说明了 EGL 执行与初始化的流程。</p>
<pre><code class="language-java hljs"><span class="hljs-comment">/**
  * 初始化 EGL，初始化成功，返回 true，否则返回 false
  * */</span>
<span class="hljs-meta">@RequiresApi(Build.VERSION_CODES.JELLY_BEAN_MR1)</span>
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">initWindow</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// 1. 获取 EAL 显示</span>
    EGLDisplay eglDisplay = EGL14.eglGetDisplay(EGL14.EGL_DEFAULT_DISPLAY);
    <span class="hljs-keyword">if</span>(eglDisplay == EGL14.EGL_NO_DISPLAY) {
        Log.e(<span class="hljs-string">"initWindow"</span>, EGL14.eglGetError() + <span class="hljs-string">""</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }
    <span class="hljs-comment">// 2. 初始化 EGL</span>
    <span class="hljs-keyword">int</span>[] version = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[<span class="hljs-number">2</span>];
    <span class="hljs-keyword">if</span>(!EGL14.eglInitialize(eglDisplay, version, <span class="hljs-number">0</span>, version, <span class="hljs-number">1</span>)) {
        Log.e(<span class="hljs-string">"initWindow"</span>, EGL14.eglGetError() + <span class="hljs-string">""</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }
    <span class="hljs-comment">// 3. 确定配置</span>
    <span class="hljs-keyword">int</span>[] configAttribs = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[] {
        EGL14.EGL_RENDERABLE_TYPE, EGL14.EGL_WINDOW_BIT,
        EGL14.EGL_RED_SIZE, <span class="hljs-number">8</span>,
        EGL14.EGL_GREEN_SIZE, <span class="hljs-number">8</span>,
        EGL14.EGL_BLUE_SIZE, <span class="hljs-number">8</span>,
        EGL14.EGL_DEPTH_SIZE, <span class="hljs-number">24</span>,
        EGL14.EGL_NONE
    };
    EGLConfig[] configs = <span class="hljs-keyword">new</span> EGLConfig[<span class="hljs-number">1</span>];
    <span class="hljs-keyword">int</span>[] numConfigs = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[<span class="hljs-number">1</span>];
    <span class="hljs-keyword">if</span>(!EGL14.eglChooseConfig(eglDisplay, configAttribs, <span class="hljs-number">0</span>, configs, <span class="hljs-number">0</span>,
                              configs.length, numConfigs, <span class="hljs-number">0</span>)) {
        Log.e(<span class="hljs-string">"initWindow"</span>, EGL14.eglGetError() + <span class="hljs-string">""</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }
    <span class="hljs-keyword">if</span>(configs[<span class="hljs-number">0</span>] == <span class="hljs-keyword">null</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }
    <span class="hljs-comment">// 4. 创建渲染表面，此处是创建窗口</span>
    EGLSurface window = EGL14.eglCreateWindowSurface(eglDisplay,
                                                     configs[<span class="hljs-number">0</span>], glSurfaceView.getHolder(), <span class="hljs-keyword">null</span>, <span class="hljs-number">0</span>);
    <span class="hljs-keyword">if</span>(window == EGL14.EGL_NO_SURFACE) {
        Log.e(<span class="hljs-string">"initWindow"</span>, EGL14.eglGetError() + <span class="hljs-string">""</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }
    <span class="hljs-comment">// 5. 创建上下文</span>
    <span class="hljs-keyword">int</span>[] contextAttribs = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[] {
        EGL14.EGL_CONTEXT_CLIENT_VERSION, <span class="hljs-number">2</span>,
        EGL14.EGL_NONE
    };
    EGLContext eglContext = EGL14.eglCreateContext(eglDisplay, configs[<span class="hljs-number">0</span>],
                                                   EGL14.EGL_NO_CONTEXT, contextAttribs, <span class="hljs-number">0</span>);
    <span class="hljs-keyword">if</span>(eglContext == EGL14.EGL_NO_CONTEXT) {
        Log.e(<span class="hljs-string">"initWindow"</span>, EGL14.eglGetError() + <span class="hljs-string">""</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }
    <span class="hljs-comment">// 6. 绑定上下文与表面</span>
    <span class="hljs-keyword">if</span>(!EGL14.eglMakeCurrent(eglDisplay, window, window, eglContext)) {
        Log.e(<span class="hljs-string">"initWindow"</span>, EGL14.eglGetError() + <span class="hljs-string">""</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }
    Log.d(<span class="hljs-string">"initWindow"</span>, <span class="hljs-string">"初始化成功"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
}
</code></pre>
<h1 id="小结">小结</h1>
<p>从上述的说明中，我们可以得到下面的关于 EGL 的使用的流程图：</p>
<p><img src="https://img2020.cnblogs.com/blog/1571403/202007/1571403-20200724231342417-187433596.png" alt="" loading="lazy" /></p>
<p>以上便是关于 EGL 的使用的一些基本介绍。</p>

</div>
<div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="EntryTag">
    标签: 
            <a href="https://www.cnblogs.com/wellcherish/tag/OpenGL/">OpenGL</a>,             <a href="https://www.cnblogs.com/wellcherish/tag/Android/">Android</a>,             <a href="https://www.cnblogs.com/wellcherish/tag/OpenGL%20ES/">OpenGL ES</a>,             <a href="https://www.cnblogs.com/wellcherish/tag/EGL/">EGL</a></div>

    <div id="blog_post_info">
<div id="green_channel">
        <a href="javascript:void(0);" id="green_channel_digg" onclick="DiggIt(12727906,cb_blogId,1);green_channel_success(this,'谢谢推荐！');">好文要顶</a>
        <a id="green_channel_follow" onclick="follow('1be82423-fed1-4783-86b1-08d6697c3397');" href="javascript:void(0);">关注我</a>
    <a id="green_channel_favorite" onclick="AddToWz(cb_entryId);return false;" href="javascript:void(0);">收藏该文</a>
    <a id="green_channel_weibo" href="javascript:void(0);" title="分享至新浪微博" onclick="ShareToTsina()"><img src="https://common.cnblogs.com/images/icon_weibo_24.png" alt="" /></a>
    <a id="green_channel_wechat" href="javascript:void(0);" title="分享至微信" onclick="shareOnWechat()"><img src="https://common.cnblogs.com/images/wechat.png" alt="" /></a>
</div>
<div id="author_profile">
    <div id="author_profile_info" class="author_profile_info">
            <a href="https://home.cnblogs.com/u/wellcherish/" target="_blank"><img src="https://pic.cnblogs.com/face/1571403/20190522194757.png" class="author_avatar" alt="" /></a>
        <div id="author_profile_detail" class="author_profile_info">
            <a href="https://home.cnblogs.com/u/wellcherish/">尛惢刕孨</a><br />
            <a href="https://home.cnblogs.com/u/wellcherish/followees/">关注 - 0</a><br />
            <a href="https://home.cnblogs.com/u/wellcherish/followers/">粉丝 - 1</a>
        </div>
    </div>
    <div class="clear"></div>
    <div id="author_profile_honor"></div>
    <div id="author_profile_follow">
                <a href="javascript:void(0);" onclick="follow('1be82423-fed1-4783-86b1-08d6697c3397');return false;">+加关注</a>
    </div>
</div>
<div id="div_digg">
    <div class="diggit" onclick="votePost(12727906,'Digg')">
        <span class="diggnum" id="digg_count">0</span>
    </div>
    <div class="buryit" onclick="votePost(12727906,'Bury')">
        <span class="burynum" id="bury_count">0</span>
    </div>
    <div class="clear"></div>
    <div class="diggword" id="digg_tips">
    </div>
</div>

<script type="text/javascript">
    currentDiggType = 0;
</script></div>
    <div class="clear"></div>
    <div id="post_next_prev">

    <a href="https://www.cnblogs.com/wellcherish/p/12790188.html" class="p_n_p_prefix">« </a> 上一篇：    <a href="https://www.cnblogs.com/wellcherish/p/12790188.html" title="发布于 2020-04-27 21:48">RecyclerView 刷新踩坑记</a>
    <br />
    <a href="https://www.cnblogs.com/wellcherish/p/12650253.html" class="p_n_p_prefix">» </a> 下一篇：    <a href="https://www.cnblogs.com/wellcherish/p/12650253.html" title="发布于 2020-10-25 20:43">Android 多媒体开发---音频基础</a>

</div>
</div>
            </div>
            <div class="postDesc">posted @ 
<span id="post-date">2020-07-24 23:16</span> 
<a href="https://www.cnblogs.com/wellcherish/">尛惢刕孨</a> 
阅读(<span id="post_view_count">215</span>) 
评论(<span id="post_comment_count">0</span>) 
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=12727906" rel="nofollow">编辑</a> 
<a href="javascript:void(0)" onclick="AddToWz(12727906);return false;">收藏</a></div>
        </div>
	    
	    
    </div><!--end: topics 文章、评论容器-->
</div>
<script src="https://common.cnblogs.com/highlight/10.3.1/highlight.min.js"></script>
<script>markdown_highlight();</script>
<script>
    var allowComments = true, cb_blogId = 517113, cb_blogApp = 'wellcherish', cb_blogUserGuid = '1be82423-fed1-4783-86b1-08d6697c3397';
    var cb_entryId = 12727906, cb_entryCreatedDate = '2020-07-24 23:16', cb_postType = 1;
    updatePostStats(
        [cb_entryId],
        function(id, count) { $("#post_view_count").text(count) },
        function(id, count) { $("#post_comment_count").text(count) })
</script>
<a name="!comments"></a>
<div id="blog-comments-placeholder"></div>
<div id="comment_form" class="commentform">
    <a name="commentform"></a>
    <div id="divCommentShow"></div>
    <div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" onclick="return RefreshCommentList();" id="lnk_RefreshComments" runat="server" clientidmode="Static">刷新评论</a><a href="#" onclick="return RefreshPage();">刷新页面</a><a href="#top">返回顶部</a></div>
    <div id="comment_form_container" style="visibility: visible;"><div class="login_tips">
    登录后才能发表评论，立即 <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return login('commentform');">登录</a> 或
    <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return register();">注册</a>，
    <a href="https://www.cnblogs.com/">访问</a> 网站首页
</div>
<a href="https://www.cnblogs.com/cmt/p/14003277.html" target="_blank" onclick="ga('send', 'event', 'Link', 'click', 'T2-login-tip-aws')">写给园友们的一封求助信</a>
</div>
    <div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
    <div id="ad_t2"><a href="http://www.softbam.com/index.htm" target="_blank" onclick="ga('send', 'event', 'Link', 'click', 'T2-ucancode-1103')">【推荐】News: 大型组态、工控、仿真、CADGIS 50万行VC++源码免费下载</a><br /><a href="https://www.cnblogs.com/himmr/p/14148994.html" target="_blank" onclick="ga('send', 'event', 'Link', 'click', 'T2-Himmr')">【推荐】博客园 &amp; 陌上花开HIMMR 给单身的程序员小哥哥助力脱单啦～</a><br /><a href="https://www.wenjuan.com/s/UZBZJvjEKs/#《博客园用户消费观调查》，快来参与吧。【问卷网提供支持】" target="_blank" onclick="ga('send', 'event', 'Link', 'click', 'T2-博客园问卷')">【推荐】有你助力，更好为你——博客园用户消费观调查，附带小惊喜！</a><br /><a href="https://www.cnblogs.com/cmt/p/14152738.html" target="_blank" onclick="ga('send', 'event', 'Link', 'click', 'T2-丝芙兰-圣诞')">【推荐】博客园x丝芙兰-圣诞特别活动：圣诞选礼，美力送递</a><br /><a href="https://brands.cnblogs.com/huawei" target="_blank" onclick="ga('send', 'event', 'Link', 'click', 'T2-华为专区')">【推荐】了不起的开发者，挡不住的华为，园子里的品牌专区</a><br /><a href="https://brands.cnblogs.com/aws/free?source=CH" target="_blank" onclick="ga('send', 'event', 'Link', 'click', 'T2-AWS')">【福利】AWS携手博客园为开发者送免费套餐+50元京东E卡</a><br /><a href="https://brands.cnblogs.com/agora" target="_blank" onclick="ga('send', 'event', 'Link', 'click', 'T2-声网专区')">【推荐】未知数的距离，毫秒间的传递，声网与你实时互动</a><br /></div>
    <div id="opt_under_post"></div>
    <div id="cnblogs_c1" class="c_ad_block">
        <div id="div-gpt-ad-1592365906576-0" style="width: 300px; height: 250px;" data-google-query-id="CPDPt8OR1-0CFZcEXAodjBkDDA"><div id="google_ads_iframe_/1090369/C1_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1090369/C1_0" title="3rd party ad content" name="google_ads_iframe_/1090369/C1_0" width="300" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" srcdoc="" data-google-container-id="1" style="border: 0px; vertical-align: bottom;" data-load-complete="true"></iframe></div></div>
    </div>
    <div id="under_post_news"><div class="recomm-block"><b>相关博文：</b><br />·  <a title="(2)LEARNINGOPENGL" href="https://www.cnblogs.com/liuzhongrong/p/11986034.html" target="_blank" onclick="clickRecomItmem(11986034)">(2)LEARNINGOPENGL</a><br />·  <a title="(2)LEARNINGOPENGL" href="https://www.cnblogs.com/liuzhongrong/p/11992297.html" target="_blank" onclick="clickRecomItmem(11992297)">(2)LEARNINGOPENGL</a><br />·  <a title="OpenGL基本图元类型" href="https://www.cnblogs.com/jixiaohua/p/11421355.html" target="_blank" onclick="clickRecomItmem(11421355)">OpenGL基本图元类型</a><br />·  <a title="opengl第一个工程" href="https://www.cnblogs.com/xiangtingshen/p/12055171.html" target="_blank" onclick="clickRecomItmem(12055171)">opengl第一个工程</a><br />·  <a title="OpenGL学习——绘制矩形" href="https://www.cnblogs.com/xingchong/p/12069080.html" target="_blank" onclick="clickRecomItmem(12069080)">OpenGL学习——绘制矩形</a><br />»  <a target="_blank" href="https://recomm.cnblogs.com/blogpost/12727906">更多推荐...</a></div></div>
    <div id="cnblogs_c2" class="c_ad_block"><a href="https://brands.cnblogs.com/aws/free?source=C2" target="_blank"><img width="468" height="60" src="https://img2020.cnblogs.com/blog/2016690/202011/2016690-20201107113124642-85659290.png" alt="AWS免费套餐" onclick="ga('send', 'event', 'Link', 'click', 'C2-AWS');" /></a></div>
    <div id="under_post_kb">
<div class="itnews c_ad_block">
    <b>最新 IT 新闻</b>:
    <br />
 ·          <a href="//news.cnblogs.com/n/683542/" target="_blank">科技圈2020十大并购：ARM被收购带来行业巨震；TikTok生死成谜</a>
        <br />
 ·          <a href="//news.cnblogs.com/n/683541/" target="_blank">WhatsApp测试Mac桌面客户端的语音和视频通话功能</a>
        <br />
 ·          <a href="//news.cnblogs.com/n/683540/" target="_blank">辛巴团队涉嫌泄露爆料者隐私 该当何责？</a>
        <br />
 ·          <a href="//news.cnblogs.com/n/683539/" target="_blank">新专利申请显示苹果继续研究如何将iPhone塞入苹果眼镜使用</a>
        <br />
 ·          <a href="//news.cnblogs.com/n/683538/" target="_blank">美团、饿了么外卖狂奔背后：料理包全面潜入你的胃</a>
        <br />
    » <a href="https://news.cnblogs.com/" title="IT 新闻" target="_blank">更多新闻...</a>
</div></div>
    <div id="HistoryToday" class="c_ad_block"></div>
    <script type="text/javascript">
       var commentManager = new blogCommentManager();
       commentManager.renderComments(0);
       fixPostBody();
       deliverBigBanner();
setTimeout(function() { incrementViewCount(cb_entryId); }, 50);       deliverT2();
       deliverC1C2();
       loadNewsAndKb();
       loadBlogSignature();
LoadPostCategoriesTags(cb_blogId, cb_entryId);       LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
       GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
       loadOptUnderPost();
       GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);
   </script>
</div>

	</div><!--end: forFlow -->
	</div><!--end: mainContent 主体内容容器-->
	<div id="sideBar">
		<div id="sideBarMain">
			<div id="sidebar_news" class="newsItem"><!--done-->
<h3 class="catListTitle">公告</h3>

<div id="blog-news">
    
    <div id="profile_block">
        昵称：
        <a href="https://home.cnblogs.com/u/wellcherish/">
            尛惢刕孨
        </a>
        <br />
        园龄：
        <a href="https://home.cnblogs.com/u/wellcherish/" title="入园时间：2018-12-24">
            1年11个月
        </a>
        <br />
        粉丝：
        <a href="https://home.cnblogs.com/u/wellcherish/followers/">
            1
        </a>
        <br />
        关注：
        <a href="https://home.cnblogs.com/u/wellcherish/followees/">
            0
        </a>
        <div id="p_b_follow">
<a href="javascript:void(0)" onclick="follow('1be82423-fed1-4783-86b1-08d6697c3397')">+加关注</a></div>
        <script>getFollowStatus('1be82423-fed1-4783-86b1-08d6697c3397');</script>
    </div>
</div>

</div>
<div id="sidebar_c3"></div>
			<div id="blog-calendar" style="">

<table id="blogCalendar" class="Cal" cellspacing="0" cellpadding="0" title="Calendar" border="0">
    <tbody>
        <tr>
            <td colspan="7">
                <table class="CalTitle" cellspacing="0" border="0">
                    <tbody>
                        <tr>
                            <td class="CalNextPrev">
                                <a href="javascript:void(0);" onclick="loadBlogCalendar('2020/11/18'); return false;">&lt;</a>
                            </td>
                            <td align="center">2020年12月</td>
                            <td align="right" class="CalNextPrev">
                                <a href="javascript:void(0);" onclick="loadBlogCalendar('2021/01/18'); return false;">&gt;</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
    <tr>
        <th class="CalDayHeader" align="center" abbr="日" scope="col">日</th>
        <th class="CalDayHeader" align="center" abbr="一" scope="col">一</th>
        <th class="CalDayHeader" align="center" abbr="二" scope="col">二</th>
        <th class="CalDayHeader" align="center" abbr="三" scope="col">三</th>
        <th class="CalDayHeader" align="center" abbr="四" scope="col">四</th>
        <th class="CalDayHeader" align="center" abbr="五" scope="col">五</th>
        <th class="CalDayHeader" align="center" abbr="六" scope="col">六</th>
    </tr>
            <tr>
                            <td class="CalOtherMonthDay" align="center">29</td>
                            <td class="CalOtherMonthDay" align="center">30</td>
                        <td class="" align="center">
                            1
                        </td>
                        <td class="" align="center">
                            2
                        </td>
                        <td class="" align="center">
                            3
                        </td>
                        <td class="" align="center">
                            4
                        </td>
                    <td class="CalWeekendDay" align="center">
                        5
                    </td>
            </tr>
                <tr>
                        <td class="CalWeekendDay" align="center">
                            6
                        </td>
                            <td class="" align="center">
                                7
                            </td>
                            <td class="" align="center">
                                8
                            </td>
                            <td class="" align="center">
                                9
                            </td>
                            <td class="" align="center">
                                10
                            </td>
                            <td class="" align="center">
                                11
                            </td>
                        <td class="CalWeekendDay" align="center">
                            12
                        </td>
                </tr>
                <tr>
                        <td class="CalWeekendDay" align="center">
                            13
                        </td>
                            <td class="" align="center">
                                14
                            </td>
                            <td class="" align="center">
                                15
                            </td>
                            <td class="" align="center">
                                16
                            </td>
                            <td class="" align="center">
                                17
                            </td>
                            <td class="CalTodayDay" align="center">
                                18
                            </td>
                        <td class="CalWeekendDay" align="center">
                            19
                        </td>
                </tr>
                <tr>
                        <td class="CalWeekendDay" align="center">
                            20
                        </td>
                            <td class="" align="center">
                                21
                            </td>
                            <td class="" align="center">
                                22
                            </td>
                            <td class="" align="center">
                                23
                            </td>
                            <td class="" align="center">
                                24
                            </td>
                            <td class="" align="center">
                                25
                            </td>
                        <td class="CalWeekendDay" align="center">
                            26
                        </td>
                </tr>
                <tr>
                        <td class="CalWeekendDay" align="center">
                            27
                        </td>
                            <td class="" align="center">
                                28
                            </td>
                            <td class="" align="center">
                                29
                            </td>
                            <td class="" align="center">
                                30
                            </td>
                            <td class="" align="center">
                                31
                            </td>
                            <td class="CalOtherMonthDay" align="center">
                                1
                            </td>
                        <td class="CalOtherMonthDay" align="center">
                            2
                        </td>
                </tr>
                <tr>
                        <td class="CalOtherMonthDay" align="center">
                            3
                        </td>
                            <td class="CalOtherMonthDay" align="center">
                                4
                            </td>
                            <td class="CalOtherMonthDay" align="center">
                                5
                            </td>
                            <td class="CalOtherMonthDay" align="center">
                                6
                            </td>
                            <td class="CalOtherMonthDay" align="center">
                                7
                            </td>
                            <td class="CalOtherMonthDay" align="center">
                                8
                            </td>
                        <td class="CalOtherMonthDay" align="center">
                            9
                        </td>
                </tr>
    </tbody>
</table></div><script>loadBlogDefaultCalendar();</script>			
			<div id="leftcontentcontainer">
				<div id="blog-sidecolumn"><!-- 搜索 -->
<div id="sidebar_search" class="sidebar-block">
    <div id="sidebar_search" class="mySearch">
        <h3 class="catListTitle">搜索</h3>
        <div id="sidebar_search_box">
            <div id="widget_my_zzk" class="div_my_zzk">
                <input type="text" id="q" onkeydown="return zzk_go_enter(event);" class="input_my_zzk" /> <input onclick="zzk_go()" type="button" value="找找看" id="btnZzk" class="btn_my_zzk" />
            </div>
            
        </div>
    </div>
</div>

<!-- 常用链接 -->
<div id="sidebar_shortcut" class="sidebar-block"><div class="catListLink">
<h3 class="catListTitle">
常用链接
</h3>
<ul>
    
<li><a href="https://www.cnblogs.com/wellcherish/p/" title="我的博客的随笔列表">我的随笔</a></li>
<li><a href="https://www.cnblogs.com/wellcherish/MyComments.html" title="我的发表过的评论列表">我的评论</a></li>
<li><a href="https://www.cnblogs.com/wellcherish/OtherPosts.html" title="我评论过的随笔列表">我的参与</a></li>
<li><a href="https://www.cnblogs.com/wellcherish/RecentComments.html" title="我的博客的评论列表">最新评论</a></li>
<li><a href="https://www.cnblogs.com/wellcherish/tag/" title="我的博客的标签列表">我的标签</a></li>

</ul>
</div>

</div>

<!-- 最新随笔 -->


<!-- 我的标签 -->
<div id="sidebar_toptags" class="sidebar-block"><div class="catListTag">
<h3 class="catListTitle">我的标签</h3>
<ul>
        <li>
            <a href="https://www.cnblogs.com/wellcherish/tag/%E7%AE%97%E6%B3%95/">算法<span class="tag-count">(21)</span></a>
        </li>
        <li>
            <a href="https://www.cnblogs.com/wellcherish/tag/Android/">Android<span class="tag-count">(11)</span></a>
        </li>
        <li>
            <a href="https://www.cnblogs.com/wellcherish/tag/%E5%88%86%E6%B2%BB%E6%B3%95/">分治法<span class="tag-count">(9)</span></a>
        </li>
        <li>
            <a href="https://www.cnblogs.com/wellcherish/tag/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">动态规划<span class="tag-count">(8)</span></a>
        </li>
        <li>
            <a href="https://www.cnblogs.com/wellcherish/tag/%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95/">贪心算法<span class="tag-count">(4)</span></a>
        </li>
        <li>
            <a href="https://www.cnblogs.com/wellcherish/tag/Java/">Java<span class="tag-count">(3)</span></a>
        </li>
        <li>
            <a href="https://www.cnblogs.com/wellcherish/tag/%E6%8E%92%E5%BA%8F/">排序<span class="tag-count">(2)</span></a>
        </li>
        <li>
            <a href="https://www.cnblogs.com/wellcherish/tag/%E6%80%BB%E8%A7%88/">总览<span class="tag-count">(2)</span></a>
        </li>
        <li>
            <a href="https://www.cnblogs.com/wellcherish/tag/Gradle/">Gradle<span class="tag-count">(2)</span></a>
        </li>
        <li>
            <a href="https://www.cnblogs.com/wellcherish/tag/OpenGL/">OpenGL<span class="tag-count">(2)</span></a>
        </li>
    <li>
        <a href="https://www.cnblogs.com/wellcherish/tag/">更多</a>
    </li>

</ul>
</div>

</div>

<!-- 积分与排名 -->


<!-- 随笔分类、随笔档案、文章分类、新闻分类、相册、链接 -->
<div id="sidebar_categories">

    <div id="sidebar_postarchive" class="catListPostArchive sidebar-block">
        <h3 class="catListTitle">
            
随笔档案



        </h3>

        <ul>

                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/wellcherish/archive/2020/10.html" rel="" target="">
    2020年10月(1)
</a>
 

                </li>                
                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/wellcherish/archive/2020/09.html" rel="" target="">
    2020年9月(1)
</a>
 

                </li>                
                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/wellcherish/archive/2020/07.html" rel="" target="">
    2020年7月(1)
</a>
 

                </li>                
                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/wellcherish/archive/2020/04.html" rel="" target="">
    2020年4月(4)
</a>
 

                </li>                
                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/wellcherish/archive/2020/03.html" rel="" target="">
    2020年3月(1)
</a>
 

                </li>                
                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/wellcherish/archive/2020/02.html" rel="" target="">
    2020年2月(3)
</a>
 

                </li>                
                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/wellcherish/archive/2020/01.html" rel="" target="">
    2020年1月(3)
</a>
 

                </li>                
                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/wellcherish/archive/2019/12.html" rel="" target="">
    2019年12月(1)
</a>
 

                </li>                
                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/wellcherish/archive/2019/06.html" rel="" target="">
    2019年6月(1)
</a>
 

                </li>                
                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/wellcherish/archive/2019/05.html" rel="" target="">
    2019年5月(20)
</a>
 

                </li>                
            
        </ul>


    </div>    
</div>

<!-- 最新评论 -->
<div id="sidebar_recentcomments" class="sidebar-block"><div class="catListComment">
<h3 class="catListTitle">最新评论</h3>

	<div class="RecentCommentBlock">
        <ul>
                    <li class="recent_comment_title"><a href="https://www.cnblogs.com/wellcherish/p/11061411.html">1. Re:贪心算法-单源最短路径</a></li>
                    <li class="recent_comment_body">Great！3Q~</li>
                    <li class="recent_comment_author">--蓝魏当道</li>
        </ul>
    </div>
</div>

</div>


<!-- 阅读排行榜 -->
<div id="sidebar_topviewedposts" class="sidebar-block"><div class="catListView">
<h3 class="catListTitle">阅读排行榜</h3>
	<div id="TopViewPostsBlock">
        <ul style="word-break:break-all">
                    <li>
                        <a href="https://www.cnblogs.com/wellcherish/p/10920472.html">
                            1. 贪心算法-活动安排问题(1677)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/wellcherish/p/11061411.html">
                            2. 贪心算法-单源最短路径(913)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/wellcherish/p/10922780.html">
                            3. 贪心算法-一般背包问题(827)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/wellcherish/p/10925228.html">
                            4. 贪心算法-哈夫曼编码(809)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/wellcherish/p/10912841.html">
                            5. 分治法-快速排序(625)
                        </a>
                    </li>
        </ul>
    </div>
</div>

</div>

<!-- 评论排行榜 -->
<div id="sidebar_topcommentedposts" class="sidebar-block"><div class="catListFeedback">
<h3 class="catListTitle">评论排行榜</h3>
	<div id="TopFeedbackPostsBlock">
        <ul style="word-break:break-all">
                    <li>
                        <a href="https://www.cnblogs.com/wellcherish/p/11061411.html">
                            1. 贪心算法-单源最短路径(1)
                        </a>
                    </li>
        </ul>
    </div>
</div>

</div>

<!-- 推荐排行榜 -->
<div id="sidebar_topdiggedposts" class="sidebar-block">
<div id="topdigg_posts_wrap">
    <div class="catListView">
        <h3 class="catListTitle">推荐排行榜</h3>
        <div id="TopDiggPostsBlock">
            <ul style="word-break: break-all">
                        <li>
                            <a href="https://www.cnblogs.com/wellcherish/p/11061411.html">
                                1. 贪心算法-单源最短路径(1)
                            </a>
                        </li>
            </ul>
        </div>
    </div>
</div></div></div>
                    <script>loadBlogSideColumn();</script>
			</div>			
		</div><!--end: sideBarMain -->
	</div><!--end: sideBar 侧边栏容器 -->
	<div class="clear"></div>
	</div><!--end: main -->
	<div class="clear"></div>
	<div id="footer">
		<!--done-->
Copyright © 2020 尛惢刕孨
<br /><span id="poweredby">Powered by .NET 5.0.1-servicing.20575.16 on Kubernetes</span>



	</div><!--end: footer -->
</div><!--end: home 自定义的最大容器 -->


    


<iframe id="google_osd_static_frame_3108226909794" name="google_osd_static_frame" style="display: none; width: 0px; height: 0px;"></iframe></body></html>