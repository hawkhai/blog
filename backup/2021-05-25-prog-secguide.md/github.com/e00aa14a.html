---
title : 自动快照存档
---

* TIME: 2021-06-20 00:20:33
* URL: <https://github.com/rxi/log.c>

-----

Skip to content

[ ](https://github.com/)

[ Sign up
](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-
name%3E%2F%3Crepo-name%3E&source=header-repo)

  * Why GitHub? 

[Features →](/features)

    * [Mobile →](/mobile)
    * [Actions →](/features/actions)
    * [Codespaces →](/features/codespaces)
    * [Packages →](/features/packages)
    * [Security →](/features/security)
    * [Code review →](/features/code-review/)
    * [Project management →](/features/project-management/)
    * [Integrations →](/features/integrations)
    * [GitHub Sponsors →](/sponsors)
    * [Customer stories→](/customer-stories)

  * [Team](/team)
  * [Enterprise](/enterprise)
  * Explore 

    * [Explore GitHub →](/explore)

#### Learn and contribute

    * [Topics →](/topics)
    * [Collections →](/collections)
    * [Trending →](/trending)
    * [Learning Lab →](https://lab.github.com/)
    * [Open source guides →](https://opensource.guide)

#### Connect with others

    * [The ReadME Project →](https://github.com/readme)
    * [Events →](https://github.com/events)
    * [Community forum →](https://github.community)
    * [GitHub Education →](https://education.github.com)
    * [GitHub Stars program →](https://stars.github.com)

  * [Marketplace](/marketplace)
  * Pricing 

[Plans →](/pricing)

    * [Compare plans →](/pricing#feature-comparison)
    * [Contact Sales →](https://enterprise.github.com/contact)
    * [Education →](https://education.github.com)

![](https://github.githubassets.com/images/search-key-slash.svg)

  * [ ![]() In this repository  All GitHub  ↵ Jump to ↵ ]()

  * No suggested jump to results

  * [ ![]() In this repository  All GitHub  ↵ Jump to ↵ ]()
  * [ ![]() In this user  All GitHub  ↵ Jump to ↵ ]()
  * [ ![]() In this repository  All GitHub  ↵ Jump to ↵ ]()

[ Sign in ](/login?return_to=%2Frxi%2Flog.c) [ Sign up
](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-
name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=rxi%2Flog.c)

{{ message }}

#  [rxi](/rxi) / **[log.c](/rxi/log.c) **

  * [ Notifications ](/login?return_to=%2Frxi%2Flog.c)
  * [ Star ](/login?return_to=%2Frxi%2Flog.c) [ 994 ](/rxi/log.c/stargazers)
  * [ Fork ](/login?return_to=%2Frxi%2Flog.c) [ 235 ](/rxi/log.c/network/members)

A simple logging library implemented in C99

[ MIT License ](/rxi/log.c/blob/master/LICENSE)

[ 994 stars ](/rxi/log.c/stargazers) [ 235 forks ](/rxi/log.c/network/members)

[ Star ](/login?return_to=%2Frxi%2Flog.c)

[ Notifications ](/login?return_to=%2Frxi%2Flog.c)

  * [ Code ](/rxi/log.c)
  * [ Issues 7 ](/rxi/log.c/issues)
  * [ Pull requests 11 ](/rxi/log.c/pulls)
  * [ Actions ](/rxi/log.c/actions)
  * [ Projects 0 ](/rxi/log.c/projects)
  * [ Wiki ](/rxi/log.c/wiki)
  * [ Security ](/rxi/log.c/security)
  * [ Insights ](/rxi/log.c/pulse)

More

  * [ Code ](/rxi/log.c)
  * [ Issues ](/rxi/log.c/issues)
  * [ Pull requests ](/rxi/log.c/pulls)
  * [ Actions ](/rxi/log.c/actions)
  * [ Projects ](/rxi/log.c/projects)
  * [ Wiki ](/rxi/log.c/wiki)
  * [ Security ](/rxi/log.c/security)
  * [ Insights ](/rxi/log.c/pulse)

master

Switch branches/tags

Branches Tags

Could not load branches

Nothing to show

[ {{ refName }} default ](https://github.com/rxi/log.c/tree/{{
urlEncodedRefName }}) [View all branches](/rxi/log.c/branches)

Could not load tags

Nothing to show

[ {{ refName }} default ](https://github.com/rxi/log.c/tree/{{
urlEncodedRefName }})

[View all tags](/rxi/log.c/tags)

[ **1** branch ](/rxi/log.c/branches) [ **0** tags ](/rxi/log.c/tags)

[ Go to file ](/rxi/log.c/find/master) Code

[ ](https://docs.github.com/articles/which-remote-url-should-i-use)

Clone

HTTPS  GitHub CLI

Use Git or checkout with SVN using the web URL.

Work fast with our official CLI. [Learn more](https://cli.github.com).

  * [ Open with GitHub Desktop ](https://desktop.github.com)
  * [ Download ZIP ](/rxi/log.c/archive/refs/heads/master.zip)

#### Launching GitHub Desktop

If nothing happens, [download GitHub Desktop](https://desktop.github.com/) and
try again.

Go back

#### Launching GitHub Desktop

If nothing happens, [download GitHub Desktop](https://desktop.github.com/) and
try again.

Go back

#### Launching Xcode

If nothing happens, [download Xcode](https://developer.apple.com/xcode/) and
try again.

Go back

#### Launching Visual Studio Code

Your codespace will open once ready.

There was a problem preparing your codespace, please try again.

## Latest commit

[ ![@rxi](https://avatars.githubusercontent.com/u/3920290?s=48&v=4) ](/rxi)

[rxi](/rxi/log.c/commits?author=rxi "View all commits by rxi") [Fixed
iteration when all callback slots are
occupied](/rxi/log.c/commit/f9ea34994bd58ed342d2245cd4110bb5c6790153 "Fixed
iteration when all callback slots are occupied")

…

[ f9ea349 ](/rxi/log.c/commit/f9ea34994bd58ed342d2245cd4110bb5c6790153) [ on
20 Jun 2020 ](/rxi/log.c/commit/f9ea34994bd58ed342d2245cd4110bb5c6790153)

[Fixed iteration when all callback slots are
occupied](/rxi/log.c/commit/f9ea34994bd58ed342d2245cd4110bb5c6790153)

`f9ea349`

## Git stats

  * [ **7** commits  ](/rxi/log.c/commits/master)

## Files

[Permalink](/rxi/log.c/tree/f9ea34994bd58ed342d2245cd4110bb5c6790153)

Failed to load latest commit information.

Type

Name

Latest commit message

Commit time

[src](/rxi/log.c/tree/master/src "src")

[Fixed iteration when all callback slots are
occupied](/rxi/log.c/commit/f9ea34994bd58ed342d2245cd4110bb5c6790153 "Fixed
iteration when all callback slots are occupied")

12 months ago

[LICENSE](/rxi/log.c/blob/master/LICENSE "LICENSE")

[Updated copyright year: 2017 =>
2020](/rxi/log.c/commit/822e6c8b1b72088029b8b22c243d6887de0f48cc "Updated
copyright year: 2017 => 2020")

12 months ago

[README.md](/rxi/log.c/blob/master/README.md "README.md")

[Updated README](/rxi/log.c/commit/9e44c2491df354d7b0c2f436f98426fdac2c4666
"Updated README")

12 months ago

View code

log.c Usage log_set_quiet(bool enable) log_set_level(int level)
log_add_fp(FILE *fp, int level) log_add_callback(log_LogFn fn, void *udata,
int level) log_set_lock(log_LockFn fn, void *udata) const char*
log_level_string(int level) LOG_USE_COLOR License

##  README.md

# log.c

A simple logging library implemented in C99

[![screenshot](https://cloud.githubusercontent.com/assets/3920290/23831970/a2415e96-0723-11e7-9886-f8f5d2de60fe.png)](https://cloud.githubusercontent.com/assets/3920290/23831970/a2415e96-0723-11e7-9886-f8f5d2de60fe.png)

## Usage

**[log.c](/rxi/log.c/blob/master/src/log.c?raw=1)** and
**[log.h](/rxi/log.c/blob/master/src/log.h?raw=1)** should be dropped into an
existing project and compiled along with it. The library provides 6 function-
like macros for logging:

    
    
    log_trace(const char *fmt, ...);
    log_debug(const char *fmt, ...);
    log_info(const char *fmt, ...);
    log_warn(const char *fmt, ...);
    log_error(const char *fmt, ...);
    log_fatal(const char *fmt, ...);

Each function takes a printf format string followed by additional arguments:

    
    
    log_trace("Hello %s", "world")

Resulting in a line with the given format printed to stderr:

    
    
    20:18:26 TRACE src/main.c:11: Hello world
    

#### log_set_quiet(bool enable)

Quiet-mode can be enabled by passing `true` to the `log_set_quiet()` function.
While this mode is enabled the library will not output anything to `stderr`,
but will continue to write to files and callbacks if any are set.

#### log_set_level(int level)

The current logging level can be set by using the `log_set_level()` function.
All logs below the given level will not be written to `stderr`. By default the
level is `LOG_TRACE`, such that nothing is ignored.

#### log_add_fp(FILE *fp, int level)

One or more file pointers where the log will be written can be provided to the
library by using the `log_add_fp()` function. The data written to the file
output is of the following format:

    
    
    2047-03-11 20:18:26 TRACE src/main.c:11: Hello world
    

Any messages below the given `level` are ignored. If the library failed to add
a file pointer a value less-than-zero is returned.

#### log_add_callback(log_LogFn fn, void *udata, int level)

One or more callback functions which are called with the log data can be
provided to the library by using the `log_add_callback()` function. A callback
function is passed a `log_Event` structure containing the `line` number,
`filename`, `fmt` string, `va` printf va_list, `level` and the given `udata`.

#### log_set_lock(log_LockFn fn, void *udata)

If the log will be written to from multiple threads a lock function can be
set. The function is passed the boolean `true` if the lock should be acquired
or `false` if the lock should be released and the given `udata` value.

#### const char* log_level_string(int level)

Returns the name of the given log level as a string.

#### LOG_USE_COLOR

If the library is compiled with `-DLOG_USE_COLOR` ANSI color escape codes will
be used when printing.

## License

This library is free software; you can redistribute it and/or modify it under
the terms of the MIT license. See [LICENSE](/rxi/log.c/blob/master/LICENSE)
for details.

## About

A simple logging library implemented in C99

### Resources

Readme

### License

[ MIT License ](/rxi/log.c/blob/master/LICENSE)

##  [ Releases ](/rxi/log.c/releases)

No releases published

##  [ Packages 0 ](/users/rxi/packages?repo_name=log.c)

No packages published  

## Languages

  * [ C 100.0% ](/rxi/log.c/search?l=c)

  * © 2021 GitHub, Inc.
  * [Terms](https://docs.github.com/en/github/site-policy/github-terms-of-service)
  * [Privacy](https://docs.github.com/en/github/site-policy/github-privacy-statement)
  * [Security](https://github.com/security)
  * [Status](https://www.githubstatus.com/)
  * [Docs](https://docs.github.com)

[ ](https://github.com "GitHub")

  * [Contact GitHub](https://support.github.com)
  * [Pricing](https://github.com/pricing)
  * [API](https://docs.github.com)
  * [Training](https://services.github.com)
  * [Blog](https://github.blog)
  * [About](https://github.com/about)

You can’t perform that action at this time.

You signed in with another tab or window. [Reload]() to refresh your session.
You signed out in another tab or window. [Reload]() to refresh your session.

