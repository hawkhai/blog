---
title : 自动快照存档
---

* TIME: 2021-03-24 17:47:58
* URL: <https://github.com/kateyy/geohazardvis/blob/master/cmake/PlatformWindowsMSVC.cmake>

-----

Skip to content

[ ](https://github.com/)

[ Sign up
](/join?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-
name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo) [ Sign up
](/join_next?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-
name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo)

  * Why GitHub? 

[Features →](/features)

    * [Mobile →](/mobile)
    * [Actions →](/features/actions)
    * [Codespaces →](/features/codespaces)
    * [Packages →](/features/packages)
    * [Security →](/features/security)
    * [Code review →](/features/code-review/)
    * [Project management →](/features/project-management/)
    * [Integrations →](/features/integrations)
    * [GitHub Sponsors →](/sponsors)
    * [Customer stories→](/customer-stories)

  * [Team](/team)
  * [Enterprise](/enterprise)
  * Explore 

    * [Explore GitHub →](/explore)

#### Learn and contribute

    * [Topics →](/topics)
    * [Collections →](/collections)
    * [Trending →](/trending)
    * [Learning Lab →](https://lab.github.com/)
    * [Open source guides →](https://opensource.guide)

#### Connect with others

    * [The ReadME Project →](https://github.com/readme)
    * [Events →](https://github.com/events)
    * [Community forum →](https://github.community)
    * [GitHub Education →](https://education.github.com)
    * [GitHub Stars program →](https://stars.github.com)

  * [Marketplace](/marketplace)
  * Pricing 

[Plans →](/pricing)

    * [Compare plans →](/pricing#feature-comparison)
    * [Contact Sales →](https://enterprise.github.com/contact)
    * [Education →](https://education.github.com)

![](https://github.githubassets.com/images/search-key-slash.svg)

  * [ ![]() In this repository  All GitHub  ↵ Jump to ↵ ]()

  * No suggested jump to results

  * [ ![]() In this repository  All GitHub  ↵ Jump to ↵ ]()
  * [ ![]() In this user  All GitHub  ↵ Jump to ↵ ]()
  * [ ![]() In this repository  All GitHub  ↵ Jump to ↵ ]()

[ Sign in
](/login?return_to=%2Fkateyy%2Fgeohazardvis%2Fblob%2Fmaster%2Fcmake%2FPlatformWindowsMSVC.cmake)
[ Sign up
](/join?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-
name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-
repo&source_repo=kateyy%2Fgeohazardvis) [ Sign up
](/join_next?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-
name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-
repo&source_repo=kateyy%2Fgeohazardvis)

{{ message }}

#  [kateyy](/kateyy) / **[geohazardvis](/kateyy/geohazardvis) **

  * [ Notifications ](/login?return_to=%2Fkateyy%2Fgeohazardvis)
  * [ Star ](/login?return_to=%2Fkateyy%2Fgeohazardvis) [ 2 ](/kateyy/geohazardvis/stargazers)
  * [ Fork ](/login?return_to=%2Fkateyy%2Fgeohazardvis) [ 0 ](/kateyy/geohazardvis/network/members)

  * [ Code ](/kateyy/geohazardvis)
  * [ Issues 0 ](/kateyy/geohazardvis/issues)
  * [ Pull requests 0 ](/kateyy/geohazardvis/pulls)
  * [ Actions ](/kateyy/geohazardvis/actions)
  * [ Projects 0 ](/kateyy/geohazardvis/projects)
  * [ Wiki ](/kateyy/geohazardvis/wiki)
  * [ Security ](/kateyy/geohazardvis/security)
  * [ Insights ](/kateyy/geohazardvis/pulse)

More

  * [ Code ](/kateyy/geohazardvis)
  * [ Issues ](/kateyy/geohazardvis/issues)
  * [ Pull requests ](/kateyy/geohazardvis/pulls)
  * [ Actions ](/kateyy/geohazardvis/actions)
  * [ Projects ](/kateyy/geohazardvis/projects)
  * [ Wiki ](/kateyy/geohazardvis/wiki)
  * [ Security ](/kateyy/geohazardvis/security)
  * [ Insights ](/kateyy/geohazardvis/pulse)

[Permalink](/kateyy/geohazardvis/blob/2f48d597821e1f278fb7f27c5c0ed97a8613400b/cmake/PlatformWindowsMSVC.cmake)

master

Switch branches/tags

Branches Tags

Nothing to show

[ {{ refName }} default ](https://github.com/kateyy/geohazardvis/blob/{{
urlEncodedRefName }}/cmake/PlatformWindowsMSVC.cmake) [View all
branches](/kateyy/geohazardvis/branches)

Nothing to show

[ {{ refName }} default ](https://github.com/kateyy/geohazardvis/blob/{{
urlEncodedRefName }}/cmake/PlatformWindowsMSVC.cmake)

[View all tags](/kateyy/geohazardvis/tags)

##
[geohazardvis](/kateyy/geohazardvis)/[cmake](/kateyy/geohazardvis/tree/master/cmake)/
**PlatformWindowsMSVC.cmake**

[ Go to file ](/kateyy/geohazardvis/find/master)

  * [ Go to file T ](/kateyy/geohazardvis/find/master)
  * Go to line L
  *   * Copy path 
  * Copy permalink

[![@kateyy](https://avatars.githubusercontent.com/u/3923079?s=48&v=4)](/kateyy)

[kateyy](/kateyy) [Disable -d2SSAOptimizer- workaround as relevant issues seem
to be
fix…](/kateyy/geohazardvis/commit/e5760e8b45f5bfcd0aa6a27ec0d543d239b6a984
"Disable -d2SSAOptimizer- workaround as relevant issues seem to be fixed now")

…

Latest commit
[e5760e8](/kateyy/geohazardvis/commit/e5760e8b45f5bfcd0aa6a27ec0d543d239b6a984)
on 9 Jun 2017 [ **History**
](/kateyy/geohazardvis/commits/master/cmake/PlatformWindowsMSVC.cmake)

    
    
    …ed now

**1** contributor

###  Users who have contributed to this file

222 lines (184 sloc)  11.2 KB

[Raw](/kateyy/geohazardvis/raw/master/cmake/PlatformWindowsMSVC.cmake)
[Blame](https://github.com/kateyy/geohazardvis/blame/master/cmake/PlatformWindowsMSVC.cmake)

[ ](https://desktop.github.com) [
](/login?return_to=%2Fkateyy%2Fgeohazardvis%2Fblob%2Fmaster%2Fcmake%2FPlatformWindowsMSVC.cmake)
[
](/login?return_to=%2Fkateyy%2Fgeohazardvis%2Fblob%2Fmaster%2Fcmake%2FPlatformWindowsMSVC.cmake)

| message(STATUS "Configuring for platform Windows/MSVC.")  
---|---  
|  
| list(APPEND DEFAULT_COMPILE_DEFS  
|  WIN32 # Windows system  
|  UNICODE # Use unicode  
|  _UNICODE # Use unicode  
|  _SCL_SECURE_NO_WARNINGS # Calling any one of the potentially unsafe methods
in the Standard C++ Library  
|  # Required for vtkDataArrayAccessor and vtkAOSDataArrayTemplate related
classes  
| # _CRT_SECURE_NO_DEPRECATE # Disable CRT deprecation warnings  
| )  
|  
| option(OPTION_RELEASE_LTCG "Enable whole program optimization / link time
code generation in Release builds" OFF)  
| option(OPTION_RELWITHDEBINFO_LTCG "Enable whole program optimization / link
time code generation in RelWithDebInfo builds" OFF)  
| option(OPTION_DEBUG_ADDITIONAL_RUNTME_CHECKS "Include all available runtime
checks in debug builds." OFF)  
|  
| option(OPTION_WIN32_GUI_APP "Build an executable with a WinMain entry point
on windows. This disables the console window" ON)  
| if(OPTION_WIN32_GUI_APP)  
|  set(WIN32_EXE_FLAG WIN32)  
| else()  
|  set (WIN32_EXE_FLAG "")  
| endif()  
|  
|  
| set(DEFAULT_COMPILE_FLAGS  
|  /nologo  
|  /Zc:forScope /Zc:inline /Zc:rvalueCast /Zc:wchar_t  
|  /GR /fp:precise /MP /W4  
|  /we4150 /we4172 /we4239 /we4390 /we4456 /we4457 /we4458 /we4700 /we4701
/we4703 /we4715 /we4717  
|  /wd4127 /wd4251 /wd4351 /wd4505 /wd4661 /wd4714 /wd4718  
|  
|  $<$<CONFIG:Debug>: /MDd /Od /RTC1> # /Z* flag: see version specific flags  
|  $<$<CONFIG:Release>: /MD /O2 >  
|  $<$<CONFIG:RelWithDebInfo>: /MD /O2 /Zo /Zi>  
|  $<$<CONFIG:RelNoOptimization>: /MD /Od /RTC1>  
|  
|  # nologo -> Suppresses the display of the copyright banner when the
compiler starts up and display of informational messages during compiling.  
|  
|  # MD -> runtime library: multithreaded dll  
|  # MDd -> Runtime Library: Multithreaded Debug DLL  
|  
|  # Od -> Optimization: none  
|  # O1 -> Minimize Size, equivalent to /Og /Os /Oy /Ob2 /Gs /GF /Gy  
|  # O2 -> Maximize Speed, equivalent to /Og /Oi /Ot /Oy /Ob2 /Gs /GF /Gy  
|  # Ob2 -> inline function expansion: any suitable  
|  # Ox -> optimization: full optimization, equivalent to /Ob2 /Og /Ot /Oy  
|  # Oi -> enable intrinsic functions: yes  
|  # Oy -> omit frame pointers: yes  
|  # Ot -> favor fast code  
|  
|  # RTC1 -> Runtime error checks  
|  # guard:cf -> Enable compiler generation of Control Flow Guard security
checks (Visual Studio 2015, incompatible with /ZI)  
|  
|  # MP -> build with multiple processes  
|  
|  # GF -> string pooling (set by /O1, /O2 and /ZI)  
|  # GL -> whole program optimization: enable link-time code generation  
|  # GR -> runtime type information  
|  # GS -> buffer security check  
|  # Gm -> enable minimal rebuild  
|  
|  # arch:SSE2 -> enable enhanced instruction set: streaming simd extensions 2  
|  # fp:precise -> floating point model: precise  
|  # fp:fast -> floating point model: fast  
|  # bigobj -> Increase Number of Sections in .Obj file  
|  
|  # Zc:wchar_t -> treat wchar_t as built-in type: yes  
|  # Zc:forScope -> force conformance in for loop scope: Yes  
|  # Zc:rvalueCast -> treat rvalue references according to section 5.4 of the
C++11 standard  
|  # Zc:inline -> enforce section 3.2 and section 7.1.2. of the C++11
standard: definitions of called inline functions must be visible  
|  # Zc:throwingNew -> assume operator new throws on failure (Visual Studio
2015)  
|  # Zc:strictStrings -> strict const-qualification conformance for pointer
initlized by using string literals (Visual Studio 2015)  
|  # Zc:referenceBinding -> a temporary will not bind to an non-const lvalue
reference (Visual Studio 2015)  
|  
|  # Zi -> debug information format: program database  
|  # ZI -> debug information format: program database supporting edit and
continue (Visual Studio 2015)  
|  # Zo -> generates richer debugging information for optimized code (non- /Od
builds) (VS2013 Update 3, default in VS2015 when /Zi is specified)  
|  
|  # wd -> disable warning  
|  # we -> treat warning as error  
|  # 4100 -> 'identifier' : unreferenced formal parameter  
|  # 4127 -> conditional expression is constant (caused by Qt)  
|  # 4172 -> returning address of local variable or temporary  
|  # 4189 -> 'identifier' : local variable is initialized but not referenced  
|  # 4239 -> nonstandard extension used : 'token' : conversion from 'type' to
'type'  
|  # 4250 -> 'class1' : inherits 'class2::member' via dominance  
|  # 4251 -> 'identifier' : class 'type' needs to have dll-interface to be
used by clients of class 'type2'  
|  # 4267 -> 'var' : conversion from 'size_t' to 'type', possible loss of data  
|  # 4351 -> new behavior: elements of array '...' will be default initialized  
|  # 4390 -> ';' : empty controlled statement found; is this the intent?  
|  # 4456 -> declaration of 'x' hides previous local declaration  
|  # 4457 -> declaration of 'x' hides function parameter  
|  # 4458 -> declaration of 'x' hides class member  
|  # 4505 -> 'function' : unreferenced local function has been removed (caused
by libzeug)  
|  # 4512 -> 'class' : assignment operator could not be generated  
|  # 4661 -> 'identifier' : no suitable definition provided for explicit
template instantiation request (AbstractSimpleGeoCoordinateTransformFilter.h)  
|  # 4700 -> uninitialized local variable 'name' used  
|  # 4701 -> Potentially uninitialized local variable 'name' used  
|  # 4703 -> Potentially uninitialized local pointer variable 'name' used  
|  # 4714 -> function 'function' marked as __forceinline not inlined (Qt5,
Version 5.8?)  
|  # 4715 -> 'function' : not all control paths return a value  
|  # 4717 -> 'function' : recursive on all control paths, function will cause
runtime stack overflow  
|  # 4718 -> 'function call' : recursive call has no side effects, deleting
(QMapNode/qmap.h)  
|  # W4 -> warning level 4  
|  # WX -> treat warnings as errors  
| )  
|  
| if(OPTION_DEBUG_ADDITIONAL_RUNTME_CHECKS)  
|  list(APPEND DEFAULT_COMPILE_FLAGS  
|  $<$<CONFIG:Debug>: /RTCc /GS /sdl >  
|  $<$<CONFIG:RelNoOptimization>: /RTCc /GS /sdl >  
|  )  
|  if (NOT MSVC_VERSION VERSION_LESS 1900)  
|  list(APPEND DEFAULT_COMPILE_DEFS  
|  $<$<CONFIG:Debug>: _ALLOW_RTCc_IN_STL >  
|  $<$<CONFIG:RelWithDebInfo>: _ALLOW_RTCc_IN_STL >  
|  )  
|  endif()  
| endif()  
|  
|  
| if (OPTION_RELEASE_LTCG)  
|  list(APPEND DEFAULT_COMPILE_FLAGS $<$<CONFIG:Release>: /GL > )  
| endif()  
|  
| if (OPTION_RELWITHDEBINFO_LTCG)  
|  list(APPEND DEFAULT_COMPILE_FLAGS $<$<CONFIG:RelWithDebInfo>: /GL > )  
| endif()  
|  
| # version specific compile flags  
| # 1800: Visual Studio 12 2013  
| # 1900: Visual Studio 14 2015  
|  
| if(MSVC_VERSION VERSION_LESS 1900)  
|  
|  list(APPEND DEFAULT_COMPILE_FLAGS  
|  $<$<CONFIG:Debug>: /Zi> # this is set in RelWithDebInfo builds for all MSVC
versions  
|  $<$<CONFIG:RelNoOptimization>: /Zi>  
|  )  
|  
| else() # Visual Studio 14 2015 as minimum  
|  
|  list(APPEND DEFAULT_COMPILE_FLAGS  
|  /Zc:referenceBinding /Zc:strictStrings /Zc:throwingNew  
|  # allow native edit and continue:
http://blogs.msdn.com/b/vcblog/archive/2015/07/22/c-edit-and-continue-in-
visual-studio-2015.aspx  
|  $<$<CONFIG:Debug>: /ZI>  
|  $<$<CONFIG:RelNoOptimization>: /ZI>  
|  # Enable compiler generation of Control Flow Guard security checks.
(incompatible with /ZI)  
|  $<$<CONFIG:Release>: /guard:cf>  
|  $<$<CONFIG:RelWithDebInfo>: /guard:cf>  
|  )  
|  
|  # Visual Studio 2015 Update 3 introduced a new optimizer  
|  # https://blogs.msdn.microsoft.com/vcblog/2016/05/04/new-code-optimizer/  
|  # with a few bugs, see:  
|  # https://bugreports.qt.io/browse/QTBUG-54443  
|  # https://connect.microsoft.com/VisualStudio/feedback/details/2992985  
|  # https://connect.microsoft.com/VisualStudio/feedback/details/2988420  
|  # https://connect.microsoft.com/VisualStudio/Feedback/Details/2984689  
|  # These bugs are fixed in current micro updates in Update 3, but apparently
it's not that easy  
|  # to check for the MSVC/optimizer version here. So just hope the updates
are present.  
|  option(OPTION_MSVC_DISABLE_D2SSAOPTIMIZER  
| "Enable this option of your version of Visual Studio (not the compiler!) is
older than 14.0.25431.01.  
| This disables the new optimizer introduced in Visual Studio 2015 Update 3
(flag -d2SSAOptimizer-)  
| which initially contained a lot of bugs." OFF)  
|  mark_as_advanced(OPTION_MSVC_DISABLE_D2SSAOPTIMIZER)  
|  if (OPTION_MSVC_DISABLE_D2SSAOPTIMIZER)  
|  message("Disabling new MSVC optimizer to workaround some bugs
(-d2SSAOptimizer-).")  
|  list(APPEND DEFAULT_COMPILE_FLAGS -d2SSAOptimizer-)  
|  endif()  
| endif()  
|  
|  
| set(DEFAULT_LINKER_FLAGS  
|  "/NOLOGO /NXCOMPAT"  
|  # NOLOGO -> suppress logo  
|  # INCREMENTAL:NO -> enable incremental linking: no  
|  # MANIFEST -> generate manifest: yes  
|  # MANIFESTUAC:"level='asInvoker' uiAccess='false'" -> uac execution level:
asinvoker, uac bypass ui protection: false  
|  # NXCOMPAT -> data execution prevention (dep): image is compatible with dep  
|  # DYNAMICBASE:NO -> randomized base address: disable image randomization  
| )  
|  
| set(DEFAULT_LINKER_FLAGS_DEBUG  
|  "${DEFAULT_LINKER_FLAGS} /DEBUG"  
|  # DEBUG -> create debug info, implies /INCREMENTAL  
| )  
|  
| set(DEFAULT_LINKER_FLAGS_RELNOOPTIMIZATION ${DEFAULT_LINKER_FLAGS_DEBUG})  
|  
| set(DEFAULT_LINKER_FLAGS_RELEASE  
|  "${DEFAULT_LINKER_FLAGS} /OPT:REF /OPT:ICF /INCREMENTAL:NO"  
|  # OPT:REF -> references: eliminate unreferenced data  
|  # OPT:ICF -> enable comdat folding: remove redundant comdats  
|  # LTCG -> link time code generation: use link time code generation  
|  # DELAY:UNLOAD -> delay loaded dll: support unload  
| )  
|  
| set(DEFAULT_LINKER_FLAGS_RELWITHDEBINFO "${DEFAULT_LINKER_FLAGS_RELEASE}
/DEBUG")  
|  
|  
| set(DEFAULT_STATIC_LIBRARY_FLAGS "/NOLOGO")  
| set(DEFAULT_STATIC_LIBRARY_FLAGS_DEBUG ${DEFAULT_STATIC_LIBRARY_FLAGS})  
| set(DEFAULT_STATIC_LIBRARY_FLAGS_RELNOOPTIMIZATION
${DEFAULT_STATIC_LIBRARY_FLAGS})  
| set(DEFAULT_STATIC_LIBRARY_FLAGS_RELEASE ${DEFAULT_STATIC_LIBRARY_FLAGS})  
| set(DEFAULT_STATIC_LIBRARY_FLAGS_RELWITHDEBINFO
${DEFAULT_STATIC_LIBRARY_FLAGS})  
|  
|  
| if(OPTION_RELEASE_LTCG)  
|  set(DEFAULT_LINKER_FLAGS_RELEASE "${DEFAULT_LINKER_FLAGS_RELEASE} /LTCG")  
|  set(DEFAULT_STATIC_LIBRARY_FLAGS_RELEASE
"${DEFAULT_STATIC_LIBRARY_FLAGS_RELEASE} /LTCG")  
| endif()  
|  
| if(OPTION_RELWITHDEBINFO_LTCG)  
|  set(DEFAULT_LINKER_FLAGS_RELWITHDEBINFO
"${DEFAULT_LINKER_FLAGS_RELWITHDEBINFO} /LTCG")  
|  set(DEFAULT_STATIC_LIBRARY_FLAGS_RELWITHDEBINFO
"${DEFAULT_STATIC_LIBRARY_FLAGS_RELWITHDEBINFO} /LTCG")  
| endif()  
|  
| # version specific linker flags  
| if(MSVC_VERSION VERSION_GREATER 1800)  
|  set(DEFAULT_LINKER_FLAGS_RELEASE "${DEFAULT_LINKER_FLAGS_RELEASE}
/GUARD:CF")  
|  set(DEFAULT_LINKER_FLAGS_RELWITHDEBINFO
"${DEFAULT_LINKER_FLAGS_RELWITHDEBINFO} /GUARD:CF")  
| endif()  
  
  * Copy lines 
  * Copy permalink 
  * [View git blame](https://github.com/kateyy/geohazardvis/blame/2f48d597821e1f278fb7f27c5c0ed97a8613400b/cmake/PlatformWindowsMSVC.cmake)
  * [Reference in new issue](/kateyy/geohazardvis/issues/new)

Go

  * © 2021 GitHub, Inc.
  * [Terms](https://docs.github.com/en/github/site-policy/github-terms-of-service)
  * [Privacy](https://docs.github.com/en/github/site-policy/github-privacy-statement)
  * [Security](https://github.com/security)
  * [Status](https://www.githubstatus.com/)
  * [Docs](https://docs.github.com)

[ ](https://github.com "GitHub")

  * [Contact GitHub](https://support.github.com)
  * [Pricing](https://github.com/pricing)
  * [API](https://docs.github.com)
  * [Training](https://services.github.com)
  * [Blog](https://github.blog)
  * [About](https://github.com/about)

You can’t perform that action at this time.

You signed in with another tab or window. [Reload]() to refresh your session.
You signed out in another tab or window. [Reload]() to refresh your session.

